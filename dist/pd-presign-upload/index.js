var Xle=Object.create;var EE=Object.defineProperty;var Yle=Object.getOwnPropertyDescriptor;var Qle=Object.getOwnPropertyNames;var Zle=Object.getPrototypeOf,eue=Object.prototype.hasOwnProperty;var V=(e,t)=>()=>(e&&(t=e(e=0)),t);var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wi=(e,t)=>{for(var r in t)EE(e,r,{get:t[r],enumerable:!0})},oq=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Qle(t))!eue.call(e,s)&&s!==r&&EE(e,s,{get:()=>t[s],enumerable:!(n=Yle(t,s))||n.enumerable});return e};var $=(e,t,r)=>(r=e!=null?Xle(Zle(e)):{},oq(t||!e||!e.__esModule?EE(r,"default",{value:e,enumerable:!0}):r,e)),St=e=>oq(EE({},"__esModule",{value:!0}),e);var dc=S(yr=>{"use strict";yr.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(yr.HttpAuthLocation||(yr.HttpAuthLocation={}));yr.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(yr.HttpApiKeyAuthLocation||(yr.HttpApiKeyAuthLocation={}));yr.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(yr.EndpointURLScheme||(yr.EndpointURLScheme={}));yr.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(yr.AlgorithmId||(yr.AlgorithmId={}));var tue=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>yr.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>yr.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},rue=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},nue=e=>tue(e),sue=e=>rue(e);yr.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(yr.FieldPosition||(yr.FieldPosition={}));var iue="__smithy_context";yr.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(yr.IniSectionType||(yr.IniSectionType={}));yr.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(yr.RequestHandlerProtocol||(yr.RequestHandlerProtocol={}));yr.SMITHY_CONTEXT_KEY=iue;yr.getDefaultClientConfiguration=nue;yr.resolveDefaultRuntimeConfig=sue});var Xt=S(el=>{"use strict";var oue=dc(),aue=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),cue=e=>({httpHandler:e.httpHandler()}),zT=class{name;kind;values;constructor({name:t,kind:r=oue.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},$T=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},GT=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=lue(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function lue(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var WT=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function uue(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}el.Field=zT;el.Fields=$T;el.HttpRequest=GT;el.HttpResponse=WT;el.getHttpHandlerExtensionConfiguration=aue;el.isValidHostname=uue;el.resolveHttpHandlerRuntimeConfig=cue});var lq=S(SE=>{"use strict";var due=Xt();function aq(e){return t=>async r=>{let{request:n}=r;if(e.expectContinueHeader!==!1&&due.HttpRequest.isInstance(n)&&n.body&&e.runtime==="node"&&e.requestHandler?.constructor?.name!=="FetchHttpHandler"){let s=!0;if(typeof e.expectContinueHeader=="number")try{s=(Number(n.headers?.["content-length"])??e.bodyLengthChecker?.(n.body)??1/0)>=e.expectContinueHeader}catch{}else s=!!e.expectContinueHeader;s&&(n.headers.Expect="100-continue")}return t({...r,request:n})}}var cq={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},fue=e=>({applyToStack:t=>{t.add(aq(e),cq)}});SE.addExpectContinueMiddleware=aq;SE.addExpectContinueMiddlewareOptions=cq;SE.getAddExpectContinuePlugin=fue});var CE,wf,uq=V(()=>{CE={warningEmitted:!1},wf=e=>{e&&!CE.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(CE.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function tl(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var dq=V(()=>{});function fq(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var hq=V(()=>{});function pq(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var mq=V(()=>{});var rl={};Wi(rl,{emitWarningIfUnsupportedVersion:()=>wf,setCredentialFeature:()=>tl,setFeature:()=>fq,setTokenFeature:()=>pq,state:()=>CE});var Mo=V(()=>{uq();dq();hq();mq()});var gq,JT,yq=V(()=>{gq=$(Xt()),JT=e=>gq.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Tf,XT=V(()=>{Tf=e=>new Date(Date.now()+e)});var Eq,Sq=V(()=>{XT();Eq=(e,t)=>Math.abs(Tf(t).getTime()-e)>=3e5});var YT,Cq=V(()=>{Sq();YT=(e,t)=>{let r=Date.parse(e);return Eq(r,t)?r-Date.now():t}});var QT=V(()=>{yq();XT();Cq()});var _q,Xm,Rf,pi,ZT,eR=V(()=>{_q=$(Xt());QT();Xm=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Rf=async e=>{let t=Xm("context",e.context),r=Xm("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],i=await Xm("signer",r.signer)(n),o=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}},pi=class{async sign(t,r,n){if(!_q.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await Rf(n),{config:i,signer:o}=s,{signingRegion:a,signingName:c}=s,l=n.context;if(l?.authSchemes?.length??!1){let[f,h]=l.authSchemes;f?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await o.sign(t,{signingDate:Tf(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let n=r.ServerTime??JT(r.$response);if(n){let s=Xm("config",t.config),i=s.systemClockOffset;s.systemClockOffset=YT(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=JT(t);if(n){let s=Xm("config",r.config);s.systemClockOffset=YT(n,s.systemClockOffset)}}},ZT=pi});var bq,Ym,vq=V(()=>{bq=$(Xt());QT();eR();Ym=class extends pi{async sign(t,r,n){if(!bq.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=await Rf(n),d=(await s.sigv4aSigningRegionSet?.()??a??[o]).join(",");return await i.sign(t,{signingDate:Tf(s.systemClockOffset),signingRegion:d,signingService:c})}}});var tR,Aq=V(()=>{tR=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var _E,rR=V(()=>{_E=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var xq,Iq,Nf,wq=V(()=>{Aq();rR();xq="AWS_AUTH_SCHEME_PREFERENCE",Iq="auth_scheme_preference",Nf={environmentVariableSelector:(e,t)=>{if(t?.signingName&&_E(t.signingName)in e)return["httpBearerAuth"];if(xq in e)return tR(e[xq])},configFileSelector:e=>{if(Iq in e)return tR(e[Iq])},default:[]}});var nR,hue,Tq=V(()=>{nR=$(dc()),hue=e=>e[nR.SMITHY_CONTEXT_KEY]||(e[nR.SMITHY_CONTEXT_KEY]={})});var Ns=S(sR=>{"use strict";var Rq=dc(),pue=e=>e[Rq.SMITHY_CONTEXT_KEY]||(e[Rq.SMITHY_CONTEXT_KEY]={}),mue=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};sR.getSmithyContext=pue;sR.normalizeProvider=mue});var Nq,Pq=V(()=>{Nq=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let s of e)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of e)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function gue(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Oq,Qm,bE=V(()=>{Oq=$(Ns());Pq();Qm=(e,t)=>(r,n)=>async s=>{let i=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,s.input)),o=e.authSchemePreference?await e.authSchemePreference():[],a=Nq(i,o),c=gue(e.httpAuthSchemes),l=(0,Oq.getSmithyContext)(n),d=[];for(let f of a){let h=c.get(f.schemeId);if(!h){d.push(`HttpAuthScheme \`${f.schemeId}\` was not enabled for this service.`);continue}let p=h.identityProvider(await t.identityProviderConfigProvider(e));if(!p){d.push(`HttpAuthScheme \`${f.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:m={},signingProperties:E={}}=f.propertiesExtractor?.(e,n)||{};f.identityProperties=Object.assign(f.identityProperties||{},m),f.signingProperties=Object.assign(f.signingProperties||{},E),l.selectedHttpAuthScheme={httpAuthOption:f,identity:await p(f.identityProperties),signer:h.signer};break}if(!l.selectedHttpAuthScheme)throw new Error(d.join(`
`));return r(s)}});var Dq,Zm,kq=V(()=>{bE();Dq={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Zm=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Qm(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Dq)}})});var nl=S(Pf=>{"use strict";var yue=Xt(),Bq=(e,t)=>(r,n)=>async s=>{let{response:i}=await r(s);try{let o=await t(i,e);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText);try{if(yue.HttpResponse.isInstance(i)){let{headers:c={}}=i,l=Object.entries(c);o.$metadata={httpStatusCode:i.statusCode,requestId:iR(/^x-[\w-]+-request-?id$/,l),extendedRequestId:iR(/^x-[\w-]+-id-2$/,l),cfId:iR(/^x-[\w-]+-cf-id$/,l)}}}catch{}}throw o}},iR=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],Lq=(e,t)=>(r,n)=>async s=>{let i=e,o=n.endpointV2?.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await t(s.input,{...e,endpoint:o});return r({...s,request:a})},Fq={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Mq={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Eue(e,t,r){return{applyToStack:n=>{n.add(Bq(e,r),Fq),n.add(Lq(e,t),Mq)}}}Pf.deserializerMiddleware=Bq;Pf.deserializerMiddlewareOption=Fq;Pf.getSerdePlugin=Eue;Pf.serializerMiddleware=Lq;Pf.serializerMiddlewareOption=Mq});var Uq,qq,Sue,Vq=V(()=>{Uq=$(nl());bE();qq={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Uq.serializerMiddlewareOption.name},Sue=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Qm(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),qq)}})});var Hq=V(()=>{bE();kq();Vq()});var jq,Kq,Cue,_ue,oR,aR=V(()=>{jq=$(Xt()),Kq=$(Ns()),Cue=e=>t=>{throw t},_ue=(e,t)=>{},oR=e=>(t,r)=>async n=>{if(!jq.HttpRequest.isInstance(n.request))return t(n);let i=(0,Kq.getSmithyContext)(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,l=await t({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||Cue)(o));return(c.successHandler||_ue)(l.response,o),l}});var zq,eg,$q=V(()=>{aR();zq={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},eg=e=>({applyToStack:t=>{t.addRelativeTo(oR(e),zq)}})});var Gq=V(()=>{aR();$q()});var sl,Wq=V(()=>{sl=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function Jq(e,t,r,n,s){return async function*(o,a,...c){let l=a,d=o.startingToken??l[r],f=!0,h;for(;f;){if(l[r]=d,s&&(l[s]=l[s]??o.pageSize),o.client instanceof e)h=await bue(t,o.client,a,o.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield h;let p=d;d=vue(h,n),f=!!(d&&(!o.stopOnSameToken||d!==p))}return void 0}}var bue,vue,Xq=V(()=>{bue=async(e,t,r,n=i=>i,...s)=>{let i=new e(r);return i=n(i)??i,await t.send(i,...s)};vue=(e,t)=>{let r=e,n=t.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var vE=S(Yq=>{"use strict";var Aue=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";Yq.isArrayBuffer=Aue});var Of=S(lR=>{"use strict";var xue=vE(),cR=require("buffer"),Iue=(e,t=0,r=e.byteLength-t)=>{if(!xue.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return cR.Buffer.from(e,t,r)},wue=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?cR.Buffer.from(e,t):cR.Buffer.from(e)};lR.fromArrayBuffer=Iue;lR.fromString=wue});var Qq=S(AE=>{"use strict";Object.defineProperty(AE,"__esModule",{value:!0});AE.fromBase64=void 0;var Tue=Of(),Rue=/^[A-Za-z0-9+/]*={0,2}$/,Nue=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Rue.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,Tue.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};AE.fromBase64=Nue});var Dn=S(xE=>{"use strict";var Zq=Of(),e4=e=>{let t=Zq.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Pue=e=>typeof e=="string"?e4(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Oue=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return Zq.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};xE.fromUtf8=e4;xE.toUint8Array=Pue;xE.toUtf8=Oue});var t4=S(IE=>{"use strict";Object.defineProperty(IE,"__esModule",{value:!0});IE.toBase64=void 0;var Due=Of(),kue=Dn(),Bue=e=>{let t;if(typeof e=="string"?t=(0,kue.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Due.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};IE.toBase64=Bue});var ys=S(tg=>{"use strict";var r4=Qq(),n4=t4();Object.keys(r4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(tg,e)&&Object.defineProperty(tg,e,{enumerable:!0,get:function(){return r4[e]}})});Object.keys(n4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(tg,e)&&Object.defineProperty(tg,e,{enumerable:!0,get:function(){return n4[e]}})})});var dR=S(wE=>{"use strict";Object.defineProperty(wE,"__esModule",{value:!0});wE.ChecksumStream=void 0;var Lue=ys(),Fue=require("stream"),uR=class extends Fue.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:s,base64Encoder:i}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=i??Lue.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=s,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(s){return n(s)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};wE.ChecksumStream=uR});var il=S(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.isBlob=Df.isReadableStream=void 0;var Mue=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);Df.isReadableStream=Mue;var Uue=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);Df.isBlob=Uue});var s4=S(TE=>{"use strict";Object.defineProperty(TE,"__esModule",{value:!0});TE.ChecksumStream=void 0;var que=typeof ReadableStream=="function"?ReadableStream:function(){},fR=class extends que{};TE.ChecksumStream=fR});var i4=S(RE=>{"use strict";Object.defineProperty(RE,"__esModule",{value:!0});RE.createChecksumStream=void 0;var Vue=ys(),Hue=il(),jue=s4(),Kue=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,Hue.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=s??Vue.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let o=new TransformStream({start(){},async transform(c,l){t.update(c),l.enqueue(c)},async flush(c){let l=await t.digest(),d=i(l);if(e!==d){let f=new Error(`Checksum mismatch: expected "${e}" but received "${d}" in response header "${n}".`);c.error(f)}else c.terminate()}});r.pipeThrough(o);let a=o.readable;return Object.setPrototypeOf(a,jue.ChecksumStream.prototype),a};RE.createChecksumStream=Kue});var o4=S(hR=>{"use strict";Object.defineProperty(hR,"__esModule",{value:!0});hR.createChecksumStream=Wue;var zue=il(),$ue=dR(),Gue=i4();function Wue(e){return typeof ReadableStream=="function"&&(0,zue.isReadableStream)(e.source)?(0,Gue.createChecksumStream)(e):new $ue.ChecksumStream(e)}});var mR=S(NE=>{"use strict";Object.defineProperty(NE,"__esModule",{value:!0});NE.ByteArrayCollector=void 0;var pR=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];t.set(s,r),r+=s.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};NE.ByteArrayCollector=pR});var u4=S(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.createBufferedReadable=void 0;fc.createBufferedReadableStream=a4;fc.merge=c4;fc.flush=PE;fc.sizeOf=kf;fc.modeOf=l4;var Jue=mR();function a4(e,t,r){let n=e.getReader(),s=!1,i=0,o=["",new Jue.ByteArrayCollector(l=>new Uint8Array(l))],a=-1,c=async l=>{let{value:d,done:f}=await n.read(),h=d;if(f){if(a!==-1){let p=PE(o,a);kf(p)>0&&l.enqueue(p)}l.close()}else{let p=l4(h,!1);if(a!==p&&(a>=0&&l.enqueue(PE(o,a)),a=p),a===-1){l.enqueue(h);return}let m=kf(h);i+=m;let E=kf(o[a]);if(m>=t&&E===0)l.enqueue(h);else{let b=c4(o,a,h);!s&&i>t*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${m} is below threshold of ${t}, automatically buffering.`)),b>=t?l.enqueue(PE(o,a)):await c(l)}}};return new ReadableStream({pull:c})}fc.createBufferedReadable=a4;function c4(e,t,r){switch(t){case 0:return e[0]+=r,kf(e[0]);case 1:case 2:return e[t].push(r),kf(e[t])}}function PE(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function kf(e){return e?.byteLength??e?.length??0}function l4(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var f4=S(gR=>{"use strict";Object.defineProperty(gR,"__esModule",{value:!0});gR.createBufferedReadable=Que;var Xue=require("node:stream"),d4=mR(),hc=u4(),Yue=il();function Que(e,t,r){if((0,Yue.isReadableStream)(e))return(0,hc.createBufferedReadableStream)(e,t,r);let n=new Xue.Readable({read(){}}),s=!1,i=0,o=["",new d4.ByteArrayCollector(c=>new Uint8Array(c)),new d4.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return e.on("data",c=>{let l=(0,hc.modeOf)(c,!0);if(a!==l&&(a>=0&&n.push((0,hc.flush)(o,a)),a=l),a===-1){n.push(c);return}let d=(0,hc.sizeOf)(c);i+=d;let f=(0,hc.sizeOf)(o[a]);if(d>=t&&f===0)n.push(c);else{let h=(0,hc.merge)(o,a,c);!s&&i>t*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${d} is below threshold of ${t}, automatically buffering.`)),h>=t&&n.push((0,hc.flush)(o,a))}}),e.on("end",()=>{if(a!==-1){let c=(0,hc.flush)(o,a);(0,hc.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var h4=S(OE=>{"use strict";Object.defineProperty(OE,"__esModule",{value:!0});OE.getAwsChunkedEncodingStream=void 0;var Zue=require("stream"),ede=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=t,a=r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,e):void 0,l=new Zue.Readable({read:()=>{}});return e.on("data",d=>{let f=n(d)||0;l.push(`${f.toString(16)}\r
`),l.push(d),l.push(`\r
`)}),e.on("end",async()=>{if(l.push(`0\r
`),a){let d=r(await c);l.push(`${i}:${d}\r
`),l.push(`\r
`)}l.push(null)}),l};OE.getAwsChunkedEncodingStream=ede});var p4=S(yR=>{"use strict";Object.defineProperty(yR,"__esModule",{value:!0});yR.headStream=tde;async function tde(e,t){let r=0,n=[],s=e.getReader(),i=!1;for(;!i;){let{done:c,value:l}=await s.read();if(l&&(n.push(l),r+=l?.byteLength??0),r>=t)break;i=c}s.releaseLock();let o=new Uint8Array(Math.min(t,r)),a=0;for(let c of n){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o}});var m4=S(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0});DE.headStream=void 0;var rde=require("stream"),nde=p4(),sde=il(),ide=(e,t)=>(0,sde.isReadableStream)(e)?(0,nde.headStream)(e,t):new Promise((r,n)=>{let s=new ER;s.limit=t,e.pipe(s),e.on("error",i=>{s.end(),n(i)}),s.on("error",n),s.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.buffers));r(i)})});DE.headStream=ide;var ER=class extends rde.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,n){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,i=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=i.subarray(0,i.byteLength-s),this.emit("finish")}n()}}});var CR=S(SR=>{"use strict";var g4=e=>encodeURIComponent(e).replace(/[!'()*]/g,ode),ode=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,ade=e=>e.split("/").map(g4).join("/");SR.escapeUri=g4;SR.escapeUriPath=ade});var kE=S(y4=>{"use strict";var _R=CR();function cde(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=_R.escapeUri(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)t.push(`${r}=${_R.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${_R.escapeUri(n)}`),t.push(s)}}return t.join("&")}y4.buildQueryString=cde});var Au=S(rg=>{"use strict";var _4=Xt(),b4=kE(),BE=require("http"),LE=require("https"),v4=require("stream"),bR=require("http2"),lde=["ECONNRESET","EPIPE","ETIMEDOUT"],A4=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},Ws={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},E4=1e3,ude=(e,t,r=0)=>{if(!r)return-1;let n=s=>{let i=Ws.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),o=a=>{a?.connecting?a.on("connect",()=>{Ws.clearTimeout(i)}):Ws.clearTimeout(i)};e.socket?o(e.socket):e.on("socket",o)};return r<2e3?(n(0),0):Ws.setTimeout(n.bind(null,E4),E4)},dde=(e,t,r=0,n,s)=>r?Ws.setTimeout(()=>{let i=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let o=Object.assign(new Error(i),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(o),t(o)}else i+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(i)},r):-1,fde=3e3,hde=(e,{keepAlive:t,keepAliveMsecs:r},n=fde)=>{if(t!==!0)return-1;let s=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",i=>{i.setKeepAlive(t,r||0)})};return n===0?(s(),0):Ws.setTimeout(s,n)},S4=3e3,pde=(e,t,r=0)=>{let n=s=>{let i=r-s,o=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(i,o),e.on("close",()=>e.socket?.removeListener("timeout",o))):e.setTimeout(i,o)};return 0<r&&r<6e3?(n(0),0):Ws.setTimeout(n.bind(null,r===0?0:S4),S4)},C4=6e3;async function x4(e,t,r=C4){let n=t.headers??{},s=n.Expect||n.expect,i=-1,o=!0;s==="100-continue"&&(o=await Promise.race([new Promise(a=>{i=Number(Ws.setTimeout(()=>a(!0),Math.max(C4,r)))}),new Promise(a=>{e.on("continue",()=>{Ws.clearTimeout(i),a(!0)}),e.on("response",()=>{Ws.clearTimeout(i),a(!1)}),e.on("error",()=>{Ws.clearTimeout(i),a(!1)})})])),o&&mde(e,t.body)}function mde(e,t){if(t instanceof v4.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var gde=0,vR=class e{config;configProvider;socketWarningTimestamp=0;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:s,requests:i,maxSockets:o}=t;if(typeof o!="number"||o===1/0||Date.now()-15e3<r)return r;if(s&&i)for(let c in s){let l=s[c]?.length??0,d=i[c]?.length??0;if(l>=o&&d>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${l} and ${d} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:i,httpAgent:o,httpsAgent:a,throwOnRequestTimeout:c}=t||{},l=!0,d=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:i,throwOnRequestTimeout:c,httpAgent:o instanceof BE.Agent||typeof o?.destroy=="function"?o:new BE.Agent({keepAlive:l,maxSockets:d,...o}),httpsAgent:a instanceof LE.Agent||typeof a?.destroy=="function"?a:new LE.Agent({keepAlive:l,maxSockets:d,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,i)=>{let o=this.config,a,c=[],l=async he=>{await a,c.forEach(Ws.clearTimeout),s(he)},d=async he=>{await a,c.forEach(Ws.clearTimeout),i(he)};if(r?.aborted){let he=new Error("Request aborted");he.name="AbortError",d(he);return}let f=t.protocol==="https:",h=t.headers??{},p=(h.Expect??h.expect)==="100-continue",m=f?o.httpsAgent:o.httpAgent;p&&(m=new(f?LE.Agent:BE.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(Ws.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(m,this.socketWarningTimestamp,o.logger)},o.socketAcquisitionWarningTimeout??(o.requestTimeout??2e3)+(o.connectionTimeout??1e3)));let E=b4.buildQueryString(t.query||{}),b;if(t.username!=null||t.password!=null){let he=t.username??"",xe=t.password??"";b=`${he}:${xe}`}let A=t.path;E&&(A+=`?${E}`),t.fragment&&(A+=`#${t.fragment}`);let R=t.hostname??"";R[0]==="["&&R.endsWith("]")?R=t.hostname.slice(1,-1):R=t.hostname;let D={headers:t.headers,host:R,method:t.method,path:A,port:t.port,agent:m,auth:b},z=(f?LE.request:BE.request)(D,he=>{let xe=new _4.HttpResponse({statusCode:he.statusCode||-1,reason:he.statusMessage,headers:A4(he.headers),body:he});l({response:xe})});if(z.on("error",he=>{lde.includes(he.code)?d(Object.assign(he,{name:"TimeoutError"})):d(he)}),r){let he=()=>{z.destroy();let xe=new Error("Request aborted");xe.name="AbortError",d(xe)};if(typeof r.addEventListener=="function"){let xe=r;xe.addEventListener("abort",he,{once:!0}),z.once("close",()=>xe.removeEventListener("abort",he))}else r.onabort=he}let G=n??o.requestTimeout;c.push(ude(z,d,o.connectionTimeout)),c.push(dde(z,d,G,o.throwOnRequestTimeout,o.logger??console)),c.push(pde(z,d,o.socketTimeout));let ye=D.agent;typeof ye=="object"&&"keepAlive"in ye&&c.push(hde(z,{keepAlive:ye.keepAlive,keepAliveMsecs:ye.keepAliveMsecs})),a=x4(z,t,G).catch(he=>(c.forEach(Ws.clearTimeout),i(he)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},AR=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},xR=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let n=this.getUrlString(t),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let i=bR.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),i.unref();let o=()=>{i.destroy(),this.deleteSession(n,i)};i.on("goaway",o),i.on("error",o),i.on("frameError",o),i.on("close",()=>this.deleteSession(n,i)),r.requestTimeout&&i.setTimeout(r.requestTimeout,o);let a=this.sessionCache.get(n)||new AR;return a.offerLast(i),this.sessionCache.set(n,a),i}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},IR=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new xR({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(s||{})}).catch(n):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:i}=this.config,o=n??s;return new Promise((a,c)=>{let l=!1,d,f=async Me=>{await d,a(Me)},h=async Me=>{await d,c(Me)};if(r?.aborted){l=!0;let Me=new Error("Request aborted");Me.name="AbortError",h(Me);return}let{hostname:p,method:m,port:E,protocol:b,query:A}=t,R="";if(t.username!=null||t.password!=null){let Me=t.username??"",Ue=t.password??"";R=`${Me}:${Ue}@`}let D=`${b}//${R}${p}${E?`:${E}`:""}`,K={destination:new URL(D)},z=this.connectionManager.lease(K,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:i||!1}),G=Me=>{i&&this.destroySession(z),l=!0,h(Me)},ye=b4.buildQueryString(A||{}),he=t.path;ye&&(he+=`?${ye}`),t.fragment&&(he+=`#${t.fragment}`);let xe=z.request({...t.headers,[bR.constants.HTTP2_HEADER_PATH]:he,[bR.constants.HTTP2_HEADER_METHOD]:m});if(z.ref(),xe.on("response",Me=>{let Ue=new _4.HttpResponse({statusCode:Me[":status"]||-1,headers:A4(Me),body:xe});l=!0,f({response:Ue}),i&&(z.close(),this.connectionManager.deleteSession(D,z))}),o&&xe.setTimeout(o,()=>{xe.close();let Me=new Error(`Stream timed out because of no activity for ${o} ms`);Me.name="TimeoutError",G(Me)}),r){let Me=()=>{xe.close();let Ue=new Error("Request aborted");Ue.name="AbortError",G(Ue)};if(typeof r.addEventListener=="function"){let Ue=r;Ue.addEventListener("abort",Me,{once:!0}),xe.once("close",()=>Ue.removeEventListener("abort",Me))}else r.onabort=Me}xe.on("frameError",(Me,Ue,Ge)=>{G(new Error(`Frame type id ${Me} in stream id ${Ge} has failed with code ${Ue}.`))}),xe.on("error",G),xe.on("aborted",()=>{G(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${xe.rstCode}.`))}),xe.on("close",()=>{z.unref(),i&&z.destroy(),l||G(new Error("Unexpected error: http2 request did not get a response"))}),d=x4(xe,t,o)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},wR=class extends v4.Writable{bufferedBytes=[];_write(t,r,n){this.bufferedBytes.push(t),n()}},yde=e=>Ede(e)?Sde(e):new Promise((t,r)=>{let n=new wR;e.pipe(n),e.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})}),Ede=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function Sde(e){let t=[],r=e.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of t)i.set(a,o),o+=a.length;return i}rg.DEFAULT_REQUEST_TIMEOUT=gde;rg.NodeHttp2Handler=IR;rg.NodeHttpHandler=vR;rg.streamCollector=yde});var T4=S(ME=>{"use strict";var I4=Xt(),Cde=kE(),_de=ys();function w4(e,t){return new Request(e,t)}function bde(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var FE={supported:void 0},TR=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),FE.supported===void 0&&(FE.supported=typeof Request<"u"&&"keepalive"in w4("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){let R=new Error("Request aborted");return R.name="AbortError",Promise.reject(R)}let a=t.path,c=Cde.buildQueryString(t.query||{});c&&(a+=`?${c}`),t.fragment&&(a+=`#${t.fragment}`);let l="";if(t.username!=null||t.password!=null){let R=t.username??"",D=t.password??"";l=`${R}:${D}@`}let{port:d,method:f}=t,h=`${t.protocol}//${l}${t.hostname}${d?`:${d}`:""}${a}`,p=f==="GET"||f==="HEAD"?void 0:t.body,m={body:p,headers:new Headers(t.headers),method:f,credentials:o};this.config?.cache&&(m.cache=this.config.cache),p&&(m.duplex="half"),typeof AbortController<"u"&&(m.signal=r),FE.supported&&(m.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(m,this.config.requestInit(t));let E=()=>{},b=w4(h,m),A=[fetch(b).then(R=>{let D=R.headers,K={};for(let G of D.entries())K[G[0]]=G[1];return R.body!=null?{response:new I4.HttpResponse({headers:K,reason:R.statusText,statusCode:R.status,body:R.body})}:R.blob().then(G=>({response:new I4.HttpResponse({headers:K,reason:R.statusText,statusCode:R.status,body:G})}))}),bde(s)];return r&&A.push(new Promise((R,D)=>{let K=()=>{let z=new Error("Request aborted");z.name="AbortError",D(z)};if(typeof r.addEventListener=="function"){let z=r;z.addEventListener("abort",K,{once:!0}),E=()=>z.removeEventListener("abort",K)}else r.onabort=K})),Promise.race(A).finally(E)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},vde=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):Ade(e):xde(e);async function Ade(e){let t=await Ide(e),r=_de.fromBase64(t);return new Uint8Array(r)}async function xde(e){let t=[],r=e.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of t)i.set(a,o),o+=a.length;return i}function Ide(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;t(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}ME.FetchHttpHandler=TR;ME.keepAliveSupport=FE;ME.streamCollector=vde});var UE=S(NR=>{"use strict";var R4={},RR={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),R4[e]=t,RR[t]=e}function wde(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in RR)t[r/2]=RR[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function Tde(e){let t="";for(let r=0;r<e.byteLength;r++)t+=R4[e[r]];return t}NR.fromHex=wde;NR.toHex=Tde});var D4=S(qE=>{"use strict";Object.defineProperty(qE,"__esModule",{value:!0});qE.sdkStreamMixin=void 0;var Rde=T4(),Nde=ys(),Pde=UE(),Ode=Dn(),N4=il(),P4="The stream has already been transformed.",Dde=e=>{if(!O4(e)&&!(0,N4.isReadableStream)(e)){let s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(P4);return t=!0,await(0,Rde.streamCollector)(e)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let i=await r();if(s==="base64")return(0,Nde.toBase64)(i);if(s==="hex")return(0,Pde.toHex)(i);if(s===void 0||s==="utf8"||s==="utf-8")return(0,Ode.toUtf8)(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(P4);if(t=!0,O4(e))return n(e);if((0,N4.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};qE.sdkStreamMixin=Dde;var O4=e=>typeof Blob=="function"&&e instanceof Blob});var B4=S(VE=>{"use strict";Object.defineProperty(VE,"__esModule",{value:!0});VE.sdkStreamMixin=void 0;var kde=Au(),Bde=Of(),PR=require("stream"),Lde=D4(),k4="The stream has already been transformed.",Fde=e=>{if(!(e instanceof PR.Readable))try{return(0,Lde.sdkStreamMixin)(e)}catch{let s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(k4);return t=!0,await(0,kde.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,Bde.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(t)throw new Error(k4);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof PR.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,PR.Readable.toWeb(e)}})};VE.sdkStreamMixin=Fde});var L4=S(OR=>{"use strict";Object.defineProperty(OR,"__esModule",{value:!0});OR.splitStream=Mde;async function Mde(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var U4=S(DR=>{"use strict";Object.defineProperty(DR,"__esModule",{value:!0});DR.splitStream=qde;var F4=require("stream"),Ude=L4(),M4=il();async function qde(e){if((0,M4.isReadableStream)(e)||(0,M4.isBlob)(e))return(0,Ude.splitStream)(e);let t=new F4.PassThrough,r=new F4.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var xu=S(Xn=>{"use strict";var q4=ys(),V4=Dn(),H4=dR(),j4=o4(),K4=f4(),z4=h4(),$4=m4(),G4=B4(),W4=U4(),J4=il(),kR=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(q4.fromBase64(t)):e.mutate(V4.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?q4.toBase64(this):V4.toUtf8(this)}};Xn.Uint8ArrayBlobAdapter=kR;Object.keys(H4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xn,e)&&Object.defineProperty(Xn,e,{enumerable:!0,get:function(){return H4[e]}})});Object.keys(j4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xn,e)&&Object.defineProperty(Xn,e,{enumerable:!0,get:function(){return j4[e]}})});Object.keys(K4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xn,e)&&Object.defineProperty(Xn,e,{enumerable:!0,get:function(){return K4[e]}})});Object.keys(z4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xn,e)&&Object.defineProperty(Xn,e,{enumerable:!0,get:function(){return z4[e]}})});Object.keys($4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xn,e)&&Object.defineProperty(Xn,e,{enumerable:!0,get:function(){return $4[e]}})});Object.keys(G4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xn,e)&&Object.defineProperty(Xn,e,{enumerable:!0,get:function(){return G4[e]}})});Object.keys(W4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xn,e)&&Object.defineProperty(Xn,e,{enumerable:!0,get:function(){return W4[e]}})});Object.keys(J4).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xn,e)&&Object.defineProperty(Xn,e,{enumerable:!0,get:function(){return J4[e]}})})});var HE,Uo,jE=V(()=>{HE=$(xu()),Uo=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return HE.Uint8ArrayBlobAdapter.mutate(e);if(!e)return HE.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return HE.Uint8ArrayBlobAdapter.mutate(await r)}});function ma(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var KE=V(()=>{});var qo,BR=V(()=>{qo=e=>typeof e=="function"?e():e});var ng,zE=V(()=>{ng=(e,t,r,n,s)=>({name:t,namespace:e,traits:r,input:n,output:s})});var X4,Y4,Q4,LR,Z4=V(()=>{X4=$(Xt()),Y4=$(Ns());zE();Q4=e=>(t,r)=>async n=>{let{response:s}=await t(n),{operationSchema:i}=(0,Y4.getSmithyContext)(r),[,o,a,c,l,d]=i??[];try{let f=await e.protocol.deserializeResponse(ng(o,a,c,l,d),{...e,...r},s);return{response:s,output:f}}catch(f){if(Object.defineProperty(f,"$response",{value:s}),!("$metadata"in f)){let h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{f.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof f.$responseBodyText<"u"&&f.$response&&(f.$response.body=f.$responseBodyText);try{if(X4.HttpResponse.isInstance(s)){let{headers:p={}}=s,m=Object.entries(p);f.$metadata={httpStatusCode:s.statusCode,requestId:LR(/^x-[\w-]+-request-?id$/,m),extendedRequestId:LR(/^x-[\w-]+-id-2$/,m),cfId:LR(/^x-[\w-]+-cf-id$/,m)}}}catch{}}throw f}},LR=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var e6,t6,r6=V(()=>{e6=$(Ns());zE();t6=e=>(t,r)=>async n=>{let{operationSchema:s}=(0,e6.getSmithyContext)(r),[,i,o,a,c,l]=s??[],d=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,f=await e.protocol.serializeRequest(ng(i,o,a,c,l),n.input,{...e,...r,endpoint:d});return t({...n,request:f})}});function Vde(e){return{applyToStack:t=>{t.add(t6(e),s6),t.add(Q4(e),n6),e.protocol.setSerdeContext(e)}}}var n6,s6,i6=V(()=>{Z4();r6();n6={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},s6={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var mn,ol=V(()=>{mn=class{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var $E,Hde,o6=V(()=>{ol();$E=class e extends mn{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},Hde=(e,t,r,n)=>mn.assign(new $E,{name:t,namespace:e,traits:r,valueSchema:n})});var GE,jde,a6=V(()=>{ol();GE=class e extends mn{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},jde=(e,t,r,n,s)=>mn.assign(new GE,{name:t,namespace:e,traits:r,keySchema:n,valueSchema:s})});var WE,Kde,c6=V(()=>{ol();WE=class e extends mn{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},Kde=(e,t,r,n,s)=>mn.assign(new WE,{name:t,namespace:e,traits:r,input:n,output:s})});var Bf,zde,FR=V(()=>{ol();Bf=class e extends mn{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},zde=(e,t,r,n,s)=>mn.assign(new Bf,{name:t,namespace:e,traits:r,memberNames:n,memberList:s})});var JE,$de,l6=V(()=>{ol();FR();JE=class e extends Bf{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},$de=(e,t,r,n,s,i)=>mn.assign(new JE,{name:t,namespace:e,traits:r,memberNames:n,memberList:s,ctor:null})});function ga(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}var MR=V(()=>{});function sg(e,t){if(e instanceof qe)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=qe;return new r(e,t)}var qe,UR,u6,d6=V(()=>{BR();MR();qe=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let n=[],s=t,i=t;for(this._isMemberSchema=!1;UR(s);)n.push(s[1]),s=s[0],i=qo(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){let a=n[o];Object.assign(this.memberTraits,ga(a))}}else this.memberTraits=0;if(i instanceof e){let o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=qo(i),u6(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=qo(t);if(r instanceof e)return r;if(UR(r)){let[n,s]=r;if(n instanceof e)return Object.assign(n.getMergedTraits(),ga(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let t=this.getSchema();return t[0]===3||t[0]===-3}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return t(r)||t(n)||t(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return ga(this.memberTraits)}getOwnTraits(){return ga(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=t?15:n[4]??0;return sg([s,0],"key")}getValueSchema(){let t=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||s)?t[3+t[0]]:r?15:void 0;if(i!=null)return sg([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let n=r[4].indexOf(t),s=r[5][n];return sg(UR(s)?s:[s,0],t)}if(this.isDocumentSchema())return sg([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],sg([t[5][r],0],t[4][r])]}};UR=e=>Array.isArray(e)&&e.length===2,u6=e=>Array.isArray(e)&&e.length>=5});var ig,Gde,Wde,f6=V(()=>{ol();ig=class e extends mn{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},Gde=(e,t,r,n)=>mn.assign(new ig,{name:t,namespace:e,traits:n,schemaRef:r}),Wde=(e,t,r,n)=>mn.assign(new ig,{name:t,namespace:e,traits:r,schemaRef:n})});var Jde,h6=V(()=>{Jde={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var kn,p6=V(()=>{kn=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,n=new Map){this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);e.for(n.split("#")[0]).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let n=t,s=e.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(t){let r=t;return e.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,n]=t,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}}});var m6={};Wi(m6,{ErrorSchema:()=>JE,ListSchema:()=>$E,MapSchema:()=>GE,NormalizedSchema:()=>qe,OperationSchema:()=>WE,SCHEMA:()=>Jde,Schema:()=>mn,SimpleSchema:()=>ig,StructureSchema:()=>Bf,TypeRegistry:()=>kn,deref:()=>qo,deserializerMiddlewareOption:()=>n6,error:()=>$de,getSchemaSerdePlugin:()=>Vde,isStaticSchema:()=>u6,list:()=>Hde,map:()=>jde,op:()=>Kde,operation:()=>ng,serializerMiddlewareOption:()=>s6,sim:()=>Gde,simAdapter:()=>Wde,struct:()=>zde,translateTraits:()=>ga});var on=V(()=>{BR();i6();o6();a6();c6();zE();l6();d6();ol();f6();FR();h6();MR();p6()});var Xde,g6=V(()=>{Xde=(e,t,r=n=>n)=>e});var Yde,Qde,og,Zde,XE,ag,efe,qR,VR,HR,jR,tfe,rfe,y6,nfe,sfe,QE,ife,KR,ofe,Lf,zR,afe,cfe,lfe,E6,S6,ufe,dfe,Iu,$R,YE,cg,GR=V(()=>{Yde=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Qde=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&cg.warn(YE(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&cg.warn(YE(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},og=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&cg.warn(YE(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Zde=Math.ceil(34028234663852886e22),XE=e=>{let t=og(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Zde)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},ag=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},efe=ag,qR=e=>jR(e,32),VR=e=>jR(e,16),HR=e=>jR(e,8),jR=(e,t)=>{let r=ag(e);if(r!==void 0&&tfe(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},tfe=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},rfe=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},y6=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},nfe=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return cg.warn(YE(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},sfe=e=>{if(e==null)return;let t=y6(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},QE=e=>og(typeof e=="string"?Lf(e):e),ife=QE,KR=e=>XE(typeof e=="string"?Lf(e):e),ofe=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Lf=e=>{let t=e.match(ofe);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},zR=e=>typeof e=="string"?E6(e):og(e),afe=zR,cfe=zR,lfe=e=>typeof e=="string"?E6(e):XE(e),E6=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},S6=e=>ag(typeof e=="string"?Lf(e):e),ufe=S6,dfe=e=>qR(typeof e=="string"?Lf(e):e),Iu=e=>VR(typeof e=="string"?Lf(e):e),$R=e=>HR(typeof e=="string"?Lf(e):e),YE=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),cg={warn:console.warn}});function ug(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),s=e.getUTCDate(),i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,l=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,f=a<10?`0${a}`:`${a}`;return`${ffe[n]}, ${c} ${JR[r]} ${t} ${l}:${d}:${f} GMT`}var ffe,JR,hfe,pfe,mfe,XR,gfe,yfe,Efe,YR,QR,lg,Sfe,Cfe,_fe,WR,bfe,vfe,Afe,ya,xfe,Ife,Ff,C6=V(()=>{GR();ffe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],JR=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];hfe=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),pfe=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=hfe.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,l]=t,d=Iu(Ff(n)),f=ya(s,"month",1,12),h=ya(i,"day",1,31);return lg(d,f,h,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l})},mfe=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),XR=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=mfe.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,l,d]=t,f=Iu(Ff(n)),h=ya(s,"month",1,12),p=ya(i,"day",1,31),m=lg(f,h,p,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l});return d.toUpperCase()!="Z"&&m.setTime(m.getTime()-Ife(d)),m},gfe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),yfe=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Efe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),YR=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=gfe.exec(e);if(t){let[r,n,s,i,o,a,c,l]=t;return lg(Iu(Ff(i)),WR(s),ya(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l})}if(t=yfe.exec(e),t){let[r,n,s,i,o,a,c,l]=t;return _fe(lg(Sfe(i),WR(s),ya(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l}))}if(t=Efe.exec(e),t){let[r,n,s,i,o,a,c,l]=t;return lg(Iu(Ff(l)),WR(n),ya(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},QR=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=QE(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},lg=(e,t,r,n)=>{let s=t-1;return vfe(e,s,r),new Date(Date.UTC(e,s,r,ya(n.hours,"hour",0,23),ya(n.minutes,"minute",0,59),ya(n.seconds,"seconds",0,60),xfe(n.fractionalMilliseconds)))},Sfe=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Iu(Ff(e));return r<t?r+100:r},Cfe=50*365*24*60*60*1e3,_fe=e=>e.getTime()-new Date().getTime()>Cfe?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,WR=e=>{let t=JR.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},bfe=[31,28,31,30,31,30,31,31,30,31,30,31],vfe=(e,t,r)=>{let n=bfe[t];if(t===1&&Afe(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${JR[t]} in ${e}: ${r}`)},Afe=e=>e%4===0&&(e%100!==0||e%400===0),ya=(e,t,r,n)=>{let s=$R(Ff(e));if(s<r||s>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return s},xfe=e=>e==null?0:KR("0."+e)*1e3,Ife=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),s=Number(e.substring(4,6));return r*(n*60+s)*60*1e3},Ff=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Ea={};Wi(Ea,{__addDisposableResource:()=>z6,__assign:()=>ZE,__asyncDelegator:()=>F6,__asyncGenerator:()=>L6,__asyncValues:()=>M6,__await:()=>Mf,__awaiter:()=>N6,__classPrivateFieldGet:()=>H6,__classPrivateFieldIn:()=>K6,__classPrivateFieldSet:()=>j6,__createBinding:()=>tS,__decorate:()=>v6,__disposeResources:()=>$6,__esDecorate:()=>x6,__exportStar:()=>O6,__extends:()=>_6,__generator:()=>P6,__importDefault:()=>V6,__importStar:()=>q6,__makeTemplateObject:()=>U6,__metadata:()=>R6,__param:()=>A6,__propKey:()=>w6,__read:()=>tN,__rest:()=>b6,__rewriteRelativeImportExtension:()=>G6,__runInitializers:()=>I6,__setFunctionName:()=>T6,__spread:()=>D6,__spreadArray:()=>B6,__spreadArrays:()=>k6,__values:()=>eS,default:()=>Rfe});function _6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ZR(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function b6(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function v6(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function A6(e,t){return function(r,n){t(r,n,e)}}function x6(e,t,r,n,s,i){function o(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),f,h=!1,p=r.length-1;p>=0;p--){var m={};for(var E in n)m[E]=E==="access"?{}:n[E];for(var E in n.access)m.access[E]=n.access[E];m.addInitializer=function(A){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(A||null))};var b=(0,r[p])(a==="accessor"?{get:d.get,set:d.set}:d[c],m);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(f=o(b.get))&&(d.get=f),(f=o(b.set))&&(d.set=f),(f=o(b.init))&&s.unshift(f)}else(f=o(b))&&(a==="field"?s.unshift(f):d[c]=f)}l&&Object.defineProperty(l,n.name,d),h=!0}function I6(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function w6(e){return typeof e=="symbol"?e:"".concat(e)}function T6(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function R6(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function N6(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?i(d.value):s(d.value).then(a,c)}l((n=n.apply(e,t||[])).next())})}function P6(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(d){return c([l,d])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(n=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(d){l=[6,d],s=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function O6(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tS(t,e,r)}function eS(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function tN(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function D6(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(tN(arguments[t]));return e}function k6(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function B6(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Mf(e){return this instanceof Mf?(this.v=e,this):new Mf(e)}function L6(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(m){return Promise.resolve(m).then(p,f)}}function a(p,m){n[p]&&(s[p]=function(E){return new Promise(function(b,A){i.push([p,E,b,A])>1||c(p,E)})},m&&(s[p]=m(s[p])))}function c(p,m){try{l(n[p](m))}catch(E){h(i[0][3],E)}}function l(p){p.value instanceof Mf?Promise.resolve(p.value.v).then(d,f):h(i[0][2],p)}function d(p){c("next",p)}function f(p){c("throw",p)}function h(p,m){p(m),i.shift(),i.length&&c(i[0][0],i[0][1])}}function F6(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Mf(e[s](o)),done:!1}:i?i(o):o}:i}}function M6(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof eS=="function"?eS(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function U6(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function q6(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=eN(e),n=0;n<r.length;n++)r[n]!=="default"&&tS(t,e,r[n]);return wfe(t,e),t}function V6(e){return e&&e.__esModule?e:{default:e}}function H6(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function j6(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function K6(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function z6(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function $6(e){function t(i){e.error=e.hasError?new Tfe(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function G6(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?t?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):e}var ZR,ZE,tS,wfe,eN,Tfe,Rfe,Sa=V(()=>{ZR=function(e,t){return ZR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},ZR(e,t)};ZE=function(){return ZE=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ZE.apply(this,arguments)};tS=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});wfe=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},eN=function(e){return eN=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},eN(e)};Tfe=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};Rfe={__extends:_6,__assign:ZE,__rest:b6,__decorate:v6,__param:A6,__esDecorate:x6,__runInitializers:I6,__propKey:w6,__setFunctionName:T6,__metadata:R6,__awaiter:N6,__generator:P6,__createBinding:tS,__exportStar:O6,__values:eS,__read:tN,__spread:D6,__spreadArrays:k6,__spreadArray:B6,__await:Mf,__asyncGenerator:L6,__asyncDelegator:F6,__asyncValues:M6,__makeTemplateObject:U6,__importStar:q6,__importDefault:V6,__classPrivateFieldGet:H6,__classPrivateFieldSet:j6,__classPrivateFieldIn:K6,__addDisposableResource:z6,__disposeResources:$6,__rewriteRelativeImportExtension:G6}});var J6=S(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});rS.randomUUID=void 0;var Nfe=(Sa(),St(Ea)),W6=Nfe.__importDefault(require("crypto"));rS.randomUUID=W6.default.randomUUID.bind(W6.default)});var nS=S(Y6=>{"use strict";var X6=J6(),Ps=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),Pfe=()=>{if(X6.randomUUID)return X6.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,Ps[e[0]]+Ps[e[1]]+Ps[e[2]]+Ps[e[3]]+"-"+Ps[e[4]]+Ps[e[5]]+"-"+Ps[e[6]]+Ps[e[7]]+"-"+Ps[e[8]]+Ps[e[9]]+"-"+Ps[e[10]]+Ps[e[11]]+Ps[e[12]]+Ps[e[13]]+Ps[e[14]]+Ps[e[15]]};Y6.v4=Pfe});var Ca,Q6=V(()=>{Ca=$(nS())});var Js,Z6=V(()=>{Js=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Js.from=e=>e&&typeof e=="object"&&(e instanceof Js||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Js(String(e)):Js(JSON.stringify(e));Js.fromObject=Js.from});function rN(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var eV=V(()=>{});function pc(e,t,r){let n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var nN,sN,iN,tV,rV,Ofe,Dfe,kfe,Bfe,Lfe,dg,oN,aN,nV=V(()=>{nN="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",sN="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",iN="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",tV="(\\d?\\d)",rV="(\\d{4})",Ofe=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),Dfe=new RegExp(`^${nN}, ${tV} ${sN} ${rV} ${iN} GMT$`),kfe=new RegExp(`^${nN}, ${tV}-${sN}-(\\d\\d) ${iN} GMT$`),Bfe=new RegExp(`^${nN} ${sN} ( [1-9]|\\d\\d) ${iN} ${rV}$`),Lfe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dg=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},oN=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=Ofe.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,n,s,i,o,a,,c,l]=t;pc(n,1,12),pc(s,1,31),pc(i,0,23),pc(o,0,59),pc(a,0,60);let d=new Date;if(d.setUTCFullYear(Number(r),Number(n)-1,Number(s)),d.setUTCHours(Number(i)),d.setUTCMinutes(Number(o)),d.setUTCSeconds(Number(a)),d.setUTCMilliseconds(Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0),l.toUpperCase()!="Z"){let[,f,h,p]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,"+",0,0],m=f==="-"?1:-1;d.setTime(d.getTime()+m*(Number(h)*60*60*1e3+Number(p)*60*1e3))}return d},aN=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,s,i,o,a,c;if((c=Dfe.exec(e))?[,t,r,n,s,i,o,a]=c:(c=kfe.exec(e))?([,t,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=Bfe.exec(e))&&([,r,t,s,i,o,a,n]=c),n&&o){let l=new Date;return l.setUTCFullYear(Number(n)),l.setUTCMonth(Lfe.indexOf(r)),pc(t,1,31),l.setUTCDate(Number(t)),pc(s,0,23),l.setUTCHours(Number(s)),pc(i,0,59),l.setUTCMinutes(Number(i)),pc(o,0,60),l.setUTCSeconds(Number(o)),l.setUTCMilliseconds(a?Math.round(parseFloat(`0.${a}`)*1e3):0),l}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function cN(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let s=[],i="";for(let o=0;o<n.length;o++)i===""?i=n[o]:i+=t+n[o],(o+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}var sV=V(()=>{});var fg,iV=V(()=>{fg=e=>{let t=e.length,r=[],n=!1,s,i=0;for(let o=0;o<t;++o){let a=e[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(i,o)),i=o+1);break;default:}s=a}return r.push(e.slice(i)),r.map(o=>{o=o.trim();let a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})}});function lN(e){return new Yr(String(e),"bigDecimal")}var oV,Yr,aV=V(()=>{oV=/^-?\d*(\.\d+)?$/,Yr=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!oV.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&oV.test(r.string)}}});var cV={};Wi(cV,{LazyJsonString:()=>Js,NumericValue:()=>Yr,_parseEpochTimestamp:()=>dg,_parseRfc3339DateTimeWithOffset:()=>oN,_parseRfc7231DateTime:()=>aN,copyDocumentWithTransform:()=>Xde,dateToUtcString:()=>ug,expectBoolean:()=>Qde,expectByte:()=>HR,expectFloat32:()=>XE,expectInt:()=>efe,expectInt32:()=>qR,expectLong:()=>ag,expectNonNull:()=>rfe,expectNumber:()=>og,expectObject:()=>y6,expectShort:()=>VR,expectString:()=>nfe,expectUnion:()=>sfe,generateIdempotencyToken:()=>Ca.v4,handleFloat:()=>afe,limitedParseDouble:()=>zR,limitedParseFloat:()=>cfe,limitedParseFloat32:()=>lfe,logger:()=>cg,nv:()=>lN,parseBoolean:()=>Yde,parseEpochTimestamp:()=>QR,parseRfc3339DateTime:()=>pfe,parseRfc3339DateTimeWithOffset:()=>XR,parseRfc7231DateTime:()=>YR,quoteHeader:()=>rN,splitEvery:()=>cN,splitHeader:()=>fg,strictParseByte:()=>$R,strictParseDouble:()=>QE,strictParseFloat:()=>ife,strictParseFloat32:()=>KR,strictParseInt:()=>ufe,strictParseInt32:()=>dfe,strictParseLong:()=>S6,strictParseShort:()=>Iu});var mi=V(()=>{g6();C6();Q6();Z6();GR();eV();nV();sV();iV();aV()});var Xs,Uf=V(()=>{Xs=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var lV,uN,uV=V(()=>{lV=$(Dn()),uN=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:n,serdeContext:s,defaultContentType:i}){this.marshaller=t,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=i}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){let s=this.marshaller,i=r.getEventStreamMember(),o=r.getMemberSchema(i),a=this.serializer,c=this.defaultContentType,l=Symbol("initialRequestMarker"),d={async*[Symbol.asyncIterator](){if(n){let f={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let h=a.flush();yield{[l]:!0,headers:f,body:h}}for await(let f of t)yield f}};return s.serialize(d,f=>{if(f[l])return{headers:f.headers,body:f.body};let h=Object.keys(f).find(R=>R!=="__type")??"",{additionalHeaders:p,body:m,eventType:E,explicitPayloadContentType:b}=this.writeEventBody(h,o,f);return{headers:{":event-type":{type:"string",value:E},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:b??c},...p},body:m}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,i=r.getEventStreamMember(),a=r.getMemberSchema(i).getMemberSchemas(),c=Symbol("initialResponseMarker"),l=s.deserialize(t.body,async h=>{let p=Object.keys(h).find(m=>m!=="__type")??"";if(p==="initial-response"){let m=await this.deserializer.read(r,h[p].body);return delete m[i],{[c]:!0,...m}}else if(p in a){let m=a[p];return{[p]:await this.deserializer.read(m,h[p].body)}}else return{$unknown:h}}),d=l[Symbol.asyncIterator](),f=await d.next();if(f.done)return l;if(f.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[h,p]of Object.entries(f.value))n[h]=p}return{async*[Symbol.asyncIterator](){for(f?.value?.[c]||(yield f.value);;){let{done:h,value:p}=await d.next();if(h)break;yield p}}}}writeEventBody(t,r,n){let s=this.serializer,i=t,o=null,a,c=r.getSchema()[4].includes(t),l={};if(c){let h=r.getMemberSchema(t);if(h.isStructSchema()){for(let[p,m]of h.structIterator()){let{eventHeader:E,eventPayload:b}=m.getMergedTraits();if(b){o=p;break}else if(E){let A=n[t][p],R="binary";m.isNumericSchema()?(-2)**31<=A&&A<=2**31-1?R="integer":R="long":m.isTimestampSchema()?R="timestamp":m.isStringSchema()?R="string":m.isBooleanSchema()&&(R="boolean"),A!=null&&(l[p]={type:R,value:A},delete n[t][p])}}if(o!==null){let p=h.getMemberSchema(o);p.isBlobSchema()?a="application/octet-stream":p.isStringSchema()&&(a="text/plain"),s.write(p,n[t][o])}else s.write(h,n[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[h,p]=n[t];i=h,s.write(15,p)}let d=s.flush();return{body:typeof d=="string"?(this.serdeContext?.utf8Decoder??lV.fromUtf8)(d):d,eventType:i,explicitPayloadContentType:a,additionalHeaders:l}}}});var dV={};Wi(dV,{EventStreamSerde:()=>uN});var fV=V(()=>{uV()});var sS,wu,iS=V(()=>{on();sS=$(Xt());Uf();wu=class extends Xs{options;constructor(t){super(),this.options=t}getRequestType(){return sS.HttpRequest}getResponseType(){return sS.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[n,s]of r.url.searchParams.entries())t.query[n]=s;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,n){let s=qe.of(r.input),i=ga(r.traits??{});if(i.endpoint){let o=i.endpoint?.[0];if(typeof o=="string"){let a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let l=n[c];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);o=o.replace(`{${c}}`,l)}t.hostname=o+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(fV(),dV));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,n,s,i){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var hV,pV,Tu,mV=V(()=>{on();mi();hV=$(Xt()),pV=$(xu());jE();KE();iS();Tu=class extends wu{async serializeRequest(t,r,n){let s={...r??{}},i=this.serializer,o={},a={},c=await n.endpoint(),l=qe.of(t?.input),d=l.getSchema(),f=!1,h,p=new hV.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(p,c),this.setHostPrefix(p,t,s);let m=ga(t.traits);if(m.http){p.method=m.http[0];let[E,b]=m.http[1].split("?");p.path=="/"?p.path=E:p.path+=E;let A=new URLSearchParams(b??"");Object.assign(o,Object.fromEntries(A))}}for(let[m,E]of l.structIterator()){let b=E.getMergedTraits()??{},A=s[m];if(A!=null)if(b.httpPayload)E.isStreaming()?E.isStructSchema()?s[m]&&(h=await this.serializeEventStream({eventStream:s[m],requestSchema:l})):h=A:(i.write(E,A),h=i.flush()),delete s[m];else if(b.httpLabel){i.write(E,A);let R=i.flush();p.path.includes(`{${m}+}`)?p.path=p.path.replace(`{${m}+}`,R.split("/").map(ma).join("/")):p.path.includes(`{${m}}`)&&(p.path=p.path.replace(`{${m}}`,ma(R))),delete s[m]}else if(b.httpHeader)i.write(E,A),a[b.httpHeader.toLowerCase()]=String(i.flush()),delete s[m];else if(typeof b.httpPrefixHeaders=="string"){for(let[R,D]of Object.entries(A)){let K=b.httpPrefixHeaders+R;i.write([E.getValueSchema(),{httpHeader:K}],D),a[K.toLowerCase()]=i.flush()}delete s[m]}else b.httpQuery||b.httpQueryParams?(this.serializeQuery(E,A,o),delete s[m]):f=!0}return f&&s&&(i.write(d,s),h=i.flush()),p.headers=a,p.query=o,p.body=h,p}serializeQuery(t,r,n){let s=this.serializer,i=t.getMergedTraits();if(i.httpQueryParams){for(let[o,a]of Object.entries(r))if(!(o in n)){let c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(t.isListSchema()){let o=!!t.getMergedTraits().sparse,a=[];for(let c of r){s.write([t.getValueSchema(),i],c);let l=s.flush();(o||l!==void 0)&&a.push(l)}n[i.httpQuery]=a}else s.write([t,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(t,r,n){let s=this.deserializer,i=qe.of(t.output),o={};if(n.statusCode>=300){let c=await Uo(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(t,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let l=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=l}let a=await this.deserializeHttpMessage(i,r,n,o);if(a.length){let c=await Uo(n.body,r);if(c.byteLength>0){let l=await s.read(i,c);for(let d of a)o[d]=l[d]}}return o.$metadata=this.deserializeMetadata(n),o}async deserializeHttpMessage(t,r,n,s,i){let o;s instanceof Set?o=i:o=s;let a=this.deserializer,c=qe.of(t),l=[];for(let[d,f]of c.structIterator()){let h=f.getMemberTraits();if(h.httpPayload){if(f.isStreaming())f.isStructSchema()?o[d]=await this.deserializeEventStream({response:n,responseSchema:c}):o[d]=(0,pV.sdkStreamMixin)(n.body);else if(n.body){let m=await Uo(n.body,r);m.byteLength>0&&(o[d]=await a.read(f,m))}}else if(h.httpHeader){let p=String(h.httpHeader).toLowerCase(),m=n.headers[p];if(m!=null)if(f.isListSchema()){let E=f.getValueSchema();E.getMergedTraits().httpHeader=p;let b;E.isTimestampSchema()&&E.getSchema()===4?b=cN(m,",",2):b=fg(m);let A=[];for(let R of b)A.push(await a.read(E,R.trim()));o[d]=A}else o[d]=await a.read(f,m)}else if(h.httpPrefixHeaders!==void 0){o[d]={};for(let[p,m]of Object.entries(n.headers))if(p.startsWith(h.httpPrefixHeaders)){let E=f.getValueSchema();E.getMergedTraits().httpHeader=p,o[d][p.slice(h.httpPrefixHeaders.length)]=await a.read(E,m)}}else h.httpResponseCode?o[d]=n.statusCode:l.push(d)}return l}}});var gV,mc,yV=V(()=>{on();gV=$(Xt());jE();iS();mc=class extends wu{async serializeRequest(t,r,n){let s=this.serializer,i={},o={},a=await n.endpoint(),c=qe.of(t?.input),l=c.getSchema(),d,f=new gV.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});a&&(this.updateServiceEndpoint(f,a),this.setHostPrefix(f,t,r));let h={...r};if(r){let p=c.getEventStreamMember();if(p){if(h[p]){let m={};for(let[E,b]of c.structIterator())E!==p&&h[E]&&(s.write(b,h[E]),m[E]=s.flush());d=await this.serializeEventStream({eventStream:h[p],requestSchema:c,initialRequest:m})}}else s.write(l,h),d=s.flush()}return f.headers=o,f.query=i,f.body=d,f.method="POST",f}async deserializeResponse(t,r,n){let s=this.deserializer,i=qe.of(t.output),o={};if(n.statusCode>=300){let c=await Uo(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(t,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let l=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=l}let a=i.getEventStreamMember();if(a)o[a]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:o});else{let c=await Uo(n.body,r);c.byteLength>0&&Object.assign(o,await s.read(i,c))}return o.$metadata=this.deserializeMetadata(n),o}}});var dN,fN=V(()=>{KE();dN=(e,t,r,n,s,i)=>{if(t!=null&&t[r]!==void 0){let o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,i?o.split("/").map(a=>ma(a)).join("/"):ma(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function hg(e,t){return new oS(e,t)}var EV,oS,SV=V(()=>{EV=$(Xt());fN();oS=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let i of this.resolvePathStack)i(this.path);return new EV.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,s){return this.resolvePathStack.push(i=>{this.path=dN(i,this.input,t,r,n,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function Bi(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??t.timestampFormat.default}var aS=V(()=>{});var hN,CV,Ru,pN=V(()=>{on();mi();hN=$(ys()),CV=$(Dn());Uf();aS();Ru=class extends Xs{settings;constructor(t){super(),this.settings=t}read(t,r){let n=qe.of(t);if(n.isListSchema())return fg(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??hN.fromBase64)(r);if(n.isTimestampSchema())switch(Bi(n,this.settings)){case 5:return oN(r);case 6:return aN(r);case 7:return dg(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let s=n.getMergedTraits().mediaType,i=r;if(s)return n.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i)),(s==="application/json"||s.endsWith("+json"))&&(i=Js.from(i)),i}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new Yr(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??CV.toUtf8)((this.serdeContext?.base64Decoder??hN.fromBase64)(t))}}});var cS,Nu,_V=V(()=>{on();cS=$(Dn());Uf();pN();Nu=class extends Xs{codecDeserializer;stringDeserializer;constructor(t,r){super(),this.codecDeserializer=t,this.stringDeserializer=new Ru(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let n=qe.of(t),s=n.getMergedTraits(),i=this.serdeContext?.utf8Encoder??cS.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,i(r));if(s.httpPayload){if(n.isBlobSchema()){let o=this.serdeContext?.utf8Decoder??cS.fromUtf8;return typeof r=="string"?o(r):r}else if(n.isStringSchema())return"byteLength"in r?i(r):r}return this.codecDeserializer.read(n,r)}}});var mN,pg,gN=V(()=>{on();mi();mN=$(ys());Uf();aS();pg=class extends Xs{settings;stringBuffer="";constructor(t){super(),this.settings=t}write(t,r){let n=qe.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(Bi(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=ug(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??mN.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let o="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let c=this.flush(),l=n.getValueSchema().isTimestampSchema()?c:rN(c);o!==""&&(o+=", "),o+=l}this.stringBuffer=o;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let s=n.getMergedTraits().mediaType,i=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(i=Js.from(i)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??mN.toBase64)(i.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var Pu,bV=V(()=>{on();gN();Pu=class{codecSerializer;stringSerializer;buffer;constructor(t,r,n=new pg(r)){this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=qe.of(t),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var vV={};Wi(vV,{FromStringShapeDeserializer:()=>Ru,HttpBindingProtocol:()=>Tu,HttpInterceptingShapeDeserializer:()=>Nu,HttpInterceptingShapeSerializer:()=>Pu,HttpProtocol:()=>wu,RequestBuilder:()=>oS,RpcProtocol:()=>mc,SerdeContext:()=>Xs,ToStringShapeSerializer:()=>pg,collectBody:()=>Uo,determineTimestampFormat:()=>Bi,extendedEncodeURIComponent:()=>ma,requestBuilder:()=>hg,resolvedPath:()=>dN});var gi=V(()=>{jE();KE();mV();iS();yV();SV();fN();pN();_V();bV();gN();aS();Uf()});var AV=V(()=>{gi()});function Ffe(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var xV=V(()=>{});var Ou,IV=V(()=>{Ou=class{authSchemes=new Map;constructor(t){for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var wV,yN,EN,TV=V(()=>{wV=$(Xt()),yN=$(dc()),EN=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=wV.HttpRequest.clone(t);if(n.in===yN.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===yN.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var RV,SN,NV=V(()=>{RV=$(Xt()),SN=class{async sign(t,r,n){let s=RV.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var gc,PV=V(()=>{gc=class{async sign(t,r,n){return t}}});var OV=V(()=>{TV();NV();PV()});var DV,Mfe,CN,lS,_N,kV=V(()=>{DV=e=>function(r){return lS(r)&&r.expiration.getTime()-Date.now()<e},Mfe=3e5,CN=DV(3e5),lS=e=>e.expiration!==void 0,_N=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,s,i,o,a=!1,c=async l=>{i||(i=n(l));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return t===void 0?async l=>((!o||l?.forceRefresh)&&(s=await c(l)),s):async l=>((!o||l?.forceRefresh)&&(s=await c(l)),a?s:r(s)?(t(s)&&await c(l),s):(a=!0,s))}});var BV=V(()=>{IV();OV();kV()});var Du={};Wi(Du,{DefaultIdentityProviderConfig:()=>Ou,EXPIRATION_MS:()=>Mfe,HttpApiKeyAuthSigner:()=>EN,HttpBearerAuthSigner:()=>SN,NoAuthSigner:()=>gc,createIsIdentityExpiredFunction:()=>DV,createPaginator:()=>Jq,doesIdentityRequireRefresh:()=>lS,getHttpAuthSchemeEndpointRuleSetPlugin:()=>Zm,getHttpAuthSchemePlugin:()=>Sue,getHttpSigningPlugin:()=>eg,getSmithyContext:()=>hue,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>Dq,httpAuthSchemeMiddleware:()=>Qm,httpAuthSchemeMiddlewareOptions:()=>qq,httpSigningMiddleware:()=>oR,httpSigningMiddlewareOptions:()=>zq,isIdentityExpired:()=>CN,memoizeIdentityProvider:()=>_N,normalizeProvider:()=>sl,requestBuilder:()=>hg,setFeature:()=>Ffe});var Ys=V(()=>{Tq();Hq();Gq();Wq();Xq();AV();xV();BV()});var Qs=S(ku=>{"use strict";var qf=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let n,s=!0;typeof r=="boolean"?(n=void 0,s=r):r!=null&&typeof r=="object"&&(n=r.logger,s=r.tryNextLink??!0),super(t),this.tryNextLink=s,Object.setPrototypeOf(this,e.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},bN=class e extends qf{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},vN=class e extends qf{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},Ufe=(...e)=>async()=>{if(e.length===0)throw new qf("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},qfe=e=>()=>Promise.resolve(e),Vfe=(e,t,r)=>{let n,s,i,o=!1,a=async()=>{s||(s=e());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return t===void 0?async c=>((!i||c?.forceRefresh)&&(n=await a()),n):async c=>((!i||c?.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(t(n)&&await a(),n))};ku.CredentialsProviderError=bN;ku.ProviderError=qf;ku.TokenProviderError=vN;ku.chain=Ufe;ku.fromStatic=qfe;ku.memoize=Vfe});var AN,LV,FV,MV=V(()=>{Ys();AN=$(Qs()),LV=e=>(e.sigv4aSigningRegionSet=sl(e.sigv4aSigningRegionSet),e),FV={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new AN.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new AN.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var yS=S(ft=>{"use strict";var al=UE(),Bu=Dn(),Hfe=vE(),HV=Xt(),UV=Ns(),uS=CR(),jV="X-Amz-Algorithm",KV="X-Amz-Credential",NN="X-Amz-Date",zV="X-Amz-SignedHeaders",$V="X-Amz-Expires",PN="X-Amz-Signature",ON="X-Amz-Security-Token",jfe="X-Amz-Region-Set",DN="authorization",kN=NN.toLowerCase(),GV="date",WV=[DN,kN,GV],JV=PN.toLowerCase(),mS="x-amz-content-sha256",XV=ON.toLowerCase(),Kfe="host",YV={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},QV=/^proxy-/,ZV=/^sec-/,zfe=[/^proxy-/i,/^sec-/i],dS="AWS4-HMAC-SHA256",$fe="AWS4-ECDSA-P256-SHA256",eH="AWS4-HMAC-SHA256-PAYLOAD",tH="UNSIGNED-PAYLOAD",rH=50,BN="aws4_request",nH=3600*24*7,Vf={},fS=[],hS=(e,t,r)=>`${e}/${t}/${r}/${BN}`,sH=async(e,t,r,n,s)=>{let i=await qV(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${s}:${al.toHex(i)}:${t.sessionToken}`;if(o in Vf)return Vf[o];for(fS.push(o);fS.length>rH;)delete Vf[fS.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,s,BN])a=await qV(e,a,c);return Vf[o]=a},Gfe=()=>{fS.length=0,Object.keys(Vf).forEach(e=>{delete Vf[e]})},qV=(e,t,r)=>{let n=new e(t);return n.update(Bu.toUint8Array(r)),n.digest()},xN=({headers:e},t,r)=>{let n={};for(let s of Object.keys(e).sort()){if(e[s]==null)continue;let i=s.toLowerCase();(i in YV||t?.has(i)||QV.test(i)||ZV.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n},pS=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===mS)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Hfe.isArrayBuffer(t)){let n=new r;return n.update(Bu.toUint8Array(t)),al.toHex(await n.digest())}return tH},IN=class{format(t){let r=[];for(let i of Object.keys(t)){let o=Bu.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":let a=Bu.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let l=new Uint8Array(c.buffer);return l.set(a,3),l;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(wN.fromNumber(t.value.valueOf()).bytes,1),d;case"uuid":if(!Wfe.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(al.fromHex(t.value.replace(/\-/g,"")),1),f}}},Wfe=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,wN=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&VV(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&VV(t),parseInt(al.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function VV(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var iH=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},oH=(e,t={})=>{let{headers:r,query:n={}}=HV.HttpRequest.clone(e);for(let s of Object.keys(r)){let i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}},TN=e=>{e=HV.HttpRequest.clone(e);for(let t of Object.keys(e.headers))WV.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},aH=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===JV)continue;let s=uS.escapeUri(n);t.push(s);let i=e[n];typeof i=="string"?r[s]=`${s}=${uS.escapeUri(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${uS.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},Jfe=e=>Xfe(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Xfe=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,gS=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=UV.normalizeProvider(n),this.credentialProvider=UV.normalizeProvider(r)}createCanonicalRequest(t,r,n){let s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${aH(t)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n,s){let i=new this.sha256;i.update(Bu.toUint8Array(n));let o=await i.digest();return`${s}
${t}
${r}
${al.toHex(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let i of t.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return uS.escapeUri(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=Jfe(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},RN=class extends gS{headerFormatter=new IN;constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){super({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o})}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:c,signingRegion:l,signingService:d}=r,f=await this.credentialProvider();this.validateResolvedCredentials(f);let h=l??await this.regionProvider(),{longDate:p,shortDate:m}=this.formatDate(n);if(s>nH)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let E=hS(m,h,d??this.service),b=oH(TN(t),{unhoistableHeaders:o,hoistableHeaders:c});f.sessionToken&&(b.query[ON]=f.sessionToken),b.query[jV]=dS,b.query[KV]=`${f.accessKeyId}/${E}`,b.query[NN]=p,b.query[$V]=s.toString(10);let A=xN(b,i,a);return b.query[zV]=this.getCanonicalHeaderList(A),b.query[PN]=await this.getSignature(p,E,this.getSigningKey(f,h,m,d),this.createCanonicalRequest(b,A,await pS(t,this.sha256))),b}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){let a=i??await this.regionProvider(),{shortDate:c,longDate:l}=this.formatDate(n),d=hS(c,a,o??this.service),f=await pS({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);let p=al.toHex(await h.digest()),m=[eH,l,d,s,p,f].join(`
`);return this.signString(m,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:t.priorSignature}).then(o=>({message:t.message,signature:o}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let o=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(i,o,a,s));return c.update(Bu.toUint8Array(t)),al.toHex(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=i??await this.regionProvider(),l=TN(t),{longDate:d,shortDate:f}=this.formatDate(r),h=hS(f,c,o??this.service);l.headers[kN]=d,a.sessionToken&&(l.headers[XV]=a.sessionToken);let p=await pS(l,this.sha256);!iH(mS,l.headers)&&this.applyChecksum&&(l.headers[mS]=p);let m=xN(l,s,n),E=await this.getSignature(d,h,this.getSigningKey(a,c,f,o),this.createCanonicalRequest(l,m,p));return l.headers[DN]=`${dS} Credential=${a.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(m)}, Signature=${E}`,l}async getSignature(t,r,n,s){let i=await this.createStringToSign(t,r,s,dS),o=new this.sha256(await n);return o.update(Bu.toUint8Array(i)),al.toHex(await o.digest())}getSigningKey(t,r,n,s){return sH(this.sha256,t,n,r,s||this.service)}},Yfe={SignatureV4a:null};ft.ALGORITHM_IDENTIFIER=dS;ft.ALGORITHM_IDENTIFIER_V4A=$fe;ft.ALGORITHM_QUERY_PARAM=jV;ft.ALWAYS_UNSIGNABLE_HEADERS=YV;ft.AMZ_DATE_HEADER=kN;ft.AMZ_DATE_QUERY_PARAM=NN;ft.AUTH_HEADER=DN;ft.CREDENTIAL_QUERY_PARAM=KV;ft.DATE_HEADER=GV;ft.EVENT_ALGORITHM_IDENTIFIER=eH;ft.EXPIRES_QUERY_PARAM=$V;ft.GENERATED_HEADERS=WV;ft.HOST_HEADER=Kfe;ft.KEY_TYPE_IDENTIFIER=BN;ft.MAX_CACHE_SIZE=rH;ft.MAX_PRESIGNED_TTL=nH;ft.PROXY_HEADER_PATTERN=QV;ft.REGION_SET_PARAM=jfe;ft.SEC_HEADER_PATTERN=ZV;ft.SHA256_HEADER=mS;ft.SIGNATURE_HEADER=JV;ft.SIGNATURE_QUERY_PARAM=PN;ft.SIGNED_HEADERS_QUERY_PARAM=zV;ft.SignatureV4=RN;ft.SignatureV4Base=gS;ft.TOKEN_HEADER=XV;ft.TOKEN_QUERY_PARAM=ON;ft.UNSIGNABLE_PATTERNS=zfe;ft.UNSIGNED_PAYLOAD=tH;ft.clearCredentialCache=Gfe;ft.createScope=hS;ft.getCanonicalHeaders=xN;ft.getCanonicalQuery=aH;ft.getPayloadHash=pS;ft.getSigningKey=sH;ft.hasHeader=iH;ft.moveHeadersToQuery=oH;ft.prepareRequest=TN;ft.signatureV4aContainer=Yfe});function Qfe(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=_N(t,CN,lS):r?n=sl(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function Zfe(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var LN,Lu,cH,lH=V(()=>{Mo();Ys();LN=$(yS()),Lu=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(l){l&&l!==t&&l!==n&&(r=!0),t=l;let d=Qfe(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),f=Zfe(e,d);r&&!f.attributed?(n=async h=>f(h).then(p=>tl(p,"CREDENTIALS_CODE","e")),n.memoized=f.memoized,n.configBound=f.configBound,n.attributed=!0):n=f},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:s=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:o}=e,a;return e.signer?a=sl(e.signer):e.regionInfoProvider?a=()=>sl(e.region)().then(async l=>[await e.regionInfoProvider(l,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},l]).then(([l,d])=>{let{signingRegion:f,signingService:h}=l;e.signingRegion=e.signingRegion||f||d,e.signingName=e.signingName||h||e.serviceId;let p={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:s},m=e.signerConstructor||LN.SignatureV4;return new m(p)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await sl(e.region)(),properties:{}},l);let d=l.signingRegion,f=l.signingName;e.signingRegion=e.signingRegion||d,e.signingName=e.signingName||f||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:s},p=e.signerConstructor||LN.SignatureV4;return new p(h)},Object.assign(e,{systemClockOffset:i,signingEscapePath:s,signer:a})},cH=Lu});var uH=V(()=>{eR();vq();wq();MV();lH()});var dH={};Wi(dH,{AWSSDKSigV4Signer:()=>ZT,AwsSdkSigV4ASigner:()=>Ym,AwsSdkSigV4Signer:()=>pi,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Nf,NODE_SIGV4A_CONFIG_OPTIONS:()=>FV,getBearerTokenEnvKey:()=>_E,resolveAWSSDKSigV4Config:()=>cH,resolveAwsSdkSigV4AConfig:()=>LV,resolveAwsSdkSigV4Config:()=>Lu,validateSigningProperties:()=>Rf});var FN=V(()=>{uH();rR()});function cl(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function ES(e){return e[MN]=!0,e}var MN,SS=V(()=>{MN=Symbol("@smithy/core/cbor::tagSymbol")});function pH(e){hr=e,Ec=new DataView(hr.buffer,hr.byteOffset,hr.byteLength)}function _a(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(hr[e]&224)>>5,n=hr[e]&31;switch(r){case 0:case 1:case 6:let s,i;if(n<24)s=n,i=1;else switch(n){case 24:case 25:case 26:case 27:let o=gH[n],a=o+1;if(i=a,t-e<a)throw new Error(`countLength ${o} greater than remaining buf len.`);let c=e+1;o===1?s=hr[c]:o===2?s=Ec.getUint16(c):o===4?s=Ec.getUint32(c):s=Ec.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return vt=i,UN(s);if(r===1){let o;return typeof s=="bigint"?o=BigInt(-1)-s:o=-1-s,vt=i,UN(o)}else if(n===2||n===3){let o=Eg(e+i,t),a=BigInt(0),c=e+i+vt;for(let l=c;l<c+o;++l)a=a<<BigInt(8)|BigInt(hr[l]);return vt=i+vt+o,n===3?-a-BigInt(1):a}else if(n===4){let o=_a(e+i,t),[a,c]=o,l=c<0?-1:1,d="0".repeat(Math.abs(a)+1)+String(BigInt(l)*BigInt(c)),f,h=c<0?"-":"";return f=a===0?d:d.slice(0,d.length+a)+"."+d.slice(a),f=f.replace(/^0+/g,""),f===""&&(f="0"),f[0]==="."&&(f="0"+f),f=h+f,vt=i+vt,lN(f)}else{let o=_a(e+i,t);return vt=i+vt,ES({tag:UN(s),value:o})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return ohe(e,t);case 5:return dhe(e,t);case 4:return lhe(e,t);case 2:return ahe(e,t)}else switch(r){case 3:return ihe(e,t);case 5:return uhe(e,t);case 4:return che(e,t);case 2:return zN(e,t)}default:return fhe(e,t)}}function mH(e,t,r){return rhe&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):fH?fH.decode(e.subarray(t,r)):(0,hH.toUtf8)(e.subarray(t,r))}function nhe(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function she(e,t){let r=e>>7,n=(e&124)>>2,s=(e&3)<<8|t,i=r===0?1:-1,o,a;if(n===0){if(s===0)return 0;o=Math.pow(2,-14),a=0}else{if(n===31)return s===0?i*(1/0):NaN;o=Math.pow(2,n-15),a=1}return a+=s/1024,i*(o*a)}function Eg(e,t){let r=hr[e]&31;if(r<24)return vt=1,r;if(r===24||r===25||r===26||r===27){let n=gH[r];if(vt=n+1,t-e<vt)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=e+1;return n===1?hr[s]:n===2?Ec.getUint16(s):n===4?Ec.getUint32(s):nhe(Ec.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function ihe(e,t){let r=Eg(e,t),n=vt;if(e+=n,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=mH(hr,e,e+r);return vt=n+r,s}function ohe(e,t){e+=1;let r=[];for(let n=e;e<t;){if(hr[e]===255){let c=cl(r.length);return c.set(r,0),vt=e-n+2,mH(c,0,c.length)}let s=(hr[e]&224)>>5,i=hr[e]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=zN(e,t);e+=vt;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function zN(e,t){let r=Eg(e,t),n=vt;if(e+=n,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=hr.subarray(e,e+r);return vt=n+r,s}function ahe(e,t){e+=1;let r=[];for(let n=e;e<t;){if(hr[e]===255){let c=cl(r.length);return c.set(r,0),vt=e-n+2,c}let s=(hr[e]&224)>>5,i=hr[e]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=zN(e,t);e+=vt;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function che(e,t){let r=Eg(e,t),n=vt;e+=n;let s=e,i=Array(r);for(let o=0;o<r;++o){let a=_a(e,t),c=vt;i[o]=a,e+=c}return vt=n+(e-s),i}function lhe(e,t){e+=1;let r=[];for(let n=e;e<t;){if(hr[e]===255)return vt=e-n+2,r;let s=_a(e,t);e+=vt,r.push(s)}throw new Error("expected break marker.")}function uhe(e,t){let r=Eg(e,t),n=vt;e+=n;let s=e,i={};for(let o=0;o<r;++o){if(e>=t)throw new Error("unexpected end of map payload.");let a=(hr[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let c=_a(e,t);e+=vt;let l=_a(e,t);e+=vt,i[c]=l}return vt=n+(e-s),i}function dhe(e,t){e+=1;let r=e,n={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(hr[e]===255)return vt=e-r+2,n;let s=(hr[e]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let i=_a(e,t);e+=vt;let o=_a(e,t);e+=vt,n[i]=o}throw new Error("expected break marker.")}function fhe(e,t){let r=hr[e]&31;switch(r){case 21:case 20:return vt=1,r===21;case 22:return vt=1,null;case 23:return vt=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return vt=3,she(hr[e+1],hr[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return vt=5,Ec.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return vt=9,Ec.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function UN(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var hH,the,rhe,hr,Ec,fH,vt,gH,yH=V(()=>{mi();hH=$(Dn());SS();the=typeof TextDecoder<"u",rhe=typeof Buffer<"u",hr=cl(0),Ec=new DataView(hr.buffer,hr.byteOffset,hr.byteLength),fH=the?new TextDecoder:null,vt=0;gH={24:1,25:2,26:4,27:8}});function GN(e){Qe.byteLength-Ve<e&&(Ve<16e6?_S(Math.max(Qe.byteLength*4,Qe.byteLength+e)):_S(Qe.byteLength+e+16e6))}function WN(){let e=cl(Ve);return e.set(Qe.subarray(0,Ve),0),Ve=0,e}function _S(e){let t=Qe;Qe=cl(e),t&&(t.copy?t.copy(Qe,0,0,t.byteLength):Qe.set(t,0)),_c=new DataView(Qe.buffer,Qe.byteOffset,Qe.byteLength)}function Cc(e,t){t<24?Qe[Ve++]=e<<5|t:t<256?(Qe[Ve++]=e<<5|24,Qe[Ve++]=t):t<65536?(Qe[Ve++]=e<<5|25,_c.setUint16(Ve,t),Ve+=2):t<2**32?(Qe[Ve++]=e<<5|26,_c.setUint32(Ve,t),Ve+=4):(Qe[Ve++]=e<<5|27,_c.setBigUint64(Ve,typeof t=="bigint"?t:BigInt(t)),Ve+=8)}function CH(e){let t=[e];for(;t.length;){let r=t.pop();if(GN(typeof r=="string"?r.length*4:64),typeof r=="string"){if(EH)Cc(3,Buffer.byteLength(r)),Ve+=Qe.write(r,Ve);else{let n=(0,SH.fromUtf8)(r);Cc(3,n.byteLength),Qe.set(n,Ve),Ve+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,i=n?r:-r-1;i<24?Qe[Ve++]=s<<5|i:i<256?(Qe[Ve++]=s<<5|24,Qe[Ve++]=i):i<65536?(Qe[Ve++]=s<<5|25,Qe[Ve++]=i>>8,Qe[Ve++]=i):i<4294967296?(Qe[Ve++]=s<<5|26,_c.setUint32(Ve,i),Ve+=4):(Qe[Ve++]=s<<5|27,_c.setBigUint64(Ve,BigInt(i)),Ve+=8);continue}Qe[Ve++]=251,_c.setFloat64(Ve,r),Ve+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,i=n?r:-r-BigInt(1),o=Number(i);if(o<24)Qe[Ve++]=s<<5|o;else if(o<256)Qe[Ve++]=s<<5|24,Qe[Ve++]=o;else if(o<65536)Qe[Ve++]=s<<5|25,Qe[Ve++]=o>>8,Qe[Ve++]=o&255;else if(o<4294967296)Qe[Ve++]=s<<5|26,_c.setUint32(Ve,o),Ve+=4;else if(i<BigInt("18446744073709551616"))Qe[Ve++]=s<<5|27,_c.setBigUint64(Ve,i),Ve+=8;else{let a=i.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),l=i,d=0;for(;c.byteLength-++d>=0;)c[c.byteLength-d]=Number(l&BigInt(255)),l>>=BigInt(8);GN(c.byteLength*2),Qe[Ve++]=n?194:195,EH?Cc(2,Buffer.byteLength(c)):Cc(2,c.byteLength),Qe.set(c,Ve),Ve+=c.byteLength}continue}else if(r===null){Qe[Ve++]=246;continue}else if(typeof r=="boolean"){Qe[Ve++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)t.push(r[n]);Cc(4,r.length);continue}else if(typeof r.byteLength=="number"){GN(r.length*2),Cc(2,r.length),Qe.set(r,Ve),Ve+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof Yr){let s=r.string.indexOf("."),i=s===-1?0:s-r.string.length+1,o=BigInt(r.string.replace(".",""));Qe[Ve++]=196,t.push(o),t.push(i),Cc(4,2);continue}if(r[MN])if("tag"in r&&"value"in r){t.push(r.value),Cc(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let i=n[s];t.push(r[i]),t.push(i)}Cc(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var SH,EH,hhe,Qe,_c,Ve,_H=V(()=>{mi();SH=$(Dn());SS();EH=typeof Buffer<"u",hhe=2048,Qe=cl(hhe),_c=new DataView(Qe.buffer,Qe.byteOffset,Qe.byteLength),Ve=0});var JN,bH=V(()=>{yH();_H();JN={deserialize(e){return pH(e),_a(0,e.length)},serialize(e){try{return CH(e),WN()}catch(t){throw WN(),t}},resizeEncodingBuffer(e){_S(e)}}});var bS,vS,AS=V(()=>{SS();bS=e=>ES({tag:1,value:e.getTime()/1e3}),vS=(e,t)=>{let r=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i};if(t.__type!==void 0)return r(t.__type);let n=Object.keys(t).find(s=>s.toLowerCase()==="code");if(n&&t[n]!==void 0)return r(t[n])}});var QN,xS,XN,YN,ZN=V(()=>{gi();on();mi();QN=$(ys());bH();AS();xS=class extends Xs{createSerializer(){let t=new XN;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new YN;return t.setSerdeContext(this.serdeContext),t}},XN=class extends Xs{value;write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let n=qe.of(t);if(r==null)return n.isIdempotencyToken()?(0,Ca.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??QN.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?bS(new Date(Number(r)/1e3|0)):bS(r);if(typeof r=="function"||typeof r=="object"){let s=r;if(n.isListSchema()&&Array.isArray(s)){let o=!!n.getMergedTraits().sparse,a=[],c=0;for(let l of s){let d=this.serialize(n.getValueSchema(),l);(d!=null||o)&&(a[c++]=d)}return a}if(s instanceof Date)return bS(s);let i={};if(n.isMapSchema()){let o=!!n.getMergedTraits().sparse;for(let a of Object.keys(s)){let c=this.serialize(n.getValueSchema(),s[a]);(c!=null||o)&&(i[a]=c)}}else if(n.isStructSchema())for(let[o,a]of n.structIterator()){let c=this.serialize(a,s[o]);c!=null&&(i[o]=c)}else if(n.isDocumentSchema())for(let o of Object.keys(s))i[o]=this.serialize(n.getValueSchema(),s[o]);return i}return r}flush(){let t=JN.serialize(this.value);return this.value=void 0,t}},YN=class extends Xs{read(t,r){let n=JN.deserialize(r);return this.readValue(t,n)}readValue(t,r){let n=qe.of(t);if(n.isTimestampSchema()&&typeof r=="number")return dg(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??QN.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let i=[],o=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let l=this.readValue(o,c);(l!=null||a)&&i.push(l)}return i}let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse,o=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(o,r[a]);(c!=null||i)&&(s[a]=c)}}else if(n.isStructSchema())for(let[i,o]of n.structIterator())s[i]=this.readValue(o,r[i]);return s}else return r}}});var vH,IS,AH=V(()=>{gi();on();vH=$(Ns());ZN();AS();IS=class extends mc{codec=new xS;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),qo(t.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:i,operation:o}=(0,vH.getSmithyContext)(n),a=`/service/${i}/operation/${o}`;return s.path.endsWith("/")?s.path+=a.slice(1):s.path+=a,s}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,s,i){let o=vS(n,s)??"Unknown",a=this.options.defaultNamespace;o.includes("#")&&([a]=o.split("#"));let c={$metadata:i,$response:n,$fault:n.statusCode<=500?"client":"server"},l=kn.for(a),d;try{d=l.getSchema(o)}catch{s.Message&&(s.message=s.Message);let A=kn.for("smithy.ts.sdk.synthetic."+a),R=A.getBaseException();if(R){let D=A.getErrorCtor(R);throw Object.assign(new D({name:o}),c,s)}throw Object.assign(new Error(o),c,s)}let f=qe.of(d),h=l.getErrorCtor(d),p=s.message??s.Message??"Unknown",m=new h(p),E={};for(let[b,A]of f.structIterator())E[b]=this.deserializer.readValue(A,s[b]);throw Object.assign(m,c,{$fault:f.getMergedTraits().error,message:p},E)}getDefaultContentType(){return"application/cbor"}}});var xH=V(()=>{AS();AH();ZN()});var Ji,jf=V(()=>{on();Ji=class{resolveRestContentType(t,r){let n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){let i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{let{httpQuery:a,httpQueryParams:c,httpHeader:l,httpLabel:d,httpPrefixHeaders:f}=o.getMergedTraits();return!a&&!c&&!l&&!d&&f===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,s,i,o){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let l={$metadata:i,$response:n,$fault:n.statusCode<500?"client":"server"},d=kn.for(a);try{return{errorSchema:o?.(d,c)??d.getSchema(t),errorMetadata:l}}catch{s.message=s.message??s.Message??"UnknownError";let h=kn.for("smithy.ts.sdk.synthetic."+a),p=h.getBaseException();if(p){let m=h.getErrorCtor(p)??Error;throw Object.assign(new m({name:c}),l,s)}throw Object.assign(new Error(c),l,s)}}setQueryCompatError(t,r){let n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){let[s,i]=n.split(";"),o=Object.entries(t),a={Code:s,Type:i};Object.assign(t,a);for(let[c,l]of o)a[c]=l;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var e1,IH=V(()=>{xH();on();jf();e1=class extends IS{awsQueryCompatible;mixin=new Ji;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(t,r,n,s,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let o=vS(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),l=qe.of(a),d=s.message??s.Message??"Unknown",f=kn.for(a[1]).getErrorCtor(a)??Error,h=new f(d),p={};for(let[m,E]of l.structIterator())p[m]=this.deserializer.readValue(E,s[m]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,p),Object.assign(h,c,{$fault:l.getMergedTraits().error,message:d},p)}}});var phe,mhe,ghe,wH=V(()=>{phe=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},mhe=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},ghe=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var Os,fl=V(()=>{Os=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function TH(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new Yr(n,"bigDecimal"):BigInt(n)}return t}var RH=V(()=>{mi()});var DH=S(OH=>{"use strict";var Fu=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},hl=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,t1=()=>{let e=[],t=[],r=!1,n=new Set,s=f=>f.sort((h,p)=>NH[p.step]-NH[h.step]||PH[p.priority||"normal"]-PH[h.priority||"normal"]),i=f=>{let h=!1,p=m=>{let E=Fu(m.name,m.aliases);if(E.includes(f)){h=!0;for(let b of E)n.delete(b);return!1}return!0};return e=e.filter(p),t=t.filter(p),h},o=f=>{let h=!1,p=m=>{if(m.middleware===f){h=!0;for(let E of Fu(m.name,m.aliases))n.delete(E);return!1}return!0};return e=e.filter(p),t=t.filter(p),h},a=f=>(e.forEach(h=>{f.add(h.middleware,{...h})}),t.forEach(h=>{f.addRelativeTo(h.middleware,{...h})}),f.identifyOnResolve?.(d.identifyOnResolve()),f),c=f=>{let h=[];return f.before.forEach(p=>{p.before.length===0&&p.after.length===0?h.push(p):h.push(...c(p))}),h.push(f),f.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?h.push(p):h.push(...c(p))}),h},l=(f=!1)=>{let h=[],p=[],m={};return e.forEach(b=>{let A={...b,before:[],after:[]};for(let R of Fu(A.name,A.aliases))m[R]=A;h.push(A)}),t.forEach(b=>{let A={...b,before:[],after:[]};for(let R of Fu(A.name,A.aliases))m[R]=A;p.push(A)}),p.forEach(b=>{if(b.toMiddleware){let A=m[b.toMiddleware];if(A===void 0){if(f)return;throw new Error(`${b.toMiddleware} is not found when adding ${hl(b.name,b.aliases)} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&A.after.push(b),b.relation==="before"&&A.before.push(b)}}),s(h).map(c).reduce((b,A)=>(b.push(...A),b),[])},d={add:(f,h={})=>{let{name:p,override:m,aliases:E}=h,b={step:"initialize",priority:"normal",middleware:f,...h},A=Fu(p,E);if(A.length>0){if(A.some(R=>n.has(R))){if(!m)throw new Error(`Duplicate middleware name '${hl(p,E)}'`);for(let R of A){let D=e.findIndex(z=>z.name===R||z.aliases?.some(G=>G===R));if(D===-1)continue;let K=e[D];if(K.step!==b.step||b.priority!==K.priority)throw new Error(`"${hl(K.name,K.aliases)}" middleware with ${K.priority} priority in ${K.step} step cannot be overridden by "${hl(p,E)}" middleware with ${b.priority} priority in ${b.step} step.`);e.splice(D,1)}}for(let R of A)n.add(R)}e.push(b)},addRelativeTo:(f,h)=>{let{name:p,override:m,aliases:E}=h,b={middleware:f,...h},A=Fu(p,E);if(A.length>0){if(A.some(R=>n.has(R))){if(!m)throw new Error(`Duplicate middleware name '${hl(p,E)}'`);for(let R of A){let D=t.findIndex(z=>z.name===R||z.aliases?.some(G=>G===R));if(D===-1)continue;let K=t[D];if(K.toMiddleware!==b.toMiddleware||K.relation!==b.relation)throw new Error(`"${hl(K.name,K.aliases)}" middleware ${K.relation} "${K.toMiddleware}" middleware cannot be overridden by "${hl(p,E)}" middleware ${b.relation} "${b.toMiddleware}" middleware.`);t.splice(D,1)}}for(let R of A)n.add(R)}t.push(b)},clone:()=>a(t1()),use:f=>{f.applyToStack(d)},remove:f=>typeof f=="string"?i(f):o(f),removeByTag:f=>{let h=!1,p=m=>{let{tags:E,name:b,aliases:A}=m;if(E&&E.includes(f)){let R=Fu(b,A);for(let D of R)n.delete(D);return h=!0,!1}return!0};return e=e.filter(p),t=t.filter(p),h},concat:f=>{let h=a(t1());return h.use(f),h.identifyOnResolve(r||h.identifyOnResolve()||(f.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>l(!0).map(f=>{let h=f.step??f.relation+" "+f.toMiddleware;return hl(f.name,f.aliases)+" - "+h}),identifyOnResolve(f){return typeof f=="boolean"&&(r=f),r},resolve:(f,h)=>{for(let p of l().map(m=>m.middleware).reverse())f=p(f,h);return r&&console.log(d.identify()),f}};return d},NH={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},PH={high:3,normal:2,low:1};OH.constructStack=t1});var Ct=S(ar=>{"use strict";var LH=DH(),u1=(gi(),St(vV)),n1=dc(),yhe=(on(),St(m6)),kH=(mi(),St(cV)),s1=class{config;middlewareStack=LH.constructStack();initConfig;handlers;constructor(t){this.config=t}send(t,r,n){let s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0,a;if(o){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,s),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(t).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},r1="***SensitiveInformation***";function i1(e,t){if(t==null)return t;let r=yhe.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return r1;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return r1}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return r1}else if(r.isStructSchema()&&typeof t=="object"){let n=t,s={};for(let[i,o]of r.structIterator())n[i]!=null&&(s[i]=i1(o,n[i]));return s}return t}var wS=class{middlewareStack=LH.constructStack();schema;static classBuilder(){return new o1}resolveMiddlewareWithContext(t,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:d,CommandCtor:f}){for(let b of s.bind(this)(f,t,r,n))this.middlewareStack.use(b);let h=t.concat(this.middlewareStack),{logger:p}=r,m={logger:p,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[n1.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...d},{requestHandler:E}=r;return h.resolve(b=>E.handle(b.request,n||{}),m)}},o1=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends wS{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.input=n??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(n,s,i){let o=t._operationSchema,a=o?.[4]??o?.input,c=o?.[5]??o?.output;return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(o?i1.bind(null,a):l=>l),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(o?i1.bind(null,c):l=>l),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},Ehe="***SensitiveInformation***",She=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],s=async function(o,a,c){let l=new n(o);if(typeof a=="function")this.send(l,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},c)}else return this.send(l,a)},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[i]=s}},a1=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},FH=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},MH=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let s=_he(e),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:t?.code||t?.Code||n||i||"UnknownError",$fault:"client",$metadata:s});throw FH(o,t)},Che=e=>({output:t,parsedBody:r,errorCode:n})=>{MH({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},_he=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),bhe=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},BH=!1,vhe=e=>{e&&!BH&&parseInt(e.substring(1,e.indexOf(".")))<16&&(BH=!0)},Ahe=e=>{let t=[];for(let r in n1.AlgorithmId){let n=n1.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},xhe=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},Ihe=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),whe=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},UH=e=>Object.assign(Ahe(e),Ihe(e)),The=UH,Rhe=e=>Object.assign(xhe(e),whe(e)),Nhe=e=>Array.isArray(e)?e:[e],qH=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=qH(e[r]));return e},Phe=e=>e!=null,c1=class{trace(){}debug(){}info(){}warn(){}error(){}};function VH(e,t,r){let n,s,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return s=t,i=r,khe(n,s,i);i=t}for(let o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}HH(n,null,i,o)}return n}var Ohe=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},Dhe=(e,t)=>{let r={};for(let n in t)HH(r,e,t,n);return r},khe=(e,t,r)=>VH(e,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[t,i()]:n[s]=[t,i],n),{})),HH=(e,t,r,n)=>{if(t!==null){let o=r[n];typeof o=="function"&&(o=[,o]);let[a=Bhe,c=Lhe,l=n]=o;(typeof a=="function"&&a(t[l])||typeof a!="function"&&a)&&(e[n]=c(t[l]));return}let[s,i]=r[n];if(typeof i=="function"){let o,a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[n]=o:c&&(e[n]=i())}else{let o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(e[n]=i)}},Bhe=e=>e!=null,Lhe=e=>e,Fhe=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},Mhe=e=>e.toISOString().replace(".000Z","Z"),l1=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(l1);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=l1(e[r]));return t}return e};Object.defineProperty(ar,"collectBody",{enumerable:!0,get:function(){return u1.collectBody}});Object.defineProperty(ar,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return u1.extendedEncodeURIComponent}});Object.defineProperty(ar,"resolvedPath",{enumerable:!0,get:function(){return u1.resolvedPath}});ar.Client=s1;ar.Command=wS;ar.NoOpLogger=c1;ar.SENSITIVE_STRING=Ehe;ar.ServiceException=a1;ar._json=l1;ar.convertMap=Ohe;ar.createAggregatedClient=She;ar.decorateServiceException=FH;ar.emitWarningIfUnsupportedVersion=vhe;ar.getArrayIfSingleItem=Nhe;ar.getDefaultClientConfiguration=The;ar.getDefaultExtensionConfiguration=UH;ar.getValueFromTextNode=qH;ar.isSerializableHeaderValue=Phe;ar.loadConfigsForDefaultMode=bhe;ar.map=VH;ar.resolveDefaultRuntimeConfig=Rhe;ar.serializeDateTime=Mhe;ar.serializeFloat=Fhe;ar.take=Dhe;ar.throwDefaultError=MH;ar.withBaseException=Che;Object.keys(kH).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ar,e)&&Object.defineProperty(ar,e,{enumerable:!0,get:function(){return kH[e]}})})});var jH,KH,TS,d1=V(()=>{jH=$(Ct()),KH=$(Dn()),TS=(e,t)=>(0,jH.collectBody)(e,t).then(r=>(t?.utf8Encoder??KH.toUtf8)(r))});var Kf,f1,Mu,Sg=V(()=>{d1();Kf=(e,t)=>TS(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),f1=async(e,t)=>{let r=await Kf(e,t);return r.message=r.message??r.Message,r},Mu=(e,t)=>{let r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(e.headers,"x-amzn-errortype");if(s!==void 0)return n(e.headers[s]);if(t&&typeof t=="object"){let i=r(t,"code");if(i&&t[i]!==void 0)return n(t[i]);if(t.__type!==void 0)return n(t.__type)}}});var zH,Cg,h1=V(()=>{gi();on();mi();zH=$(ys());fl();RH();Sg();Cg=class extends Os{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,TH):await Kf(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let n=r!==null&&typeof r=="object",s=qe.of(t);if(s.isListSchema()&&Array.isArray(r)){let o=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(let l of r)(c||l!=null)&&a.push(this._read(o,l));return a}else if(s.isMapSchema()&&n){let o=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(let[l,d]of Object.entries(r))(c||d!=null)&&(a[l]=this._read(o,d));return a}else if(s.isStructSchema()&&n){let o={};for(let[a,c]of s.structIterator()){let l=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,d=this._read(c,r[l]);d!=null&&(o[a]=d)}return o}if(s.isBlobSchema()&&typeof r=="string")return(0,zH.fromBase64)(r);let i=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&i&&(i==="application/json"||i.endsWith("+json")))return Js.from(r);if(s.isTimestampSchema()&&r!=null)switch(Bi(s,this.settings)){case 5:return XR(r);case 6:return YR(r);case 7:return QR(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof Yr)return r;let o=r;return o.type==="bigDecimal"&&"string"in o?new Yr(o.string,o.type):new Yr(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(s.isDocumentSchema())if(n){let o=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof Yr?o[a]=c:o[a]=this._read(s,c);return o}else return structuredClone(r);return r}}});var $H,RS,GH=V(()=>{mi();$H="\u039D",RS=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof Yr){let n=`${$H+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${$H+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var WH,_g,p1=V(()=>{gi();on();mi();WH=$(ys());fl();GH();_g=class extends Os{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=qe.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=qe.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new RS;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,n){let s=r!==null&&typeof r=="object",i=qe.of(t);if(i.isListSchema()&&Array.isArray(r)){let o=i.getValueSchema(),a=[],c=!!i.getMergedTraits().sparse;for(let l of r)(c||l!=null)&&a.push(this._write(o,l));return a}else if(i.isMapSchema()&&s){let o=i.getValueSchema(),a={},c=!!i.getMergedTraits().sparse;for(let[l,d]of Object.entries(r))(c||d!=null)&&(a[l]=this._write(o,d));return a}else if(i.isStructSchema()&&s){let o={};for(let[a,c]of i.structIterator()){let l=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,d=this._write(c,r[a],i);d!==void 0&&(o[l]=d)}return o}if(!(r===null&&n?.isStructSchema())){if(i.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||i.isDocumentSchema()&&r instanceof Uint8Array)return i===this.rootSchema?r:this.serdeContext?.base64Encoder?this.serdeContext?.base64Encoder(r):(0,WH.toBase64)(r);if((i.isTimestampSchema()||i.isDocumentSchema())&&r instanceof Date)switch(Bi(i,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return ug(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(i.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(i.isStringSchema()){if(typeof r>"u"&&i.isIdempotencyToken())return(0,Ca.v4)();let o=i.getMergedTraits().mediaType;if(r!=null&&o&&(o==="application/json"||o.endsWith("+json")))return Js.from(r)}if(i.isDocumentSchema())if(s){let o=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof Yr?o[a]=c:o[a]=this._write(i,c);return o}else return structuredClone(r);return r}}}});var Uu,NS=V(()=>{fl();h1();p1();Uu=class extends Os{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new _g(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Cg(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var qu,PS=V(()=>{gi();on();jf();NS();Sg();qu=class extends mc{serializer;deserializer;serviceTarget;codec;mixin=new Ji;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new Uu({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(qo(t.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(t,r,n,s,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let o=Mu(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),l=qe.of(a),d=s.message??s.Message??"Unknown",f=kn.for(a[1]).getErrorCtor(a)??Error,h=new f(d),p={};for(let[m,E]of l.structIterator()){let b=E.getMergedTraits().jsonName??m;p[m]=this.codec.createDeserializer().readObject(E,s[b])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,p),Object.assign(h,c,{$fault:l.getMergedTraits().error,message:d},p)}}});var m1,JH=V(()=>{PS();m1=class extends qu{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var g1,XH=V(()=>{PS();g1=class extends qu{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var y1,YH=V(()=>{gi();on();jf();NS();Sg();y1=class extends Tu{serializer;deserializer;codec;mixin=new Ji;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Uu(r),this.serializer=new Pu(this.codec.createSerializer(),r),this.deserializer=new Nu(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n),i=qe.of(t.input);if(!s.headers["content-type"]){let o=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);o&&(s.headers["content-type"]=o)}return s.headers["content-type"]&&!s.body&&(s.body="{}"),s}async handleError(t,r,n,s,i){let o=Mu(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),l=qe.of(a),d=s.message??s.Message??"Unknown",f=kn.for(a[1]).getErrorCtor(a)??Error,h=new f(d);await this.deserializeHttpMessage(a,r,n,s);let p={};for(let[m,E]of l.structIterator()){let b=E.getMergedTraits().jsonName??m;p[m]=this.codec.createDeserializer().readObject(E,s[b])}throw Object.assign(h,c,{$fault:l.getMergedTraits().error,message:d},p)}getDefaultContentType(){return"application/json"}}});var QH,Uhe,ZH=V(()=>{QH=$(Ct()),Uhe=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,QH.expectUnion)(e)}});var tj=S((bst,ej)=>{(()=>{"use strict";var e={d:(g,y)=>{for(var N in y)e.o(y,N)&&!e.o(g,N)&&Object.defineProperty(g,N,{enumerable:!0,get:y[N]})},o:(g,y)=>Object.prototype.hasOwnProperty.call(g,y),r:g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>Qc,XMLParser:()=>Vle,XMLValidator:()=>Jle});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(g,y){let N=[],U=y.exec(g);for(;U;){let L=[];L.startIndex=y.lastIndex-U[0].length;let M=U.length;for(let Q=0;Q<M;Q++)L.push(U[Q]);N.push(L),U=y.exec(g)}return N}let i=function(g){return n.exec(g)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function a(g,y){y=Object.assign({},o,y);let N=[],U=!1,L=!1;g[0]==="\uFEFF"&&(g=g.substr(1));for(let M=0;M<g.length;M++)if(g[M]==="<"&&g[M+1]==="?"){if(M+=2,M=l(g,M),M.err)return M}else{if(g[M]!=="<"){if(c(g[M]))continue;return A("InvalidChar","char '"+g[M]+"' is not expected.",D(g,M))}{let Q=M;if(M++,g[M]==="!"){M=d(g,M);continue}{let W=!1;g[M]==="/"&&(W=!0,M++);let te="";for(;M<g.length&&g[M]!==">"&&g[M]!==" "&&g[M]!=="	"&&g[M]!==`
`&&g[M]!=="\r";M++)te+=g[M];if(te=te.trim(),te[te.length-1]==="/"&&(te=te.substring(0,te.length-1),M--),!i(te)){let He;return He=te.trim().length===0?"Invalid space after '<'.":"Tag '"+te+"' is an invalid name.",A("InvalidTag",He,D(g,M))}let Ce=p(g,M);if(Ce===!1)return A("InvalidAttr","Attributes for '"+te+"' have open quote.",D(g,M));let Ze=Ce.value;if(M=Ce.index,Ze[Ze.length-1]==="/"){let He=M-Ze.length;Ze=Ze.substring(0,Ze.length-1);let Mt=E(Ze,y);if(Mt!==!0)return A(Mt.err.code,Mt.err.msg,D(g,He+Mt.err.line));U=!0}else if(W){if(!Ce.tagClosed)return A("InvalidTag","Closing tag '"+te+"' doesn't have proper closing.",D(g,M));if(Ze.trim().length>0)return A("InvalidTag","Closing tag '"+te+"' can't have attributes or invalid starting.",D(g,Q));if(N.length===0)return A("InvalidTag","Closing tag '"+te+"' has not been opened.",D(g,Q));{let He=N.pop();if(te!==He.tagName){let Mt=D(g,He.tagStartPos);return A("InvalidTag","Expected closing tag '"+He.tagName+"' (opened in line "+Mt.line+", col "+Mt.col+") instead of closing tag '"+te+"'.",D(g,Q))}N.length==0&&(L=!0)}}else{let He=E(Ze,y);if(He!==!0)return A(He.err.code,He.err.msg,D(g,M-Ze.length+He.err.line));if(L===!0)return A("InvalidXml","Multiple possible root nodes found.",D(g,M));y.unpairedTags.indexOf(te)!==-1||N.push({tagName:te,tagStartPos:Q}),U=!0}for(M++;M<g.length;M++)if(g[M]==="<"){if(g[M+1]==="!"){M++,M=d(g,M);continue}if(g[M+1]!=="?")break;if(M=l(g,++M),M.err)return M}else if(g[M]==="&"){let He=b(g,M);if(He==-1)return A("InvalidChar","char '&' is not expected.",D(g,M));M=He}else if(L===!0&&!c(g[M]))return A("InvalidXml","Extra text at the end",D(g,M));g[M]==="<"&&M--}}}return U?N.length==1?A("InvalidTag","Unclosed tag '"+N[0].tagName+"'.",D(g,N[0].tagStartPos)):!(N.length>0)||A("InvalidXml","Invalid '"+JSON.stringify(N.map((M=>M.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):A("InvalidXml","Start tag expected.",1)}function c(g){return g===" "||g==="	"||g===`
`||g==="\r"}function l(g,y){let N=y;for(;y<g.length;y++)if(!(g[y]!="?"&&g[y]!=" ")){let U=g.substr(N,y-N);if(y>5&&U==="xml")return A("InvalidXml","XML declaration allowed only at the start of the document.",D(g,y));if(g[y]=="?"&&g[y+1]==">"){y++;break}}return y}function d(g,y){if(g.length>y+5&&g[y+1]==="-"&&g[y+2]==="-"){for(y+=3;y<g.length;y++)if(g[y]==="-"&&g[y+1]==="-"&&g[y+2]===">"){y+=2;break}}else if(g.length>y+8&&g[y+1]==="D"&&g[y+2]==="O"&&g[y+3]==="C"&&g[y+4]==="T"&&g[y+5]==="Y"&&g[y+6]==="P"&&g[y+7]==="E"){let N=1;for(y+=8;y<g.length;y++)if(g[y]==="<")N++;else if(g[y]===">"&&(N--,N===0))break}else if(g.length>y+9&&g[y+1]==="["&&g[y+2]==="C"&&g[y+3]==="D"&&g[y+4]==="A"&&g[y+5]==="T"&&g[y+6]==="A"&&g[y+7]==="["){for(y+=8;y<g.length;y++)if(g[y]==="]"&&g[y+1]==="]"&&g[y+2]===">"){y+=2;break}}return y}let f='"',h="'";function p(g,y){let N="",U="",L=!1;for(;y<g.length;y++){if(g[y]===f||g[y]===h)U===""?U=g[y]:U!==g[y]||(U="");else if(g[y]===">"&&U===""){L=!0;break}N+=g[y]}return U===""&&{value:N,index:y,tagClosed:L}}let m=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function E(g,y){let N=s(g,m),U={};for(let L=0;L<N.length;L++){if(N[L][1].length===0)return A("InvalidAttr","Attribute '"+N[L][2]+"' has no space in starting.",K(N[L]));if(N[L][3]!==void 0&&N[L][4]===void 0)return A("InvalidAttr","Attribute '"+N[L][2]+"' is without value.",K(N[L]));if(N[L][3]===void 0&&!y.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+N[L][2]+"' is not allowed.",K(N[L]));let M=N[L][2];if(!R(M))return A("InvalidAttr","Attribute '"+M+"' is an invalid name.",K(N[L]));if(U.hasOwnProperty(M))return A("InvalidAttr","Attribute '"+M+"' is repeated.",K(N[L]));U[M]=1}return!0}function b(g,y){if(g[++y]===";")return-1;if(g[y]==="#")return(function(U,L){let M=/\d/;for(U[L]==="x"&&(L++,M=/[\da-fA-F]/);L<U.length;L++){if(U[L]===";")return L;if(!U[L].match(M))break}return-1})(g,++y);let N=0;for(;y<g.length;y++,N++)if(!(g[y].match(/\w/)&&N<20)){if(g[y]===";")break;return-1}return y}function A(g,y,N){return{err:{code:g,msg:y,line:N.line||N,col:N.col}}}function R(g){return i(g)}function D(g,y){let N=g.substring(0,y).split(/\r?\n/);return{line:N.length,col:N[N.length-1].length+1}}function K(g){return g.startIndex+g[1].length}let z={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(g,y){return y},attributeValueProcessor:function(g,y){return y},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(g,y,N){return g},captureMetaData:!1},G;G=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class ye{constructor(y){this.tagname=y,this.child=[],this[":@"]={}}add(y,N){y==="__proto__"&&(y="#__proto__"),this.child.push({[y]:N})}addChild(y,N){y.tagname==="__proto__"&&(y.tagname="#__proto__"),y[":@"]&&Object.keys(y[":@"]).length>0?this.child.push({[y.tagname]:y.child,":@":y[":@"]}):this.child.push({[y.tagname]:y.child}),N!==void 0&&(this.child[this.child.length-1][G]={startIndex:N})}static getMetaDataSymbol(){return G}}function he(g,y){let N={};if(g[y+3]!=="O"||g[y+4]!=="C"||g[y+5]!=="T"||g[y+6]!=="Y"||g[y+7]!=="P"||g[y+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{y+=9;let U=1,L=!1,M=!1,Q="";for(;y<g.length;y++)if(g[y]!=="<"||M)if(g[y]===">"){if(M?g[y-1]==="-"&&g[y-2]==="-"&&(M=!1,U--):U--,U===0)break}else g[y]==="["?L=!0:Q+=g[y];else{if(L&&gr(g,"!ENTITY",y)){let W,te;y+=7,[W,te,y]=Me(g,y+1),te.indexOf("&")===-1&&(N[W]={regx:RegExp(`&${W};`,"g"),val:te})}else if(L&&gr(g,"!ELEMENT",y)){y+=8;let{index:W}=zt(g,y+1);y=W}else if(L&&gr(g,"!ATTLIST",y))y+=8;else if(L&&gr(g,"!NOTATION",y)){y+=9;let{index:W}=Ue(g,y+1);y=W}else{if(!gr(g,"!--",y))throw new Error("Invalid DOCTYPE");M=!0}U++,Q=""}if(U!==0)throw new Error("Unclosed DOCTYPE")}return{entities:N,i:y}}let xe=(g,y)=>{for(;y<g.length&&/\s/.test(g[y]);)y++;return y};function Me(g,y){y=xe(g,y);let N="";for(;y<g.length&&!/\s/.test(g[y])&&g[y]!=='"'&&g[y]!=="'";)N+=g[y],y++;if(Ot(N),y=xe(g,y),g.substring(y,y+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(g[y]==="%")throw new Error("Parameter entities are not supported");let U="";return[y,U]=Ge(g,y,"entity"),[N,U,--y]}function Ue(g,y){y=xe(g,y);let N="";for(;y<g.length&&!/\s/.test(g[y]);)N+=g[y],y++;Ot(N),y=xe(g,y);let U=g.substring(y,y+6).toUpperCase();if(U!=="SYSTEM"&&U!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${U}"`);y+=U.length,y=xe(g,y);let L=null,M=null;if(U==="PUBLIC")[y,L]=Ge(g,y,"publicIdentifier"),g[y=xe(g,y)]!=='"'&&g[y]!=="'"||([y,M]=Ge(g,y,"systemIdentifier"));else if(U==="SYSTEM"&&([y,M]=Ge(g,y,"systemIdentifier"),!M))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:N,publicIdentifier:L,systemIdentifier:M,index:--y}}function Ge(g,y,N){let U="",L=g[y];if(L!=='"'&&L!=="'")throw new Error(`Expected quoted string, found "${L}"`);for(y++;y<g.length&&g[y]!==L;)U+=g[y],y++;if(g[y]!==L)throw new Error(`Unterminated ${N} value`);return[++y,U]}function zt(g,y){y=xe(g,y);let N="";for(;y<g.length&&!/\s/.test(g[y]);)N+=g[y],y++;if(!Ot(N))throw new Error(`Invalid element name: "${N}"`);let U="";if(g[y=xe(g,y)]==="E"&&gr(g,"MPTY",y))y+=4;else if(g[y]==="A"&&gr(g,"NY",y))y+=2;else{if(g[y]!=="(")throw new Error(`Invalid Element Expression, found "${g[y]}"`);for(y++;y<g.length&&g[y]!==")";)U+=g[y],y++;if(g[y]!==")")throw new Error("Unterminated content model")}return{elementName:N,contentModel:U.trim(),index:y}}function gr(g,y,N){for(let U=0;U<y.length;U++)if(y[U]!==g[N+U+1])return!1;return!0}function Ot(g){if(i(g))return g;throw new Error(`Invalid entity name ${g}`)}let Dt=/^[-+]?0x[a-fA-F0-9]+$/,Be=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,fi={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},hi=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function sr(g){return typeof g=="function"?g:Array.isArray(g)?y=>{for(let N of g)if(typeof N=="string"&&y===N||N instanceof RegExp&&N.test(y))return!0}:()=>!1}class Tr{constructor(y){this.options=y,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(N,U)=>String.fromCodePoint(Number.parseInt(U,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(N,U)=>String.fromCodePoint(Number.parseInt(U,16))}},this.addExternalEntities=qr,this.parseXml=Kn,this.parseTextData=It,this.resolveNameSpace=ir,this.buildAttributesMap=An,this.isItStopNode=Wn,this.replaceEntitiesValue=$n,this.readStopNodeData=Jn,this.saveTextToParentTag=Gn,this.addChild=zn,this.ignoreAttributesFn=sr(this.options.ignoreAttributes)}}function qr(g){let y=Object.keys(g);for(let N=0;N<y.length;N++){let U=y[N];this.lastEntities[U]={regex:new RegExp("&"+U+";","g"),val:g[U]}}}function It(g,y,N,U,L,M,Q){if(g!==void 0&&(this.options.trimValues&&!U&&(g=g.trim()),g.length>0)){Q||(g=this.replaceEntitiesValue(g));let W=this.options.tagValueProcessor(y,g,N,L,M);return W==null?g:typeof W!=typeof g||W!==g?W:this.options.trimValues||g.trim()===g?On(g,this.options.parseTagValue,this.options.numberParseOptions):g}}function ir(g){if(this.options.removeNSPrefix){let y=g.split(":"),N=g.charAt(0)==="/"?"/":"";if(y[0]==="xmlns")return"";y.length===2&&(g=N+y[1])}return g}let fr=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function An(g,y,N){if(this.options.ignoreAttributes!==!0&&typeof g=="string"){let U=s(g,fr),L=U.length,M={};for(let Q=0;Q<L;Q++){let W=this.resolveNameSpace(U[Q][1]);if(this.ignoreAttributesFn(W,y))continue;let te=U[Q][4],Ce=this.options.attributeNamePrefix+W;if(W.length)if(this.options.transformAttributeName&&(Ce=this.options.transformAttributeName(Ce)),Ce==="__proto__"&&(Ce="#__proto__"),te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);let Ze=this.options.attributeValueProcessor(W,te,y);M[Ce]=Ze==null?te:typeof Ze!=typeof te||Ze!==te?Ze:On(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(M[Ce]=!0)}if(!Object.keys(M).length)return;if(this.options.attributesGroupName){let Q={};return Q[this.options.attributesGroupName]=M,Q}return M}}let Kn=function(g){g=g.replace(/\r\n?/g,`
`);let y=new ye("!xml"),N=y,U="",L="";for(let M=0;M<g.length;M++)if(g[M]==="<")if(g[M+1]==="/"){let Q=zr(g,">",M,"Closing Tag is not closed."),W=g.substring(M+2,Q).trim();if(this.options.removeNSPrefix){let Ze=W.indexOf(":");Ze!==-1&&(W=W.substr(Ze+1))}this.options.transformTagName&&(W=this.options.transformTagName(W)),N&&(U=this.saveTextToParentTag(U,N,L));let te=L.substring(L.lastIndexOf(".")+1);if(W&&this.options.unpairedTags.indexOf(W)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${W}>`);let Ce=0;te&&this.options.unpairedTags.indexOf(te)!==-1?(Ce=L.lastIndexOf(".",L.lastIndexOf(".")-1),this.tagsNodeStack.pop()):Ce=L.lastIndexOf("."),L=L.substring(0,Ce),N=this.tagsNodeStack.pop(),U="",M=Q}else if(g[M+1]==="?"){let Q=xn(g,M,!1,"?>");if(!Q)throw new Error("Pi Tag is not closed.");if(U=this.saveTextToParentTag(U,N,L),!(this.options.ignoreDeclaration&&Q.tagName==="?xml"||this.options.ignorePiTags)){let W=new ye(Q.tagName);W.add(this.options.textNodeName,""),Q.tagName!==Q.tagExp&&Q.attrExpPresent&&(W[":@"]=this.buildAttributesMap(Q.tagExp,L,Q.tagName)),this.addChild(N,W,L,M)}M=Q.closeIndex+1}else if(g.substr(M+1,3)==="!--"){let Q=zr(g,"-->",M+4,"Comment is not closed.");if(this.options.commentPropName){let W=g.substring(M+4,Q-2);U=this.saveTextToParentTag(U,N,L),N.add(this.options.commentPropName,[{[this.options.textNodeName]:W}])}M=Q}else if(g.substr(M+1,2)==="!D"){let Q=he(g,M);this.docTypeEntities=Q.entities,M=Q.i}else if(g.substr(M+1,2)==="!["){let Q=zr(g,"]]>",M,"CDATA is not closed.")-2,W=g.substring(M+9,Q);U=this.saveTextToParentTag(U,N,L);let te=this.parseTextData(W,N.tagname,L,!0,!1,!0,!0);te==null&&(te=""),this.options.cdataPropName?N.add(this.options.cdataPropName,[{[this.options.textNodeName]:W}]):N.add(this.options.textNodeName,te),M=Q+2}else{let Q=xn(g,M,this.options.removeNSPrefix),W=Q.tagName,te=Q.rawTagName,Ce=Q.tagExp,Ze=Q.attrExpPresent,He=Q.closeIndex;this.options.transformTagName&&(W=this.options.transformTagName(W)),N&&U&&N.tagname!=="!xml"&&(U=this.saveTextToParentTag(U,N,L,!1));let Mt=N;Mt&&this.options.unpairedTags.indexOf(Mt.tagname)!==-1&&(N=this.tagsNodeStack.pop(),L=L.substring(0,L.lastIndexOf("."))),W!==y.tagname&&(L+=L?"."+W:W);let or=M;if(this.isItStopNode(this.options.stopNodes,L,W)){let $t="";if(Ce.length>0&&Ce.lastIndexOf("/")===Ce.length-1)W[W.length-1]==="/"?(W=W.substr(0,W.length-1),L=L.substr(0,L.length-1),Ce=W):Ce=Ce.substr(0,Ce.length-1),M=Q.closeIndex;else if(this.options.unpairedTags.indexOf(W)!==-1)M=Q.closeIndex;else{let pa=this.readStopNodeData(g,te,He+1);if(!pa)throw new Error(`Unexpected end of ${te}`);M=pa.i,$t=pa.tagContent}let In=new ye(W);W!==Ce&&Ze&&(In[":@"]=this.buildAttributesMap(Ce,L,W)),$t&&($t=this.parseTextData($t,W,L,!0,Ze,!0,!0)),L=L.substr(0,L.lastIndexOf(".")),In.add(this.options.textNodeName,$t),this.addChild(N,In,L,or)}else{if(Ce.length>0&&Ce.lastIndexOf("/")===Ce.length-1){W[W.length-1]==="/"?(W=W.substr(0,W.length-1),L=L.substr(0,L.length-1),Ce=W):Ce=Ce.substr(0,Ce.length-1),this.options.transformTagName&&(W=this.options.transformTagName(W));let $t=new ye(W);W!==Ce&&Ze&&($t[":@"]=this.buildAttributesMap(Ce,L,W)),this.addChild(N,$t,L,or),L=L.substr(0,L.lastIndexOf("."))}else{let $t=new ye(W);this.tagsNodeStack.push(N),W!==Ce&&Ze&&($t[":@"]=this.buildAttributesMap(Ce,L,W)),this.addChild(N,$t,L,or),N=$t}U="",M=He}}else U+=g[M];return y.child};function zn(g,y,N,U){this.options.captureMetaData||(U=void 0);let L=this.options.updateTag(y.tagname,N,y[":@"]);L===!1||(typeof L=="string"&&(y.tagname=L),g.addChild(y,U))}let $n=function(g){if(this.options.processEntities){for(let y in this.docTypeEntities){let N=this.docTypeEntities[y];g=g.replace(N.regx,N.val)}for(let y in this.lastEntities){let N=this.lastEntities[y];g=g.replace(N.regex,N.val)}if(this.options.htmlEntities)for(let y in this.htmlEntities){let N=this.htmlEntities[y];g=g.replace(N.regex,N.val)}g=g.replace(this.ampEntity.regex,this.ampEntity.val)}return g};function Gn(g,y,N,U){return g&&(U===void 0&&(U=y.child.length===0),(g=this.parseTextData(g,y.tagname,N,!1,!!y[":@"]&&Object.keys(y[":@"]).length!==0,U))!==void 0&&g!==""&&y.add(this.options.textNodeName,g),g=""),g}function Wn(g,y,N){let U="*."+N;for(let L in g){let M=g[L];if(U===M||y===M)return!0}return!1}function zr(g,y,N,U){let L=g.indexOf(y,N);if(L===-1)throw new Error(U);return L+y.length-1}function xn(g,y,N,U=">"){let L=(function(He,Mt,or=">"){let $t,In="";for(let pa=Mt;pa<He.length;pa++){let Zc=He[pa];if($t)Zc===$t&&($t="");else if(Zc==='"'||Zc==="'")$t=Zc;else if(Zc===or[0]){if(!or[1])return{data:In,index:pa};if(He[pa+1]===or[1])return{data:In,index:pa}}else Zc==="	"&&(Zc=" ");In+=Zc}})(g,y+1,U);if(!L)return;let M=L.data,Q=L.index,W=M.search(/\s/),te=M,Ce=!0;W!==-1&&(te=M.substring(0,W),M=M.substring(W+1).trimStart());let Ze=te;if(N){let He=te.indexOf(":");He!==-1&&(te=te.substr(He+1),Ce=te!==L.data.substr(He+1))}return{tagName:te,tagExp:M,closeIndex:Q,attrExpPresent:Ce,rawTagName:Ze}}function Jn(g,y,N){let U=N,L=1;for(;N<g.length;N++)if(g[N]==="<")if(g[N+1]==="/"){let M=zr(g,">",N,`${y} is not closed`);if(g.substring(N+2,M).trim()===y&&(L--,L===0))return{tagContent:g.substring(U,N),i:M};N=M}else if(g[N+1]==="?")N=zr(g,"?>",N+1,"StopNode is not closed.");else if(g.substr(N+1,3)==="!--")N=zr(g,"-->",N+3,"StopNode is not closed.");else if(g.substr(N+1,2)==="![")N=zr(g,"]]>",N,"StopNode is not closed.")-2;else{let M=xn(g,N,">");M&&((M&&M.tagName)===y&&M.tagExp[M.tagExp.length-1]!=="/"&&L++,N=M.closeIndex)}}function On(g,y,N){if(y&&typeof g=="string"){let U=g.trim();return U==="true"||U!=="false"&&(function(L,M={}){if(M=Object.assign({},fi,M),!L||typeof L!="string")return L;let Q=L.trim();if(M.skipLike!==void 0&&M.skipLike.test(Q))return L;if(L==="0")return 0;if(M.hex&&Dt.test(Q))return(function(te){if(parseInt)return parseInt(te,16);if(Number.parseInt)return Number.parseInt(te,16);if(window&&window.parseInt)return window.parseInt(te,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(Q);if(Q.search(/.+[eE].+/)!==-1)return(function(te,Ce,Ze){if(!Ze.eNotation)return te;let He=Ce.match(hi);if(He){let Mt=He[1]||"",or=He[3].indexOf("e")===-1?"E":"e",$t=He[2],In=Mt?te[$t.length+1]===or:te[$t.length]===or;return $t.length>1&&In?te:$t.length!==1||!He[3].startsWith(`.${or}`)&&He[3][0]!==or?Ze.leadingZeros&&!In?(Ce=(He[1]||"")+He[3],Number(Ce)):te:Number(Ce)}return te})(L,Q,M);{let te=Be.exec(Q);if(te){let Ce=te[1]||"",Ze=te[2],He=((W=te[3])&&W.indexOf(".")!==-1&&((W=W.replace(/0+$/,""))==="."?W="0":W[0]==="."?W="0"+W:W[W.length-1]==="."&&(W=W.substring(0,W.length-1))),W),Mt=Ce?L[Ze.length+1]===".":L[Ze.length]===".";if(!M.leadingZeros&&(Ze.length>1||Ze.length===1&&!Mt))return L;{let or=Number(Q),$t=String(or);if(or===0||or===-0)return or;if($t.search(/[eE]/)!==-1)return M.eNotation?or:L;if(Q.indexOf(".")!==-1)return $t==="0"||$t===He||$t===`${Ce}${He}`?or:L;let In=Ze?He:Q;return Ze?In===$t||Ce+In===$t?or:L:In===$t||In===Ce+$t?or:L}}return L}var W})(g,N)}return g!==void 0?g:""}let KT=ye.getMetaDataSymbol();function Fle(g,y){return rq(g,y)}function rq(g,y,N){let U,L={};for(let M=0;M<g.length;M++){let Q=g[M],W=Mle(Q),te="";if(te=N===void 0?W:N+"."+W,W===y.textNodeName)U===void 0?U=Q[W]:U+=""+Q[W];else{if(W===void 0)continue;if(Q[W]){let Ce=rq(Q[W],y,te),Ze=qle(Ce,y);Q[KT]!==void 0&&(Ce[KT]=Q[KT]),Q[":@"]?Ule(Ce,Q[":@"],te,y):Object.keys(Ce).length!==1||Ce[y.textNodeName]===void 0||y.alwaysCreateTextNode?Object.keys(Ce).length===0&&(y.alwaysCreateTextNode?Ce[y.textNodeName]="":Ce=""):Ce=Ce[y.textNodeName],L[W]!==void 0&&L.hasOwnProperty(W)?(Array.isArray(L[W])||(L[W]=[L[W]]),L[W].push(Ce)):y.isArray(W,te,Ze)?L[W]=[Ce]:L[W]=Ce}}}return typeof U=="string"?U.length>0&&(L[y.textNodeName]=U):U!==void 0&&(L[y.textNodeName]=U),L}function Mle(g){let y=Object.keys(g);for(let N=0;N<y.length;N++){let U=y[N];if(U!==":@")return U}}function Ule(g,y,N,U){if(y){let L=Object.keys(y),M=L.length;for(let Q=0;Q<M;Q++){let W=L[Q];U.isArray(W,N+"."+W,!0,!0)?g[W]=[y[W]]:g[W]=y[W]}}}function qle(g,y){let{textNodeName:N}=y,U=Object.keys(g).length;return U===0||!(U!==1||!g[N]&&typeof g[N]!="boolean"&&g[N]!==0)}class Vle{constructor(y){this.externalEntities={},this.options=(function(N){return Object.assign({},z,N)})(y)}parse(y,N){if(typeof y!="string"){if(!y.toString)throw new Error("XML data is accepted in String or Bytes[] form.");y=y.toString()}if(N){N===!0&&(N={});let M=a(y,N);if(M!==!0)throw Error(`${M.err.msg}:${M.err.line}:${M.err.col}`)}let U=new Tr(this.options);U.addExternalEntities(this.externalEntities);let L=U.parseXml(y);return this.options.preserveOrder||L===void 0?L:Fle(L,this.options)}addEntity(y,N){if(N.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(y.indexOf("&")!==-1||y.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(N==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[y]=N}static getMetaDataSymbol(){return ye.getMetaDataSymbol()}}function Hle(g,y){let N="";return y.format&&y.indentBy.length>0&&(N=`
`),nq(g,y,"",N)}function nq(g,y,N,U){let L="",M=!1;for(let Q=0;Q<g.length;Q++){let W=g[Q],te=jle(W);if(te===void 0)continue;let Ce="";if(Ce=N.length===0?te:`${N}.${te}`,te===y.textNodeName){let or=W[te];Kle(Ce,y)||(or=y.tagValueProcessor(te,or),or=iq(or,y)),M&&(L+=U),L+=or,M=!1;continue}if(te===y.cdataPropName){M&&(L+=U),L+=`<![CDATA[${W[te][0][y.textNodeName]}]]>`,M=!1;continue}if(te===y.commentPropName){L+=U+`<!--${W[te][0][y.textNodeName]}-->`,M=!0;continue}if(te[0]==="?"){let or=sq(W[":@"],y),$t=te==="?xml"?"":U,In=W[te][0][y.textNodeName];In=In.length!==0?" "+In:"",L+=$t+`<${te}${In}${or}?>`,M=!0;continue}let Ze=U;Ze!==""&&(Ze+=y.indentBy);let He=U+`<${te}${sq(W[":@"],y)}`,Mt=nq(W[te],y,Ce,Ze);y.unpairedTags.indexOf(te)!==-1?y.suppressUnpairedNode?L+=He+">":L+=He+"/>":Mt&&Mt.length!==0||!y.suppressEmptyNode?Mt&&Mt.endsWith(">")?L+=He+`>${Mt}${U}</${te}>`:(L+=He+">",Mt&&U!==""&&(Mt.includes("/>")||Mt.includes("</"))?L+=U+y.indentBy+Mt+U:L+=Mt,L+=`</${te}>`):L+=He+"/>",M=!0}return L}function jle(g){let y=Object.keys(g);for(let N=0;N<y.length;N++){let U=y[N];if(g.hasOwnProperty(U)&&U!==":@")return U}}function sq(g,y){let N="";if(g&&!y.ignoreAttributes)for(let U in g){if(!g.hasOwnProperty(U))continue;let L=y.attributeValueProcessor(U,g[U]);L=iq(L,y),L===!0&&y.suppressBooleanAttributes?N+=` ${U.substr(y.attributeNamePrefix.length)}`:N+=` ${U.substr(y.attributeNamePrefix.length)}="${L}"`}return N}function Kle(g,y){let N=(g=g.substr(0,g.length-y.textNodeName.length-1)).substr(g.lastIndexOf(".")+1);for(let U in y.stopNodes)if(y.stopNodes[U]===g||y.stopNodes[U]==="*."+N)return!0;return!1}function iq(g,y){if(g&&g.length>0&&y.processEntities)for(let N=0;N<y.entities.length;N++){let U=y.entities[N];g=g.replace(U.regex,U.val)}return g}let zle={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(g,y){return y},attributeValueProcessor:function(g,y){return y},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Qc(g){this.options=Object.assign({},zle,g),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=sr(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Wle),this.processTextOrObjNode=$le,this.options.format?(this.indentate=Gle,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function $le(g,y,N,U){let L=this.j2x(g,N+1,U.concat(y));return g[this.options.textNodeName]!==void 0&&Object.keys(g).length===1?this.buildTextValNode(g[this.options.textNodeName],y,L.attrStr,N):this.buildObjectNode(L.val,y,L.attrStr,N)}function Gle(g){return this.options.indentBy.repeat(g)}function Wle(g){return!(!g.startsWith(this.options.attributeNamePrefix)||g===this.options.textNodeName)&&g.substr(this.attrPrefixLen)}Qc.prototype.build=function(g){return this.options.preserveOrder?Hle(g,this.options):(Array.isArray(g)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(g={[this.options.arrayNodeName]:g}),this.j2x(g,0,[]).val)},Qc.prototype.j2x=function(g,y,N){let U="",L="",M=N.join(".");for(let Q in g)if(Object.prototype.hasOwnProperty.call(g,Q))if(g[Q]===void 0)this.isAttribute(Q)&&(L+="");else if(g[Q]===null)this.isAttribute(Q)||Q===this.options.cdataPropName?L+="":Q[0]==="?"?L+=this.indentate(y)+"<"+Q+"?"+this.tagEndChar:L+=this.indentate(y)+"<"+Q+"/"+this.tagEndChar;else if(g[Q]instanceof Date)L+=this.buildTextValNode(g[Q],Q,"",y);else if(typeof g[Q]!="object"){let W=this.isAttribute(Q);if(W&&!this.ignoreAttributesFn(W,M))U+=this.buildAttrPairStr(W,""+g[Q]);else if(!W)if(Q===this.options.textNodeName){let te=this.options.tagValueProcessor(Q,""+g[Q]);L+=this.replaceEntitiesValue(te)}else L+=this.buildTextValNode(g[Q],Q,"",y)}else if(Array.isArray(g[Q])){let W=g[Q].length,te="",Ce="";for(let Ze=0;Ze<W;Ze++){let He=g[Q][Ze];if(He!==void 0)if(He===null)Q[0]==="?"?L+=this.indentate(y)+"<"+Q+"?"+this.tagEndChar:L+=this.indentate(y)+"<"+Q+"/"+this.tagEndChar;else if(typeof He=="object")if(this.options.oneListGroup){let Mt=this.j2x(He,y+1,N.concat(Q));te+=Mt.val,this.options.attributesGroupName&&He.hasOwnProperty(this.options.attributesGroupName)&&(Ce+=Mt.attrStr)}else te+=this.processTextOrObjNode(He,Q,y,N);else if(this.options.oneListGroup){let Mt=this.options.tagValueProcessor(Q,He);Mt=this.replaceEntitiesValue(Mt),te+=Mt}else te+=this.buildTextValNode(He,Q,"",y)}this.options.oneListGroup&&(te=this.buildObjectNode(te,Q,Ce,y)),L+=te}else if(this.options.attributesGroupName&&Q===this.options.attributesGroupName){let W=Object.keys(g[Q]),te=W.length;for(let Ce=0;Ce<te;Ce++)U+=this.buildAttrPairStr(W[Ce],""+g[Q][W[Ce]])}else L+=this.processTextOrObjNode(g[Q],Q,y,N);return{attrStr:U,val:L}},Qc.prototype.buildAttrPairStr=function(g,y){return y=this.options.attributeValueProcessor(g,""+y),y=this.replaceEntitiesValue(y),this.options.suppressBooleanAttributes&&y==="true"?" "+g:" "+g+'="'+y+'"'},Qc.prototype.buildObjectNode=function(g,y,N,U){if(g==="")return y[0]==="?"?this.indentate(U)+"<"+y+N+"?"+this.tagEndChar:this.indentate(U)+"<"+y+N+this.closeTag(y)+this.tagEndChar;{let L="</"+y+this.tagEndChar,M="";return y[0]==="?"&&(M="?",L=""),!N&&N!==""||g.indexOf("<")!==-1?this.options.commentPropName!==!1&&y===this.options.commentPropName&&M.length===0?this.indentate(U)+`<!--${g}-->`+this.newLine:this.indentate(U)+"<"+y+N+M+this.tagEndChar+g+this.indentate(U)+L:this.indentate(U)+"<"+y+N+M+">"+g+L}},Qc.prototype.closeTag=function(g){let y="";return this.options.unpairedTags.indexOf(g)!==-1?this.options.suppressUnpairedNode||(y="/"):y=this.options.suppressEmptyNode?"/":`></${g}`,y},Qc.prototype.buildTextValNode=function(g,y,N,U){if(this.options.cdataPropName!==!1&&y===this.options.cdataPropName)return this.indentate(U)+`<![CDATA[${g}]]>`+this.newLine;if(this.options.commentPropName!==!1&&y===this.options.commentPropName)return this.indentate(U)+`<!--${g}-->`+this.newLine;if(y[0]==="?")return this.indentate(U)+"<"+y+N+"?"+this.tagEndChar;{let L=this.options.tagValueProcessor(y,g);return L=this.replaceEntitiesValue(L),L===""?this.indentate(U)+"<"+y+N+this.closeTag(y)+this.tagEndChar:this.indentate(U)+"<"+y+N+">"+L+"</"+y+this.tagEndChar}},Qc.prototype.replaceEntitiesValue=function(g){if(g&&g.length>0&&this.options.processEntities)for(let y=0;y<this.options.entities.length;y++){let N=this.options.entities[y];g=g.replace(N.regex,N.val)}return g};let Jle={validate:a};ej.exports=t})()});var rj=S(S1=>{"use strict";Object.defineProperty(S1,"__esModule",{value:!0});S1.parseXML=Vhe;var qhe=tj(),E1=new qhe.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});E1.addEntity("#xD","\r");E1.addEntity("#10",`
`);function Vhe(e){return E1.parse(e,!0)}});var bg=S(DS=>{"use strict";var Hhe=rj();function jhe(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Khe(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var OS=class{value;constructor(t){this.value=t}toString(){return Khe(""+this.value)}},C1=class e{name;children;attributes={};static of(t,r,n){let s=new e(t);return r!==void 0&&s.addChildNode(new OS(r)),n!==void 0&&s.withName(n),s}constructor(t,r=[]){this.name=t,this.children=r}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let s=e.of(r,t[r]).withName(n);this.c(s)}}l(t,r,n,s){t[r]!=null&&s().map(o=>{o.withName(n),this.c(o)})}lc(t,r,n,s){if(t[r]!=null){let i=s(),o=new e(n);i.map(a=>{o.c(a)}),this.c(o)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let i=n[s];i!=null&&(r+=` ${s}="${jhe(""+i)}"`)}return r+=t?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(DS,"parseXML",{enumerable:!0,get:function(){return Hhe.parseXML}});DS.XmlNode=C1;DS.XmlText=OS});var nj,sj,ij,Vu,kS=V(()=>{nj=$(bg());gi();on();sj=$(Ct()),ij=$(Dn());fl();Vu=class extends Os{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new Ru(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,n){let s=qe.of(t),i=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(i).find(l=>!!l.getMemberTraits().eventPayload)){let l={},d=Object.keys(i)[0];return i[d].isBlobSchema()?l[d]=r:l[d]=this.read(i[d],r),l}let a=(this.serdeContext?.utf8Encoder??ij.toUtf8)(r),c=this.parseXml(a);return this.readSchema(t,n?c[n]:c)}readSchema(t,r){let n=qe.of(t);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let i=!!s.sparse,o=!!s.xmlFlattened;if(n.isListSchema()){let c=n.getValueSchema(),l=[],d=c.getMergedTraits().xmlName??"member",f=o?r:(r[0]??r)[d],h=Array.isArray(f)?f:[f];for(let p of h)(p!=null||i)&&l.push(this.readSchema(c,p));return l}let a={};if(n.isMapSchema()){let c=n.getKeySchema(),l=n.getValueSchema(),d;o?d=Array.isArray(r)?r:[r]:d=Array.isArray(r.entry)?r.entry:[r.entry];let f=c.getMergedTraits().xmlName??"key",h=l.getMergedTraits().xmlName??"value";for(let p of d){let m=p[f],E=p[h];(E!=null||i)&&(a[m]=this.readSchema(l,E))}return a}if(n.isStructSchema()){for(let[c,l]of n.structIterator()){let d=l.getMergedTraits(),f=d.httpPayload?d.xmlName??l.getName():l.getMemberTraits().xmlName??c;r[f]!=null&&(a[c]=this.readSchema(l,r[f]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(t){if(t.length){let r;try{r=(0,nj.parseXML)(t)}catch(o){throw o&&typeof o=="object"&&Object.defineProperty(o,"$responseBodyText",{value:t}),o}let n="#text",s=Object.keys(r)[0],i=r[s];return i[n]&&(i[s]=i[n],delete i[n]),(0,sj.getValueFromTextNode)(i)}return{}}}});var oj,aj,BS,cj=V(()=>{gi();on();mi();oj=$(Ct()),aj=$(ys());fl();BS=class extends Os{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,n=""){this.buffer===void 0&&(this.buffer="");let s=qe.of(t);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??aj.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Ca.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof Yr?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),Bi(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,oj.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(s.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${s.getName(!0)}`);if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let i=s.getValueSchema(),o=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let l=this.getKey("member",i.getMergedTraits().xmlName),d=o?`${n}${a}`:`${n}${l}.${a}`;this.write(i,c,d),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let i=s.getKeySchema(),o=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,c=1;for(let[l,d]of Object.entries(r)){if(d==null)continue;let f=this.getKey("key",i.getMergedTraits().xmlName),h=a?`${n}${c}.${f}`:`${n}entry.${c}.${f}`,p=this.getKey("value",o.getMergedTraits().xmlName),m=a?`${n}${c}.${p}`:`${n}entry.${c}.${p}`;this.write(i,l,h),this.write(o,d,m),++c}}}else if(s.isStructSchema()){if(r&&typeof r=="object")for(let[i,o]of s.structIterator()){if(r[i]==null&&!o.isIdempotencyToken())continue;let a=this.getKey(i,o.getMergedTraits().xmlName),c=`${n}${a}`;this.write(o,r[i],c)}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let n=r??t;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${ma(t)}=`}writeValue(t){this.buffer+=ma(t)}}});var vg,_1=V(()=>{gi();on();jf();kS();cj();vg=class extends mc{options;serializer;deserializer;mixin=new Ji;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new BS(r),this.deserializer=new Vu(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(qo(t.input)==="unit"||!s.body)&&(s.body="");let i=t.name.split("#")[1]??t.name;return s.body=`Action=${i}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(t,r,n){let s=this.deserializer,i=qe.of(t.output),o={};if(n.statusCode>=300){let f=await Uo(n.body,r);f.byteLength>0&&Object.assign(o,await s.read(15,f)),await this.handleError(t,r,n,o,this.deserializeMetadata(n))}for(let f in n.headers){let h=n.headers[f];delete n.headers[f],n.headers[f.toLowerCase()]=h}let a=t.name.split("#")[1]??t.name,c=i.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,l=await Uo(n.body,r);return l.byteLength>0&&Object.assign(o,await s.read(i,l,c)),{$metadata:this.deserializeMetadata(n),...o}}useNestedResult(){return!0}async handleError(t,r,n,s,i){let o=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),c=this.loadQueryErrorMessage(s);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:l,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,a,i,(E,b)=>E.find(A=>qe.of(A).getMergedTraits().awsQueryError?.[0]===b)),f=qe.of(l),h=kn.for(l[1]).getErrorCtor(l)??Error,p=new h(c),m={Error:a.Error};for(let[E,b]of f.structIterator()){let A=b.getMergedTraits().xmlName??E,R=a[A]??s[A];m[E]=this.deserializer.readSchema(b,R)}throw Object.assign(p,d,{$fault:f.getMergedTraits().error,message:c},m)}loadQueryErrorCode(t,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var b1,lj=V(()=>{_1();b1=class extends vg{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var uj,dj,Ag,v1,A1,x1=V(()=>{uj=$(bg()),dj=$(Ct());d1();Ag=(e,t)=>TS(e,t).then(r=>{if(r.length){let n;try{n=(0,uj.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,dj.getValueFromTextNode)(o)}return{}}),v1=async(e,t)=>{let r=await Ag(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},A1=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var Xi,I1,LS,xg,w1=V(()=>{Xi=$(bg());gi();on();mi();I1=$(Ct()),LS=$(ys());fl();xg=class extends Os{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let n=qe.of(t);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??LS.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,n){let s=t.getMergedTraits(),i=t.isMemberSchema()&&!s.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():s.xmlName??t.getName();if(!i||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let o=Xi.XmlNode.of(i),[a,c]=this.getXmlnsAttribute(t,n);for(let[l,d]of t.structIterator()){let f=r[l];if(f!=null||d.isIdempotencyToken()){if(d.getMergedTraits().xmlAttribute){o.addAttribute(d.getMergedTraits().xmlName??l,this.writeSimple(d,f));continue}if(d.isListSchema())this.writeList(d,f,o,c);else if(d.isMapSchema())this.writeMap(d,f,o,c);else if(d.isStructSchema())o.addChildNode(this.writeStruct(d,f,c));else{let h=Xi.XmlNode.of(d.getMergedTraits().xmlName??d.getMemberName());this.writeSimpleInto(d,f,h,c),o.addChildNode(h)}}}return c&&o.addAttribute(a,c),o}writeList(t,r,n,s){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let i=t.getMergedTraits(),o=t.getValueSchema(),a=o.getMergedTraits(),c=!!a.sparse,l=!!i.xmlFlattened,[d,f]=this.getXmlnsAttribute(t,s),h=(p,m)=>{if(o.isListSchema())this.writeList(o,Array.isArray(m)?m:[m],p,f);else if(o.isMapSchema())this.writeMap(o,m,p,f);else if(o.isStructSchema()){let E=this.writeStruct(o,m,f);p.addChildNode(E.withName(l?i.xmlName??t.getMemberName():a.xmlName??"member"))}else{let E=Xi.XmlNode.of(l?i.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(o,m,E,f),p.addChildNode(E)}};if(l)for(let p of r)(c||p!=null)&&h(n,p);else{let p=Xi.XmlNode.of(i.xmlName??t.getMemberName());f&&p.addAttribute(d,f);for(let m of r)(c||m!=null)&&h(p,m);n.addChildNode(p)}}writeMap(t,r,n,s,i=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let o=t.getMergedTraits(),a=t.getKeySchema(),l=a.getMergedTraits().xmlName??"key",d=t.getValueSchema(),f=d.getMergedTraits(),h=f.xmlName??"value",p=!!f.sparse,m=!!o.xmlFlattened,[E,b]=this.getXmlnsAttribute(t,s),A=(R,D,K)=>{let z=Xi.XmlNode.of(l,D),[G,ye]=this.getXmlnsAttribute(a,b);ye&&z.addAttribute(G,ye),R.addChildNode(z);let he=Xi.XmlNode.of(h);d.isListSchema()?this.writeList(d,K,he,b):d.isMapSchema()?this.writeMap(d,K,he,b,!0):d.isStructSchema()?he=this.writeStruct(d,K,b):this.writeSimpleInto(d,K,he,b),R.addChildNode(he)};if(m){for(let[R,D]of Object.entries(r))if(p||D!=null){let K=Xi.XmlNode.of(o.xmlName??t.getMemberName());A(K,R,D),n.addChildNode(K)}}else{let R;i||(R=Xi.XmlNode.of(o.xmlName??t.getMemberName()),b&&R.addAttribute(E,b),n.addChildNode(R));for(let[D,K]of Object.entries(r))if(p||K!=null){let z=Xi.XmlNode.of("entry");A(z,D,K),(i?n:R).addChildNode(z)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=qe.of(t),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??LS.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(Bi(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,I1.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,I1.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof Yr?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,Ca.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(t,r,n,s){let i=this.writeSimple(t,r),o=qe.of(t),a=new Xi.XmlText(i),[c,l]=this.getXmlnsAttribute(o,s);l&&n.addAttribute(c,l),n.addChildNode(a)}getXmlnsAttribute(t,r){let n=t.getMergedTraits(),[s,i]=n.xmlNamespace??[];return i&&i!==r?[s?`xmlns:${s}`:"xmlns",i]:[void 0,void 0]}}});var Ig,T1=V(()=>{fl();kS();w1();Ig=class extends Os{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new xg(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Vu(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var R1,fj=V(()=>{gi();on();jf();x1();T1();R1=class extends Tu{codec;serializer;deserializer;mixin=new Ji;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new Ig(r),this.serializer=new Pu(this.codec.createSerializer(),r),this.deserializer=new Nu(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n),i=qe.of(t.input);if(!s.headers["content-type"]){let o=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);o&&(s.headers["content-type"]=o)}return s.headers["content-type"]===this.getDefaultContentType()&&typeof s.body=="string"&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,s,i){let o=A1(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),l=qe.of(a),d=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",f=kn.for(a[1]).getErrorCtor(a)??Error,h=new f(d);await this.deserializeHttpMessage(a,r,n,s);let p={};for(let[m,E]of l.structIterator()){let b=E.getMergedTraits().xmlName??m,A=s.Error?.[b]??s[b];p[m]=this.codec.createDeserializer().readSchema(E,A)}throw Object.assign(h,c,{$fault:l.getMergedTraits().error,message:d},p)}getDefaultContentType(){return"application/xml"}}});var hj=V(()=>{IH();wH();JH();XH();PS();YH();NS();h1();p1();ZH();Sg();lj();_1();fj();T1();kS();w1();x1()});var Yi={};Wi(Yi,{AWSSDKSigV4Signer:()=>ZT,AwsEc2QueryProtocol:()=>b1,AwsJson1_0Protocol:()=>m1,AwsJson1_1Protocol:()=>g1,AwsJsonRpcProtocol:()=>qu,AwsQueryProtocol:()=>vg,AwsRestJsonProtocol:()=>y1,AwsRestXmlProtocol:()=>R1,AwsSdkSigV4ASigner:()=>Ym,AwsSdkSigV4Signer:()=>pi,AwsSmithyRpcV2CborProtocol:()=>e1,JsonCodec:()=>Uu,JsonShapeDeserializer:()=>Cg,JsonShapeSerializer:()=>_g,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Nf,NODE_SIGV4A_CONFIG_OPTIONS:()=>FV,XmlCodec:()=>Ig,XmlShapeDeserializer:()=>Vu,XmlShapeSerializer:()=>xg,_toBool:()=>mhe,_toNum:()=>ghe,_toStr:()=>phe,awsExpectUnion:()=>Uhe,emitWarningIfUnsupportedVersion:()=>wf,getBearerTokenEnvKey:()=>_E,loadRestJsonErrorCode:()=>Mu,loadRestXmlErrorCode:()=>A1,parseJsonBody:()=>Kf,parseJsonErrorBody:()=>f1,parseXmlBody:()=>Ag,parseXmlErrorBody:()=>v1,resolveAWSSDKSigV4Config:()=>cH,resolveAwsSdkSigV4AConfig:()=>LV,resolveAwsSdkSigV4Config:()=>Lu,setCredentialFeature:()=>tl,setFeature:()=>fq,setTokenFeature:()=>pq,state:()=>CE,validateSigningProperties:()=>Rf});var wn=V(()=>{Mo();FN();hj()});var gj=S((wit,mj)=>{var FS=Object.defineProperty,zhe=Object.getOwnPropertyDescriptor,$he=Object.getOwnPropertyNames,Ghe=Object.prototype.hasOwnProperty,Whe=(e,t)=>FS(e,"name",{value:t,configurable:!0}),Jhe=(e,t)=>{for(var r in t)FS(e,r,{get:t[r],enumerable:!0})},Xhe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of $he(t))!Ghe.call(e,s)&&s!==r&&FS(e,s,{get:()=>t[s],enumerable:!(n=zhe(t,s))||n.enumerable});return e},Yhe=e=>Xhe(FS({},"__esModule",{value:!0}),e),pj={};Jhe(pj,{isArrayBuffer:()=>Qhe});mj.exports=Yhe(pj);var Qhe=Whe(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var Cj=S((Tit,Sj)=>{var MS=Object.defineProperty,Zhe=Object.getOwnPropertyDescriptor,epe=Object.getOwnPropertyNames,tpe=Object.prototype.hasOwnProperty,yj=(e,t)=>MS(e,"name",{value:t,configurable:!0}),rpe=(e,t)=>{for(var r in t)MS(e,r,{get:t[r],enumerable:!0})},npe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of epe(t))!tpe.call(e,s)&&s!==r&&MS(e,s,{get:()=>t[s],enumerable:!(n=Zhe(t,s))||n.enumerable});return e},spe=e=>npe(MS({},"__esModule",{value:!0}),e),Ej={};rpe(Ej,{fromArrayBuffer:()=>ope,fromString:()=>ape});Sj.exports=spe(Ej);var ipe=gj(),N1=require("buffer"),ope=yj((e,t=0,r=e.byteLength-t)=>{if(!(0,ipe.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return N1.Buffer.from(e,t,r)},"fromArrayBuffer"),ape=yj((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?N1.Buffer.from(e,t):N1.Buffer.from(e)},"fromString")});var xj=S((Rit,Aj)=>{var US=Object.defineProperty,cpe=Object.getOwnPropertyDescriptor,lpe=Object.getOwnPropertyNames,upe=Object.prototype.hasOwnProperty,P1=(e,t)=>US(e,"name",{value:t,configurable:!0}),dpe=(e,t)=>{for(var r in t)US(e,r,{get:t[r],enumerable:!0})},fpe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of lpe(t))!upe.call(e,s)&&s!==r&&US(e,s,{get:()=>t[s],enumerable:!(n=cpe(t,s))||n.enumerable});return e},hpe=e=>fpe(US({},"__esModule",{value:!0}),e),_j={};dpe(_j,{fromUtf8:()=>vj,toUint8Array:()=>ppe,toUtf8:()=>mpe});Aj.exports=hpe(_j);var bj=Cj(),vj=P1(e=>{let t=(0,bj.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),ppe=P1(e=>typeof e=="string"?vj(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),mpe=P1(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,bj.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var Ij=S(qS=>{"use strict";Object.defineProperty(qS,"__esModule",{value:!0});qS.convertToBuffer=void 0;var gpe=xj(),ype=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:gpe.fromUtf8;function Epe(e){return e instanceof Uint8Array?e:typeof e=="string"?ype(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}qS.convertToBuffer=Epe});var wj=S(VS=>{"use strict";Object.defineProperty(VS,"__esModule",{value:!0});VS.isEmptyData=void 0;function Spe(e){return typeof e=="string"?e.length===0:e.byteLength===0}VS.isEmptyData=Spe});var Tj=S(HS=>{"use strict";Object.defineProperty(HS,"__esModule",{value:!0});HS.numToUint8=void 0;function Cpe(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}HS.numToUint8=Cpe});var Rj=S(jS=>{"use strict";Object.defineProperty(jS,"__esModule",{value:!0});jS.uint32ArrayFrom=void 0;function _pe(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}jS.uint32ArrayFrom=_pe});var zf=S(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.uint32ArrayFrom=ba.numToUint8=ba.isEmptyData=ba.convertToBuffer=void 0;var bpe=Ij();Object.defineProperty(ba,"convertToBuffer",{enumerable:!0,get:function(){return bpe.convertToBuffer}});var vpe=wj();Object.defineProperty(ba,"isEmptyData",{enumerable:!0,get:function(){return vpe.isEmptyData}});var Ape=Tj();Object.defineProperty(ba,"numToUint8",{enumerable:!0,get:function(){return Ape.numToUint8}});var xpe=Rj();Object.defineProperty(ba,"uint32ArrayFrom",{enumerable:!0,get:function(){return xpe.uint32ArrayFrom}})});var Oj=S(KS=>{"use strict";Object.defineProperty(KS,"__esModule",{value:!0});KS.AwsCrc32c=void 0;var Nj=(Sa(),St(Ea)),O1=zf(),Pj=D1(),Ipe=(function(){function e(){this.crc32c=new Pj.Crc32c}return e.prototype.update=function(t){(0,O1.isEmptyData)(t)||this.crc32c.update((0,O1.convertToBuffer)(t))},e.prototype.digest=function(){return Nj.__awaiter(this,void 0,void 0,function(){return Nj.__generator(this,function(t){return[2,(0,O1.numToUint8)(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new Pj.Crc32c},e})();KS.AwsCrc32c=Ipe});var D1=S(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.AwsCrc32c=pl.Crc32c=pl.crc32c=void 0;var wpe=(Sa(),St(Ea)),Tpe=zf();function Rpe(e){return new Dj().update(e).digest()}pl.crc32c=Rpe;var Dj=(function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var s=wpe.__values(t),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^Ppe[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e})();pl.Crc32c=Dj;var Npe=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],Ppe=(0,Tpe.uint32ArrayFrom)(Npe),Ope=Oj();Object.defineProperty(pl,"AwsCrc32c",{enumerable:!0,get:function(){return Ope.AwsCrc32c}})});var Lj=S(zS=>{"use strict";Object.defineProperty(zS,"__esModule",{value:!0});zS.AwsCrc32=void 0;var kj=(Sa(),St(Ea)),k1=zf(),Bj=$S(),Dpe=(function(){function e(){this.crc32=new Bj.Crc32}return e.prototype.update=function(t){(0,k1.isEmptyData)(t)||this.crc32.update((0,k1.convertToBuffer)(t))},e.prototype.digest=function(){return kj.__awaiter(this,void 0,void 0,function(){return kj.__generator(this,function(t){return[2,(0,k1.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Bj.Crc32},e})();zS.AwsCrc32=Dpe});var $S=S(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.AwsCrc32=ml.Crc32=ml.crc32=void 0;var kpe=(Sa(),St(Ea)),Bpe=zf();function Lpe(e){return new Fj().update(e).digest()}ml.crc32=Lpe;var Fj=(function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var s=kpe.__values(t),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^Mpe[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e})();ml.Crc32=Fj;var Fpe=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Mpe=(0,Bpe.uint32ArrayFrom)(Fpe),Upe=Lj();Object.defineProperty(ml,"AwsCrc32",{enumerable:!0,get:function(){return Upe.AwsCrc32}})});var Uj=S(GS=>{"use strict";Object.defineProperty(GS,"__esModule",{value:!0});GS.getCrc32ChecksumAlgorithmFunction=void 0;var qpe=(Sa(),St(Ea)),Vpe=$S(),Hpe=zf(),Mj=qpe.__importStar(require("zlib")),B1=class{checksum=0;update(t){this.checksum=Mj.crc32(t,this.checksum)}async digest(){return(0,Hpe.numToUint8)(this.checksum)}reset(){this.checksum=0}},jpe=()=>typeof Mj.crc32>"u"?Vpe.AwsCrc32:B1;GS.getCrc32ChecksumAlgorithmFunction=jpe});var V1=S(Xe=>{"use strict";var bc=(wn(),St(Yi)),Vj=Xt(),Hj=xu(),Kpe=vE(),zpe=D1(),$pe=Uj(),Gpe=Dn(),qj=Ns(),vc={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},M1=vc.WHEN_SUPPORTED,$f={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},U1=vc.WHEN_SUPPORTED;Xe.ChecksumAlgorithm=void 0;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.CRC64NVME="CRC64NVME",e.SHA1="SHA1",e.SHA256="SHA256"})(Xe.ChecksumAlgorithm||(Xe.ChecksumAlgorithm={}));Xe.ChecksumLocation=void 0;(function(e){e.HEADER="header",e.TRAILER="trailer"})(Xe.ChecksumLocation||(Xe.ChecksumLocation={}));var WS=Xe.ChecksumAlgorithm.CRC32,Gf;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Gf||(Gf={}));var JS=(e,t,r,n)=>{if(!(t in e))return;let s=e[t].toUpperCase();if(!Object.values(r).includes(s))throw new TypeError(`Cannot load ${n} '${t}'. Expected one of ${Object.values(r)}, got '${e[t]}'.`);return s},jj="AWS_REQUEST_CHECKSUM_CALCULATION",Kj="request_checksum_calculation",Wpe={environmentVariableSelector:e=>JS(e,jj,vc,Gf.ENV),configFileSelector:e=>JS(e,Kj,vc,Gf.CONFIG),default:M1},zj="AWS_RESPONSE_CHECKSUM_VALIDATION",$j="response_checksum_validation",Jpe={environmentVariableSelector:e=>JS(e,zj,$f,Gf.ENV),configFileSelector:e=>JS(e,$j,$f,Gf.CONFIG),default:U1},L1={CrtCrc64Nvme:null},F1=[Xe.ChecksumAlgorithm.CRC32,Xe.ChecksumAlgorithm.CRC32C,Xe.ChecksumAlgorithm.CRC64NVME,Xe.ChecksumAlgorithm.SHA1,Xe.ChecksumAlgorithm.SHA256],Xpe=[Xe.ChecksumAlgorithm.SHA256,Xe.ChecksumAlgorithm.SHA1,Xe.ChecksumAlgorithm.CRC32,Xe.ChecksumAlgorithm.CRC32C,Xe.ChecksumAlgorithm.CRC64NVME],Ype=(e,{requestChecksumRequired:t,requestAlgorithmMember:r,requestChecksumCalculation:n})=>{if(!r)return n===vc.WHEN_SUPPORTED||t?WS:void 0;if(!e[r])return;let s=e[r];if(!F1.includes(s))throw new Error(`The checksum algorithm "${s}" is not supported by the client. Select one of ${F1}.`);return s},q1=e=>e===Xe.ChecksumAlgorithm.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`,Qpe=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1},Zpe=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(n.toLowerCase().startsWith(r))return!0;return!1},Gj=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Kpe.isArrayBuffer(e),Wj=(e,t)=>{switch(e){case Xe.ChecksumAlgorithm.MD5:return t.md5;case Xe.ChecksumAlgorithm.CRC32:return $pe.getCrc32ChecksumAlgorithmFunction();case Xe.ChecksumAlgorithm.CRC32C:return zpe.AwsCrc32c;case Xe.ChecksumAlgorithm.CRC64NVME:if(typeof L1.CrtCrc64Nvme!="function")throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return L1.CrtCrc64Nvme;case Xe.ChecksumAlgorithm.SHA1:return t.sha1;case Xe.ChecksumAlgorithm.SHA256:return t.sha256;default:throw new Error(`Unsupported checksum algorithm: ${e}`)}},Jj=(e,t)=>{let r=new e;return r.update(Gpe.toUint8Array(t||"")),r.digest()},Xj={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Yj=(e,t)=>(r,n)=>async s=>{if(!Vj.HttpRequest.isInstance(s.request)||Zpe("x-amz-checksum-",s.request.headers))return r(s);let{request:i,input:o}=s,{body:a,headers:c}=i,{base64Encoder:l,streamHasher:d}=e,{requestChecksumRequired:f,requestAlgorithmMember:h}=t,p=await e.requestChecksumCalculation(),m=h?.name,E=h?.httpHeader;m&&!o[m]&&(p===vc.WHEN_SUPPORTED||f)&&(o[m]=WS,E&&(c[E]=WS));let b=Ype(o,{requestChecksumRequired:f,requestAlgorithmMember:h?.name,requestChecksumCalculation:p}),A=a,R=c;if(b){switch(b){case Xe.ChecksumAlgorithm.CRC32:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case Xe.ChecksumAlgorithm.CRC32C:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case Xe.ChecksumAlgorithm.CRC64NVME:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case Xe.ChecksumAlgorithm.SHA1:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case Xe.ChecksumAlgorithm.SHA256:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}let K=q1(b),z=Wj(b,e);if(Gj(a)){let{getAwsChunkedEncodingStream:G,bodyLengthChecker:ye}=e;A=G(typeof e.requestStreamBufferSize=="number"&&e.requestStreamBufferSize>=8*1024?Hj.createBufferedReadable(a,e.requestStreamBufferSize,n.logger):a,{base64Encoder:l,bodyLengthChecker:ye,checksumLocationName:K,checksumAlgorithmFn:z,streamHasher:d}),R={...c,"content-encoding":c["content-encoding"]?`${c["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":c["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":K},delete R["content-length"]}else if(!Qpe(K,c)){let G=await Jj(z,a);R={...c,[K]:l(G)}}}return await r({...s,request:{...i,headers:R,body:A}})},eme={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},tme=(e,t)=>(r,n)=>async s=>{let i=s.input,{requestValidationModeMember:o}=t,a=await e.requestChecksumCalculation(),c=await e.responseChecksumValidation();switch(a){case vc.WHEN_REQUIRED:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case vc.WHEN_SUPPORTED:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(c){case $f.WHEN_REQUIRED:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case $f.WHEN_SUPPORTED:bc.setFeature(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return o&&!i[o]&&c===$f.WHEN_SUPPORTED&&(i[o]="ENABLED"),r(s)},Qj=(e=[])=>{let t=[];for(let r of Xpe)!e.includes(r)||!F1.includes(r)||t.push(r);return t},rme=e=>{let t=e.lastIndexOf("-");if(t!==-1){let r=e.slice(t+1);if(!r.startsWith("0")){let n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1},nme=async(e,{checksumAlgorithmFn:t,base64Encoder:r})=>r(await Jj(t,e)),sme=async(e,{config:t,responseAlgorithms:r,logger:n})=>{let s=Qj(r),{body:i,headers:o}=e;for(let a of s){let c=q1(a),l=o[c];if(l){let d;try{d=Wj(a,t)}catch(p){if(a===Xe.ChecksumAlgorithm.CRC64NVME){n?.warn(`Skipping ${Xe.ChecksumAlgorithm.CRC64NVME} checksum validation: ${p.message}`);continue}throw p}let{base64Encoder:f}=t;if(Gj(i)){e.body=Hj.createChecksumStream({expectedChecksum:l,checksumSourceLocation:c,checksum:new d,source:i,base64Encoder:f});return}let h=await nme(i,{checksumAlgorithmFn:d,base64Encoder:f});if(h===l)break;throw new Error(`Checksum mismatch: expected "${h}" but received "${l}" in response header "${c}".`)}}},ime={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},ome=(e,t)=>(r,n)=>async s=>{if(!Vj.HttpRequest.isInstance(s.request))return r(s);let i=s.input,o=await r(s),a=o.response,{requestValidationModeMember:c,responseAlgorithms:l}=t;if(c&&i[c]==="ENABLED"){let{clientName:d,commandName:f}=n;if(d==="S3Client"&&f==="GetObjectCommand"&&Qj(l).every(p=>{let m=q1(p),E=a.headers[m];return!E||rme(E)}))return o;await sme(a,{config:e,responseAlgorithms:l,logger:n.logger})}return o},ame=(e,t)=>({applyToStack:r=>{r.add(Yj(e,t),Xj),r.addRelativeTo(tme(e,t),eme),r.addRelativeTo(ome(e,t),ime)}}),cme=e=>{let{requestChecksumCalculation:t,responseChecksumValidation:r,requestStreamBufferSize:n}=e;return Object.assign(e,{requestChecksumCalculation:qj.normalizeProvider(t??M1),responseChecksumValidation:qj.normalizeProvider(r??U1),requestStreamBufferSize:Number(n??0)})};Xe.CONFIG_REQUEST_CHECKSUM_CALCULATION=Kj;Xe.CONFIG_RESPONSE_CHECKSUM_VALIDATION=$j;Xe.DEFAULT_CHECKSUM_ALGORITHM=WS;Xe.DEFAULT_REQUEST_CHECKSUM_CALCULATION=M1;Xe.DEFAULT_RESPONSE_CHECKSUM_VALIDATION=U1;Xe.ENV_REQUEST_CHECKSUM_CALCULATION=jj;Xe.ENV_RESPONSE_CHECKSUM_VALIDATION=zj;Xe.NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS=Wpe;Xe.NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS=Jpe;Xe.RequestChecksumCalculation=vc;Xe.ResponseChecksumValidation=$f;Xe.crc64NvmeCrtContainer=L1;Xe.flexibleChecksumsMiddleware=Yj;Xe.flexibleChecksumsMiddlewareOptions=Xj;Xe.getFlexibleChecksumsPlugin=ame;Xe.resolveFlexibleChecksumsConfig=cme});var Tg=S(wg=>{"use strict";var lme=Xt();function ume(e){return e}var Zj=e=>t=>async r=>{if(!lme.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},e5={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},dme=e=>({applyToStack:t=>{t.add(Zj(e),e5)}});wg.getHostHeaderPlugin=dme;wg.hostHeaderMiddleware=Zj;wg.hostHeaderMiddlewareOptions=e5;wg.resolveHostHeaderConfig=ume});var Rg=S(XS=>{"use strict";var t5=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:l}=a,d=c??t.inputFilterSensitiveLog,f=l??t.outputFilterSensitiveLog,{$metadata:h,...p}=n.output;return o?.info?.({clientName:s,commandName:i,input:d(r.input),output:f(p),metadata:h}),n}catch(n){let{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,l=c??t.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:l(r.input),error:n,metadata:n.$metadata}),n}},r5={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},fme=e=>({applyToStack:t=>{t.add(t5(),r5)}});XS.getLoggerPlugin=fme;XS.loggerMiddleware=t5;XS.loggerMiddlewareOptions=r5});var n5=S(QS=>{"use strict";Object.defineProperty(QS,"__esModule",{value:!0});QS.InvokeStore=void 0;var hme=require("async_hooks"),H1=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";H1||(globalThis.awslambda=globalThis.awslambda||{});var pme={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID")},j1=class{static storage=new hme.AsyncLocalStorage;static PROTECTED_KEYS=pme;static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}},YS;!H1&&globalThis.awslambda?.InvokeStore?YS=globalThis.awslambda.InvokeStore:(YS=j1,!H1&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=YS));QS.InvokeStore=YS});var s5=S(ZS=>{"use strict";Object.defineProperty(ZS,"__esModule",{value:!0});ZS.recursionDetectionMiddleware=void 0;var mme=n5(),gme=Xt(),K1="X-Amzn-Trace-Id",yme="AWS_LAMBDA_FUNCTION_NAME",Eme="_X_AMZN_TRACE_ID",Sme=()=>e=>async t=>{let{request:r}=t;if(!gme.HttpRequest.isInstance(r))return e(t);let n=Object.keys(r.headers??{}).find(l=>l.toLowerCase()===K1.toLowerCase())??K1;if(r.headers.hasOwnProperty(n))return e(t);let s=process.env[yme],i=process.env[Eme],a=mme.InvokeStore.getXRayTraceId()??i,c=l=>typeof l=="string"&&l.length>0;return c(s)&&c(a)&&(r.headers[K1]=a),e({...t,request:r})};ZS.recursionDetectionMiddleware=Sme});var Ng=S(eC=>{"use strict";var z1=s5(),Cme={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},_me=e=>({applyToStack:t=>{t.add(z1.recursionDetectionMiddleware(),Cme)}});eC.getRecursionDetectionPlugin=_me;Object.keys(z1).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(eC,e)&&Object.defineProperty(eC,e,{enumerable:!0,get:function(){return z1[e]}})})});var tC=S(Wf=>{"use strict";var bme=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},vme=(e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n};Wf.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Wf.SelectorType||(Wf.SelectorType={}));Wf.booleanSelector=bme;Wf.numberSelector=vme});var G1=S((Git,o5)=>{"use strict";var rC=Object.defineProperty,Ame=Object.getOwnPropertyDescriptor,xme=Object.getOwnPropertyNames,Ime=Object.prototype.hasOwnProperty,$1=(e,t)=>rC(e,"name",{value:t,configurable:!0}),wme=(e,t)=>{for(var r in t)rC(e,r,{get:t[r],enumerable:!0})},Tme=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of xme(t))!Ime.call(e,s)&&s!==r&&rC(e,s,{get:()=>t[s],enumerable:!(n=Ame(t,s))||n.enumerable});return e},Rme=e=>Tme(rC({},"__esModule",{value:!0}),e),i5={};wme(i5,{build:()=>Ome,parse:()=>Pme,validate:()=>Nme});o5.exports=Rme(i5);var Nme=$1(e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6,"validate"),Pme=$1(e=>{let t=e.split(":");if(t.length<6||t[0]!=="arn")throw new Error("Malformed ARN");let[,r,n,s,i,...o]=t;return{partition:r,service:n,region:s,accountId:i,resource:o.join(":")}},"parse"),Ome=$1(e=>{let{partition:t="aws",service:r,region:n,accountId:s,resource:i}=e;if([r,n,s,i].some(o=>typeof o!="string"))throw new Error("Input ARN object is invalid");return`arn:${t}:${r}:${n}:${s}:${i}`},"build")});var oC=S(tr=>{"use strict";var Pg=Xt(),u5=Ct(),Dme=yS(),nC=tC(),kme=(wn(),St(Yi)),d5=(Ys(),St(Du));dc();var Bme=Ns(),a5=xu(),Lme=G1(),Fme="content-length",Mme="x-amz-decoded-content-length";function f5(){return(e,t)=>async r=>{let{request:n}=r;if(Pg.HttpRequest.isInstance(n)&&!(Fme in n.headers)&&!(Mme in n.headers)){let s="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof t?.logger?.warn=="function"&&!(t.logger instanceof u5.NoOpLogger)?t.logger.warn(s):console.warn(s)}return e({...r})}}var h5={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Ume=e=>({applyToStack:t=>{t.add(f5(),h5)}}),p5=e=>(t,r)=>async n=>{let s=await e.region(),i=e.region,o=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),o=()=>Object.defineProperty(e,"region",{writable:!0,value:i}));try{let a=await t(n);if(r.__s3RegionRedirect){o();let c=await e.region();if(s!==c)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}},m5={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function g5(e){return(t,r)=>async n=>{try{return await t(n)}catch(s){if(e.followRegionRedirects){let i=s?.$metadata?.httpStatusCode,o=r.commandName==="HeadBucketCommand",a=s?.$response?.headers?.["x-amz-bucket-region"];if(a&&(i===301||i===400&&(s?.name==="IllegalLocationConstraintException"||o))){try{let c=a;r.logger?.debug(`Redirecting from ${await e.region()} to ${c}`),r.__s3RegionRedirect=c}catch(c){throw new Error("Region redirect failed: "+c)}return t(n)}}throw s}}}var y5={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},qme=e=>({applyToStack:t=>{t.add(g5(e),y5),t.addRelativeTo(p5(e),m5)}}),E5=e=>(t,r)=>async n=>{let s=await t(n),{response:i}=s;if(Pg.HttpResponse.isInstance(i)&&i.headers.expires){i.headers.expiresstring=i.headers.expires;try{u5.parseRfc7231DateTime(i.headers.expires)}catch(o){r.logger?.warn(`AWS SDK Warning for ${r.clientName}::${r.commandName} response parsing (${i.headers.expires}): ${o}`),delete i.headers.expires}}return s},S5={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},Vme=e=>({applyToStack:t=>{t.addRelativeTo(E5(),S5)}}),sC=class e{data;lastPurgeTime=Date.now();static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;constructor(t={}){this.data=t}get(t){let r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){let t=Date.now();if(!(this.lastPurgeTime+e.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let s=await n.identity;s.expiration&&s.expiration.getTime()<t&&delete this.data[r]}}}},Jf=class{_identity;isRefreshing;accessed;constructor(t,r=!1,n=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}},iC=class e{createSessionFn;cache;static REFRESH_WINDOW_MS=6e4;constructor(t,r=new sC){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){let n=r.Bucket,{cache:s}=this,i=s.get(n);return i?i.identity.then(o=>(o.expiration?.getTime()??0)<Date.now()?s.set(n,new Jf(this.getIdentity(n))).identity:((o.expiration?.getTime()??0)<Date.now()+e.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(l=>{s.set(n,new Jf(Promise.resolve(l)))})),o)):s.set(n,new Jf(this.getIdentity(n))).identity}async getIdentity(t){await this.cache.purgeExpired().catch(s=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+s)});let r=await this.createSessionFn(t);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}},Hme="Directory",jme="S3Express",Kme="sigv4-s3express",W1="X-Amz-S3session-Token",J1=W1.toLowerCase(),zme="AWS_S3_DISABLE_EXPRESS_SESSION_AUTH",$me="s3_disable_express_session_auth",Gme={environmentVariableSelector:e=>nC.booleanSelector(e,zme,nC.SelectorType.ENV),configFileSelector:e=>nC.booleanSelector(e,$me,nC.SelectorType.CONFIG),default:!1},X1=class extends Dme.SignatureV4{async signWithCredentials(t,r,n){let s=c5(r);t.headers[J1]=r.sessionToken;let i=this;return l5(i,s),i.signRequest(t,n??{})}async presignWithCredentials(t,r,n){let s=c5(r);return delete t.headers[J1],t.headers[W1]=r.sessionToken,t.query=t.query??{},t.query[W1]=r.sessionToken,l5(this,s),this.presign(t,n)}};function c5(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function l5(e,t){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,s=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=s}var C5=e=>(t,r)=>async n=>{if(r.endpointV2){let s=r.endpointV2,i=s.properties?.authSchemes?.[0]?.name===Kme;if((s.properties?.backend===jme||s.properties?.bucketType===Hme)&&(kme.setFeature(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){let a=n.input.Bucket;if(a){let c=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:a});r.s3ExpressIdentity=c,Pg.HttpRequest.isInstance(n.request)&&c.sessionToken&&(n.request.headers[J1]=c.sessionToken)}}}return t(n)},_5={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Wme=e=>({applyToStack:t=>{t.add(C5(e),_5)}}),Jme=async(e,t,r,n)=>{let s=await n.signWithCredentials(r,e,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},Xme=e=>t=>{throw t},Yme=(e,t)=>{},Qme=d5.httpSigningMiddlewareOptions,b5=e=>(t,r)=>async n=>{if(!Pg.HttpRequest.isInstance(n.request))return t(n);let i=Bme.getSmithyContext(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,l;r.s3ExpressIdentity?l=await Jme(r.s3ExpressIdentity,o,n.request,await e.signer()):l=await c.sign(n.request,a,o);let d=await t({...n,request:l}).catch((c.errorHandler||Xme)(o));return(c.successHandler||Yme)(d.response,o),d},Zme=e=>({applyToStack:t=>{t.addRelativeTo(b5(e),d5.httpSigningMiddlewareOptions)}}),ege=(e,{session:t})=>{let[r,n]=t,{forcePathStyle:s,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:a,s3ExpressIdentityProvider:c,bucketEndpoint:l,expectContinueHeader:d}=e;return Object.assign(e,{forcePathStyle:s??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:a??!1,s3ExpressIdentityProvider:c??new iC(async f=>r().send(new n({Bucket:f}))),bucketEndpoint:l??!1,expectContinueHeader:d??2097152})},tge={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},rge=3e3,v5=e=>(t,r)=>async n=>{let s=await t(n),{response:i}=s;if(!Pg.HttpResponse.isInstance(i))return s;let{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return s;let l=a,d=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([l,d]=await a5.splitStream(a)),i.body=d;let f=await nge(l,{streamCollector:async p=>a5.headStream(p,rge)});typeof l?.destroy=="function"&&l.destroy();let h=e.utf8Encoder(f.subarray(f.length-16));if(f.length===0&&tge[r.commandName]){let p=new Error("S3 aborted request");throw p.name="InternalError",p}return h&&h.endsWith("</Error>")&&(i.statusCode=400),s},nge=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),A5={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},sge=e=>({applyToStack:t=>{t.addRelativeTo(v5(e),A5)}});function ige(e){return(t,r)=>async n=>{if(e.bucketEndpoint){let s=r.endpointV2;if(s){let i=n.input.Bucket;if(typeof i=="string")try{let o=new URL(i);r.endpointV2={...s,url:o}}catch(o){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a),o}}}return t(n)}}var oge={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function x5({bucketEndpoint:e}){return t=>async r=>{let{input:{Bucket:n}}=r;if(!e&&typeof n=="string"&&!Lme.validate(n)&&n.indexOf("/")>=0){let s=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw s.name="InvalidBucketName",s}return t({...r})}}var I5={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},age=e=>({applyToStack:t=>{t.add(x5(e),I5),t.addRelativeTo(ige(e),oge)}});tr.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS=Gme;tr.S3ExpressIdentityCache=sC;tr.S3ExpressIdentityCacheEntry=Jf;tr.S3ExpressIdentityProviderImpl=iC;tr.SignatureV4S3Express=X1;tr.checkContentLengthHeader=f5;tr.checkContentLengthHeaderMiddlewareOptions=h5;tr.getCheckContentLengthHeaderPlugin=Ume;tr.getRegionRedirectMiddlewarePlugin=qme;tr.getS3ExpiresMiddlewarePlugin=Vme;tr.getS3ExpressHttpSigningPlugin=Zme;tr.getS3ExpressPlugin=Wme;tr.getThrow200ExceptionsPlugin=sge;tr.getValidateBucketNamePlugin=age;tr.regionRedirectEndpointMiddleware=p5;tr.regionRedirectEndpointMiddlewareOptions=m5;tr.regionRedirectMiddleware=g5;tr.regionRedirectMiddlewareOptions=y5;tr.resolveS3Config=ege;tr.s3ExpiresMiddleware=E5;tr.s3ExpiresMiddlewareOptions=S5;tr.s3ExpressHttpSigningMiddleware=b5;tr.s3ExpressHttpSigningMiddlewareOptions=Qme;tr.s3ExpressMiddleware=C5;tr.s3ExpressMiddlewareOptions=_5;tr.throw200ExceptionsMiddleware=v5;tr.throw200ExceptionsMiddlewareOptions=A5;tr.validateBucketNameMiddleware=x5;tr.validateBucketNameMiddlewareOptions=I5});var ju=S(Hu=>{"use strict";var Q1=dc(),Z1=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),i=0;for(;;){let{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let i=String(t[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}},cge=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),w5=e=>cge.test(e)||e.startsWith("[")&&e.endsWith("]"),lge=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),tP=(e,t=!1)=>{if(!t)return lge.test(e);let r=e.split(".");for(let n of r)if(!tP(n))return!1;return!0},eP={},Og="endpoints";function gl(e){return typeof e!="object"||e==null?e:"ref"in e?`$${gl(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(gl).join(", ")})`:JSON.stringify(e,null,2)}var Ds=class extends Error{constructor(t){super(t),this.name="EndpointError"}},uge=(e,t)=>e===t,dge=e=>{let t=e.split("."),r=[];for(let n of t){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Ds(`Path: '${e}' does not end with ']'`);let i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Ds(`Invalid array index: '${i}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},T5=(e,t)=>dge(t).reduce((r,n)=>{if(typeof r!="object")throw new Ds(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),fge=e=>e!=null,hge=e=>!e,Y1={[Q1.EndpointURLScheme.HTTP]:80,[Q1.EndpointURLScheme.HTTPS]:443},pge=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:p,protocol:m="",path:E="",query:b={}}=e,A=new URL(`${m}//${h}${p?`:${p}`:""}${E}`);return A.search=Object.entries(b).map(([R,D])=>`${R}=${D}`).join("&"),A}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=t;if(a)return null;let c=o.slice(0,-1);if(!Object.values(Q1.EndpointURLScheme).includes(c))return null;let l=w5(s),d=r.includes(`${n}:${Y1[c]}`)||typeof e=="string"&&e.includes(`${n}:${Y1[c]}`),f=`${n}${d?`:${Y1[c]}`:""}`;return{scheme:c,authority:f,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:l}},mge=(e,t)=>e===t,gge=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),yge=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Ege={booleanEquals:uge,getAttr:T5,isSet:fge,isValidHostLabel:tP,not:hge,parseURL:pge,stringEquals:mge,substring:gge,uriEncode:yge},R5=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},s=0;for(;s<e.length;){let i=e.indexOf("{",s);if(i===-1){r.push(e.slice(s));break}r.push(e.slice(s,i));let o=e.indexOf("}",i);if(o===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(i+1,o)),s=o+2);let a=e.substring(i+1,o);if(a.includes("#")){let[c,l]=a.split("#");r.push(T5(n[c],l))}else r.push(n[a]);s=o+1}return r.join("")},Sge=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],aC=(e,t,r)=>{if(typeof e=="string")return R5(e,r);if(e.fn)return P5.callFunction(e,r);if(e.ref)return Sge(e,r);throw new Ds(`'${t}': ${String(e)} is not a string, function or reference.`)},N5=({fn:e,argv:t},r)=>{let n=t.map(i=>["boolean","number"].includes(typeof i)?i:P5.evaluateExpression(i,"arg",r)),s=e.split(".");return s[0]in eP&&s[1]!=null?eP[s[0]][s[1]](...n):Ege[e](...n)},P5={evaluateExpression:aC,callFunction:N5},Cge=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Ds(`'${e}' is already defined in Reference Record.`);let n=N5(t,r);return r.logger?.debug?.(`${Og} evaluateCondition: ${gl(t)} = ${gl(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},rP=(e=[],t)=>{let r={};for(let n of e){let{result:s,toAssign:i}=Cge(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,t.logger?.debug?.(`${Og} assign: ${i.name} := ${gl(i.value)}`))}return{result:!0,referenceRecord:r}},_ge=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{let o=aC(i,"Header value entry",t);if(typeof o!="string")throw new Ds(`Header '${n}' value '${o}' is not a string`);return o})}),{}),O5=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:k5.getEndpointProperty(s,t)}),{}),D5=(e,t)=>{if(Array.isArray(e))return e.map(r=>D5(r,t));switch(typeof e){case"string":return R5(e,t);case"object":if(e===null)throw new Ds(`Unexpected endpoint property: ${e}`);return k5.getEndpointProperties(e,t);case"boolean":return e;default:throw new Ds(`Unexpected endpoint property type: ${typeof e}`)}},k5={getEndpointProperty:D5,getEndpointProperties:O5},bge=(e,t)=>{let r=aC(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Ds(`Endpoint URL must be a string, got ${typeof r}`)},vge=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:s,referenceRecord:i}=rP(r,t);if(!s)return;let o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:c,headers:l}=n;return t.logger?.debug?.(`${Og} Resolving endpoint from template: ${gl(n)}`),{...l!=null&&{headers:_ge(l,o)},...c!=null&&{properties:O5(c,o)},url:bge(a,o)}},Age=(e,t)=>{let{conditions:r,error:n}=e,{result:s,referenceRecord:i}=rP(r,t);if(s)throw new Ds(aC(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},B5=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=vge(r,t);if(n)return n}else if(r.type==="error")Age(r,t);else if(r.type==="tree"){let n=L5.evaluateTreeRule(r,t);if(n)return n}else throw new Ds(`Unknown endpoint rule: ${r}`);throw new Ds("Rules evaluation failed")},xge=(e,t)=>{let{conditions:r,rules:n}=e,{result:s,referenceRecord:i}=rP(r,t);if(s)return L5.evaluateRules(n,{...t,referenceRecord:{...t.referenceRecord,...i}})},L5={evaluateRules:B5,evaluateTreeRule:xge},Ige=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:s,rules:i}=e;t.logger?.debug?.(`${Og} Initial EndpointParams: ${gl(r)}`);let o=Object.entries(s).filter(([,l])=>l.default!=null).map(([l,d])=>[l,d.default]);if(o.length>0)for(let[l,d]of o)r[l]=r[l]??d;let a=Object.entries(s).filter(([,l])=>l.required).map(([l])=>l);for(let l of a)if(r[l]==null)throw new Ds(`Missing required parameter: '${l}'`);let c=B5(i,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${Og} Resolved endpoint: ${gl(c)}`),c};Hu.EndpointCache=Z1;Hu.EndpointError=Ds;Hu.customEndpointFunctions=eP;Hu.isIpAddress=w5;Hu.isValidHostLabel=tP;Hu.resolveEndpoint=Ige});var M5=S(F5=>{"use strict";function wge(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in t?Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]:t[n]=s}return t}F5.parseQueryString=wge});var yl=S(q5=>{"use strict";var Tge=M5(),U5=e=>{if(typeof e=="string")return U5(new URL(e));let{hostname:t,pathname:r,port:n,protocol:s,search:i}=e,o;return i&&(o=Tge.parseQueryString(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}};q5.parseUrl=U5});var Yf=S(Vo=>{"use strict";var Xf=ju(),Rge=yl(),H5=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!H5(r))return!1;return!0}return!(!Xf.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Xf.isIpAddress(e))},V5=":",Nge="/",Pge=e=>{let t=e.split(V5);if(t.length<6)return null;let[r,n,s,i,o,...a]=t;if(r!=="arn"||n===""||s===""||a.join(V5)==="")return null;let c=a.map(l=>l.split(Nge)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},Oge=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],Dge="1.1",j5={partitions:Oge,version:Dge},K5=j5,z5="",$5=e=>{let{partitions:t}=K5;for(let n of t){let{regions:s,outputs:i}=n;for(let[o,a]of Object.entries(s))if(o===e)return{...i,...a}}for(let n of t){let{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(e))return{...i}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},G5=(e,t="")=>{K5=e,z5=t},kge=()=>{G5(j5,"")},Bge=()=>z5,W5={isVirtualHostableS3Bucket:H5,parseArn:Pge,partition:$5};Xf.customEndpointFunctions.aws=W5;var Lge=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>J5(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},J5=e=>Rge.parseUrl(e.url);Object.defineProperty(Vo,"EndpointError",{enumerable:!0,get:function(){return Xf.EndpointError}});Object.defineProperty(Vo,"isIpAddress",{enumerable:!0,get:function(){return Xf.isIpAddress}});Object.defineProperty(Vo,"resolveEndpoint",{enumerable:!0,get:function(){return Xf.resolveEndpoint}});Vo.awsEndpointFunctions=W5;Vo.getUserAgentPrefix=Bge;Vo.partition=$5;Vo.resolveDefaultAwsRegionalEndpointsConfig=Lge;Vo.setPartitionInfo=G5;Vo.toEndpointV1=J5;Vo.useDefaultPartitionInfo=kge});var Zf=S(Qf=>{"use strict";var Fge=(Ys(),St(Du)),Mge=Yf(),Uge=Xt(),va=(wn(),St(Yi)),Z5=void 0;function qge(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function Vge(e){let t=Fge.normalizeProvider(e.userAgentAppId??Z5),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await t();if(!qge(n)){let s=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var Hge=/\d{12}\.ddb/;async function jge(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&va.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let i=await t.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?va.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):va.setFeature(e,"RETRY_MODE_STANDARD","E"):va.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let i=e.endpointV2;switch(String(i?.url?.hostname).match(Hge)&&va.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":va.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":va.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":va.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let i=s;i.accountId&&va.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[o,a]of Object.entries(i.$source??{}))va.setFeature(e,o,a)}}var X5="user-agent",nP="x-amz-user-agent",Y5=" ",sP="/",Kge=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,zge=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Q5="-",$ge=1024;function Gge(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=$ge){t.length?t+=","+n:t+=n;continue}break}return t}var e8=e=>(t,r)=>async n=>{let{request:s}=n;if(!Uge.HttpRequest.isInstance(s))return t(n);let{headers:i}=s,o=r?.userAgent?.map(cC)||[],a=(await e.defaultUserAgentProvider()).map(cC);await jge(r,e,n);let c=r;a.push(`m/${Gge(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let l=e?.customUserAgent?.map(cC)||[],d=await e.userAgentAppId();d&&a.push(cC([`app/${d}`]));let f=Mge.getUserAgentPrefix(),h=(f?[f]:[]).concat([...a,...o,...l]).join(Y5),p=[...a.filter(m=>m.startsWith("aws-sdk-")),...l].join(Y5);return e.runtime!=="browser"?(p&&(i[nP]=i[nP]?`${i[X5]} ${p}`:p),i[X5]=h):i[nP]=h,t({...n,request:s})},cC=e=>{let t=e[0].split(sP).map(o=>o.replace(Kge,Q5)).join(sP),r=e[1]?.replace(zge,Q5),n=t.indexOf(sP),s=t.substring(0,n),i=t.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},t8={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Wge=e=>({applyToStack:t=>{t.add(e8(e),t8)}});Qf.DEFAULT_UA_APP_ID=Z5;Qf.getUserAgentMiddlewareOptions=t8;Qf.getUserAgentPlugin=Wge;Qf.resolveUserAgentConfig=Vge;Qf.userAgentMiddleware=e8});var Ho=S(Es=>{"use strict";var El=tC(),lC=Ns(),Jge=ju(),s8="AWS_USE_DUALSTACK_ENDPOINT",i8="use_dualstack_endpoint",Xge=!1,Yge={environmentVariableSelector:e=>El.booleanSelector(e,s8,El.SelectorType.ENV),configFileSelector:e=>El.booleanSelector(e,i8,El.SelectorType.CONFIG),default:!1},o8="AWS_USE_FIPS_ENDPOINT",a8="use_fips_endpoint",Qge=!1,Zge={environmentVariableSelector:e=>El.booleanSelector(e,o8,El.SelectorType.ENV),configFileSelector:e=>El.booleanSelector(e,a8,El.SelectorType.CONFIG),default:!1},eye=e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:s}=e;return Object.assign(e,{tls:t??!0,endpoint:lC.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:lC.normalizeProvider(s??!1)})},tye=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await e.useDualstackEndpoint(),i=await e.useFipsEndpoint(),{hostname:o}=await e.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:i})??{};if(!o)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${o}`)},rye=e=>{let t=lC.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:i}=e;return Object.assign(e,{tls:i??!0,endpoint:r?lC.normalizeProvider(typeof r=="string"?s(r):r):()=>tye({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},c8="AWS_REGION",l8="region",nye={environmentVariableSelector:e=>e[c8],configFileSelector:e=>e[l8],default:()=>{throw new Error("Region is missing")}},sye={preferredFile:"credentials"},r8=new Set,iye=(e,t=Jge.isValidHostLabel)=>{if(!r8.has(e)&&!t(e))throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);r8.add(e)},u8=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),oye=e=>u8(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,aye=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let n=typeof t=="function"?await t():t,s=oye(n);return iye(s),s},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return u8(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},n8=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,cye=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),lye=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",uye=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=e.match(s);if(i)return i[0].slice(1,-1)}},dye=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:i})=>{let o=lye(e,{partitionHash:i}),a=e in s?e:i[o]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:r},l=n8(s[a]?.variants,c),d=n8(i[o]?.variants,c),f=cye(a,{regionHostname:l,partitionHostname:d});if(f===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let h=uye(f,{signingRegion:s[a]?.signingRegion,regionRegex:i[o].regionRegex,useFipsEndpoint:t});return{partition:o,signingService:n,hostname:f,...h&&{signingRegion:h},...s[a]?.signingService&&{signingService:s[a].signingService}}};Es.CONFIG_USE_DUALSTACK_ENDPOINT=i8;Es.CONFIG_USE_FIPS_ENDPOINT=a8;Es.DEFAULT_USE_DUALSTACK_ENDPOINT=Xge;Es.DEFAULT_USE_FIPS_ENDPOINT=Qge;Es.ENV_USE_DUALSTACK_ENDPOINT=s8;Es.ENV_USE_FIPS_ENDPOINT=o8;Es.NODE_REGION_CONFIG_FILE_OPTIONS=sye;Es.NODE_REGION_CONFIG_OPTIONS=nye;Es.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=Yge;Es.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=Zge;Es.REGION_ENV_NAME=c8;Es.REGION_INI_NAME=l8;Es.getRegionInfo=dye;Es.resolveCustomEndpointsConfig=eye;Es.resolveEndpointsConfig=rye;Es.resolveRegionConfig=aye});var f8=S(d8=>{"use strict";var fye=e=>Object.assign(e,{eventStreamMarshaller:e.eventStreamSerdeProvider(e)});d8.resolveEventStreamSerdeConfig=fye});var Dg=S(uC=>{"use strict";var hye=Xt(),h8="content-length";function p8(e){return t=>async r=>{let n=r.request;if(hye.HttpRequest.isInstance(n)){let{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(h8)===-1)try{let o=e(s);n.headers={...n.headers,[h8]:String(o)}}catch{}}return t({...r,request:n})}}var m8={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},pye=e=>({applyToStack:t=>{t.add(p8(e.bodyLengthChecker),m8)}});uC.contentLengthMiddleware=p8;uC.contentLengthMiddlewareOptions=m8;uC.getContentLengthPlugin=pye});var oP=S(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0});dC.getHomeDir=void 0;var mye=require("os"),gye=require("path"),iP={},yye=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Eye=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${gye.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let s=yye();return iP[s]||(iP[s]=(0,mye.homedir)()),iP[s]};dC.getHomeDir=Eye});var aP=S(fC=>{"use strict";Object.defineProperty(fC,"__esModule",{value:!0});fC.getSSOTokenFilepath=void 0;var Sye=require("crypto"),Cye=require("path"),_ye=oP(),bye=e=>{let r=(0,Sye.createHash)("sha1").update(e).digest("hex");return(0,Cye.join)((0,_ye.getHomeDir)(),".aws","sso","cache",`${r}.json`)};fC.getSSOTokenFilepath=bye});var g8=S(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.getSSOTokenFromFile=Sl.tokenIntercept=void 0;var vye=require("fs"),Aye=aP(),{readFile:xye}=vye.promises;Sl.tokenIntercept={};var Iye=async e=>{if(Sl.tokenIntercept[e])return Sl.tokenIntercept[e];let t=(0,Aye.getSSOTokenFilepath)(e),r=await xye(t,"utf8");return JSON.parse(r)};Sl.getSSOTokenFromFile=Iye});var y8=S(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.slurpFile=Li.fileIntercept=Li.filePromisesHash=void 0;var wye=require("fs"),{readFile:Tye}=wye.promises;Li.filePromisesHash={};Li.fileIntercept={};var Rye=(e,t)=>Li.fileIntercept[e]!==void 0?Li.fileIntercept[e]:((!Li.filePromisesHash[e]||t?.ignoreCache)&&(Li.filePromisesHash[e]=Tye(e,"utf8")),Li.filePromisesHash[e]);Li.slurpFile=Rye});var Ac=S(yi=>{"use strict";var kg=oP(),E8=aP(),cP=g8(),hC=require("path"),pC=dc(),Bg=y8(),C8="AWS_PROFILE",_8="default",Nye=e=>e.profile||process.env[C8]||_8,Ku=".",Pye=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Ku);return r===-1?!1:Object.values(pC.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let s=r.indexOf(Ku),i=r.substring(0,s)===pC.IniSectionType.PROFILE?r.substring(s+1):r;return t[i]=n,t},{...e.default&&{default:e.default}}),Oye="AWS_CONFIG_FILE",b8=()=>process.env[Oye]||hC.join(kg.getHomeDir(),".aws","config"),Dye="AWS_SHARED_CREDENTIALS_FILE",kye=()=>process.env[Dye]||hC.join(kg.getHomeDir(),".aws","credentials"),Bye=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,Lye=["__proto__","profile __proto__"],lP=e=>{let t={},r,n;for(let s of e.split(/\r?\n/)){let i=s.split(/(^|\s)[;#]/)[0].trim();if(i[0]==="["&&i[i.length-1]==="]"){r=void 0,n=void 0;let a=i.substring(1,i.length-1),c=Bye.exec(a);if(c){let[,l,,d]=c;Object.values(pC.IniSectionType).includes(l)&&(r=[l,d].join(Ku))}else r=a;if(Lye.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=i.indexOf("=");if(![0,-1].includes(a)){let[c,l]=[i.substring(0,a).trim(),i.substring(a+1).trim()];if(l==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),t[r]=t[r]||{};let d=n?[n,c].join(Ku):c;t[r][d]=l}}}}return t},S8=()=>({}),v8=async(e={})=>{let{filepath:t=kye(),configFilepath:r=b8()}=e,n=kg.getHomeDir(),s="~/",i=t;t.startsWith(s)&&(i=hC.join(n,t.slice(2)));let o=r;r.startsWith(s)&&(o=hC.join(n,r.slice(2)));let a=await Promise.all([Bg.slurpFile(o,{ignoreCache:e.ignoreCache}).then(lP).then(Pye).catch(S8),Bg.slurpFile(i,{ignoreCache:e.ignoreCache}).then(lP).catch(S8)]);return{configFile:a[0],credentialsFile:a[1]}},Fye=e=>Object.entries(e).filter(([t])=>t.startsWith(pC.IniSectionType.SSO_SESSION+Ku)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(Ku)+1)]:n}),{}),Mye=()=>({}),Uye=async(e={})=>Bg.slurpFile(e.configFilepath??b8()).then(lP).then(Fye).catch(Mye),qye=(...e)=>{let t={};for(let r of e)for(let[n,s]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],s):t[n]=s;return t},Vye=async e=>{let t=await v8(e);return qye(t.configFile,t.credentialsFile)},Hye={getFileRecord(){return Bg.fileIntercept},interceptFile(e,t){Bg.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return cP.tokenIntercept},interceptToken(e,t){cP.tokenIntercept[e]=t}};Object.defineProperty(yi,"getSSOTokenFromFile",{enumerable:!0,get:function(){return cP.getSSOTokenFromFile}});yi.CONFIG_PREFIX_SEPARATOR=Ku;yi.DEFAULT_PROFILE=_8;yi.ENV_PROFILE=C8;yi.externalDataInterceptor=Hye;yi.getProfileName=Nye;yi.loadSharedConfigFiles=v8;yi.loadSsoSessionData=Uye;yi.parseKnownFiles=Vye;Object.keys(kg).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yi,e)&&Object.defineProperty(yi,e,{enumerable:!0,get:function(){return kg[e]}})});Object.keys(E8).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yi,e)&&Object.defineProperty(yi,e,{enumerable:!0,get:function(){return E8[e]}})})});var Cl=S(I8=>{"use strict";var Lg=Qs(),A8=Ac();function x8(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var jye=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new Lg.CredentialsProviderError(r.message||`Not found in ENV: ${x8(e.toString())}`,{logger:t?.logger})}},Kye=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=A8.getProfileName(r),{configFile:s,credentialsFile:i}=await A8.loadSharedConfigFiles(r),o=i[n]||{},a=s[n]||{},c=t==="config"?{...o,...a}:{...a,...o};try{let d=e(c,t==="config"?s:i);if(d===void 0)throw new Error;return d}catch(l){throw new Lg.CredentialsProviderError(l.message||`Not found in config files w/ profile [${n}]: ${x8(e.toString())}`,{logger:r.logger})}},zye=e=>typeof e=="function",$ye=e=>zye(e)?async()=>await e():Lg.fromStatic(e),Gye=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:s,logger:i}=n,o={signingName:s,logger:i};return Lg.memoize(Lg.chain(jye(e,o),Kye(t,n),$ye(r)))};I8.loadConfig=Gye});var N8=S(mC=>{"use strict";Object.defineProperty(mC,"__esModule",{value:!0});mC.getEndpointUrlConfig=void 0;var w8=Ac(),T8="AWS_ENDPOINT_URL",R8="endpoint_url",Wye=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(i=>i.toUpperCase()),n=t[[T8,...r].join("_")];if(n)return n;let s=t[T8];if(s)return s},configFileSelector:(t,r)=>{if(r&&t.services){let s=r[["services",t.services].join(w8.CONFIG_PREFIX_SEPARATOR)];if(s){let i=e.split(" ").map(a=>a.toLowerCase()),o=s[[i.join("_"),R8].join(w8.CONFIG_PREFIX_SEPARATOR)];if(o)return o}}let n=t[R8];if(n)return n},default:void 0});mC.getEndpointUrlConfig=Wye});var P8=S(gC=>{"use strict";Object.defineProperty(gC,"__esModule",{value:!0});gC.getEndpointFromConfig=void 0;var Jye=Cl(),Xye=N8(),Yye=async e=>(0,Jye.loadConfig)((0,Xye.getEndpointUrlConfig)(e??""))();gC.getEndpointFromConfig=Yye});var Aa=S(xc=>{"use strict";var D8=P8(),O8=yl(),Qye=(Ys(),St(Du)),yC=Ns(),Zye=nl(),e0e=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),i0e(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!s0e(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},t0e=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,r0e=/(\d+\.){3}\d+/,n0e=/\.\./,s0e=e=>t0e.test(e)&&!r0e.test(e)&&!n0e.test(e),i0e=e=>{let[t,r,n,,,s]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},o0e=(e,t,r)=>{let n=async()=>{let s=r[e]??r[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},uP=e=>typeof e=="object"?"url"in e?O8.parseUrl(e.url):e:O8.parseUrl(e),k8=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await D8.getEndpointFromConfig(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(uP(o)),r.isCustomEndpoint=!0)}let s=await B8(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},B8=async(e,t,r)=>{let n={},s=t?.getEndpointParameterInstructions?.()||{};for(let[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=e[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await o0e(o.name,i,r)();break;case"operationContextParams":n[i]=o.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await e0e(n),n},L8=({config:e,instructions:t})=>(r,n)=>async s=>{e.isCustomEndpoint&&Qye.setFeature(n,"ENDPOINT_OVERRIDE","N");let i=await k8(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;let c=yC.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},F8={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Zye.serializerMiddlewareOption.name},a0e=(e,t)=>({applyToStack:r=>{r.addRelativeTo(L8({config:e,instructions:t}),F8)}}),c0e=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=e,i=r!=null?async()=>uP(await yC.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:i,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:yC.normalizeProvider(n??!1),useFipsEndpoint:yC.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=D8.getEndpointFromConfig(e.serviceId)),c),a},l0e=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};xc.endpointMiddleware=L8;xc.endpointMiddlewareOptions=F8;xc.getEndpointFromInstructions=k8;xc.getEndpointPlugin=a0e;xc.resolveEndpointConfig=c0e;xc.resolveEndpointRequiredConfig=l0e;xc.resolveParams=B8;xc.toEndpointV1=uP});var fP=S(_l=>{"use strict";var u0e=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],d0e=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],f0e=["TimeoutError","RequestTimeout","RequestTimeoutException"],h0e=[500,502,503,504],p0e=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],m0e=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],M8=e=>e?.$retryable!==void 0,g0e=e=>u0e.includes(e.name),U8=e=>e.$metadata?.clockSkewCorrected,q8=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},y0e=e=>e.$metadata?.httpStatusCode===429||d0e.includes(e.name)||e.$retryable?.throttling==!0,dP=(e,t=0)=>M8(e)||U8(e)||f0e.includes(e.name)||p0e.includes(e?.code||"")||m0e.includes(e?.code||"")||h0e.includes(e.$metadata?.httpStatusCode||0)||q8(e)||e.cause!==void 0&&t<=10&&dP(e.cause,t+1),E0e=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!dP(e)}return!1};_l.isBrowserNetworkError=q8;_l.isClockSkewCorrectedError=U8;_l.isClockSkewError=g0e;_l.isRetryableByTrait=M8;_l.isServerError=E0e;_l.isThrottlingError=y0e;_l.isTransientError=dP});var eh=S(an=>{"use strict";var S0e=fP();an.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(an.RETRY_MODES||(an.RETRY_MODES={}));var hP=3,C0e=an.RETRY_MODES.STANDARD,EC=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),S0e.isThrottlingError(t)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},Fg=100,yP=20*1e3,H8=500,pP=500,j8=5,K8=10,z8=1,_0e="amz-sdk-invocation-id",b0e="amz-sdk-request",v0e=()=>{let e=Fg;return{computeNextBackoffDelay:n=>Math.floor(Math.min(yP,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},V8=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(yP,e),getRetryCost:()=>r}),Mg=class{maxAttempts;mode=an.RETRY_MODES.STANDARD;capacity=pP;retryBackoffStrategy=v0e();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return V8({retryDelay:Fg,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?H8:Fg);let i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,V8({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(pP,this.capacity+(t.getRetryCost()??z8))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${hP}`),hP}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?K8:j8}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},mP=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=an.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:n}=r??{};this.rateLimiter=n??new EC,this.standardRetryStrategy=new Mg(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},gP=class extends Mg{computeNextBackoffDelay;constructor(t,r=Fg){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};an.AdaptiveRetryStrategy=mP;an.ConfiguredRetryStrategy=gP;an.DEFAULT_MAX_ATTEMPTS=hP;an.DEFAULT_RETRY_DELAY_BASE=Fg;an.DEFAULT_RETRY_MODE=C0e;an.DefaultRateLimiter=EC;an.INITIAL_RETRY_TOKENS=pP;an.INVOCATION_ID_HEADER=_0e;an.MAXIMUM_RETRY_DELAY=yP;an.NO_RETRY_INCREMENT=z8;an.REQUEST_HEADER=b0e;an.RETRY_COST=j8;an.StandardRetryStrategy=Mg;an.THROTTLING_RETRY_DELAY_BASE=H8;an.TIMEOUT_RETRY_COST=K8});var $8=S(SC=>{"use strict";Object.defineProperty(SC,"__esModule",{value:!0});SC.isStreamingPayload=void 0;var A0e=require("stream"),x0e=e=>e?.body instanceof A0e.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;SC.isStreamingPayload=x0e});var Ic=S(Bn=>{"use strict";var Qr=eh(),th=Xt(),bl=fP(),W8=nS(),G8=Ns(),I0e=Ct(),w0e=$8(),T0e=(e,t)=>{let r=e,n=Qr.NO_RETRY_INCREMENT,s=Qr.RETRY_COST,i=Qr.TIMEOUT_RETRY_COST,o=e,a=f=>f.name==="TimeoutError"?i:s,c=f=>a(f)<=o;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:f=>{if(!c(f))throw new Error("No retry token available");let h=a(f);return o-=h,h},releaseRetryTokens:f=>{o+=f??n,o=Math.min(o,r)}})},J8=(e,t)=>Math.floor(Math.min(Qr.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),X8=e=>e?bl.isRetryableByTrait(e)||bl.isClockSkewError(e)||bl.isThrottlingError(e)||bl.isTransientError(e):!1,Y8=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),CC=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Qr.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??X8,this.delayDecider=r?.delayDecider??J8,this.retryQuota=r?.retryQuota??T0e(Qr.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Qr.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let s,i=0,o=0,a=await this.getMaxAttempts(),{request:c}=r;for(th.HttpRequest.isInstance(c)&&(c.headers[Qr.INVOCATION_ID_HEADER]=W8.v4());;)try{th.HttpRequest.isInstance(c)&&(c.headers[Qr.REQUEST_HEADER]=`attempt=${i+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:d}=await t(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(s),d.$metadata.attempts=i+1,d.$metadata.totalRetryDelay=o,{response:l,output:d}}catch(l){let d=Y8(l);if(i++,this.shouldRetry(d,i,a)){s=this.retryQuota.retrieveRetryTokens(d);let f=this.delayDecider(bl.isThrottlingError(d)?Qr.THROTTLING_RETRY_DELAY_BASE:Qr.DEFAULT_RETRY_DELAY_BASE,i),h=R0e(d.$response),p=Math.max(h||0,f);o+=p,await new Promise(m=>setTimeout(m,p));continue}throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=i,d.$metadata.totalRetryDelay=o,d}}},R0e=e=>{if(!th.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},EP=class extends CC{rateLimiter;constructor(t,r){let{rateLimiter:n,...s}=r??{};super(t,s),this.rateLimiter=n??new Qr.DefaultRateLimiter,this.mode=Qr.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},SP="AWS_MAX_ATTEMPTS",CP="max_attempts",N0e={environmentVariableSelector:e=>{let t=e[SP];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${SP} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[CP];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${CP} mast be a number, got "${t}"`);return r},default:Qr.DEFAULT_MAX_ATTEMPTS},P0e=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,s=G8.normalizeProvider(n??Qr.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:s,retryStrategy:async()=>t||(await G8.normalizeProvider(r)()===Qr.RETRY_MODES.ADAPTIVE?new Qr.AdaptiveRetryStrategy(s):new Qr.StandardRetryStrategy(s))})},Q8="AWS_RETRY_MODE",Z8="retry_mode",O0e={environmentVariableSelector:e=>e[Q8],configFileSelector:e=>e[Z8],default:Qr.DEFAULT_RETRY_MODE},eK=()=>e=>async t=>{let{request:r}=t;return th.HttpRequest.isInstance(r)&&(delete r.headers[Qr.INVOCATION_ID_HEADER],delete r.headers[Qr.REQUEST_HEADER]),e(t)},tK={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},D0e=e=>({applyToStack:t=>{t.addRelativeTo(eK(),tK)}}),rK=e=>(t,r)=>async n=>{let s=await e.retryStrategy(),i=await e.maxAttempts();if(k0e(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,l=0,{request:d}=n,f=th.HttpRequest.isInstance(d);for(f&&(d.headers[Qr.INVOCATION_ID_HEADER]=W8.v4());;)try{f&&(d.headers[Qr.REQUEST_HEADER]=`attempt=${c+1}; max=${i}`);let{response:h,output:p}=await t(n);return s.recordSuccess(o),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=l,{response:h,output:p}}catch(h){let p=B0e(h);if(a=Y8(h),f&&w0e.isStreamingPayload(d))throw(r.logger instanceof I0e.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=l,a}c=o.getRetryCount();let m=o.getRetryDelay();l+=m,await new Promise(E=>setTimeout(E,m))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},k0e=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",B0e=e=>{let t={error:e,errorType:L0e(e)},r=sK(e.$response);return r&&(t.retryAfterHint=r),t},L0e=e=>bl.isThrottlingError(e)?"THROTTLING":bl.isTransientError(e)?"TRANSIENT":bl.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",nK={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},F0e=e=>({applyToStack:t=>{t.add(rK(e),nK)}}),sK=e=>{if(!th.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};Bn.AdaptiveRetryStrategy=EP;Bn.CONFIG_MAX_ATTEMPTS=CP;Bn.CONFIG_RETRY_MODE=Z8;Bn.ENV_MAX_ATTEMPTS=SP;Bn.ENV_RETRY_MODE=Q8;Bn.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=N0e;Bn.NODE_RETRY_MODE_CONFIG_OPTIONS=O0e;Bn.StandardRetryStrategy=CC;Bn.defaultDelayDecider=J8;Bn.defaultRetryDecider=X8;Bn.getOmitRetryHeadersPlugin=D0e;Bn.getRetryAfterHint=sK;Bn.getRetryPlugin=F0e;Bn.omitRetryHeadersMiddleware=eK;Bn.omitRetryHeadersMiddlewareOptions=tK;Bn.resolveRetryConfig=P0e;Bn.retryMiddleware=rK;Bn.retryMiddlewareOptions=nK});var _C=S(bP=>{"use strict";var M0e=oC(),iK=yS(),Ug={CrtSignerV4:null},_P=class{sigv4aSigner;sigv4Signer;signerOptions;static sigv4aDependency(){return typeof Ug.CrtSignerV4=="function"?"crt":typeof iK.signatureV4aContainer.SignatureV4a=="function"?"js":"none"}constructor(t){this.sigv4Signer=new M0e.SignatureV4S3Express(t),this.signerOptions=t}async sign(t,r={}){return r.signingRegion==="*"?this.getSigv4aSigner().sign(t,r):this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){let s=this.getSigv4aSigner(),i=Ug.CrtSignerV4;if(i&&s instanceof i)return s.signWithCredentials(t,r,n);throw new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){let n=this.getSigv4aSigner(),s=Ug.CrtSignerV4;if(s&&n instanceof s)return n.presign(t,r);throw new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=Ug.CrtSignerV4,r=iK.signatureV4aContainer.SignatureV4a;if(this.signerOptions.runtime==="node"){if(!t&&!r)throw new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt");if(t&&typeof t=="function")this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1});else if(r&&typeof r=="function")this.sigv4aSigner=new r({...this.signerOptions});else throw new Error("Available SigV4a implementation is not a valid constructor. Please ensure you've properly imported @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a.For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt")}else{if(!r||typeof r!="function")throw new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");this.sigv4aSigner=new r({...this.signerOptions})}}return this.sigv4aSigner}};bP.SignatureV4MultiRegion=_P;bP.signatureV4CrtContainer=Ug});var Dz=S(NC=>{"use strict";Object.defineProperty(NC,"__esModule",{value:!0});NC.ruleSet=void 0;var $P="required",x="type",X="rules",O="conditions",H="fn",j="argv",Le="ref",at="assign",Te="url",Re="properties",$u="backend",ks="authSchemes",es="disableDoubleEncoding",ts="signingName",ei="signingRegion",Ne="headers",GP="signingRegionSet",U0e=6,q0e=!1,xa=!0,Fi="isSet",En="booleanEquals",Ie="error",IC="aws.partition",Ut="stringEquals",Zr="getAttr",yn="name",Sr="substring",oK="bucketSuffix",WP="parseURL",ce="endpoint",Y="tree",wC="aws.isVirtualHostableS3Bucket",TC="{url#scheme}://{Bucket}.{url#authority}{url#path}",Ta="not",aK="accessPointSuffix",xC="{url#scheme}://{url#authority}{url#path}",yz="hardwareType",Ez="regionPrefix",cK="bucketAliasSuffix",KP="outpostId",Gu="isValidHostLabel",JP="sigv4a",jg="s3-outposts",oh="s3",Sz="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",Cz="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",lK="https://{Bucket}.s3.{partitionResult#dnsSuffix}",_z="aws.parseArn",bz="bucketArn",vz="arnType",RC="",XP="s3-object-lambda",Az="accesspoint",YP="accessPointName",uK="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",dK="mrapPartition",fK="outpostType",hK="arnPrefix",xz="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",pK="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",mK="https://s3.{partitionResult#dnsSuffix}",rh={[$P]:!1,[x]:"String"},nh={[$P]:!0,default:!1,[x]:"Boolean"},qg={[$P]:!1,[x]:"Boolean"},Zi={[H]:En,[j]:[{[Le]:"Accelerate"},!0]},Rr={[H]:En,[j]:[{[Le]:"UseFIPS"},!0]},Er={[H]:En,[j]:[{[Le]:"UseDualStack"},!0]},gn={[H]:Fi,[j]:[{[Le]:"Endpoint"}]},Iz={[H]:IC,[j]:[{[Le]:"Region"}],[at]:"partitionResult"},gK={[H]:Ut,[j]:[{[H]:Zr,[j]:[{[Le]:"partitionResult"},yn]},"aws-cn"]},Hg={[H]:Fi,[j]:[{[Le]:"Bucket"}]},Ft={[Le]:"Bucket"},yK={[O]:[Er],[Ie]:"S3Express does not support Dual-stack.",[x]:Ie},EK={[O]:[Zi],[Ie]:"S3Express does not support S3 Accelerate.",[x]:Ie},SK={[O]:[gn,{[H]:WP,[j]:[{[Le]:"Endpoint"}],[at]:"url"}],[X]:[{[O]:[{[H]:Fi,[j]:[{[Le]:"DisableS3ExpressSessionAuth"}]},{[H]:En,[j]:[{[Le]:"DisableS3ExpressSessionAuth"},!0]}],[X]:[{[O]:[{[H]:En,[j]:[{[H]:Zr,[j]:[{[Le]:"url"},"isIp"]},!0]}],[X]:[{[O]:[{[H]:"uriEncode",[j]:[Ft],[at]:"uri_encoded_bucket"}],[X]:[{[ce]:{[Te]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[Re]:{[$u]:"S3Express",[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:"s3express",[ei]:"{Region}"}]},[Ne]:{}},[x]:ce}],[x]:Y}],[x]:Y},{[O]:[{[H]:wC,[j]:[Ft,!1]}],[X]:[{[ce]:{[Te]:TC,[Re]:{[$u]:"S3Express",[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:"s3express",[ei]:"{Region}"}]},[Ne]:{}},[x]:ce}],[x]:Y},{[Ie]:"S3Express bucket name is not a valid virtual hostable name.",[x]:Ie}],[x]:Y},{[O]:[{[H]:En,[j]:[{[H]:Zr,[j]:[{[Le]:"url"},"isIp"]},!0]}],[X]:[{[O]:[{[H]:"uriEncode",[j]:[Ft],[at]:"uri_encoded_bucket"}],[X]:[{[ce]:{[Te]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[Re]:{[$u]:"S3Express",[ks]:[{[es]:!0,[yn]:"sigv4-s3express",[ts]:"s3express",[ei]:"{Region}"}]},[Ne]:{}},[x]:ce}],[x]:Y}],[x]:Y},{[O]:[{[H]:wC,[j]:[Ft,!1]}],[X]:[{[ce]:{[Te]:TC,[Re]:{[$u]:"S3Express",[ks]:[{[es]:!0,[yn]:"sigv4-s3express",[ts]:"s3express",[ei]:"{Region}"}]},[Ne]:{}},[x]:ce}],[x]:Y},{[Ie]:"S3Express bucket name is not a valid virtual hostable name.",[x]:Ie}],[x]:Y},Zs={[H]:WP,[j]:[{[Le]:"Endpoint"}],[at]:"url"},vP={[H]:En,[j]:[{[H]:Zr,[j]:[{[Le]:"url"},"isIp"]},!0]},wz={[Le]:"url"},Tz={[H]:"uriEncode",[j]:[Ft],[at]:"uri_encoded_bucket"},zu={[$u]:"S3Express",[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:"s3express",[ei]:"{Region}"}]},rt={},Rz={[H]:wC,[j]:[Ft,!1]},CK={[Ie]:"S3Express bucket name is not a valid virtual hostable name.",[x]:Ie},_K={[H]:Fi,[j]:[{[Le]:"UseS3ExpressControlEndpoint"}]},bK={[H]:En,[j]:[{[Le]:"UseS3ExpressControlEndpoint"},!0]},nt={[H]:Ta,[j]:[gn]},bC={[Ie]:"Unrecognized S3Express bucket name format.",[x]:Ie},vK={[H]:Ta,[j]:[Hg]},AK={[Le]:yz},xK={[O]:[nt],[Ie]:"Expected a endpoint to be specified but no endpoint was found",[x]:Ie},vC={[ks]:[{[es]:!0,[yn]:JP,[ts]:jg,[GP]:["*"]},{[es]:!0,[yn]:"sigv4",[ts]:jg,[ei]:"{Region}"}]},AP={[H]:En,[j]:[{[Le]:"ForcePathStyle"},!1]},V0e={[Le]:"ForcePathStyle"},Tn={[H]:En,[j]:[{[Le]:"Accelerate"},!1]},Ln={[H]:Ut,[j]:[{[Le]:"Region"},"aws-global"]},Yn={[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:oh,[ei]:"us-east-1"}]},kt={[H]:Ta,[j]:[Ln]},Qn={[H]:En,[j]:[{[Le]:"UseGlobalEndpoint"},!0]},IK={[Te]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Re]:{[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:oh,[ei]:"{Region}"}]},[Ne]:{}},Rn={[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:oh,[ei]:"{Region}"}]},Zn={[H]:En,[j]:[{[Le]:"UseGlobalEndpoint"},!1]},wt={[H]:En,[j]:[{[Le]:"UseDualStack"},!1]},wK={[Te]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[Re]:Rn,[Ne]:{}},ht={[H]:En,[j]:[{[Le]:"UseFIPS"},!1]},TK={[Te]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[Re]:Rn,[Ne]:{}},RK={[Te]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Re]:Rn,[Ne]:{}},xP={[H]:En,[j]:[{[H]:Zr,[j]:[wz,"isIp"]},!1]},IP={[Te]:Sz,[Re]:Rn,[Ne]:{}},zP={[Te]:TC,[Re]:Rn,[Ne]:{}},NK={[ce]:zP,[x]:ce},wP={[Te]:Cz,[Re]:Rn,[Ne]:{}},PK={[Te]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[Re]:Rn,[Ne]:{}},AC={[Ie]:"Invalid region: region was not a valid DNS name.",[x]:Ie},Ei={[Le]:bz},Nz={[Le]:vz},TP={[H]:Zr,[j]:[Ei,"service"]},QP={[Le]:YP},OK={[O]:[Er],[Ie]:"S3 Object Lambda does not support Dual-stack",[x]:Ie},DK={[O]:[Zi],[Ie]:"S3 Object Lambda does not support S3 Accelerate",[x]:Ie},kK={[O]:[{[H]:Fi,[j]:[{[Le]:"DisableAccessPoints"}]},{[H]:En,[j]:[{[Le]:"DisableAccessPoints"},!0]}],[Ie]:"Access points are not supported for this operation",[x]:Ie},RP={[O]:[{[H]:Fi,[j]:[{[Le]:"UseArnRegion"}]},{[H]:En,[j]:[{[Le]:"UseArnRegion"},!1]},{[H]:Ta,[j]:[{[H]:Ut,[j]:[{[H]:Zr,[j]:[Ei,"region"]},"{Region}"]}]}],[Ie]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[x]:Ie},Pz={[H]:Zr,[j]:[{[Le]:"bucketPartition"},yn]},Oz={[H]:Zr,[j]:[Ei,"accountId"]},NP={[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:XP,[ei]:"{bucketArn#region}"}]},BK={[Ie]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[x]:Ie},PP={[Ie]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[x]:Ie},OP={[Ie]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[x]:Ie},DP={[Ie]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[x]:Ie},LK={[Ie]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[x]:Ie},FK={[Ie]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[x]:Ie},Vg={[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:oh,[ei]:"{bucketArn#region}"}]},MK={[ks]:[{[es]:!0,[yn]:JP,[ts]:jg,[GP]:["*"]},{[es]:!0,[yn]:"sigv4",[ts]:jg,[ei]:"{bucketArn#region}"}]},UK={[H]:_z,[j]:[Ft]},qK={[Te]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:Rn,[Ne]:{}},VK={[Te]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:Rn,[Ne]:{}},HK={[Te]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:Rn,[Ne]:{}},kP={[Te]:xz,[Re]:Rn,[Ne]:{}},jK={[Te]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:Rn,[Ne]:{}},KK={[Le]:"UseObjectLambdaEndpoint"},BP={[ks]:[{[es]:!0,[yn]:"sigv4",[ts]:XP,[ei]:"{Region}"}]},zK={[Te]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Re]:Rn,[Ne]:{}},$K={[Te]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[Re]:Rn,[Ne]:{}},GK={[Te]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Re]:Rn,[Ne]:{}},LP={[Te]:xC,[Re]:Rn,[Ne]:{}},WK={[Te]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[Re]:Rn,[Ne]:{}},FP=[{[Le]:"Region"}],H0e=[{[Le]:"Endpoint"}],j0e=[Ft],JK=[Er],MP=[Zi],sh=[gn,Zs],XK=[{[H]:Fi,[j]:[{[Le]:"DisableS3ExpressSessionAuth"}]},{[H]:En,[j]:[{[Le]:"DisableS3ExpressSessionAuth"},!0]}],K0e=[Tz],YK=[Rz],Qi=[Iz],ih=[Rr],QK=[{[H]:Sr,[j]:[Ft,6,14,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,14,16,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],Ia=[{[O]:[Rr],[ce]:{[Te]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Re]:zu,[Ne]:{}},[x]:ce},{[ce]:{[Te]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Re]:zu,[Ne]:{}},[x]:ce}],ZK=[{[H]:Sr,[j]:[Ft,6,15,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,15,17,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],ez=[{[H]:Sr,[j]:[Ft,6,19,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,19,21,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],tz=[{[H]:Sr,[j]:[Ft,6,20,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,20,22,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],rz=[{[H]:Sr,[j]:[Ft,6,26,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,26,28,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],wa=[{[O]:[Rr],[ce]:{[Te]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Re]:{[$u]:"S3Express",[ks]:[{[es]:!0,[yn]:"sigv4-s3express",[ts]:"s3express",[ei]:"{Region}"}]},[Ne]:{}},[x]:ce},{[ce]:{[Te]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Re]:{[$u]:"S3Express",[ks]:[{[es]:!0,[yn]:"sigv4-s3express",[ts]:"s3express",[ei]:"{Region}"}]},[Ne]:{}},[x]:ce}],nz=[Ft,0,7,!0],sz=[{[H]:Sr,[j]:[Ft,7,15,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,15,17,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],iz=[{[H]:Sr,[j]:[Ft,7,16,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,16,18,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],oz=[{[H]:Sr,[j]:[Ft,7,20,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,20,22,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],az=[{[H]:Sr,[j]:[Ft,7,21,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,21,23,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],cz=[{[H]:Sr,[j]:[Ft,7,27,!0],[at]:"s3expressAvailabilityZoneId"},{[H]:Sr,[j]:[Ft,27,29,!0],[at]:"s3expressAvailabilityZoneDelim"},{[H]:Ut,[j]:[{[Le]:"s3expressAvailabilityZoneDelim"},"--"]}],z0e=[Hg],lz=[{[H]:Gu,[j]:[{[Le]:KP},!1]}],uz=[{[H]:Ut,[j]:[{[Le]:Ez},"beta"]}],$0e=["*"],dz=[{[H]:Gu,[j]:[{[Le]:"Region"},!1]}],vl=[{[H]:Ut,[j]:[{[Le]:"Region"},"us-east-1"]}],UP=[{[H]:Ut,[j]:[Nz,Az]}],fz=[{[H]:Zr,[j]:[Ei,"resourceId[1]"],[at]:YP},{[H]:Ta,[j]:[{[H]:Ut,[j]:[QP,RC]}]}],G0e=[Ei,"resourceId[1]"],qP=[{[H]:Ta,[j]:[{[H]:Ut,[j]:[{[H]:Zr,[j]:[Ei,"region"]},RC]}]}],hz=[{[H]:Ta,[j]:[{[H]:Fi,[j]:[{[H]:Zr,[j]:[Ei,"resourceId[2]"]}]}]}],W0e=[Ei,"resourceId[2]"],VP=[{[H]:IC,[j]:[{[H]:Zr,[j]:[Ei,"region"]}],[at]:"bucketPartition"}],pz=[{[H]:Ut,[j]:[Pz,{[H]:Zr,[j]:[{[Le]:"partitionResult"},yn]}]}],HP=[{[H]:Gu,[j]:[{[H]:Zr,[j]:[Ei,"region"]},!0]}],jP=[{[H]:Gu,[j]:[Oz,!1]}],mz=[{[H]:Gu,[j]:[QP,!1]}],gz=[{[H]:Gu,[j]:[{[Le]:"Region"},!0]}],J0e={version:"1.0",parameters:{Bucket:rh,Region:rh,UseFIPS:nh,UseDualStack:nh,Endpoint:rh,ForcePathStyle:nh,Accelerate:nh,UseGlobalEndpoint:nh,UseObjectLambdaEndpoint:qg,Key:rh,Prefix:rh,CopySource:rh,DisableAccessPoints:qg,DisableMultiRegionAccessPoints:nh,UseArnRegion:qg,UseS3ExpressControlEndpoint:qg,DisableS3ExpressSessionAuth:qg},[X]:[{[O]:[{[H]:Fi,[j]:FP}],[X]:[{[O]:[Zi,Rr],error:"Accelerate cannot be used with FIPS",[x]:Ie},{[O]:[Er,gn],error:"Cannot set dual-stack in combination with a custom endpoint.",[x]:Ie},{[O]:[gn,Rr],error:"A custom endpoint cannot be combined with FIPS",[x]:Ie},{[O]:[gn,Zi],error:"A custom endpoint cannot be combined with S3 Accelerate",[x]:Ie},{[O]:[Rr,Iz,gK],error:"Partition does not support FIPS",[x]:Ie},{[O]:[Hg,{[H]:Sr,[j]:[Ft,0,U0e,xa],[at]:oK},{[H]:Ut,[j]:[{[Le]:oK},"--x-s3"]}],[X]:[yK,EK,SK,{[O]:[_K,bK],[X]:[{[O]:Qi,[X]:[{[O]:[Tz,nt],[X]:[{[O]:ih,endpoint:{[Te]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:zu,[Ne]:rt},[x]:ce},{endpoint:{[Te]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:zu,[Ne]:rt},[x]:ce}],[x]:Y}],[x]:Y}],[x]:Y},{[O]:YK,[X]:[{[O]:Qi,[X]:[{[O]:XK,[X]:[{[O]:QK,[X]:Ia,[x]:Y},{[O]:ZK,[X]:Ia,[x]:Y},{[O]:ez,[X]:Ia,[x]:Y},{[O]:tz,[X]:Ia,[x]:Y},{[O]:rz,[X]:Ia,[x]:Y},bC],[x]:Y},{[O]:QK,[X]:wa,[x]:Y},{[O]:ZK,[X]:wa,[x]:Y},{[O]:ez,[X]:wa,[x]:Y},{[O]:tz,[X]:wa,[x]:Y},{[O]:rz,[X]:wa,[x]:Y},bC],[x]:Y}],[x]:Y},CK],[x]:Y},{[O]:[Hg,{[H]:Sr,[j]:nz,[at]:aK},{[H]:Ut,[j]:[{[Le]:aK},"--xa-s3"]}],[X]:[yK,EK,SK,{[O]:YK,[X]:[{[O]:Qi,[X]:[{[O]:XK,[X]:[{[O]:sz,[X]:Ia,[x]:Y},{[O]:iz,[X]:Ia,[x]:Y},{[O]:oz,[X]:Ia,[x]:Y},{[O]:az,[X]:Ia,[x]:Y},{[O]:cz,[X]:Ia,[x]:Y},bC],[x]:Y},{[O]:sz,[X]:wa,[x]:Y},{[O]:iz,[X]:wa,[x]:Y},{[O]:oz,[X]:wa,[x]:Y},{[O]:az,[X]:wa,[x]:Y},{[O]:cz,[X]:wa,[x]:Y},bC],[x]:Y}],[x]:Y},CK],[x]:Y},{[O]:[vK,_K,bK],[X]:[{[O]:Qi,[X]:[{[O]:sh,endpoint:{[Te]:xC,[Re]:zu,[Ne]:rt},[x]:ce},{[O]:ih,endpoint:{[Te]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[Re]:zu,[Ne]:rt},[x]:ce},{endpoint:{[Te]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[Re]:zu,[Ne]:rt},[x]:ce}],[x]:Y}],[x]:Y},{[O]:[Hg,{[H]:Sr,[j]:[Ft,49,50,xa],[at]:yz},{[H]:Sr,[j]:[Ft,8,12,xa],[at]:Ez},{[H]:Sr,[j]:nz,[at]:cK},{[H]:Sr,[j]:[Ft,32,49,xa],[at]:KP},{[H]:IC,[j]:FP,[at]:"regionPartition"},{[H]:Ut,[j]:[{[Le]:cK},"--op-s3"]}],[X]:[{[O]:lz,[X]:[{[O]:[{[H]:Ut,[j]:[AK,"e"]}],[X]:[{[O]:uz,[X]:[xK,{[O]:sh,endpoint:{[Te]:"https://{Bucket}.ec2.{url#authority}",[Re]:vC,[Ne]:rt},[x]:ce}],[x]:Y},{endpoint:{[Te]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Re]:vC,[Ne]:rt},[x]:ce}],[x]:Y},{[O]:[{[H]:Ut,[j]:[AK,"o"]}],[X]:[{[O]:uz,[X]:[xK,{[O]:sh,endpoint:{[Te]:"https://{Bucket}.op-{outpostId}.{url#authority}",[Re]:vC,[Ne]:rt},[x]:ce}],[x]:Y},{endpoint:{[Te]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Re]:vC,[Ne]:rt},[x]:ce}],[x]:Y},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[x]:Ie}],[x]:Y},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[x]:Ie}],[x]:Y},{[O]:z0e,[X]:[{[O]:[gn,{[H]:Ta,[j]:[{[H]:Fi,[j]:[{[H]:WP,[j]:H0e}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[x]:Ie},{[O]:[AP,Rz],[X]:[{[O]:Qi,[X]:[{[O]:dz,[X]:[{[O]:[Zi,gK],error:"S3 Accelerate cannot be used in this region",[x]:Ie},{[O]:[Er,Rr,Tn,nt,Ln],endpoint:{[Te]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[Er,Rr,Tn,nt,kt,Qn],[X]:[{endpoint:IK,[x]:ce}],[x]:Y},{[O]:[Er,Rr,Tn,nt,kt,Zn],endpoint:IK,[x]:ce},{[O]:[wt,Rr,Tn,nt,Ln],endpoint:{[Te]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[wt,Rr,Tn,nt,kt,Qn],[X]:[{endpoint:wK,[x]:ce}],[x]:Y},{[O]:[wt,Rr,Tn,nt,kt,Zn],endpoint:wK,[x]:ce},{[O]:[Er,ht,Zi,nt,Ln],endpoint:{[Te]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[Er,ht,Zi,nt,kt,Qn],[X]:[{endpoint:TK,[x]:ce}],[x]:Y},{[O]:[Er,ht,Zi,nt,kt,Zn],endpoint:TK,[x]:ce},{[O]:[Er,ht,Tn,nt,Ln],endpoint:{[Te]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[Er,ht,Tn,nt,kt,Qn],[X]:[{endpoint:RK,[x]:ce}],[x]:Y},{[O]:[Er,ht,Tn,nt,kt,Zn],endpoint:RK,[x]:ce},{[O]:[wt,ht,Tn,gn,Zs,vP,Ln],endpoint:{[Te]:Sz,[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[wt,ht,Tn,gn,Zs,xP,Ln],endpoint:{[Te]:TC,[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[wt,ht,Tn,gn,Zs,vP,kt,Qn],[X]:[{[O]:vl,endpoint:IP,[x]:ce},{endpoint:IP,[x]:ce}],[x]:Y},{[O]:[wt,ht,Tn,gn,Zs,xP,kt,Qn],[X]:[{[O]:vl,endpoint:zP,[x]:ce},NK],[x]:Y},{[O]:[wt,ht,Tn,gn,Zs,vP,kt,Zn],endpoint:IP,[x]:ce},{[O]:[wt,ht,Tn,gn,Zs,xP,kt,Zn],endpoint:zP,[x]:ce},{[O]:[wt,ht,Zi,nt,Ln],endpoint:{[Te]:Cz,[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[wt,ht,Zi,nt,kt,Qn],[X]:[{[O]:vl,endpoint:wP,[x]:ce},{endpoint:wP,[x]:ce}],[x]:Y},{[O]:[wt,ht,Zi,nt,kt,Zn],endpoint:wP,[x]:ce},{[O]:[wt,ht,Tn,nt,Ln],endpoint:{[Te]:lK,[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[wt,ht,Tn,nt,kt,Qn],[X]:[{[O]:vl,endpoint:{[Te]:lK,[Re]:Rn,[Ne]:rt},[x]:ce},{endpoint:PK,[x]:ce}],[x]:Y},{[O]:[wt,ht,Tn,nt,kt,Zn],endpoint:PK,[x]:ce}],[x]:Y},AC],[x]:Y}],[x]:Y},{[O]:[gn,Zs,{[H]:Ut,[j]:[{[H]:Zr,[j]:[wz,"scheme"]},"http"]},{[H]:wC,[j]:[Ft,xa]},AP,ht,wt,Tn],[X]:[{[O]:Qi,[X]:[{[O]:dz,[X]:[NK],[x]:Y},AC],[x]:Y}],[x]:Y},{[O]:[AP,{[H]:_z,[j]:j0e,[at]:bz}],[X]:[{[O]:[{[H]:Zr,[j]:[Ei,"resourceId[0]"],[at]:vz},{[H]:Ta,[j]:[{[H]:Ut,[j]:[Nz,RC]}]}],[X]:[{[O]:[{[H]:Ut,[j]:[TP,XP]}],[X]:[{[O]:UP,[X]:[{[O]:fz,[X]:[OK,DK,{[O]:qP,[X]:[kK,{[O]:hz,[X]:[RP,{[O]:VP,[X]:[{[O]:Qi,[X]:[{[O]:pz,[X]:[{[O]:HP,[X]:[{[O]:[{[H]:Ut,[j]:[Oz,RC]}],error:"Invalid ARN: Missing account id",[x]:Ie},{[O]:jP,[X]:[{[O]:mz,[X]:[{[O]:sh,endpoint:{[Te]:uK,[Re]:NP,[Ne]:rt},[x]:ce},{[O]:ih,endpoint:{[Te]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Re]:NP,[Ne]:rt},[x]:ce},{endpoint:{[Te]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Re]:NP,[Ne]:rt},[x]:ce}],[x]:Y},BK],[x]:Y},PP],[x]:Y},OP],[x]:Y},DP],[x]:Y}],[x]:Y}],[x]:Y},LK],[x]:Y},{error:"Invalid ARN: bucket ARN is missing a region",[x]:Ie}],[x]:Y},FK],[x]:Y},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[x]:Ie}],[x]:Y},{[O]:UP,[X]:[{[O]:fz,[X]:[{[O]:qP,[X]:[{[O]:UP,[X]:[{[O]:qP,[X]:[kK,{[O]:hz,[X]:[RP,{[O]:VP,[X]:[{[O]:Qi,[X]:[{[O]:[{[H]:Ut,[j]:[Pz,"{partitionResult#name}"]}],[X]:[{[O]:HP,[X]:[{[O]:[{[H]:Ut,[j]:[TP,oh]}],[X]:[{[O]:jP,[X]:[{[O]:mz,[X]:[{[O]:MP,error:"Access Points do not support S3 Accelerate",[x]:Ie},{[O]:[Rr,Er],endpoint:{[Te]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Re]:Vg,[Ne]:rt},[x]:ce},{[O]:[Rr,wt],endpoint:{[Te]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Re]:Vg,[Ne]:rt},[x]:ce},{[O]:[ht,Er],endpoint:{[Te]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Re]:Vg,[Ne]:rt},[x]:ce},{[O]:[ht,wt,gn,Zs],endpoint:{[Te]:uK,[Re]:Vg,[Ne]:rt},[x]:ce},{[O]:[ht,wt],endpoint:{[Te]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Re]:Vg,[Ne]:rt},[x]:ce}],[x]:Y},BK],[x]:Y},PP],[x]:Y},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[x]:Ie}],[x]:Y},OP],[x]:Y},DP],[x]:Y}],[x]:Y}],[x]:Y},LK],[x]:Y}],[x]:Y}],[x]:Y},{[O]:[{[H]:Gu,[j]:[QP,xa]}],[X]:[{[O]:JK,error:"S3 MRAP does not support dual-stack",[x]:Ie},{[O]:ih,error:"S3 MRAP does not support FIPS",[x]:Ie},{[O]:MP,error:"S3 MRAP does not support S3 Accelerate",[x]:Ie},{[O]:[{[H]:En,[j]:[{[Le]:"DisableMultiRegionAccessPoints"},xa]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[x]:Ie},{[O]:[{[H]:IC,[j]:FP,[at]:dK}],[X]:[{[O]:[{[H]:Ut,[j]:[{[H]:Zr,[j]:[{[Le]:dK},yn]},{[H]:Zr,[j]:[Ei,"partition"]}]}],[X]:[{endpoint:{[Te]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[Re]:{[ks]:[{[es]:xa,name:JP,[ts]:oh,[GP]:$0e}]},[Ne]:rt},[x]:ce}],[x]:Y},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[x]:Ie}],[x]:Y}],[x]:Y},{error:"Invalid Access Point Name",[x]:Ie}],[x]:Y},FK],[x]:Y},{[O]:[{[H]:Ut,[j]:[TP,jg]}],[X]:[{[O]:JK,error:"S3 Outposts does not support Dual-stack",[x]:Ie},{[O]:ih,error:"S3 Outposts does not support FIPS",[x]:Ie},{[O]:MP,error:"S3 Outposts does not support S3 Accelerate",[x]:Ie},{[O]:[{[H]:Fi,[j]:[{[H]:Zr,[j]:[Ei,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[x]:Ie},{[O]:[{[H]:Zr,[j]:G0e,[at]:KP}],[X]:[{[O]:lz,[X]:[RP,{[O]:VP,[X]:[{[O]:Qi,[X]:[{[O]:pz,[X]:[{[O]:HP,[X]:[{[O]:jP,[X]:[{[O]:[{[H]:Zr,[j]:W0e,[at]:fK}],[X]:[{[O]:[{[H]:Zr,[j]:[Ei,"resourceId[3]"],[at]:YP}],[X]:[{[O]:[{[H]:Ut,[j]:[{[Le]:fK},Az]}],[X]:[{[O]:sh,endpoint:{[Te]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[Re]:MK,[Ne]:rt},[x]:ce},{endpoint:{[Te]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Re]:MK,[Ne]:rt},[x]:ce}],[x]:Y},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[x]:Ie}],[x]:Y},{error:"Invalid ARN: expected an access point name",[x]:Ie}],[x]:Y},{error:"Invalid ARN: Expected a 4-component resource",[x]:Ie}],[x]:Y},PP],[x]:Y},OP],[x]:Y},DP],[x]:Y}],[x]:Y}],[x]:Y},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[x]:Ie}],[x]:Y},{error:"Invalid ARN: The Outpost Id was not set",[x]:Ie}],[x]:Y},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[x]:Ie}],[x]:Y},{error:"Invalid ARN: No ARN type specified",[x]:Ie}],[x]:Y},{[O]:[{[H]:Sr,[j]:[Ft,0,4,q0e],[at]:hK},{[H]:Ut,[j]:[{[Le]:hK},"arn:"]},{[H]:Ta,[j]:[{[H]:Fi,[j]:[UK]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[x]:Ie},{[O]:[{[H]:En,[j]:[V0e,xa]},UK],error:"Path-style addressing cannot be used with ARN buckets",[x]:Ie},{[O]:K0e,[X]:[{[O]:Qi,[X]:[{[O]:[Tn],[X]:[{[O]:[Er,nt,Rr,Ln],endpoint:{[Te]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[Er,nt,Rr,kt,Qn],[X]:[{endpoint:qK,[x]:ce}],[x]:Y},{[O]:[Er,nt,Rr,kt,Zn],endpoint:qK,[x]:ce},{[O]:[wt,nt,Rr,Ln],endpoint:{[Te]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[wt,nt,Rr,kt,Qn],[X]:[{endpoint:VK,[x]:ce}],[x]:Y},{[O]:[wt,nt,Rr,kt,Zn],endpoint:VK,[x]:ce},{[O]:[Er,nt,ht,Ln],endpoint:{[Te]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[Er,nt,ht,kt,Qn],[X]:[{endpoint:HK,[x]:ce}],[x]:Y},{[O]:[Er,nt,ht,kt,Zn],endpoint:HK,[x]:ce},{[O]:[wt,gn,Zs,ht,Ln],endpoint:{[Te]:xz,[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[wt,gn,Zs,ht,kt,Qn],[X]:[{[O]:vl,endpoint:kP,[x]:ce},{endpoint:kP,[x]:ce}],[x]:Y},{[O]:[wt,gn,Zs,ht,kt,Zn],endpoint:kP,[x]:ce},{[O]:[wt,nt,ht,Ln],endpoint:{[Te]:pK,[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[wt,nt,ht,kt,Qn],[X]:[{[O]:vl,endpoint:{[Te]:pK,[Re]:Rn,[Ne]:rt},[x]:ce},{endpoint:jK,[x]:ce}],[x]:Y},{[O]:[wt,nt,ht,kt,Zn],endpoint:jK,[x]:ce}],[x]:Y},{error:"Path-style addressing cannot be used with S3 Accelerate",[x]:Ie}],[x]:Y}],[x]:Y}],[x]:Y},{[O]:[{[H]:Fi,[j]:[KK]},{[H]:En,[j]:[KK,xa]}],[X]:[{[O]:Qi,[X]:[{[O]:gz,[X]:[OK,DK,{[O]:sh,endpoint:{[Te]:xC,[Re]:BP,[Ne]:rt},[x]:ce},{[O]:ih,endpoint:{[Te]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[Re]:BP,[Ne]:rt},[x]:ce},{endpoint:{[Te]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[Re]:BP,[Ne]:rt},[x]:ce}],[x]:Y},AC],[x]:Y}],[x]:Y},{[O]:[vK],[X]:[{[O]:Qi,[X]:[{[O]:gz,[X]:[{[O]:[Rr,Er,nt,Ln],endpoint:{[Te]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[Rr,Er,nt,kt,Qn],[X]:[{endpoint:zK,[x]:ce}],[x]:Y},{[O]:[Rr,Er,nt,kt,Zn],endpoint:zK,[x]:ce},{[O]:[Rr,wt,nt,Ln],endpoint:{[Te]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[Rr,wt,nt,kt,Qn],[X]:[{endpoint:$K,[x]:ce}],[x]:Y},{[O]:[Rr,wt,nt,kt,Zn],endpoint:$K,[x]:ce},{[O]:[ht,Er,nt,Ln],endpoint:{[Te]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[ht,Er,nt,kt,Qn],[X]:[{endpoint:GK,[x]:ce}],[x]:Y},{[O]:[ht,Er,nt,kt,Zn],endpoint:GK,[x]:ce},{[O]:[ht,wt,gn,Zs,Ln],endpoint:{[Te]:xC,[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[ht,wt,gn,Zs,kt,Qn],[X]:[{[O]:vl,endpoint:LP,[x]:ce},{endpoint:LP,[x]:ce}],[x]:Y},{[O]:[ht,wt,gn,Zs,kt,Zn],endpoint:LP,[x]:ce},{[O]:[ht,wt,nt,Ln],endpoint:{[Te]:mK,[Re]:Yn,[Ne]:rt},[x]:ce},{[O]:[ht,wt,nt,kt,Qn],[X]:[{[O]:vl,endpoint:{[Te]:mK,[Re]:Rn,[Ne]:rt},[x]:ce},{endpoint:WK,[x]:ce}],[x]:Y},{[O]:[ht,wt,nt,kt,Zn],endpoint:WK,[x]:ce}],[x]:Y},AC],[x]:Y}],[x]:Y}],[x]:Y},{error:"A region must be set when sending requests to S3.",[x]:Ie}]};NC.ruleSet=J0e});var eO=S(PC=>{"use strict";Object.defineProperty(PC,"__esModule",{value:!0});PC.defaultEndpointResolver=void 0;var X0e=Yf(),ZP=ju(),Y0e=Dz(),Q0e=new ZP.EndpointCache({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Z0e=(e,t={})=>Q0e.get(e,()=>(0,ZP.resolveEndpoint)(Y0e.ruleSet,{endpointParams:e,logger:t.logger}));PC.defaultEndpointResolver=Z0e;ZP.customEndpointFunctions.aws=X0e.awsEndpointFunctions});var tO=S(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.resolveHttpAuthSchemeConfig=Al.defaultS3HttpAuthSchemeProvider=Al.defaultS3HttpAuthSchemeParametersProvider=void 0;var kz=(wn(),St(Yi)),eEe=_C(),tEe=Aa(),OC=Ns(),rEe=eO(),nEe=e=>async(t,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let s=await e(t,r,n),i=(0,OC.getSmithyContext)(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let o=await(0,tEe.resolveParams)(n,{getEndpointParameterInstructions:i},t);return Object.assign(s,o)},sEe=async(e,t,r)=>({operation:(0,OC.getSmithyContext)(t).operation,region:await(0,OC.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Al.defaultS3HttpAuthSchemeParametersProvider=nEe(sEe);function Bz(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Lz(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var iEe=(e,t,r)=>s=>{let o=e(s).properties?.authSchemes;if(!o)return t(s);let a=[];for(let c of o){let{name:l,properties:d={},...f}=c,h=l.toLowerCase();l!==h&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${l}\` to \`${h}\``);let p;if(h==="sigv4a"){p="aws.auth#sigv4a";let b=o.find(A=>{let R=A.name.toLowerCase();return R!=="sigv4a"&&R.startsWith("sigv4")});if(eEe.SignatureV4MultiRegion.sigv4aDependency()==="none"&&b)continue}else if(h.startsWith("sigv4"))p="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${h}\``);let m=r[p];if(!m)throw new Error(`Could not find HttpAuthOption create function for \`${p}\``);let E=m(s);E.schemeId=p,E.signingProperties={...E.signingProperties||{},...f,...d},a.push(E)}return a},oEe=e=>{let t=[];switch(e.operation){default:t.push(Bz(e)),t.push(Lz(e))}return t};Al.defaultS3HttpAuthSchemeProvider=iEe(rEe.defaultEndpointResolver,oEe,{"aws.auth#sigv4":Bz,"aws.auth#sigv4a":Lz});var aEe=e=>{let t=(0,kz.resolveAwsSdkSigV4Config)(e),r=(0,kz.resolveAwsSdkSigV4AConfig)(t);return Object.assign(r,{authSchemePreference:(0,OC.normalizeProvider)(e.authSchemePreference??[])})};Al.resolveHttpAuthSchemeConfig=aEe});var Fz=S((Cot,cEe)=>{cEe.exports={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.918.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && yarn g:vitest run -c vitest.config.browser.mts","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.mts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.mts && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.mts","test:integration":"yarn g:vitest run -c vitest.config.integ.mts","test:integration:watch":"yarn g:vitest watch -c vitest.config.integ.mts","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.916.0","@aws-sdk/credential-provider-node":"3.918.0","@aws-sdk/middleware-bucket-endpoint":"3.914.0","@aws-sdk/middleware-expect-continue":"3.917.0","@aws-sdk/middleware-flexible-checksums":"3.916.0","@aws-sdk/middleware-host-header":"3.914.0","@aws-sdk/middleware-location-constraint":"3.914.0","@aws-sdk/middleware-logger":"3.914.0","@aws-sdk/middleware-recursion-detection":"3.914.0","@aws-sdk/middleware-sdk-s3":"3.916.0","@aws-sdk/middleware-ssec":"3.914.0","@aws-sdk/middleware-user-agent":"3.916.0","@aws-sdk/region-config-resolver":"3.914.0","@aws-sdk/signature-v4-multi-region":"3.916.0","@aws-sdk/types":"3.914.0","@aws-sdk/util-endpoints":"3.916.0","@aws-sdk/util-user-agent-browser":"3.914.0","@aws-sdk/util-user-agent-node":"3.916.0","@aws-sdk/xml-builder":"3.914.0","@smithy/config-resolver":"^4.4.0","@smithy/core":"^3.17.1","@smithy/eventstream-serde-browser":"^4.2.3","@smithy/eventstream-serde-config-resolver":"^4.3.3","@smithy/eventstream-serde-node":"^4.2.3","@smithy/fetch-http-handler":"^5.3.4","@smithy/hash-blob-browser":"^4.2.4","@smithy/hash-node":"^4.2.3","@smithy/hash-stream-node":"^4.2.3","@smithy/invalid-dependency":"^4.2.3","@smithy/md5-js":"^4.2.3","@smithy/middleware-content-length":"^4.2.3","@smithy/middleware-endpoint":"^4.3.5","@smithy/middleware-retry":"^4.4.5","@smithy/middleware-serde":"^4.2.3","@smithy/middleware-stack":"^4.2.3","@smithy/node-config-provider":"^4.3.3","@smithy/node-http-handler":"^4.4.3","@smithy/protocol-http":"^5.3.3","@smithy/smithy-client":"^4.9.1","@smithy/types":"^4.8.0","@smithy/url-parser":"^4.2.3","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.4","@smithy/util-defaults-mode-node":"^4.2.6","@smithy/util-endpoints":"^3.2.3","@smithy/util-middleware":"^4.2.3","@smithy/util-retry":"^4.2.3","@smithy/util-stream":"^4.5.4","@smithy/util-utf8":"^4.2.0","@smithy/util-waiter":"^4.2.3","@smithy/uuid":"^1.1.0",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.916.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}}});var rO=S(xl=>{"use strict";var lEe=(Mo(),St(rl)),uEe=Qs(),Mz="AWS_ACCESS_KEY_ID",Uz="AWS_SECRET_ACCESS_KEY",qz="AWS_SESSION_TOKEN",Vz="AWS_CREDENTIAL_EXPIRATION",Hz="AWS_CREDENTIAL_SCOPE",jz="AWS_ACCOUNT_ID",dEe=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[Mz],r=process.env[Uz],n=process.env[qz],s=process.env[Vz],i=process.env[Hz],o=process.env[jz];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...i&&{credentialScope:i},...o&&{accountId:o}};return lEe.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new uEe.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};xl.ENV_ACCOUNT_ID=jz;xl.ENV_CREDENTIAL_SCOPE=Hz;xl.ENV_EXPIRATION=Vz;xl.ENV_KEY=Mz;xl.ENV_SECRET=Uz;xl.ENV_SESSION=qz;xl.fromEnv=dEe});var zg=S(Bs=>{"use strict";var Ra=Qs(),fEe=require("url"),hEe=require("buffer"),pEe=require("http"),aO=Cl(),mEe=yl();function Kg(e){return new Promise((t,r)=>{let n=pEe.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new Ra.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new Ra.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new Ra.ProviderError("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let o=[];s.on("data",a=>{o.push(a)}),s.on("end",()=>{t(hEe.Buffer.concat(o)),n.destroy()})}),n.end()})}var Gz=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Wz=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),Jz=1e3,Xz=0,cO=({maxRetries:e=Xz,timeout:t=Jz})=>({maxRetries:e,timeout:t}),sO=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},DC="AWS_CONTAINER_CREDENTIALS_FULL_URI",kC="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",iO="AWS_CONTAINER_AUTHORIZATION_TOKEN",gEe=(e={})=>{let{timeout:t,maxRetries:r}=cO(e);return()=>sO(async()=>{let n=await _Ee({logger:e.logger}),s=JSON.parse(await yEe(t,n));if(!Gz(s))throw new Ra.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return Wz(s)},r)},yEe=async(e,t)=>(process.env[iO]&&(t.headers={...t.headers,Authorization:process.env[iO]}),(await Kg({...t,timeout:e})).toString()),EEe="169.254.170.2",SEe={localhost:!0,"127.0.0.1":!0},CEe={"http:":!0,"https:":!0},_Ee=async({logger:e})=>{if(process.env[kC])return{hostname:EEe,path:process.env[kC]};if(process.env[DC]){let t=fEe.parse(process.env[DC]);if(!t.hostname||!(t.hostname in SEe))throw new Ra.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in CEe))throw new Ra.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Ra.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${kC} or ${DC} environment variable is set`,{tryNextLink:!1,logger:e})},oO=class e extends Ra.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};Bs.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Bs.Endpoint||(Bs.Endpoint={}));var bEe="AWS_EC2_METADATA_SERVICE_ENDPOINT",vEe="ec2_metadata_service_endpoint",AEe={environmentVariableSelector:e=>e[bEe],configFileSelector:e=>e[vEe],default:void 0},ah;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(ah||(ah={}));var xEe="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",IEe="ec2_metadata_service_endpoint_mode",wEe={environmentVariableSelector:e=>e[xEe],configFileSelector:e=>e[IEe],default:ah.IPv4},Yz=async()=>mEe.parseUrl(await TEe()||await REe()),TEe=async()=>aO.loadConfig(AEe)(),REe=async()=>{let e=await aO.loadConfig(wEe)();switch(e){case ah.IPv4:return Bs.Endpoint.IPv4;case ah.IPv6:return Bs.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(ah)}`)}},NEe=300,PEe=300,OEe="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Kz=(e,t)=>{let r=NEe+Math.floor(Math.random()*PEe),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+OEe);let s=e.originalExpiration??e.expiration;return{...e,...s?{originalExpiration:s}:{},expiration:n}},DEe=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let s;try{s=await e(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=Kz(s,r))}catch(i){if(n)r.warn("Credential renew failed: ",i),s=Kz(n,r);else throw i}return n=s,s}},Qz="/latest/meta-data/iam/security-credentials/",kEe="/latest/api/token",nO="AWS_EC2_METADATA_V1_DISABLED",zz="ec2_metadata_v1_disabled",$z="x-aws-ec2-metadata-token",BEe=(e={})=>DEe(LEe(e),{logger:e.logger}),LEe=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:s,maxRetries:i}=cO(e),o=async(a,c)=>{if(t||c.headers?.[$z]==null){let f=!1,h=!1,p=await aO.loadConfig({environmentVariableSelector:m=>{let E=m[nO];if(h=!!E&&E!=="false",E===void 0)throw new Ra.CredentialsProviderError(`${nO} not set in env, checking config file next.`,{logger:e.logger});return h},configFileSelector:m=>{let E=m[zz];return f=!!E&&E!=="false",f},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||p){let m=[];throw e.ec2MetadataV1Disabled&&m.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),f&&m.push(`config file profile (${zz})`),h&&m.push(`process environment variable (${nO})`),new oO(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${m.join(", ")}].`)}}let d=(await sO(async()=>{let f;try{f=await MEe(c)}catch(h){throw h.statusCode===401&&(t=!1),h}return f},a)).trim();return sO(async()=>{let f;try{f=await UEe(d,c,e)}catch(h){throw h.statusCode===401&&(t=!1),h}return f},a)};return async()=>{let a=await Yz();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),o(i,{...a,timeout:s});{let c;try{c=(await FEe({...a,timeout:s})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),o(i,{...a,timeout:s})}return o(i,{...a,headers:{[$z]:c},timeout:s})}}},FEe=async e=>Kg({...e,path:kEe,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),MEe=async e=>(await Kg({...e,path:Qz})).toString(),UEe=async(e,t,r)=>{let n=JSON.parse((await Kg({...t,path:Qz+e})).toString());if(!Gz(n))throw new Ra.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return Wz(n)};Bs.DEFAULT_MAX_RETRIES=Xz;Bs.DEFAULT_TIMEOUT=Jz;Bs.ENV_CMDS_AUTH_TOKEN=iO;Bs.ENV_CMDS_FULL_URI=DC;Bs.ENV_CMDS_RELATIVE_URI=kC;Bs.fromContainerMetadata=gEe;Bs.fromInstanceMetadata=BEe;Bs.getInstanceMetadataEndpoint=Yz;Bs.httpRequest=Kg;Bs.providerConfigFromInit=cO});var Zz=S(BC=>{"use strict";Object.defineProperty(BC,"__esModule",{value:!0});BC.checkUrl=void 0;var qEe=Qs(),VEe="169.254.170.2",HEe="169.254.170.23",jEe="[fd00:ec2::23]",KEe=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===VEe||e.hostname===HEe||e.hostname===jEe)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=s=>{let i=parseInt(s,10);return 0<=i&&i<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new qEe.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};BC.checkUrl=KEe});var e$=S(LC=>{"use strict";Object.defineProperty(LC,"__esModule",{value:!0});LC.createGetRequest=WEe;LC.getCredentials=JEe;var lO=Qs(),zEe=Xt(),$Ee=Ct(),GEe=xu();function WEe(e){return new zEe.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function JEe(e,t){let n=await(0,GEe.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new lO.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,$Ee.parseRfc3339DateTime)(s.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new lO.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:s.Code,Message:s.Message})}throw new lO.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var t$=S(FC=>{"use strict";Object.defineProperty(FC,"__esModule",{value:!0});FC.retryWrapper=void 0;var XEe=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(i=>setTimeout(i,r))}return await e()};FC.retryWrapper=XEe});var s$=S(MC=>{"use strict";Object.defineProperty(MC,"__esModule",{value:!0});MC.fromHttp=void 0;var YEe=(Sa(),St(Ea)),QEe=(Mo(),St(rl)),ZEe=Au(),r$=Qs(),eSe=YEe.__importDefault(require("fs/promises")),tSe=Zz(),n$=e$(),rSe=t$(),nSe="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",sSe="http://169.254.170.2",iSe="AWS_CONTAINER_CREDENTIALS_FULL_URI",oSe="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",aSe="AWS_CONTAINER_AUTHORIZATION_TOKEN",cSe=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[nSe],n=e.awsContainerCredentialsFullUri??process.env[iSe],s=e.awsContainerAuthorizationToken??process.env[aSe],i=e.awsContainerAuthorizationTokenFile??process.env[oSe],o=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&n&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),o("awsContainerCredentialsFullUri will take precedence.")),s&&i&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),o("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${sSe}${r}`;else throw new r$.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,tSe.checkUrl)(a,e.logger);let c=ZEe.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,rSe.retryWrapper)(async()=>{let l=(0,n$.createGetRequest)(a);s?l.headers.Authorization=s:i&&(l.headers.Authorization=(await eSe.default.readFile(i)).toString());try{let d=await c.handle(l);return(0,n$.getCredentials)(d.response).then(f=>(0,QEe.setCredentialFeature)(f,"CREDENTIALS_HTTP","z"))}catch(d){throw new r$.CredentialsProviderError(String(d),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};MC.fromHttp=cSe});var uO=S(UC=>{"use strict";Object.defineProperty(UC,"__esModule",{value:!0});UC.fromHttp=void 0;var lSe=s$();Object.defineProperty(UC,"fromHttp",{enumerable:!0,get:function(){return lSe.fromHttp}})});function uSe(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function dSe(e){return{schemeId:"smithy.api#noAuth"}}var $g,i$,o$,a$,dO=V(()=>{wn();$g=$(Ns()),i$=async(e,t,r)=>({operation:(0,$g.getSmithyContext)(t).operation,region:await(0,$g.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});o$=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(dSe(e));break}default:t.push(uSe(e))}return t},a$=e=>{let t=Lu(e);return Object.assign(t,{authSchemePreference:(0,$g.normalizeProvider)(e.authSchemePreference??[])})}});var c$,l$,fO=V(()=>{c$=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),l$={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var qC,hO=V(()=>{qC={name:"@aws-sdk/nested-clients",version:"3.916.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.916.0","@aws-sdk/middleware-host-header":"3.914.0","@aws-sdk/middleware-logger":"3.914.0","@aws-sdk/middleware-recursion-detection":"3.914.0","@aws-sdk/middleware-user-agent":"3.916.0","@aws-sdk/region-config-resolver":"3.914.0","@aws-sdk/types":"3.914.0","@aws-sdk/util-endpoints":"3.916.0","@aws-sdk/util-user-agent-browser":"3.914.0","@aws-sdk/util-user-agent-node":"3.916.0","@smithy/config-resolver":"^4.4.0","@smithy/core":"^3.17.1","@smithy/fetch-http-handler":"^5.3.4","@smithy/hash-node":"^4.2.3","@smithy/invalid-dependency":"^4.2.3","@smithy/middleware-content-length":"^4.2.3","@smithy/middleware-endpoint":"^4.3.5","@smithy/middleware-retry":"^4.4.5","@smithy/middleware-serde":"^4.2.3","@smithy/middleware-stack":"^4.2.3","@smithy/node-config-provider":"^4.3.3","@smithy/node-http-handler":"^4.4.3","@smithy/protocol-http":"^5.3.3","@smithy/smithy-client":"^4.9.1","@smithy/types":"^4.8.0","@smithy/url-parser":"^4.2.3","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.4","@smithy/util-defaults-mode-node":"^4.2.6","@smithy/util-endpoints":"^3.2.3","@smithy/util-middleware":"^4.2.3","@smithy/util-retry":"^4.2.3","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var Gg=S(Wu=>{"use strict";var u$=require("os"),pO=require("process"),hSe=Zf(),d$={isCrtAvailable:!1},pSe=()=>d$.isCrtAvailable?["md/crt-avail"]:null,f$=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${u$.platform()}`,u$.release()],["lang/js"],["md/nodejs",`${pO.versions.node}`]],s=pSe();s&&n.push(s),e&&n.push([`api/${e}`,t]),pO.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${pO.env.AWS_EXECUTION_ENV}`]);let i=await r?.userAgentAppId?.();return i?[...n,[`app/${i}`]]:[...n]},mSe=f$,h$="AWS_SDK_UA_APP_ID",p$="sdk_ua_app_id",gSe="sdk-ua-app-id",ySe={environmentVariableSelector:e=>e[h$],configFileSelector:e=>e[p$]??e[gSe],default:hSe.DEFAULT_UA_APP_ID};Wu.NODE_APP_ID_CONFIG_OPTIONS=ySe;Wu.UA_APP_ID_ENV_NAME=h$;Wu.UA_APP_ID_INI_NAME=p$;Wu.createDefaultUserAgentProvider=f$;Wu.crtAvailability=d$;Wu.defaultUserAgent=mSe});var Wg=S(y$=>{"use strict";var mO=Of(),ESe=Dn(),SSe=require("buffer"),m$=require("crypto"),gO=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(ESe.toUint8Array(g$(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?m$.createHmac(this.algorithmIdentifier,g$(this.secret)):m$.createHash(this.algorithmIdentifier)}};function g$(e,t){return SSe.Buffer.isBuffer(e)?e:typeof e=="string"?mO.fromString(e,t):ArrayBuffer.isView(e)?mO.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):mO.fromArrayBuffer(e)}y$.Hash=gO});var Jg=S(E$=>{"use strict";var yO=require("node:fs"),CSe=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof yO.ReadStream){if(e.path!=null)return yO.lstatSync(e.path).size;if(typeof e.fd=="number")return yO.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};E$.calculateBodyLength=CSe});var T$,to,S$,Xg,ch,lh,wc,EO,SO,C$,_$,b$,R$,N$,eo,v$,P$,A$,x$,I$,w$,_Se,O$,D$=V(()=>{T$="required",to="argv",S$="isSet",Xg="booleanEquals",ch="error",lh="endpoint",wc="tree",EO="PartitionResult",SO="getAttr",C$={[T$]:!1,type:"String"},_$={[T$]:!0,default:!1,type:"Boolean"},b$={ref:"Endpoint"},R$={fn:Xg,[to]:[{ref:"UseFIPS"},!0]},N$={fn:Xg,[to]:[{ref:"UseDualStack"},!0]},eo={},v$={fn:SO,[to]:[{ref:EO},"supportsFIPS"]},P$={ref:EO},A$={fn:Xg,[to]:[!0,{fn:SO,[to]:[P$,"supportsDualStack"]}]},x$=[R$],I$=[N$],w$=[{ref:"Region"}],_Se={version:"1.0",parameters:{Region:C$,UseDualStack:_$,UseFIPS:_$,Endpoint:C$},rules:[{conditions:[{fn:S$,[to]:[b$]}],rules:[{conditions:x$,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ch},{conditions:I$,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ch},{endpoint:{url:b$,properties:eo,headers:eo},type:lh}],type:wc},{conditions:[{fn:S$,[to]:w$}],rules:[{conditions:[{fn:"aws.partition",[to]:w$,assign:EO}],rules:[{conditions:[R$,N$],rules:[{conditions:[{fn:Xg,[to]:[!0,v$]},A$],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:eo,headers:eo},type:lh}],type:wc},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ch}],type:wc},{conditions:x$,rules:[{conditions:[{fn:Xg,[to]:[v$,!0]}],rules:[{conditions:[{fn:"stringEquals",[to]:[{fn:SO,[to]:[P$,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:eo,headers:eo},type:lh},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:eo,headers:eo},type:lh}],type:wc},{error:"FIPS is enabled but this partition does not support FIPS",type:ch}],type:wc},{conditions:I$,rules:[{conditions:[A$],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:eo,headers:eo},type:lh}],type:wc},{error:"DualStack is enabled but this partition does not support DualStack",type:ch}],type:wc},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:eo,headers:eo},type:lh}],type:wc}],type:wc},{error:"Invalid Configuration: Missing Region",type:ch}]},O$=_Se});var k$,uh,bSe,B$,L$=V(()=>{k$=$(Yf()),uh=$(ju());D$();bSe=new uh.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),B$=(e,t={})=>bSe.get(e,()=>(0,uh.resolveEndpoint)(O$,{endpointParams:e,logger:t.logger}));uh.customEndpointFunctions.aws=k$.awsEndpointFunctions});var F$,M$,VC,HC,U$,q$=V(()=>{wn();Ys();F$=$(Ct()),M$=$(yl()),VC=$(ys()),HC=$(Dn());dO();L$();U$=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??VC.fromBase64,base64Encoder:e?.base64Encoder??VC.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??B$,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??o$,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new pi},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new gc}],logger:e?.logger??new F$.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??M$.parseUrl,utf8Decoder:e?.utf8Decoder??HC.fromUtf8,utf8Encoder:e?.utf8Encoder??HC.toUtf8})});var Yg=S(K$=>{"use strict";var vSe=Ho(),V$=Cl(),ASe=Qs(),xSe="AWS_EXECUTION_ENV",H$="AWS_REGION",j$="AWS_DEFAULT_REGION",ISe="AWS_EC2_METADATA_DISABLED",wSe=["in-region","cross-region","mobile","standard","legacy"],TSe="/latest/meta-data/placement/region",RSe="AWS_DEFAULTS_MODE",NSe="defaults_mode",PSe={environmentVariableSelector:e=>e[RSe],configFileSelector:e=>e[NSe],default:"legacy"},OSe=({region:e=V$.loadConfig(vSe.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=V$.loadConfig(PSe)}={})=>ASe.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return DSe(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${wSe.join(", ")}, got ${r}`)}}),DSe=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await kSe();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},kSe=async()=>{if(process.env[xSe]&&(process.env[H$]||process.env[j$]))return process.env[H$]??process.env[j$];if(!process.env[ISe])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>$(zg())),r=await e();return(await t({...r,path:TSe})).toString()}catch{}};K$.resolveDefaultsModeConfig=OSe});var jC,wl,z$,KC,Il,zC,$$,G$,W$,J$,X$,Y$,Q$=V(()=>{hO();wn();jC=$(Gg()),wl=$(Ho()),z$=$(Wg()),KC=$(Ic()),Il=$(Cl()),zC=$(Au()),$$=$(Jg()),G$=$(eh());q$();W$=$(Ct()),J$=$(Yg()),X$=$(Ct()),Y$=e=>{(0,X$.emitWarningIfUnsupportedVersion)(process.version);let t=(0,J$.resolveDefaultsModeConfig)(e),r=()=>t().then(W$.loadConfigsForDefaultMode),n=U$(e);wf(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Il.loadConfig)(Nf,s),bodyLengthChecker:e?.bodyLengthChecker??$$.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,jC.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:qC.version}),maxAttempts:e?.maxAttempts??(0,Il.loadConfig)(KC.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Il.loadConfig)(wl.NODE_REGION_CONFIG_OPTIONS,{...wl.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:zC.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Il.loadConfig)({...KC.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||G$.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??z$.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??zC.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Il.loadConfig)(wl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Il.loadConfig)(wl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,Il.loadConfig)(jC.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var Zg=S(Tl=>{"use strict";var Qg=Ho(),BSe=e=>({setRegion(t){e.region=t},region(){return e.region}}),LSe=e=>({region:e.region()});Object.defineProperty(Tl,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return Qg.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Tl,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return Qg.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Tl,"REGION_ENV_NAME",{enumerable:!0,get:function(){return Qg.REGION_ENV_NAME}});Object.defineProperty(Tl,"REGION_INI_NAME",{enumerable:!0,get:function(){return Qg.REGION_INI_NAME}});Object.defineProperty(Tl,"resolveRegionConfig",{enumerable:!0,get:function(){return Qg.resolveRegionConfig}});Tl.getAwsRegionExtensionConfiguration=BSe;Tl.resolveAwsRegionExtensionConfiguration=LSe});var Z$,eG,tG=V(()=>{Z$=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},eG=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var $C,GC,WC,rG,nG=V(()=>{$C=$(Zg()),GC=$(Xt()),WC=$(Ct());tG();rG=(e,t)=>{let r=Object.assign((0,$C.getAwsRegionExtensionConfiguration)(e),(0,WC.getDefaultExtensionConfiguration)(e),(0,GC.getHttpHandlerExtensionConfiguration)(e),Z$(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,$C.resolveAwsRegionExtensionConfiguration)(r),(0,WC.resolveDefaultRuntimeConfig)(r),(0,GC.resolveHttpHandlerRuntimeConfig)(r),eG(r))}});var JC,sG,iG,XC,oG,aG,cG,YC,CO,ey,_O=V(()=>{JC=$(Tg()),sG=$(Rg()),iG=$(Ng()),XC=$(Zf()),oG=$(Ho());Ys();aG=$(Dg()),cG=$(Aa()),YC=$(Ic()),CO=$(Ct());dO();fO();Q$();nG();ey=class extends CO.Client{config;constructor(...[t]){let r=Y$(t||{});super(r),this.initConfig=r;let n=c$(r),s=(0,XC.resolveUserAgentConfig)(n),i=(0,YC.resolveRetryConfig)(s),o=(0,oG.resolveRegionConfig)(i),a=(0,JC.resolveHostHeaderConfig)(o),c=(0,cG.resolveEndpointConfig)(a),l=a$(c),d=rG(l,t?.extensions||[]);this.config=d,this.middlewareStack.use((0,XC.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,YC.getRetryPlugin)(this.config)),this.middlewareStack.use((0,aG.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,JC.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,sG.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,iG.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Zm(this.config,{httpAuthSchemeParametersProvider:i$,identityProviderConfigProvider:async f=>new Ou({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use(eg(this.config))}destroy(){super.destroy()}}});var lG,rs,QC=V(()=>{lG=$(Ct()),rs=class e extends lG.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Ju,FSe,ty,ry,bO,vO,ny,sy,iy,oy,MSe,ay,cy,ly,uy,dy,ZC=V(()=>{Ju=$(Ct());QC();FSe={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},ty=class e extends rs{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},ry=class e extends rs{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},bO=e=>({...e,...e.clientSecret&&{clientSecret:Ju.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Ju.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:Ju.SENSITIVE_STRING}}),vO=e=>({...e,...e.accessToken&&{accessToken:Ju.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Ju.SENSITIVE_STRING},...e.idToken&&{idToken:Ju.SENSITIVE_STRING}}),ny=class e extends rs{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},sy=class e extends rs{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},iy=class e extends rs{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},oy=class e extends rs{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},MSe={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},ay=class e extends rs{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},cy=class e extends rs{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ly=class e extends rs{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},uy=class e extends rs{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},dy=class e extends rs{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var Ee,uG,dG,USe,qSe,VSe,HSe,jSe,KSe,zSe,$Se,GSe,WSe,JSe,XSe,YSe,ro,fG=V(()=>{wn();Ys();Ee=$(Ct());ZC();QC();uG=async(e,t)=>{let r=hg(e,t),n={"content-type":"application/json"};r.bp("/token");let s;return s=JSON.stringify((0,Ee.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:i=>(0,Ee._json)(i)})),r.m("POST").h(n).b(s),r.build()},dG=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return USe(e,t);let r=(0,Ee.map)({$metadata:ro(e)}),n=(0,Ee.expectNonNull)((0,Ee.expectObject)(await Kf(e.body,t)),"body"),s=(0,Ee.take)(n,{accessToken:Ee.expectString,expiresIn:Ee.expectInt32,idToken:Ee.expectString,refreshToken:Ee.expectString,tokenType:Ee.expectString});return Object.assign(r,s),r},USe=async(e,t)=>{let r={...e,body:await f1(e.body,t)},n=Mu(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await VSe(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await HSe(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await jSe(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await KSe(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await zSe(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await $Se(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await GSe(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await WSe(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await JSe(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await XSe(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await YSe(r,t);default:let s=r.body;return qSe({output:e,parsedBody:s,errorCode:n})}},qSe=(0,Ee.withBaseException)(rs),VSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString,reason:Ee.expectString});Object.assign(r,s);let i=new ty({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},HSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new ry({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},jSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new ny({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},KSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new sy({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},zSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new iy({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},$Se=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new oy({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},GSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString,reason:Ee.expectString});Object.assign(r,s);let i=new ay({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},WSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new cy({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},JSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new ly({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},XSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new uy({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},YSe=async(e,t)=>{let r=(0,Ee.map)({}),n=e.body,s=(0,Ee.take)(n,{error:Ee.expectString,error_description:Ee.expectString});Object.assign(r,s);let i=new dy({$metadata:ro(e),...r});return(0,Ee.decorateServiceException)(i,e.body)},ro=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var hG,pG,AO,fy,xO=V(()=>{hG=$(Aa()),pG=$(nl()),AO=$(Ct());fO();ZC();fG();fy=class extends AO.Command.classBuilder().ep(l$).m(function(t,r,n,s){return[(0,pG.getSerdePlugin)(n,this.serialize,this.deserialize),(0,hG.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(bO,vO).ser(uG).de(dG).build(){}});var mG,QSe,e_,gG=V(()=>{mG=$(Ct());xO();_O();QSe={CreateTokenCommand:fy},e_=class extends ey{};(0,mG.createAggregatedClient)(QSe,e_)});var yG=V(()=>{xO()});var EG=V(()=>{ZC()});var IO={};Wi(IO,{$Command:()=>AO.Command,AccessDeniedException:()=>ty,AccessDeniedExceptionReason:()=>FSe,AuthorizationPendingException:()=>ry,CreateTokenCommand:()=>fy,CreateTokenRequestFilterSensitiveLog:()=>bO,CreateTokenResponseFilterSensitiveLog:()=>vO,ExpiredTokenException:()=>ny,InternalServerException:()=>sy,InvalidClientException:()=>iy,InvalidGrantException:()=>oy,InvalidRequestException:()=>ay,InvalidRequestExceptionReason:()=>MSe,InvalidScopeException:()=>cy,SSOOIDC:()=>e_,SSOOIDCClient:()=>ey,SSOOIDCServiceException:()=>rs,SlowDownException:()=>ly,UnauthorizedClientException:()=>uy,UnsupportedGrantTypeException:()=>dy,__Client:()=>CO.Client});var wO=V(()=>{_O();gG();yG();EG();QC()});var bG=S(py=>{"use strict";var ZSe=(Mo(),St(rl)),eCe=(FN(),St(dH)),Mi=Qs(),hy=Ac(),tCe=require("fs"),rCe=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new Mi.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=eCe.getBearerTokenEnvKey(t);if(!(r in process.env))throw new Mi.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return ZSe.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},nCe=300*1e3,TO="To refresh this SSO session run 'aws sso login' with the corresponding profile.",sCe=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(wO(),IO));return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:t.clientConfig?.logger??t.parentClientConfig?.logger}))},iCe=async(e,t,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(wO(),IO));return(await sCe(t,r)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},SG=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Mi.TokenProviderError(`Token is expired. ${TO}`,!1)},Xu=(e,t,r=!1)=>{if(typeof t>"u")throw new Mi.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${TO}`,!1)},{writeFile:oCe}=tCe.promises,aCe=(e,t)=>{let r=hy.getSSOTokenFilepath(e),n=JSON.stringify(t,null,2);return oCe(r,n)},CG=new Date(0),_G=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await hy.parseKnownFiles(r),s=hy.getProfileName({profile:r.profile??t?.profile}),i=n[s];if(i){if(!i.sso_session)throw new Mi.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new Mi.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let o=i.sso_session,c=(await hy.loadSsoSessionData(r))[o];if(!c)throw new Mi.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let m of["sso_start_url","sso_region"])if(!c[m])throw new Mi.TokenProviderError(`Sso session '${o}' is missing required property '${m}'.`,!1);c.sso_start_url;let l=c.sso_region,d;try{d=await hy.getSSOTokenFromFile(o)}catch{throw new Mi.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${TO}`,!1)}Xu("accessToken",d.accessToken),Xu("expiresAt",d.expiresAt);let{accessToken:f,expiresAt:h}=d,p={token:f,expiration:new Date(h)};if(p.expiration.getTime()-Date.now()>nCe)return p;if(Date.now()-CG.getTime()<30*1e3)return SG(p),p;Xu("clientId",d.clientId,!0),Xu("clientSecret",d.clientSecret,!0),Xu("refreshToken",d.refreshToken,!0);try{CG.setTime(Date.now());let m=await iCe(d,l,r);Xu("accessToken",m.accessToken),Xu("expiresIn",m.expiresIn);let E=new Date(Date.now()+m.expiresIn*1e3);try{await aCe(o,{...d,accessToken:m.accessToken,expiresAt:E.toISOString(),refreshToken:m.refreshToken})}catch{}return{token:m.accessToken,expiration:E}}catch{return SG(p),p}},cCe=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new Mi.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},lCe=(e={})=>Mi.memoize(Mi.chain(_G(e),async()=>{throw new Mi.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);py.fromEnvSigningName=rCe;py.fromSso=_G;py.fromStatic=cCe;py.nodeProvider=lCe});var NO=S(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.resolveHttpAuthSchemeConfig=Rl.defaultSSOHttpAuthSchemeProvider=Rl.defaultSSOHttpAuthSchemeParametersProvider=void 0;var uCe=(wn(),St(Yi)),RO=Ns(),dCe=async(e,t,r)=>({operation:(0,RO.getSmithyContext)(t).operation,region:await(0,RO.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Rl.defaultSSOHttpAuthSchemeParametersProvider=dCe;function fCe(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function t_(e){return{schemeId:"smithy.api#noAuth"}}var hCe=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(t_(e));break}case"ListAccountRoles":{t.push(t_(e));break}case"ListAccounts":{t.push(t_(e));break}case"Logout":{t.push(t_(e));break}default:t.push(fCe(e))}return t};Rl.defaultSSOHttpAuthSchemeProvider=hCe;var pCe=e=>{let t=(0,uCe.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,RO.normalizeProvider)(e.authSchemePreference??[])})};Rl.resolveHttpAuthSchemeConfig=pCe});var vG=S((Nat,mCe)=>{mCe.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.916.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.916.0","@aws-sdk/middleware-host-header":"3.914.0","@aws-sdk/middleware-logger":"3.914.0","@aws-sdk/middleware-recursion-detection":"3.914.0","@aws-sdk/middleware-user-agent":"3.916.0","@aws-sdk/region-config-resolver":"3.914.0","@aws-sdk/types":"3.914.0","@aws-sdk/util-endpoints":"3.916.0","@aws-sdk/util-user-agent-browser":"3.914.0","@aws-sdk/util-user-agent-node":"3.916.0","@smithy/config-resolver":"^4.4.0","@smithy/core":"^3.17.1","@smithy/fetch-http-handler":"^5.3.4","@smithy/hash-node":"^4.2.3","@smithy/invalid-dependency":"^4.2.3","@smithy/middleware-content-length":"^4.2.3","@smithy/middleware-endpoint":"^4.3.5","@smithy/middleware-retry":"^4.4.5","@smithy/middleware-serde":"^4.2.3","@smithy/middleware-stack":"^4.2.3","@smithy/node-config-provider":"^4.3.3","@smithy/node-http-handler":"^4.4.3","@smithy/protocol-http":"^5.3.3","@smithy/smithy-client":"^4.9.1","@smithy/types":"^4.8.0","@smithy/url-parser":"^4.2.3","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.4","@smithy/util-defaults-mode-node":"^4.2.6","@smithy/util-endpoints":"^3.2.3","@smithy/util-middleware":"^4.2.3","@smithy/util-retry":"^4.2.3","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var MG=S(r_=>{"use strict";Object.defineProperty(r_,"__esModule",{value:!0});r_.ruleSet=void 0;var kG="required",so="fn",io="argv",hh="ref",AG=!0,xG="isSet",my="booleanEquals",dh="error",fh="endpoint",Tc="tree",PO="PartitionResult",OO="getAttr",IG={[kG]:!1,type:"String"},wG={[kG]:!0,default:!1,type:"Boolean"},TG={[hh]:"Endpoint"},BG={[so]:my,[io]:[{[hh]:"UseFIPS"},!0]},LG={[so]:my,[io]:[{[hh]:"UseDualStack"},!0]},no={},RG={[so]:OO,[io]:[{[hh]:PO},"supportsFIPS"]},FG={[hh]:PO},NG={[so]:my,[io]:[!0,{[so]:OO,[io]:[FG,"supportsDualStack"]}]},PG=[BG],OG=[LG],DG=[{[hh]:"Region"}],gCe={version:"1.0",parameters:{Region:IG,UseDualStack:wG,UseFIPS:wG,Endpoint:IG},rules:[{conditions:[{[so]:xG,[io]:[TG]}],rules:[{conditions:PG,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:dh},{conditions:OG,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:dh},{endpoint:{url:TG,properties:no,headers:no},type:fh}],type:Tc},{conditions:[{[so]:xG,[io]:DG}],rules:[{conditions:[{[so]:"aws.partition",[io]:DG,assign:PO}],rules:[{conditions:[BG,LG],rules:[{conditions:[{[so]:my,[io]:[AG,RG]},NG],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:no,headers:no},type:fh}],type:Tc},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:dh}],type:Tc},{conditions:PG,rules:[{conditions:[{[so]:my,[io]:[RG,AG]}],rules:[{conditions:[{[so]:"stringEquals",[io]:[{[so]:OO,[io]:[FG,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:no,headers:no},type:fh},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:no,headers:no},type:fh}],type:Tc},{error:"FIPS is enabled but this partition does not support FIPS",type:dh}],type:Tc},{conditions:OG,rules:[{conditions:[NG],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:no,headers:no},type:fh}],type:Tc},{error:"DualStack is enabled but this partition does not support DualStack",type:dh}],type:Tc},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:no,headers:no},type:fh}],type:Tc}],type:Tc},{error:"Invalid Configuration: Missing Region",type:dh}]};r_.ruleSet=gCe});var UG=S(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});n_.defaultEndpointResolver=void 0;var yCe=Yf(),DO=ju(),ECe=MG(),SCe=new DO.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),CCe=(e,t={})=>SCe.get(e,()=>(0,DO.resolveEndpoint)(ECe.ruleSet,{endpointParams:e,logger:t.logger}));n_.defaultEndpointResolver=CCe;DO.customEndpointFunctions.aws=yCe.awsEndpointFunctions});var HG=S(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});s_.getRuntimeConfig=void 0;var _Ce=(wn(),St(Yi)),bCe=(Ys(),St(Du)),vCe=Ct(),ACe=yl(),qG=ys(),VG=Dn(),xCe=NO(),ICe=UG(),wCe=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??qG.fromBase64,base64Encoder:e?.base64Encoder??qG.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??ICe.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??xCe.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new _Ce.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new bCe.NoAuthSigner}],logger:e?.logger??new vCe.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??ACe.parseUrl,utf8Decoder:e?.utf8Decoder??VG.fromUtf8,utf8Encoder:e?.utf8Encoder??VG.toUtf8});s_.getRuntimeConfig=wCe});var GG=S(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});o_.getRuntimeConfig=void 0;var TCe=(Sa(),St(Ea)),RCe=TCe.__importDefault(vG()),jG=(wn(),St(Yi)),KG=Gg(),i_=Ho(),NCe=Wg(),zG=Ic(),Yu=Cl(),$G=Au(),PCe=Jg(),OCe=eh(),DCe=HG(),kCe=Ct(),BCe=Yg(),LCe=Ct(),FCe=e=>{(0,LCe.emitWarningIfUnsupportedVersion)(process.version);let t=(0,BCe.resolveDefaultsModeConfig)(e),r=()=>t().then(kCe.loadConfigsForDefaultMode),n=(0,DCe.getRuntimeConfig)(e);(0,jG.emitWarningIfUnsupportedVersion)(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Yu.loadConfig)(jG.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:e?.bodyLengthChecker??PCe.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,KG.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:RCe.default.version}),maxAttempts:e?.maxAttempts??(0,Yu.loadConfig)(zG.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Yu.loadConfig)(i_.NODE_REGION_CONFIG_OPTIONS,{...i_.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:$G.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Yu.loadConfig)({...zG.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||OCe.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??NCe.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??$G.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Yu.loadConfig)(i_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Yu.loadConfig)(i_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,Yu.loadConfig)(KG.NODE_APP_ID_CONFIG_OPTIONS,s)}};o_.getRuntimeConfig=FCe});var f9=S(cn=>{"use strict";var WG=Tg(),MCe=Rg(),UCe=Ng(),JG=Zf(),qCe=Ho(),Rc=(Ys(),St(Du)),VCe=Dg(),Sy=Aa(),XG=Ic(),ke=Ct(),YG=NO(),HCe=GG(),QG=Zg(),ZG=Xt(),p_=nl(),gy=(wn(),St(Yi)),jCe=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),m_={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},KCe=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},zCe=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),$Ce=(e,t)=>{let r=Object.assign(QG.getAwsRegionExtensionConfiguration(e),ke.getDefaultExtensionConfiguration(e),ZG.getHttpHandlerExtensionConfiguration(e),KCe(e));return t.forEach(n=>n.configure(r)),Object.assign(e,QG.resolveAwsRegionExtensionConfiguration(r),ke.resolveDefaultRuntimeConfig(r),ZG.resolveHttpHandlerRuntimeConfig(r),zCe(r))},ph=class extends ke.Client{config;constructor(...[t]){let r=HCe.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=jCe(r),s=JG.resolveUserAgentConfig(n),i=XG.resolveRetryConfig(s),o=qCe.resolveRegionConfig(i),a=WG.resolveHostHeaderConfig(o),c=Sy.resolveEndpointConfig(a),l=YG.resolveHttpAuthSchemeConfig(c),d=$Ce(l,t?.extensions||[]);this.config=d,this.middlewareStack.use(JG.getUserAgentPlugin(this.config)),this.middlewareStack.use(XG.getRetryPlugin(this.config)),this.middlewareStack.use(VCe.getContentLengthPlugin(this.config)),this.middlewareStack.use(WG.getHostHeaderPlugin(this.config)),this.middlewareStack.use(MCe.getLoggerPlugin(this.config)),this.middlewareStack.use(UCe.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Rc.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:YG.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async f=>new Rc.DefaultIdentityProviderConfig({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use(Rc.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Nl=class e extends ke.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},a_=class e extends Nl{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},c_=class e extends Nl{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},l_=class e extends Nl{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},u_=class e extends Nl{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},e9=e=>({...e,...e.accessToken&&{accessToken:ke.SENSITIVE_STRING}}),t9=e=>({...e,...e.secretAccessKey&&{secretAccessKey:ke.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:ke.SENSITIVE_STRING}}),r9=e=>({...e,...e.roleCredentials&&{roleCredentials:t9(e.roleCredentials)}}),n9=e=>({...e,...e.accessToken&&{accessToken:ke.SENSITIVE_STRING}}),s9=e=>({...e,...e.accessToken&&{accessToken:ke.SENSITIVE_STRING}}),i9=e=>({...e,...e.accessToken&&{accessToken:ke.SENSITIVE_STRING}}),GCe=async(e,t)=>{let r=Rc.requestBuilder(e,t),n=ke.map({},ke.isSerializableHeaderValue,{[E_]:e[y_]});r.bp("/federation/credentials");let s=ke.map({[a_e]:[,ke.expectNonNull(e[o_e],"roleName")],[a9]:[,ke.expectNonNull(e[o9],"accountId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},WCe=async(e,t)=>{let r=Rc.requestBuilder(e,t),n=ke.map({},ke.isSerializableHeaderValue,{[E_]:e[y_]});r.bp("/assignment/roles");let s=ke.map({[d9]:[,e[u9]],[l9]:[()=>e.maxResults!==void 0,()=>e[c9].toString()],[a9]:[,ke.expectNonNull(e[o9],"accountId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},JCe=async(e,t)=>{let r=Rc.requestBuilder(e,t),n=ke.map({},ke.isSerializableHeaderValue,{[E_]:e[y_]});r.bp("/assignment/accounts");let s=ke.map({[d9]:[,e[u9]],[l9]:[()=>e.maxResults!==void 0,()=>e[c9].toString()]});return r.m("GET").h(n).q(s).b(void 0),r.build()},XCe=async(e,t)=>{let r=Rc.requestBuilder(e,t),n=ke.map({},ke.isSerializableHeaderValue,{[E_]:e[y_]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},YCe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return g_(e,t);let r=ke.map({$metadata:Pl(e)}),n=ke.expectNonNull(ke.expectObject(await gy.parseJsonBody(e.body,t)),"body"),s=ke.take(n,{roleCredentials:ke._json});return Object.assign(r,s),r},QCe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return g_(e,t);let r=ke.map({$metadata:Pl(e)}),n=ke.expectNonNull(ke.expectObject(await gy.parseJsonBody(e.body,t)),"body"),s=ke.take(n,{nextToken:ke.expectString,roleList:ke._json});return Object.assign(r,s),r},ZCe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return g_(e,t);let r=ke.map({$metadata:Pl(e)}),n=ke.expectNonNull(ke.expectObject(await gy.parseJsonBody(e.body,t)),"body"),s=ke.take(n,{accountList:ke._json,nextToken:ke.expectString});return Object.assign(r,s),r},e_e=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return g_(e,t);let r=ke.map({$metadata:Pl(e)});return await ke.collectBody(e.body,t),r},g_=async(e,t)=>{let r={...e,body:await gy.parseJsonErrorBody(e.body,t)},n=gy.loadRestJsonErrorCode(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await r_e(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await n_e(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await s_e(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await i_e(r);default:let s=r.body;return t_e({output:e,parsedBody:s,errorCode:n})}},t_e=ke.withBaseException(Nl),r_e=async(e,t)=>{let r=ke.map({}),n=e.body,s=ke.take(n,{message:ke.expectString});Object.assign(r,s);let i=new a_({$metadata:Pl(e),...r});return ke.decorateServiceException(i,e.body)},n_e=async(e,t)=>{let r=ke.map({}),n=e.body,s=ke.take(n,{message:ke.expectString});Object.assign(r,s);let i=new c_({$metadata:Pl(e),...r});return ke.decorateServiceException(i,e.body)},s_e=async(e,t)=>{let r=ke.map({}),n=e.body,s=ke.take(n,{message:ke.expectString});Object.assign(r,s);let i=new l_({$metadata:Pl(e),...r});return ke.decorateServiceException(i,e.body)},i_e=async(e,t)=>{let r=ke.map({}),n=e.body,s=ke.take(n,{message:ke.expectString});Object.assign(r,s);let i=new u_({$metadata:Pl(e),...r});return ke.decorateServiceException(i,e.body)},Pl=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),o9="accountId",y_="accessToken",a9="account_id",c9="maxResults",l9="max_result",u9="nextToken",d9="next_token",o_e="roleName",a_e="role_name",E_="x-amz-sso_bearer_token",d_=class extends ke.Command.classBuilder().ep(m_).m(function(t,r,n,s){return[p_.getSerdePlugin(n,this.serialize,this.deserialize),Sy.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(e9,r9).ser(GCe).de(YCe).build(){},yy=class extends ke.Command.classBuilder().ep(m_).m(function(t,r,n,s){return[p_.getSerdePlugin(n,this.serialize,this.deserialize),Sy.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(n9,void 0).ser(WCe).de(QCe).build(){},Ey=class extends ke.Command.classBuilder().ep(m_).m(function(t,r,n,s){return[p_.getSerdePlugin(n,this.serialize,this.deserialize),Sy.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(s9,void 0).ser(JCe).de(ZCe).build(){},f_=class extends ke.Command.classBuilder().ep(m_).m(function(t,r,n,s){return[p_.getSerdePlugin(n,this.serialize,this.deserialize),Sy.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(i9,void 0).ser(XCe).de(e_e).build(){},c_e={GetRoleCredentialsCommand:d_,ListAccountRolesCommand:yy,ListAccountsCommand:Ey,LogoutCommand:f_},h_=class extends ph{};ke.createAggregatedClient(c_e,h_);var l_e=Rc.createPaginator(ph,yy,"nextToken","nextToken","maxResults"),u_e=Rc.createPaginator(ph,Ey,"nextToken","nextToken","maxResults");Object.defineProperty(cn,"$Command",{enumerable:!0,get:function(){return ke.Command}});Object.defineProperty(cn,"__Client",{enumerable:!0,get:function(){return ke.Client}});cn.GetRoleCredentialsCommand=d_;cn.GetRoleCredentialsRequestFilterSensitiveLog=e9;cn.GetRoleCredentialsResponseFilterSensitiveLog=r9;cn.InvalidRequestException=a_;cn.ListAccountRolesCommand=yy;cn.ListAccountRolesRequestFilterSensitiveLog=n9;cn.ListAccountsCommand=Ey;cn.ListAccountsRequestFilterSensitiveLog=s9;cn.LogoutCommand=f_;cn.LogoutRequestFilterSensitiveLog=i9;cn.ResourceNotFoundException=c_;cn.RoleCredentialsFilterSensitiveLog=t9;cn.SSO=h_;cn.SSOClient=ph;cn.SSOServiceException=Nl;cn.TooManyRequestsException=l_;cn.UnauthorizedException=u_;cn.paginateListAccountRoles=l_e;cn.paginateListAccounts=u_e});var p9=S(kO=>{"use strict";var h9=f9();Object.defineProperty(kO,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return h9.GetRoleCredentialsCommand}});Object.defineProperty(kO,"SSOClient",{enumerable:!0,get:function(){return h9.SSOClient}})});var BO=S(C_=>{"use strict";var jo=Qs(),S_=Ac(),m9=(Mo(),St(rl)),d_e=bG(),y9=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Cy=!1,g9=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:i,clientConfig:o,parentClientConfig:a,profile:c,filepath:l,configFilepath:d,ignoreCache:f,logger:h})=>{let p,m="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Ue=await d_e.fromSso({profile:c,filepath:l,configFilepath:d,ignoreCache:f})();p={accessToken:Ue.token,expiresAt:new Date(Ue.expiration).toISOString()}}catch(Ue){throw new jo.CredentialsProviderError(Ue.message,{tryNextLink:Cy,logger:h})}else try{p=await S_.getSSOTokenFromFile(e)}catch{throw new jo.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${m}`,{tryNextLink:Cy,logger:h})}if(new Date(p.expiresAt).getTime()-Date.now()<=0)throw new jo.CredentialsProviderError(`The SSO session associated with this profile has expired. ${m}`,{tryNextLink:Cy,logger:h});let{accessToken:E}=p,{SSOClient:b,GetRoleCredentialsCommand:A}=await Promise.resolve().then(function(){return p9()}),R=i||new b(Object.assign({},o??{},{logger:o?.logger??a?.logger,region:o?.region??n})),D;try{D=await R.send(new A({accountId:r,roleName:s,accessToken:E}))}catch(Ue){throw new jo.CredentialsProviderError(Ue,{tryNextLink:Cy,logger:h})}let{roleCredentials:{accessKeyId:K,secretAccessKey:z,sessionToken:G,expiration:ye,credentialScope:he,accountId:xe}={}}=D;if(!K||!z||!G||!ye)throw new jo.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Cy,logger:h});let Me={accessKeyId:K,secretAccessKey:z,sessionToken:G,expiration:new Date(ye),...he&&{credentialScope:he},...xe&&{accountId:xe}};return t?m9.setCredentialFeature(Me,"CREDENTIALS_SSO","s"):m9.setCredentialFeature(Me,"CREDENTIALS_SSO_LEGACY","u"),Me},E9=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:i}=e;if(!r||!n||!s||!i)throw new jo.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},f_e=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=e,{ssoClient:a}=e,c=S_.getProfileName({profile:e.profile??t?.profile});if(!r&&!n&&!s&&!i&&!o){let d=(await S_.parseKnownFiles(e))[c];if(!d)throw new jo.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!y9(d))throw new jo.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(d?.sso_session){let A=(await S_.loadSsoSessionData(e))[d.sso_session],R=` configurations in profile ${c} and sso-session ${d.sso_session}`;if(s&&s!==A.sso_region)throw new jo.CredentialsProviderError("Conflicting SSO region"+R,{tryNextLink:!1,logger:e.logger});if(r&&r!==A.sso_start_url)throw new jo.CredentialsProviderError("Conflicting SSO start_url"+R,{tryNextLink:!1,logger:e.logger});d.sso_region=A.sso_region,d.sso_start_url=A.sso_start_url}let{sso_start_url:f,sso_account_id:h,sso_region:p,sso_role_name:m,sso_session:E}=E9(d,e.logger);return g9({ssoStartUrl:f,ssoSession:E,ssoAccountId:h,ssoRegion:p,ssoRoleName:m,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!n||!s||!i)throw new jo.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return g9({ssoStartUrl:r,ssoSession:o,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};C_.fromSSO=f_e;C_.isSsoProfile=y9;C_.validateSsoProfile=E9});function h_e(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function p_e(e){return{schemeId:"smithy.api#noAuth"}}var _y,S9,C9,m_e,_9,LO=V(()=>{wn();_y=$(Ns());by();S9=async(e,t,r)=>({operation:(0,_y.getSmithyContext)(t).operation,region:await(0,_y.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});C9=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(p_e(e));break}default:t.push(h_e(e))}return t},m_e=e=>Object.assign(e,{stsClientCtor:Na}),_9=e=>{let t=m_e(e),r=Lu(t);return Object.assign(r,{authSchemePreference:(0,_y.normalizeProvider)(e.authSchemePreference??[])})}});var b9,__,b_=V(()=>{b9=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),__={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var D9,lt,Yt,Ol,Ss,k9,B9,$r,v9,Pa,mh,MO,A9,FO,L9,x9,Cs,I9,F9,M9,Ls,Ui,w9,U9,q9,T9,V9,R9,N9,P9,O9,g_e,H9,j9=V(()=>{D9="required",lt="type",Yt="argv",Ol="booleanEquals",Ss="stringEquals",k9="sigv4",B9="us-east-1",$r="endpoint",v9="https://sts.{Region}.{PartitionResult#dnsSuffix}",Pa="tree",mh="error",MO="getAttr",A9={[D9]:!1,[lt]:"String"},FO={[D9]:!0,default:!1,[lt]:"Boolean"},L9={ref:"Endpoint"},x9={fn:"isSet",[Yt]:[{ref:"Region"}]},Cs={ref:"Region"},I9={fn:"aws.partition",[Yt]:[Cs],assign:"PartitionResult"},F9={ref:"UseFIPS"},M9={ref:"UseDualStack"},Ls={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:k9,signingName:"sts",signingRegion:B9}]},headers:{}},Ui={},w9={conditions:[{fn:Ss,[Yt]:[Cs,"aws-global"]}],[$r]:Ls,[lt]:$r},U9={fn:Ol,[Yt]:[F9,!0]},q9={fn:Ol,[Yt]:[M9,!0]},T9={fn:MO,[Yt]:[{ref:"PartitionResult"},"supportsFIPS"]},V9={ref:"PartitionResult"},R9={fn:Ol,[Yt]:[!0,{fn:MO,[Yt]:[V9,"supportsDualStack"]}]},N9=[{fn:"isSet",[Yt]:[L9]}],P9=[U9],O9=[q9],g_e={version:"1.0",parameters:{Region:A9,UseDualStack:FO,UseFIPS:FO,Endpoint:A9,UseGlobalEndpoint:FO},rules:[{conditions:[{fn:Ol,[Yt]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[Yt]:N9},x9,I9,{fn:Ol,[Yt]:[F9,!1]},{fn:Ol,[Yt]:[M9,!1]}],rules:[{conditions:[{fn:Ss,[Yt]:[Cs,"ap-northeast-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"ap-south-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"ap-southeast-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"ap-southeast-2"]}],endpoint:Ls,[lt]:$r},w9,{conditions:[{fn:Ss,[Yt]:[Cs,"ca-central-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"eu-central-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"eu-north-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"eu-west-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"eu-west-2"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"eu-west-3"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"sa-east-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,B9]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"us-east-2"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"us-west-1"]}],endpoint:Ls,[lt]:$r},{conditions:[{fn:Ss,[Yt]:[Cs,"us-west-2"]}],endpoint:Ls,[lt]:$r},{endpoint:{url:v9,properties:{authSchemes:[{name:k9,signingName:"sts",signingRegion:"{Region}"}]},headers:Ui},[lt]:$r}],[lt]:Pa},{conditions:N9,rules:[{conditions:P9,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[lt]:mh},{conditions:O9,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[lt]:mh},{endpoint:{url:L9,properties:Ui,headers:Ui},[lt]:$r}],[lt]:Pa},{conditions:[x9],rules:[{conditions:[I9],rules:[{conditions:[U9,q9],rules:[{conditions:[{fn:Ol,[Yt]:[!0,T9]},R9],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ui,headers:Ui},[lt]:$r}],[lt]:Pa},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[lt]:mh}],[lt]:Pa},{conditions:P9,rules:[{conditions:[{fn:Ol,[Yt]:[T9,!0]}],rules:[{conditions:[{fn:Ss,[Yt]:[{fn:MO,[Yt]:[V9,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Ui,headers:Ui},[lt]:$r},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ui,headers:Ui},[lt]:$r}],[lt]:Pa},{error:"FIPS is enabled but this partition does not support FIPS",[lt]:mh}],[lt]:Pa},{conditions:O9,rules:[{conditions:[R9],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ui,headers:Ui},[lt]:$r}],[lt]:Pa},{error:"DualStack is enabled but this partition does not support DualStack",[lt]:mh}],[lt]:Pa},w9,{endpoint:{url:v9,properties:Ui,headers:Ui},[lt]:$r}],[lt]:Pa}],[lt]:Pa},{error:"Invalid Configuration: Missing Region",[lt]:mh}]},H9=g_e});var K9,gh,y_e,z9,$9=V(()=>{K9=$(Yf()),gh=$(ju());j9();y_e=new gh.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),z9=(e,t={})=>y_e.get(e,()=>(0,gh.resolveEndpoint)(H9,{endpointParams:e,logger:t.logger}));gh.customEndpointFunctions.aws=K9.awsEndpointFunctions});var G9,W9,v_,A_,J9,X9=V(()=>{wn();Ys();G9=$(Ct()),W9=$(yl()),v_=$(ys()),A_=$(Dn());LO();$9();J9=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??v_.fromBase64,base64Encoder:e?.base64Encoder??v_.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??z9,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??C9,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new pi},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new gc}],logger:e?.logger??new G9.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??W9.parseUrl,utf8Decoder:e?.utf8Decoder??A_.fromUtf8,utf8Encoder:e?.utf8Encoder??A_.toUtf8})});var x_,kl,Y9,I_,Dl,w_,Q9,Z9,eW,tW,rW,nW,sW=V(()=>{hO();wn();x_=$(Gg()),kl=$(Ho());Ys();Y9=$(Wg()),I_=$(Ic()),Dl=$(Cl()),w_=$(Au()),Q9=$(Jg()),Z9=$(eh());X9();eW=$(Ct()),tW=$(Yg()),rW=$(Ct()),nW=e=>{(0,rW.emitWarningIfUnsupportedVersion)(process.version);let t=(0,tW.resolveDefaultsModeConfig)(e),r=()=>t().then(eW.loadConfigsForDefaultMode),n=J9(e);wf(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Dl.loadConfig)(Nf,s),bodyLengthChecker:e?.bodyLengthChecker??Q9.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,x_.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:qC.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await e.credentialDefaultProvider(o?.__config||{})()),signer:new pi},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new gc}],maxAttempts:e?.maxAttempts??(0,Dl.loadConfig)(I_.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Dl.loadConfig)(kl.NODE_REGION_CONFIG_OPTIONS,{...kl.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:w_.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Dl.loadConfig)({...I_.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Z9.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Y9.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??w_.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Dl.loadConfig)(kl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Dl.loadConfig)(kl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,Dl.loadConfig)(x_.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var iW,oW,aW=V(()=>{iW=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},oW=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var T_,R_,N_,cW,lW=V(()=>{T_=$(Zg()),R_=$(Xt()),N_=$(Ct());aW();cW=(e,t)=>{let r=Object.assign((0,T_.getAwsRegionExtensionConfiguration)(e),(0,N_.getDefaultExtensionConfiguration)(e),(0,R_.getHttpHandlerExtensionConfiguration)(e),iW(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,T_.resolveAwsRegionExtensionConfiguration)(r),(0,N_.resolveDefaultRuntimeConfig)(r),(0,R_.resolveHttpHandlerRuntimeConfig)(r),oW(r))}});var P_,uW,dW,O_,fW,hW,pW,D_,UO,Na,by=V(()=>{P_=$(Tg()),uW=$(Rg()),dW=$(Ng()),O_=$(Zf()),fW=$(Ho());Ys();hW=$(Dg()),pW=$(Aa()),D_=$(Ic()),UO=$(Ct());LO();b_();sW();lW();Na=class extends UO.Client{config;constructor(...[t]){let r=nW(t||{});super(r),this.initConfig=r;let n=b9(r),s=(0,O_.resolveUserAgentConfig)(n),i=(0,D_.resolveRetryConfig)(s),o=(0,fW.resolveRegionConfig)(i),a=(0,P_.resolveHostHeaderConfig)(o),c=(0,pW.resolveEndpointConfig)(a),l=_9(c),d=cW(l,t?.extensions||[]);this.config=d,this.middlewareStack.use((0,O_.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,D_.getRetryPlugin)(this.config)),this.middlewareStack.use((0,hW.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,P_.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,uW.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,dW.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Zm(this.config,{httpAuthSchemeParametersProvider:S9,identityProviderConfigProvider:async f=>new Ou({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use(eg(this.config))}destroy(){super.destroy()}}});var mW,Si,k_=V(()=>{mW=$(Ct()),Si=class e extends mW.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var qO,VO,HO,vy,Ay,xy,Iy,wy,Ty,jO,KO,Ry,Ny=V(()=>{qO=$(Ct());k_();VO=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:qO.SENSITIVE_STRING}}),HO=e=>({...e,...e.Credentials&&{Credentials:VO(e.Credentials)}}),vy=class e extends Si{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ay=class e extends Si{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},xy=class e extends Si{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Iy=class e extends Si{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},wy=class e extends Si{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ty=class e extends Si{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},jO=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:qO.SENSITIVE_STRING}}),KO=e=>({...e,...e.Credentials&&{Credentials:VO(e.Credentials)}}),Ry=class e extends Si{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var gW,_t,yW,EW,SW,CW,_W,E_e,S_e,C_e,__e,b_e,v_e,A_e,x_e,I_e,bW,w_e,T_e,R_e,N_e,P_e,O_e,vW,D_e,k_e,AW,B_e,L_e,F_e,M_e,U_e,q_e,V_e,Pc,H_e,xW,IW,wW,TW,zO,j_e,$O,yh,K_e,GO,WO,Eh,JO,Sh,XO,YO,QO,Ch,_h,ZO,eD,tD,bh,rD,vh,Ah,nD,sD,Nc,iD,oD,aD,cD,lD,RW,uD,dD,fD,Sn,NW,z_e,hD=V(()=>{wn();gW=$(Xt()),_t=$(Ct());Ny();k_();yW=async(e,t)=>{let r=IW,n;return n=NW({...x_e(e,t),[TW]:j_e,[RW]:wW}),xW(t,r,"/",void 0,n)},EW=async(e,t)=>{let r=IW,n;return n=NW({...I_e(e,t),[TW]:K_e,[RW]:wW}),xW(t,r,"/",void 0,n)},SW=async(e,t)=>{if(e.statusCode>=300)return _W(e,t);let r=await Ag(e.body,t),n={};return n=D_e(r.AssumeRoleResult,t),{$metadata:Pc(e),...n}},CW=async(e,t)=>{if(e.statusCode>=300)return _W(e,t);let r=await Ag(e.body,t),n={};return n=k_e(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Pc(e),...n}},_W=async(e,t)=>{let r={...e,body:await v1(e.body,t)},n=z_e(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await E_e(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await b_e(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await v_e(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await A_e(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await S_e(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await C_e(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await __e(r,t);default:let s=r.body;return H_e({output:e,parsedBody:s.Error,errorCode:n})}},E_e=async(e,t)=>{let r=e.body,n=B_e(r.Error,t),s=new vy({$metadata:Pc(e),...n});return(0,_t.decorateServiceException)(s,r)},S_e=async(e,t)=>{let r=e.body,n=L_e(r.Error,t),s=new Ry({$metadata:Pc(e),...n});return(0,_t.decorateServiceException)(s,r)},C_e=async(e,t)=>{let r=e.body,n=F_e(r.Error,t),s=new wy({$metadata:Pc(e),...n});return(0,_t.decorateServiceException)(s,r)},__e=async(e,t)=>{let r=e.body,n=M_e(r.Error,t),s=new Ty({$metadata:Pc(e),...n});return(0,_t.decorateServiceException)(s,r)},b_e=async(e,t)=>{let r=e.body,n=U_e(r.Error,t),s=new Ay({$metadata:Pc(e),...n});return(0,_t.decorateServiceException)(s,r)},v_e=async(e,t)=>{let r=e.body,n=q_e(r.Error,t),s=new xy({$metadata:Pc(e),...n});return(0,_t.decorateServiceException)(s,r)},A_e=async(e,t)=>{let r=e.body,n=V_e(r.Error,t),s=new Iy({$metadata:Pc(e),...n});return(0,_t.decorateServiceException)(s,r)},x_e=(e,t)=>{let r={};if(e[vh]!=null&&(r[vh]=e[vh]),e[Ah]!=null&&(r[Ah]=e[Ah]),e[_h]!=null){let n=bW(e[_h],t);e[_h]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}if(e[Ch]!=null&&(r[Ch]=e[Ch]),e[Sh]!=null&&(r[Sh]=e[Sh]),e[aD]!=null){let n=O_e(e[aD],t);e[aD]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([s,i])=>{let o=`Tags.${s}`;r[o]=i})}if(e[lD]!=null){let n=P_e(e[lD],t);e[lD]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([s,i])=>{let o=`TransitiveTagKeys.${s}`;r[o]=i})}if(e[YO]!=null&&(r[YO]=e[YO]),e[iD]!=null&&(r[iD]=e[iD]),e[cD]!=null&&(r[cD]=e[cD]),e[Nc]!=null&&(r[Nc]=e[Nc]),e[eD]!=null){let n=R_e(e[eD],t);e[eD]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([s,i])=>{let o=`ProvidedContexts.${s}`;r[o]=i})}return r},I_e=(e,t)=>{let r={};if(e[vh]!=null&&(r[vh]=e[vh]),e[Ah]!=null&&(r[Ah]=e[Ah]),e[dD]!=null&&(r[dD]=e[dD]),e[tD]!=null&&(r[tD]=e[tD]),e[_h]!=null){let n=bW(e[_h],t);e[_h]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}return e[Ch]!=null&&(r[Ch]=e[Ch]),e[Sh]!=null&&(r[Sh]=e[Sh]),r},bW=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let i=w_e(s,t);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},w_e=(e,t)=>{let r={};return e[fD]!=null&&(r[fD]=e[fD]),r},T_e=(e,t)=>{let r={};return e[ZO]!=null&&(r[ZO]=e[ZO]),e[JO]!=null&&(r[JO]=e[JO]),r},R_e=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let i=T_e(s,t);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},N_e=(e,t)=>{let r={};return e[QO]!=null&&(r[QO]=e[QO]),e[uD]!=null&&(r[uD]=e[uD]),r},P_e=(e,t)=>{let r={},n=1;for(let s of e)s!==null&&(r[`member.${n}`]=s,n++);return r},O_e=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let i=N_e(s,t);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},vW=(e,t)=>{let r={};return e[$O]!=null&&(r[$O]=(0,_t.expectString)(e[$O])),e[GO]!=null&&(r[GO]=(0,_t.expectString)(e[GO])),r},D_e=(e,t)=>{let r={};return e[Eh]!=null&&(r[Eh]=AW(e[Eh],t)),e[yh]!=null&&(r[yh]=vW(e[yh],t)),e[bh]!=null&&(r[bh]=(0,_t.strictParseInt32)(e[bh])),e[Nc]!=null&&(r[Nc]=(0,_t.expectString)(e[Nc])),r},k_e=(e,t)=>{let r={};return e[Eh]!=null&&(r[Eh]=AW(e[Eh],t)),e[sD]!=null&&(r[sD]=(0,_t.expectString)(e[sD])),e[yh]!=null&&(r[yh]=vW(e[yh],t)),e[bh]!=null&&(r[bh]=(0,_t.strictParseInt32)(e[bh])),e[rD]!=null&&(r[rD]=(0,_t.expectString)(e[rD])),e[WO]!=null&&(r[WO]=(0,_t.expectString)(e[WO])),e[Nc]!=null&&(r[Nc]=(0,_t.expectString)(e[Nc])),r},AW=(e,t)=>{let r={};return e[zO]!=null&&(r[zO]=(0,_t.expectString)(e[zO])),e[nD]!=null&&(r[nD]=(0,_t.expectString)(e[nD])),e[oD]!=null&&(r[oD]=(0,_t.expectString)(e[oD])),e[XO]!=null&&(r[XO]=(0,_t.expectNonNull)((0,_t.parseRfc3339DateTimeWithOffset)(e[XO]))),r},B_e=(e,t)=>{let r={};return e[Sn]!=null&&(r[Sn]=(0,_t.expectString)(e[Sn])),r},L_e=(e,t)=>{let r={};return e[Sn]!=null&&(r[Sn]=(0,_t.expectString)(e[Sn])),r},F_e=(e,t)=>{let r={};return e[Sn]!=null&&(r[Sn]=(0,_t.expectString)(e[Sn])),r},M_e=(e,t)=>{let r={};return e[Sn]!=null&&(r[Sn]=(0,_t.expectString)(e[Sn])),r},U_e=(e,t)=>{let r={};return e[Sn]!=null&&(r[Sn]=(0,_t.expectString)(e[Sn])),r},q_e=(e,t)=>{let r={};return e[Sn]!=null&&(r[Sn]=(0,_t.expectString)(e[Sn])),r},V_e=(e,t)=>{let r={};return e[Sn]!=null&&(r[Sn]=(0,_t.expectString)(e[Sn])),r},Pc=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),H_e=(0,_t.withBaseException)(Si),xW=async(e,t,r,n,s)=>{let{hostname:i,protocol:o="https",port:a,path:c}=await e.endpoint(),l={protocol:o,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(l.hostname=n),s!==void 0&&(l.body=s),new gW.HttpRequest(l)},IW={"content-type":"application/x-www-form-urlencoded"},wW="2011-06-15",TW="Action",zO="AccessKeyId",j_e="AssumeRole",$O="AssumedRoleId",yh="AssumedRoleUser",K_e="AssumeRoleWithWebIdentity",GO="Arn",WO="Audience",Eh="Credentials",JO="ContextAssertion",Sh="DurationSeconds",XO="Expiration",YO="ExternalId",QO="Key",Ch="Policy",_h="PolicyArns",ZO="ProviderArn",eD="ProvidedContexts",tD="ProviderId",bh="PackedPolicySize",rD="Provider",vh="RoleArn",Ah="RoleSessionName",nD="SecretAccessKey",sD="SubjectFromWebIdentityToken",Nc="SourceIdentity",iD="SerialNumber",oD="SessionToken",aD="Tags",cD="TokenCode",lD="TransitiveTagKeys",RW="Version",uD="Value",dD="WebIdentityToken",fD="arn",Sn="message",NW=e=>Object.entries(e).map(([t,r])=>(0,_t.extendedEncodeURIComponent)(t)+"="+(0,_t.extendedEncodeURIComponent)(r)).join("&"),z_e=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var PW,OW,DW,Qu,B_=V(()=>{PW=$(Aa()),OW=$(nl()),DW=$(Ct());b_();Ny();hD();Qu=class extends DW.Command.classBuilder().ep(__).m(function(t,r,n,s){return[(0,OW.getSerdePlugin)(n,this.serialize,this.deserialize),(0,PW.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,HO).ser(yW).de(SW).build(){}});var kW,BW,LW,Zu,L_=V(()=>{kW=$(Aa()),BW=$(nl()),LW=$(Ct());b_();Ny();hD();Zu=class extends LW.Command.classBuilder().ep(__).m(function(t,r,n,s){return[(0,BW.getSerdePlugin)(n,this.serialize,this.deserialize),(0,kW.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(jO,KO).ser(EW).de(CW).build(){}});var FW,$_e,F_,MW=V(()=>{FW=$(Ct());B_();L_();by();$_e={AssumeRoleCommand:Qu,AssumeRoleWithWebIdentityCommand:Zu},F_=class extends Na{};(0,FW.createAggregatedClient)($_e,F_)});var UW=V(()=>{B_();L_()});var qW=V(()=>{Ny()});var VW,HW,jW,KW,zW,$W,GW=V(()=>{Mo();B_();L_();VW="us-east-1",HW=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},jW=async(e,t,r)=>{let n=typeof e=="function"?await e():e,s=typeof t=="function"?await t():t;return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${s} (parent client)`,`${VW} (STS default)`),n??s??VW},KW=(e,t)=>{let r,n;return async(s,i)=>{if(n=s,!r){let{logger:d=e?.parentClientConfig?.logger,profile:f=e?.parentClientConfig?.profile,region:h,requestHandler:p=e?.parentClientConfig?.requestHandler,credentialProviderLogger:m}=e,E=await jW(h,e?.parentClientConfig?.region,m),b=!$W(p);r=new t({...e,profile:f,credentialDefaultProvider:()=>async()=>n,region:E,requestHandler:b?p:void 0,logger:d})}let{Credentials:o,AssumedRoleUser:a}=await r.send(new Qu(i));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let c=HW(a),l={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return tl(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},zW=(e,t)=>{let r;return async n=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:d,requestHandler:f=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h}=e,p=await jW(d,e?.parentClientConfig?.region,h),m=!$W(f);r=new t({...e,profile:l,region:p,requestHandler:m?f:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:i}=await r.send(new Zu(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let o=HW(i),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...o&&{accountId:o}};return o&&tl(a,"RESOLVED_ACCOUNT_ID","T"),tl(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},$W=e=>e?.metadata?.handlerProtocol==="h2"});var WW,JW,XW,G_e,YW=V(()=>{GW();by();WW=(e,t)=>t?class extends e{constructor(n){super(n);for(let s of t)this.middlewareStack.use(s)}}:e,JW=(e={},t)=>KW(e,WW(Na,t)),XW=(e={},t)=>zW(e,WW(Na,t)),G_e=e=>t=>e({roleAssumer:JW(t),roleAssumerWithWebIdentity:XW(t),...t})});var pD={};Wi(pD,{AssumeRoleCommand:()=>Qu,AssumeRoleResponseFilterSensitiveLog:()=>HO,AssumeRoleWithWebIdentityCommand:()=>Zu,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>jO,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>KO,CredentialsFilterSensitiveLog:()=>VO,ExpiredTokenException:()=>vy,IDPCommunicationErrorException:()=>Ry,IDPRejectedClaimException:()=>wy,InvalidIdentityTokenException:()=>Ty,MalformedPolicyDocumentException:()=>Ay,PackedPolicyTooLargeException:()=>xy,RegionDisabledException:()=>Iy,STS:()=>F_,STSClient:()=>Na,STSServiceException:()=>Si,__Client:()=>UO.Client,decorateDefaultCredentialProvider:()=>G_e,getDefaultRoleAssumer:()=>JW,getDefaultRoleAssumerWithWebIdentity:()=>XW});var mD=V(()=>{by();MW();UW();qW();YW();k_()});var ED=S(QW=>{"use strict";var yD=Ac(),gD=Qs(),W_e=require("child_process"),J_e=require("util"),X_e=(Mo(),St(rl)),Y_e=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let i=new Date;if(new Date(t.Expiration)<i)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let s={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return X_e.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},Q_e=async(e,t,r)=>{let n=t[e];if(t[e]){let s=n.credential_process;if(s!==void 0){let i=J_e.promisify(yD.externalDataInterceptor?.getTokenRecord?.().exec??W_e.exec);try{let{stdout:o}=await i(s),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Y_e(e,a,t)}catch(o){throw new gD.CredentialsProviderError(o.message,{logger:r})}}else throw new gD.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new gD.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},Z_e=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await yD.parseKnownFiles(e);return Q_e(yD.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};QW.fromProcess=Z_e});var SD=S(Oa=>{"use strict";var ebe=Oa&&Oa.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),tbe=Oa&&Oa.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),rbe=Oa&&Oa.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),s=0;s<n.length;s++)n[s]!=="default"&&ebe(r,t,n[s]);return tbe(r,t),r}})();Object.defineProperty(Oa,"__esModule",{value:!0});Oa.fromWebToken=void 0;var nbe=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:i,policyArns:o,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:d}=await Promise.resolve().then(()=>rbe((mD(),St(pD))));l=d({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:o,Policy:a,DurationSeconds:c})};Oa.fromWebToken=nbe});var e7=S(M_=>{"use strict";Object.defineProperty(M_,"__esModule",{value:!0});M_.fromTokenFile=void 0;var sbe=(Mo(),St(rl)),ibe=Qs(),obe=Ac(),abe=require("fs"),cbe=SD(),ZW="AWS_WEB_IDENTITY_TOKEN_FILE",lbe="AWS_ROLE_ARN",ube="AWS_ROLE_SESSION_NAME",dbe=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[ZW],n=e?.roleArn??process.env[lbe],s=e?.roleSessionName??process.env[ube];if(!r||!n)throw new ibe.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let i=await(0,cbe.fromWebToken)({...e,webIdentityToken:obe.externalDataInterceptor?.getTokenRecord?.()[r]??(0,abe.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(t);return r===process.env[ZW]&&(0,sbe.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i};M_.fromTokenFile=dbe});var CD=S(Py=>{"use strict";var t7=e7(),r7=SD();Object.keys(t7).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Py,e)&&Object.defineProperty(Py,e,{enumerable:!0,get:function(){return t7[e]}})});Object.keys(r7).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Py,e)&&Object.defineProperty(Py,e,{enumerable:!0,get:function(){return r7[e]}})})});var c7=S(a7=>{"use strict";var bD=Ac(),Oy=Qs(),Bl=(Mo(),St(rl)),fbe=(e,t,r)=>{let n={EcsContainer:async s=>{let{fromHttp:i}=await Promise.resolve().then(()=>$(uO())),{fromContainerMetadata:o}=await Promise.resolve().then(()=>$(zg()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Oy.chain(i(s??{}),o(s))().then(_D)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:i}=await Promise.resolve().then(()=>$(zg()));return async()=>i(s)().then(_D)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:i}=await Promise.resolve().then(()=>$(rO()));return async()=>i(s)().then(_D)}};if(e in n)return n[e];throw new Oy.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},_D=e=>Bl.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),hbe=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(pbe(e,{profile:t,logger:r})||mbe(e,{profile:t,logger:r})),pbe=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},mbe=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},gbe=async(e,t,r,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=t[e],{source_profile:o,region:a}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:l}=await Promise.resolve().then(()=>(mD(),pD));r.roleAssumer=l({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(o&&o in n)throw new Oy.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${bD.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${o?`source_profile=[${o}]`:`profile=[${e}]`}`);let c=o?s(o,t,r,{...n,[o]:!0},n7(t[o]??{})):(await fbe(i.credential_source,e,r.logger)(r))();if(n7(i))return c.then(l=>Bl.setCredentialFeature(l,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let l={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:d}=i;if(d){if(!r.mfaCodeProvider)throw new Oy.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});l.SerialNumber=d,l.TokenCode=await r.mfaCodeProvider(d)}let f=await c;return r.roleAssumer(f,l).then(h=>Bl.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},n7=e=>!e.role_arn&&!!e.credential_source,ybe=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Ebe=async(e,t)=>Promise.resolve().then(()=>$(ED())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>Bl.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),Sbe=async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>$(BO()));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(s=>t.sso_session?Bl.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):Bl.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},Cbe=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),s7=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,i7=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return Bl.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},_be=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,bbe=async(e,t)=>Promise.resolve().then(()=>$(CD())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>Bl.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),o7=async(e,t,r,n={},s=!1)=>{let i=t[e];if(Object.keys(n).length>0&&s7(i))return i7(i,r);if(s||hbe(i,{profile:e,logger:r.logger}))return gbe(e,t,r,n,o7);if(s7(i))return i7(i,r);if(_be(i))return bbe(i,r);if(ybe(i))return Ebe(r,e);if(Cbe(i))return await Sbe(e,i,r);throw new Oy.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},vbe=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await bD.parseKnownFiles(r);return o7(bD.getProfileName({profile:e.profile??t?.profile}),n,r)};a7.fromIni=vbe});var h7=S(U_=>{"use strict";var vD=rO(),ed=Qs(),Abe=Ac(),l7="AWS_EC2_METADATA_DISABLED",xbe=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>$(zg()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:i}=await Promise.resolve().then(()=>$(uO()));return ed.chain(i(e),n(e))}return process.env[l7]&&process.env[l7]!=="false"?async()=>{throw new ed.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(e))},u7=!1,Ibe=(e={})=>ed.memoize(ed.chain(async()=>{if(e.profile??process.env[Abe.ENV_PROFILE])throw process.env[vD.ENV_KEY]&&process.env[vD.ENV_SECRET]&&(u7||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),u7=!0)),new ed.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),vD.fromEnv(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoSession:i}=e;if(!t&&!r&&!n&&!s&&!i)throw new ed.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:o}=await Promise.resolve().then(()=>$(BO()));return o(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:t}=await Promise.resolve().then(()=>$(c7()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:t}=await Promise.resolve().then(()=>$(ED()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:t}=await Promise.resolve().then(()=>$(CD()));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await xbe(e))()),async()=>{throw new ed.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),f7,d7),d7=e=>e?.expiration!==void 0,f7=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;U_.credentialsTreatedAsExpired=f7;U_.credentialsWillNeedRefresh=d7;U_.defaultProvider=Ibe});var N7=S(Cn=>{"use strict";var Ll=tC(),p7=G1(),wbe=Xt(),m7="AWS_S3_DISABLE_MULTIREGION_ACCESS_POINTS",g7="s3_disable_multiregion_access_points",Tbe={environmentVariableSelector:e=>Ll.booleanSelector(e,m7,Ll.SelectorType.ENV),configFileSelector:e=>Ll.booleanSelector(e,g7,Ll.SelectorType.CONFIG),default:!1},y7="AWS_S3_USE_ARN_REGION",E7="s3_use_arn_region",Rbe={environmentVariableSelector:e=>Ll.booleanSelector(e,y7,Ll.SelectorType.ENV),configFileSelector:e=>Ll.booleanSelector(e,E7,Ll.SelectorType.CONFIG),default:void 0},Nbe=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Pbe=/(\d+\.){3}\d+/,Obe=/\.\./,S7=/\./,Dbe=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,C7=/^s3(-external-1)?\.amazonaws\.com$/,AD="amazonaws.com",kbe=e=>typeof e.bucketName=="string",Bbe=e=>Nbe.test(e)&&!Pbe.test(e)&&!Obe.test(e),_7=e=>{let t=e.match(Dbe);return[t[4],e.replace(new RegExp(`^${t[0]}`),"")]},Lbe=e=>C7.test(e)?["us-east-1",AD]:_7(e),b7=e=>C7.test(e)?[e.replace(`.${AD}`,""),AD]:_7(e),Fbe=e=>{if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")},Mbe=e=>{if(e!=="s3"&&e!=="s3-outposts"&&e!=="s3-object-lambda")throw new Error("Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component")},Ube=e=>{if(e!=="s3")throw new Error("Expect 's3' in Accesspoint ARN service component")},v7=e=>{if(e!=="s3-outposts")throw new Error("Expect 's3-posts' in Outpost ARN service component")},A7=(e,t)=>{if(e!==t.clientPartition)throw new Error(`Partition in ARN is incompatible, got "${e}" but expected "${t.clientPartition}"`)},qbe=(e,t)=>{},ID=e=>{if(["s3-external-1","aws-global"].includes(e))throw new Error(`Client region ${e} is not regional`)},x7=e=>{if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")},xh=(e,t={tlsCompatible:!0})=>{if(e.length>=64||!/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||t?.tlsCompatible&&S7.test(e))throw new Error(`Invalid DNS label ${e}`)},Vbe=e=>{if(e.isCustomEndpoint){if(e.dualstackEndpoint)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported with custom endpoint")}},I7=e=>{let t=e.includes(":")?":":"/",[r,...n]=e.split(t);if(r==="accesspoint"){if(n.length!==1||n[0]==="")throw new Error(`Access Point ARN should have one resource accesspoint${t}{accesspointname}`);return{accesspointName:n[0]}}else if(r==="outpost"){if(!n[0]||n[1]!=="accesspoint"||!n[2]||n.length!==3)throw new Error(`Outpost ARN should have resource outpost${t}{outpostId}${t}accesspoint${t}{accesspointName}`);let[s,i,o]=n;return{outpostId:s,accesspointName:o}}else throw new Error(`ARN resource should begin with 'accesspoint${t}' or 'outpost${t}'`)},Hbe=e=>{},w7=e=>{if(e)throw new Error("FIPS region is not supported with Outpost.")},jbe=e=>{try{e.split(".").forEach(t=>{xh(t)})}catch{throw new Error(`"${e}" is not a DNS compatible name.`)}},xD=e=>(Vbe(e),kbe(e)?Kbe(e):zbe(e)),Kbe=({accelerateEndpoint:e=!1,clientRegion:t,baseHostname:r,bucketName:n,dualstackEndpoint:s=!1,fipsEndpoint:i=!1,pathStyleEndpoint:o=!1,tlsCompatible:a=!0,isCustomEndpoint:c=!1})=>{let[l,d]=c?[t,r]:Lbe(r);return o||!Bbe(n)||a&&S7.test(n)?{bucketEndpoint:!1,hostname:s?`s3.dualstack.${l}.${d}`:r}:(e?r=`s3-accelerate${s?".dualstack":""}.${d}`:s&&(r=`s3.dualstack.${l}.${d}`),{bucketEndpoint:!0,hostname:`${n}.${r}`})},zbe=e=>{let{isCustomEndpoint:t,baseHostname:r,clientRegion:n}=e,s=t?r:b7(r)[1],{pathStyleEndpoint:i,accelerateEndpoint:o=!1,fipsEndpoint:a=!1,tlsCompatible:c=!0,bucketName:l,clientPartition:d="aws"}=e;Fbe({pathStyleEndpoint:i,accelerateEndpoint:o,tlsCompatible:c});let{service:f,partition:h,accountId:p,region:m,resource:E}=l;Mbe(f),A7(h,{clientPartition:d}),x7(p);let{accesspointName:b,outpostId:A}=I7(E);return f==="s3-object-lambda"?$be({...e,tlsCompatible:c,bucketName:l,accesspointName:b,hostnameSuffix:s}):m===""?Gbe({...e,mrapAlias:b,hostnameSuffix:s}):A?Wbe({...e,clientRegion:n,outpostId:A,accesspointName:b,hostnameSuffix:s}):Jbe({...e,clientRegion:n,accesspointName:b,hostnameSuffix:s})},$be=({dualstackEndpoint:e=!1,fipsEndpoint:t=!1,tlsCompatible:r=!0,useArnRegion:n,clientRegion:s,clientSigningRegion:i=s,accesspointName:o,bucketName:a,hostnameSuffix:c})=>{let{accountId:l,region:d,service:f}=a;ID(s);let h=`${o}-${l}`;xh(h,{tlsCompatible:r});let p=n?d:s,m=n?d:i;return{bucketEndpoint:!0,hostname:`${h}.${f}${t?"-fips":""}.${p}.${c}`,signingRegion:m,signingService:f}},Gbe=({disableMultiregionAccessPoints:e,dualstackEndpoint:t=!1,isCustomEndpoint:r,mrapAlias:n,hostnameSuffix:s})=>{if(e===!0)throw new Error("SDK is attempting to use a MRAP ARN. Please enable to feature.");return jbe(n),{bucketEndpoint:!0,hostname:`${n}${r?"":".accesspoint.s3-global"}.${s}`,signingRegion:"*"}},Wbe=({useArnRegion:e,clientRegion:t,clientSigningRegion:r=t,bucketName:n,outpostId:s,dualstackEndpoint:i=!1,fipsEndpoint:o=!1,tlsCompatible:a=!0,accesspointName:c,isCustomEndpoint:l,hostnameSuffix:d})=>{ID(t);let f=`${c}-${n.accountId}`;xh(f,{tlsCompatible:a});let h=e?n.region:t,p=e?n.region:r;return v7(n.service),xh(s,{tlsCompatible:a}),w7(o),{bucketEndpoint:!0,hostname:`${`${f}.${s}`}${l?"":`.s3-outposts.${h}`}.${d}`,signingRegion:p,signingService:"s3-outposts"}},Jbe=({useArnRegion:e,clientRegion:t,clientSigningRegion:r=t,bucketName:n,dualstackEndpoint:s=!1,fipsEndpoint:i=!1,tlsCompatible:o=!0,accesspointName:a,isCustomEndpoint:c,hostnameSuffix:l})=>{ID(t);let d=`${a}-${n.accountId}`;xh(d,{tlsCompatible:o});let f=e?n.region:t,h=e?n.region:r;return Ube(n.service),{bucketEndpoint:!0,hostname:`${d}${c?"":`.s3-accesspoint${i?"-fips":""}${s?".dualstack":""}.${f}`}.${l}`,signingRegion:h}},T7=e=>(t,r)=>async n=>{let{Bucket:s}=n.input,i=e.bucketEndpoint,o=n.request;if(wbe.HttpRequest.isInstance(o)){if(e.bucketEndpoint)o.hostname=s;else if(p7.validate(s)){let a=p7.parse(s),c=await e.region(),l=await e.useDualstackEndpoint(),d=await e.useFipsEndpoint(),{partition:f,signingRegion:h=c}=await e.regionInfoProvider(c,{useDualstackEndpoint:l,useFipsEndpoint:d})||{},p=await e.useArnRegion(),{hostname:m,bucketEndpoint:E,signingRegion:b,signingService:A}=xD({bucketName:a,baseHostname:o.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:l,fipsEndpoint:d,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:o.protocol==="https:",useArnRegion:p,clientPartition:f,clientSigningRegion:h,clientRegion:c,isCustomEndpoint:e.isCustomEndpoint,disableMultiregionAccessPoints:await e.disableMultiregionAccessPoints()});b&&b!==h&&(r.signing_region=b),A&&A!=="s3"&&(r.signing_service=A),o.hostname=m,i=E}else{let a=await e.region(),c=await e.useDualstackEndpoint(),l=await e.useFipsEndpoint(),{hostname:d,bucketEndpoint:f}=xD({bucketName:s,clientRegion:a,baseHostname:o.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:c,fipsEndpoint:l,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:o.protocol==="https:",isCustomEndpoint:e.isCustomEndpoint});o.hostname=d,i=f}i&&(o.path=o.path.replace(/^(\/)?[^\/]+/,""),o.path===""&&(o.path="/"))}return t({...n,request:o})},R7={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},Xbe=e=>({applyToStack:t=>{t.addRelativeTo(T7(e),R7)}});function Ybe(e){let{bucketEndpoint:t=!1,forcePathStyle:r=!1,useAccelerateEndpoint:n=!1,useArnRegion:s,disableMultiregionAccessPoints:i=!1}=e;return Object.assign(e,{bucketEndpoint:t,forcePathStyle:r,useAccelerateEndpoint:n,useArnRegion:typeof s=="function"?s:()=>Promise.resolve(s),disableMultiregionAccessPoints:typeof i=="function"?i:()=>Promise.resolve(i)})}Cn.NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS=Tbe;Cn.NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME=m7;Cn.NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME=g7;Cn.NODE_USE_ARN_REGION_CONFIG_OPTIONS=Rbe;Cn.NODE_USE_ARN_REGION_ENV_NAME=y7;Cn.NODE_USE_ARN_REGION_INI_NAME=E7;Cn.bucketEndpointMiddleware=T7;Cn.bucketEndpointMiddlewareOptions=R7;Cn.bucketHostname=xD;Cn.getArnResources=I7;Cn.getBucketEndpointPlugin=Xbe;Cn.getSuffixForArnEndpoint=b7;Cn.resolveBucketEndpointConfig=Ybe;Cn.validateAccountId=x7;Cn.validateDNSHostLabel=xh;Cn.validateNoDualstack=Hbe;Cn.validateNoFIPS=w7;Cn.validateOutpostService=v7;Cn.validatePartition=A7;Cn.validateRegion=qbe});var B7=S(Ml=>{"use strict";var D7=$S(),td=UE(),Ih=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&P7(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&P7(t),parseInt(td.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function P7(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var q_=class{toUtf8;fromUtf8;constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let i of Object.keys(t)){let o=this.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let l=new Uint8Array(c.buffer);return l.set(a,3),l;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(Ih.fromNumber(t.value.valueOf()).bytes,1),d;case"uuid":if(!ove.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(td.fromHex(t.value.replace(/\-/g,"")),1),f}}parse(t){let r={},n=0;for(;n<t.byteLength;){let s=t.getUint8(n++),i=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,s));switch(n+=s,t.getUint8(n++)){case 0:r[i]={type:O7,value:!0};break;case 1:r[i]={type:O7,value:!1};break;case 2:r[i]={type:Qbe,value:t.getInt8(n++)};break;case 3:r[i]={type:Zbe,value:t.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:eve,value:t.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:tve,value:new Ih(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let o=t.getUint16(n,!1);n+=2,r[i]={type:rve,value:new Uint8Array(t.buffer,t.byteOffset+n,o)},n+=o;break;case 7:let a=t.getUint16(n,!1);n+=2,r[i]={type:nve,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:sve,value:new Date(new Ih(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[i]={type:ive,value:`${td.toHex(c.subarray(0,4))}-${td.toHex(c.subarray(4,6))}-${td.toHex(c.subarray(6,8))}-${td.toHex(c.subarray(8,10))}-${td.toHex(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},O7="boolean",Qbe="byte",Zbe="short",eve="integer",tve="long",rve="binary",nve="string",sve="timestamp",ive="uuid",ove=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,k7=4,Fl=k7*2,rd=4,ave=Fl+rd*2;function cve({byteLength:e,byteOffset:t,buffer:r}){if(e<ave)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),s=n.getUint32(0,!1);if(e!==s)throw new Error("Reported message length does not match received message length");let i=n.getUint32(k7,!1),o=n.getUint32(Fl,!1),a=n.getUint32(e-rd,!1),c=new D7.Crc32().update(new Uint8Array(r,t,Fl));if(o!==c.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+Fl,e-(Fl+rd))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Fl+rd,i),body:new Uint8Array(r,t+Fl+rd+i,s-i-(Fl+rd+rd))}}var wD=class{headerMarshaller;messageBuffer;isEndOfStream;constructor(t,r){this.headerMarshaller=new q_(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new D7.Crc32;return o.setUint32(0,s,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(t){let{headers:r,body:n}=cve(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}},TD=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}},RD=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}},ND=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}},PD=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};Ml.EventStreamCodec=wD;Ml.HeaderMarshaller=q_;Ml.Int64=Ih;Ml.MessageDecoderStream=TD;Ml.MessageEncoderStream=RD;Ml.SmithyMessageDecoderStream=ND;Ml.SmithyMessageEncoderStream=PD});var L7=S(OD=>{"use strict";var Dy=B7();function lve(e){let t=0,r=0,n=null,s=null,i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},o=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:c,done:l}=await a.next();if(l){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let d=c.length,f=0;for(;f<d;){if(!n){let p=d-f;s||(s=new Uint8Array(4));let m=Math.min(4-r,p);if(s.set(c.slice(f,f+m),r),r+=m,f+=m,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}let h=Math.min(t-r,d-f);n.set(c.slice(f,f+h),r),r+=h,f+=h,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function uve(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){let s=r.headers[":exception-type"].value,i={[s]:r},o=await e(i);if(o.$unknown){let a=new Error(t(r.body));throw a.name=s,a}throw o[s]}else if(n==="event"){let s={[r.headers[":event-type"].value]:r},i=await e(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var V_=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new Dy.EventStreamCodec(t,r),this.utfEncoder=t}deserialize(t,r){let n=lve(t);return new Dy.SmithyMessageDecoderStream({messageStream:new Dy.MessageDecoderStream({inputStream:n,decoder:this.eventStreamCodec}),deserializer:uve(r,this.utfEncoder)})}serialize(t,r){return new Dy.MessageEncoderStream({messageStream:new Dy.SmithyMessageEncoderStream({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},dve=e=>new V_(e);OD.EventStreamMarshaller=V_;OD.eventStreamSerdeProvider=dve});var F7=S(DD=>{"use strict";var fve=L7(),hve=require("stream");async function*pve(e){let t=!1,r=!1,n=new Array;for(e.on("error",s=>{if(t||(t=!0),s)throw s}),e.on("data",s=>{n.push(s)}),e.on("end",()=>{t=!0});!r;){let s=await new Promise(i=>setTimeout(()=>i(n.shift()),0));s&&(yield s),r=t&&n.length===0}}var H_=class{universalMarshaller;constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new fve.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:pve(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return hve.Readable.from(this.universalMarshaller.serialize(t,r))}},mve=e=>new H_(e);DD.EventStreamMarshaller=H_;DD.eventStreamSerdeProvider=mve});var M7=S(kD=>{"use strict";var gve=require("fs"),yve=Dn(),Eve=require("stream"),j_=class extends Eve.Writable{hash;constructor(t,r){super(r),this.hash=t}_write(t,r,n){try{this.hash.update(yve.toUint8Array(t))}catch(s){return n(s)}n()}},Sve=(e,t)=>new Promise((r,n)=>{if(!Cve(t)){n(new Error("Unable to calculate hash for non-file streams."));return}let s=gve.createReadStream(t.path,{start:t.start,end:t.end}),i=new e,o=new j_(i);s.pipe(o),s.on("error",a=>{o.end(),n(a)}),o.on("error",n),o.on("finish",function(){i.digest().then(r).catch(n)})}),Cve=e=>typeof e.path=="string",_ve=(e,t)=>{if(t.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new e,n=new j_(r);return t.pipe(n),new Promise((s,i)=>{t.on("error",o=>{n.end(),i(o)}),n.on("error",i),n.on("finish",()=>{r.digest().then(s).catch(i)})})};kD.fileStreamHasher=Sve;kD.readableStreamHasher=_ve});var j7=S(K_=>{"use strict";Object.defineProperty(K_,"__esModule",{value:!0});K_.getRuntimeConfig=void 0;var U7=(wn(),St(Yi)),bve=_C(),vve=Ct(),Ave=yl(),q7=ys(),V7=xu(),H7=Dn(),xve=tO(),Ive=eO(),wve=e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??q7.fromBase64,base64Encoder:e?.base64Encoder??q7.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ive.defaultEndpointResolver,extensions:e?.extensions??[],getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??V7.getAwsChunkedEncodingStream,httpAuthSchemeProvider:e?.httpAuthSchemeProvider??xve.defaultS3HttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new U7.AwsSdkSigV4Signer},{schemeId:"aws.auth#sigv4a",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4a"),signer:new U7.AwsSdkSigV4ASigner}],logger:e?.logger??new vve.NoOpLogger,sdkStreamMixin:e?.sdkStreamMixin??V7.sdkStreamMixin,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??bve.SignatureV4MultiRegion,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??Ave.parseUrl,useArnRegion:e?.useArnRegion??void 0,utf8Decoder:e?.utf8Decoder??H7.fromUtf8,utf8Encoder:e?.utf8Encoder??H7.toUtf8});K_.getRuntimeConfig=wve});var W7=S($_=>{"use strict";Object.defineProperty($_,"__esModule",{value:!0});$_.getRuntimeConfig=void 0;var Tve=(Sa(),St(Ea)),Rve=Tve.__importDefault(Fz()),BD=(wn(),St(Yi)),Nve=h7(),Pve=N7(),K7=V1(),Ove=oC(),z7=Gg(),z_=Ho(),Dve=F7(),LD=Wg(),kve=M7(),$7=Ic(),oo=Cl(),G7=Au(),Bve=Jg(),Lve=eh(),Fve=j7(),Mve=Ct(),Uve=Yg(),qve=Ct(),Vve=e=>{(0,qve.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Uve.resolveDefaultsModeConfig)(e),r=()=>t().then(Mve.loadConfigsForDefaultMode),n=(0,Fve.getRuntimeConfig)(e);(0,BD.emitWarningIfUnsupportedVersion)(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,oo.loadConfig)(BD.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:e?.bodyLengthChecker??Bve.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??Nve.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,z7.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Rve.default.version}),disableS3ExpressSessionAuth:e?.disableS3ExpressSessionAuth??(0,oo.loadConfig)(Ove.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS,s),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??Dve.eventStreamSerdeProvider,maxAttempts:e?.maxAttempts??(0,oo.loadConfig)($7.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),md5:e?.md5??LD.Hash.bind(null,"md5"),region:e?.region??(0,oo.loadConfig)(z_.NODE_REGION_CONFIG_OPTIONS,{...z_.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestChecksumCalculation:e?.requestChecksumCalculation??(0,oo.loadConfig)(K7.NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS,s),requestHandler:G7.NodeHttpHandler.create(e?.requestHandler??r),responseChecksumValidation:e?.responseChecksumValidation??(0,oo.loadConfig)(K7.NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS,s),retryMode:e?.retryMode??(0,oo.loadConfig)({...$7.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Lve.DEFAULT_RETRY_MODE},e),sha1:e?.sha1??LD.Hash.bind(null,"sha1"),sha256:e?.sha256??LD.Hash.bind(null,"sha256"),sigv4aSigningRegionSet:e?.sigv4aSigningRegionSet??(0,oo.loadConfig)(BD.NODE_SIGV4A_CONFIG_OPTIONS,s),streamCollector:e?.streamCollector??G7.streamCollector,streamHasher:e?.streamHasher??kve.readableStreamHasher,useArnRegion:e?.useArnRegion??(0,oo.loadConfig)(Pve.NODE_USE_ARN_REGION_CONFIG_OPTIONS,s),useDualstackEndpoint:e?.useDualstackEndpoint??(0,oo.loadConfig)(z_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,oo.loadConfig)(z_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,oo.loadConfig)(z7.NODE_APP_ID_CONFIG_OPTIONS,s)}};$_.getRuntimeConfig=Vve});var Q7=S(ky=>{"use strict";function J7(e){return t=>async r=>{let n={...r.input},s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let i of s){let o=n[i.target];if(o){let a;typeof o=="string"?Y7(o,e)?a=e.base64Decoder(o):(a=e.utf8Decoder(o),n[i.target]=e.base64Encoder(a)):(a=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o),n[i.target]=e.base64Encoder(a));let c=new e.md5;c.update(a),n[i.hash]=e.base64Encoder(await c.digest())}}return t({...r,input:n})}}var X7={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Hve=e=>({applyToStack:t=>{t.add(J7(e),X7)}});function Y7(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return t.base64Decoder(e).length===32}catch{return!1}}ky.getSsecPlugin=Hve;ky.isValidBase64EncodedSSECustomerKey=Y7;ky.ssecMiddleware=J7;ky.ssecMiddlewareOptions=X7});var tJ=S(G_=>{"use strict";function Z7(e){return t=>async r=>{let{CreateBucketConfiguration:n}=r.input,s=await e.region();return!n?.LocationConstraint&&!n?.Location&&s!=="us-east-1"&&(r.input.CreateBucketConfiguration=r.input.CreateBucketConfiguration??{},r.input.CreateBucketConfiguration.LocationConstraint=s),t(r)}}var eJ={step:"initialize",tags:["LOCATION_CONSTRAINT","CREATE_BUCKET_CONFIGURATION"],name:"locationConstraintMiddleware",override:!0},jve=e=>({applyToStack:t=>{t.add(Z7(e),eJ)}});G_.getLocationConstraintPlugin=jve;G_.locationConstraintMiddleware=Z7;G_.locationConstraintMiddlewareOptions=eJ});var iJ=S(ti=>{"use strict";var Kve=e=>new Promise(t=>setTimeout(t,e*1e3)),sJ={minDelay:2,maxDelay:120};ti.WaiterState=void 0;(function(e){e.ABORTED="ABORTED",e.FAILURE="FAILURE",e.SUCCESS="SUCCESS",e.RETRY="RETRY",e.TIMEOUT="TIMEOUT"})(ti.WaiterState||(ti.WaiterState={}));var zve=e=>{if(e.state===ti.WaiterState.ABORTED){let t=new Error(`${JSON.stringify({...e,reason:"Request was aborted"})}`);throw t.name="AbortError",t}else if(e.state===ti.WaiterState.TIMEOUT){let t=new Error(`${JSON.stringify({...e,reason:"Waiter has timed out"})}`);throw t.name="TimeoutError",t}else if(e.state!==ti.WaiterState.SUCCESS)throw new Error(`${JSON.stringify(e)}`);return e},$ve=(e,t,r,n)=>{if(n>r)return t;let s=e*2**(n-1);return Gve(e,s)},Gve=(e,t)=>e+Math.random()*(t-e),Wve=async({minDelay:e,maxDelay:t,maxWaitTime:r,abortController:n,client:s,abortSignal:i},o,a)=>{let c={},{state:l,reason:d}=await a(s,o);if(d){let m=rJ(d);c[m]|=0,c[m]+=1}if(l!==ti.WaiterState.RETRY)return{state:l,reason:d,observedResponses:c};let f=1,h=Date.now()+r*1e3,p=Math.log(t/e)/Math.log(2)+1;for(;;){if(n?.signal?.aborted||i?.aborted){let A="AbortController signal aborted.";return c[A]|=0,c[A]+=1,{state:ti.WaiterState.ABORTED,observedResponses:c}}let m=$ve(e,t,p,f);if(Date.now()+m*1e3>h)return{state:ti.WaiterState.TIMEOUT,observedResponses:c};await Kve(m);let{state:E,reason:b}=await a(s,o);if(b){let A=rJ(b);c[A]|=0,c[A]+=1}if(E!==ti.WaiterState.RETRY)return{state:E,reason:b,observedResponses:c};f+=1}},rJ=e=>e?.$responseBodyText?`Deserialization error for body: ${e.$responseBodyText}`:e?.$metadata?.httpStatusCode?e.$response||e.message?`${e.$response.statusCode??e.$metadata.httpStatusCode??"Unknown"}: ${e.message}`:`${e.$metadata.httpStatusCode}: OK`:String(e?.message??JSON.stringify(e)??"Unknown"),Jve=e=>{if(e.maxWaitTime<=0)throw new Error("WaiterConfiguration.maxWaitTime must be greater than 0");if(e.minDelay<=0)throw new Error("WaiterConfiguration.minDelay must be greater than 0");if(e.maxDelay<=0)throw new Error("WaiterConfiguration.maxDelay must be greater than 0");if(e.maxWaitTime<=e.minDelay)throw new Error(`WaiterConfiguration.maxWaitTime [${e.maxWaitTime}] must be greater than WaiterConfiguration.minDelay [${e.minDelay}] for this waiter`);if(e.maxDelay<e.minDelay)throw new Error(`WaiterConfiguration.maxDelay [${e.maxDelay}] must be greater than WaiterConfiguration.minDelay [${e.minDelay}] for this waiter`)},nJ=e=>{let t,r=new Promise(n=>{t=()=>n({state:ti.WaiterState.ABORTED}),typeof e.addEventListener=="function"?e.addEventListener("abort",t):e.onabort=t});return{clearListener(){typeof e.removeEventListener=="function"&&e.removeEventListener("abort",t)},aborted:r}},Xve=async(e,t,r)=>{let n={...sJ,...e};Jve(n);let s=[Wve(n,t,r)],i=[];if(e.abortSignal){let{aborted:o,clearListener:a}=nJ(e.abortSignal);i.push(a),s.push(o)}if(e.abortController?.signal){let{aborted:o,clearListener:a}=nJ(e.abortController.signal);i.push(a),s.push(o)}return Promise.race(s).then(o=>{for(let a of i)a();return o})};ti.checkExceptions=zve;ti.createWaiter=Xve;ti.waiterServiceDefaults=sJ});var dQ=S(I=>{"use strict";var Yve=lq(),cr=V1(),oJ=Tg(),Qve=Rg(),Zve=Ng(),we=oC(),aJ=Zf(),eAe=Ho(),ee=(Ys(),St(Du)),tAe=f8(),rAe=Dg(),re=Aa(),cJ=Ic(),u=Ct(),lJ=tO(),ne=nl(),We=(wn(),St(Yi)),w=bg(),gk=Xt(),nAe=nS(),sAe=W7(),uJ=Zg(),Wo=Q7(),iAe=tJ(),ln=iJ(),oAe=e=>Object.assign(e,{useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),se={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},ns=class e extends u.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},aAe={requester:"requester"},cAe={requester:"requester"},Bb=class e extends ns{name="NoSuchUpload";$fault="client";constructor(t){super({name:"NoSuchUpload",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},lAe={Enabled:"Enabled",Suspended:"Suspended"},uAe={AmazonCustomerByEmail:"AmazonCustomerByEmail",CanonicalUser:"CanonicalUser",Group:"Group"},dAe={FULL_CONTROL:"FULL_CONTROL",READ:"READ",READ_ACP:"READ_ACP",WRITE:"WRITE",WRITE_ACP:"WRITE_ACP"},fAe={Destination:"Destination"},hAe={COMPOSITE:"COMPOSITE",FULL_OBJECT:"FULL_OBJECT"},pAe={AES256:"AES256",aws_fsx:"aws:fsx",aws_kms:"aws:kms",aws_kms_dsse:"aws:kms:dsse"},mAe={authenticated_read:"authenticated-read",aws_exec_read:"aws-exec-read",bucket_owner_full_control:"bucket-owner-full-control",bucket_owner_read:"bucket-owner-read",private:"private",public_read:"public-read",public_read_write:"public-read-write"},gAe={CRC32:"CRC32",CRC32C:"CRC32C",CRC64NVME:"CRC64NVME",SHA1:"SHA1",SHA256:"SHA256"},yAe={COPY:"COPY",REPLACE:"REPLACE"},EAe={OFF:"OFF",ON:"ON"},SAe={COMPLIANCE:"COMPLIANCE",GOVERNANCE:"GOVERNANCE"},CAe={DEEP_ARCHIVE:"DEEP_ARCHIVE",EXPRESS_ONEZONE:"EXPRESS_ONEZONE",FSX_OPENZFS:"FSX_OPENZFS",GLACIER:"GLACIER",GLACIER_IR:"GLACIER_IR",INTELLIGENT_TIERING:"INTELLIGENT_TIERING",ONEZONE_IA:"ONEZONE_IA",OUTPOSTS:"OUTPOSTS",REDUCED_REDUNDANCY:"REDUCED_REDUNDANCY",SNOW:"SNOW",STANDARD:"STANDARD",STANDARD_IA:"STANDARD_IA"},_Ae={COPY:"COPY",REPLACE:"REPLACE"},Lb=class e extends ns{name="ObjectNotInActiveTierError";$fault="client";constructor(t){super({name:"ObjectNotInActiveTierError",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fb=class e extends ns{name="BucketAlreadyExists";$fault="client";constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Mb=class e extends ns{name="BucketAlreadyOwnedByYou";$fault="client";constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},bAe={authenticated_read:"authenticated-read",private:"private",public_read:"public-read",public_read_write:"public-read-write"},vAe={SingleAvailabilityZone:"SingleAvailabilityZone",SingleLocalZone:"SingleLocalZone"},AAe={Directory:"Directory"},xAe={AvailabilityZone:"AvailabilityZone",LocalZone:"LocalZone"},IAe={EU:"EU",af_south_1:"af-south-1",ap_east_1:"ap-east-1",ap_northeast_1:"ap-northeast-1",ap_northeast_2:"ap-northeast-2",ap_northeast_3:"ap-northeast-3",ap_south_1:"ap-south-1",ap_south_2:"ap-south-2",ap_southeast_1:"ap-southeast-1",ap_southeast_2:"ap-southeast-2",ap_southeast_3:"ap-southeast-3",ap_southeast_4:"ap-southeast-4",ap_southeast_5:"ap-southeast-5",ca_central_1:"ca-central-1",cn_north_1:"cn-north-1",cn_northwest_1:"cn-northwest-1",eu_central_1:"eu-central-1",eu_central_2:"eu-central-2",eu_north_1:"eu-north-1",eu_south_1:"eu-south-1",eu_south_2:"eu-south-2",eu_west_1:"eu-west-1",eu_west_2:"eu-west-2",eu_west_3:"eu-west-3",il_central_1:"il-central-1",me_central_1:"me-central-1",me_south_1:"me-south-1",sa_east_1:"sa-east-1",us_east_2:"us-east-2",us_gov_east_1:"us-gov-east-1",us_gov_west_1:"us-gov-west-1",us_west_1:"us-west-1",us_west_2:"us-west-2"},wAe={BucketOwnerEnforced:"BucketOwnerEnforced",BucketOwnerPreferred:"BucketOwnerPreferred",ObjectWriter:"ObjectWriter"},TAe={DISABLED:"DISABLED",ENABLED:"ENABLED"},RAe={AES256:"AES256",aws_kms:"aws:kms"},NAe={DISABLED:"DISABLED",ENABLED:"ENABLED"},PAe={ReadOnly:"ReadOnly",ReadWrite:"ReadWrite"},Ub=class e extends ns{name="NoSuchBucket";$fault="client";constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};I.AnalyticsFilter=void 0;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(I.AnalyticsFilter||(I.AnalyticsFilter={}));var OAe={CSV:"CSV"},DAe={V_1:"V_1"},kAe={Disabled:"Disabled",Enabled:"Enabled"},BAe={ARCHIVE_ACCESS:"ARCHIVE_ACCESS",DEEP_ARCHIVE_ACCESS:"DEEP_ARCHIVE_ACCESS"},LAe={CSV:"CSV",ORC:"ORC",Parquet:"Parquet"},FAe={All:"All",Current:"Current"},MAe={BucketKeyStatus:"BucketKeyStatus",ChecksumAlgorithm:"ChecksumAlgorithm",ETag:"ETag",EncryptionStatus:"EncryptionStatus",IntelligentTieringAccessTier:"IntelligentTieringAccessTier",IsMultipartUploaded:"IsMultipartUploaded",LastModifiedDate:"LastModifiedDate",ObjectAccessControlList:"ObjectAccessControlList",ObjectLockLegalHoldStatus:"ObjectLockLegalHoldStatus",ObjectLockMode:"ObjectLockMode",ObjectLockRetainUntilDate:"ObjectLockRetainUntilDate",ObjectOwner:"ObjectOwner",ReplicationStatus:"ReplicationStatus",Size:"Size",StorageClass:"StorageClass"},UAe={Daily:"Daily",Weekly:"Weekly"},qAe={DEEP_ARCHIVE:"DEEP_ARCHIVE",GLACIER:"GLACIER",GLACIER_IR:"GLACIER_IR",INTELLIGENT_TIERING:"INTELLIGENT_TIERING",ONEZONE_IA:"ONEZONE_IA",STANDARD_IA:"STANDARD_IA"},VAe={Disabled:"Disabled",Enabled:"Enabled"},HAe={all_storage_classes_128K:"all_storage_classes_128K",varies_by_storage_class:"varies_by_storage_class"},jAe={FULL_CONTROL:"FULL_CONTROL",READ:"READ",WRITE:"WRITE"},KAe={DeliveryTime:"DeliveryTime",EventTime:"EventTime"},zAe={aws:"aws",customer:"customer"};I.MetricsFilter=void 0;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(I.MetricsFilter||(I.MetricsFilter={}));var $Ae={s3_IntelligentTiering:"s3:IntelligentTiering",s3_LifecycleExpiration_:"s3:LifecycleExpiration:*",s3_LifecycleExpiration_Delete:"s3:LifecycleExpiration:Delete",s3_LifecycleExpiration_DeleteMarkerCreated:"s3:LifecycleExpiration:DeleteMarkerCreated",s3_LifecycleTransition:"s3:LifecycleTransition",s3_ObjectAcl_Put:"s3:ObjectAcl:Put",s3_ObjectCreated_:"s3:ObjectCreated:*",s3_ObjectCreated_CompleteMultipartUpload:"s3:ObjectCreated:CompleteMultipartUpload",s3_ObjectCreated_Copy:"s3:ObjectCreated:Copy",s3_ObjectCreated_Post:"s3:ObjectCreated:Post",s3_ObjectCreated_Put:"s3:ObjectCreated:Put",s3_ObjectRemoved_:"s3:ObjectRemoved:*",s3_ObjectRemoved_Delete:"s3:ObjectRemoved:Delete",s3_ObjectRemoved_DeleteMarkerCreated:"s3:ObjectRemoved:DeleteMarkerCreated",s3_ObjectRestore_:"s3:ObjectRestore:*",s3_ObjectRestore_Completed:"s3:ObjectRestore:Completed",s3_ObjectRestore_Delete:"s3:ObjectRestore:Delete",s3_ObjectRestore_Post:"s3:ObjectRestore:Post",s3_ObjectTagging_:"s3:ObjectTagging:*",s3_ObjectTagging_Delete:"s3:ObjectTagging:Delete",s3_ObjectTagging_Put:"s3:ObjectTagging:Put",s3_ReducedRedundancyLostObject:"s3:ReducedRedundancyLostObject",s3_Replication_:"s3:Replication:*",s3_Replication_OperationFailedReplication:"s3:Replication:OperationFailedReplication",s3_Replication_OperationMissedThreshold:"s3:Replication:OperationMissedThreshold",s3_Replication_OperationNotTracked:"s3:Replication:OperationNotTracked",s3_Replication_OperationReplicatedAfterThreshold:"s3:Replication:OperationReplicatedAfterThreshold"},GAe={prefix:"prefix",suffix:"suffix"},WAe={Disabled:"Disabled",Enabled:"Enabled"},JAe={Disabled:"Disabled",Enabled:"Enabled"},XAe={Disabled:"Disabled",Enabled:"Enabled"},YAe={Disabled:"Disabled",Enabled:"Enabled"},QAe={Disabled:"Disabled",Enabled:"Enabled"},ZAe={Disabled:"Disabled",Enabled:"Enabled"},exe={Disabled:"Disabled",Enabled:"Enabled"},txe={BucketOwner:"BucketOwner",Requester:"Requester"},rxe={Disabled:"Disabled",Enabled:"Enabled"},nxe={Enabled:"Enabled",Suspended:"Suspended"},sxe={http:"http",https:"https"},ixe={COMPLETE:"COMPLETE",COMPLETED:"COMPLETED",FAILED:"FAILED",PENDING:"PENDING",REPLICA:"REPLICA"},oxe={ENABLED:"ENABLED"},qb=class e extends ns{name="InvalidObjectState";$fault="client";StorageClass;AccessTier;constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}},Vb=class e extends ns{name="NoSuchKey";$fault="client";constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},axe={CHECKSUM:"Checksum",ETAG:"ETag",OBJECT_PARTS:"ObjectParts",OBJECT_SIZE:"ObjectSize",STORAGE_CLASS:"StorageClass"},cxe={Enabled:"Enabled"},lxe={COMPLIANCE:"COMPLIANCE",GOVERNANCE:"GOVERNANCE"},Hb=class e extends ns{name="NotFound";$fault="client";constructor(t){super({name:"NotFound",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},uxe={ARCHIVE_ACCESS:"ARCHIVE_ACCESS",DEEP_ARCHIVE_ACCESS:"DEEP_ARCHIVE_ACCESS"},dxe={url:"url"},UJ=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING}}),qJ=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING}}),VJ=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:u.SENSITIVE_STRING}}),HJ=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING},...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:u.SENSITIVE_STRING},...e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:u.SENSITIVE_STRING}}),jJ=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:u.SENSITIVE_STRING}}),KJ=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING},...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:u.SENSITIVE_STRING}}),zJ=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:u.SENSITIVE_STRING},...e.SessionToken&&{SessionToken:u.SENSITIVE_STRING}}),$J=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:u.SENSITIVE_STRING},...e.Credentials&&{Credentials:zJ(e.Credentials)}}),GJ=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:u.SENSITIVE_STRING}}),WJ=e=>({...e,...e.KMSMasterKeyID&&{KMSMasterKeyID:u.SENSITIVE_STRING}}),JJ=e=>({...e,...e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:WJ(e.ApplyServerSideEncryptionByDefault)}}),Qk=e=>({...e,...e.Rules&&{Rules:e.Rules.map(t=>JJ(t))}}),XJ=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Qk(e.ServerSideEncryptionConfiguration)}}),YJ=e=>({...e,...e.KeyId&&{KeyId:u.SENSITIVE_STRING}}),QJ=e=>({...e,...e.SSEKMS&&{SSEKMS:YJ(e.SSEKMS)}}),ZJ=e=>({...e,...e.Encryption&&{Encryption:QJ(e.Encryption)}}),eX=e=>({...e,...e.S3BucketDestination&&{S3BucketDestination:ZJ(e.S3BucketDestination)}}),ZA=e=>({...e,...e.Destination&&{Destination:eX(e.Destination)}}),tX=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:ZA(e.InventoryConfiguration)}}),rX=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING}}),nX=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING}}),sX=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING}}),iX=e=>({...e}),oX=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING}}),aX=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING}}),cX=e=>({...e,...e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map(t=>ZA(t))}}),fxe={DEEP_ARCHIVE:"DEEP_ARCHIVE",EXPRESS_ONEZONE:"EXPRESS_ONEZONE",FSX_OPENZFS:"FSX_OPENZFS",GLACIER:"GLACIER",GLACIER_IR:"GLACIER_IR",INTELLIGENT_TIERING:"INTELLIGENT_TIERING",ONEZONE_IA:"ONEZONE_IA",OUTPOSTS:"OUTPOSTS",REDUCED_REDUNDANCY:"REDUCED_REDUNDANCY",SNOW:"SNOW",STANDARD:"STANDARD",STANDARD_IA:"STANDARD_IA"},hxe={RESTORE_STATUS:"RestoreStatus"},pxe={STANDARD:"STANDARD"},mxe={Disabled:"Disabled",Enabled:"Enabled"},jb=class e extends ns{name="EncryptionTypeMismatch";$fault="client";constructor(t){super({name:"EncryptionTypeMismatch",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kb=class e extends ns{name="InvalidRequest";$fault="client";constructor(t){super({name:"InvalidRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},zb=class e extends ns{name="InvalidWriteOffset";$fault="client";constructor(t){super({name:"InvalidWriteOffset",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},$b=class e extends ns{name="TooManyParts";$fault="client";constructor(t){super({name:"TooManyParts",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Gb=class e extends ns{name="IdempotencyParameterMismatch";$fault="client";constructor(t){super({name:"IdempotencyParameterMismatch",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wb=class e extends ns{name="ObjectAlreadyInActiveTierError";$fault="client";constructor(t){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},gxe={Bulk:"Bulk",Expedited:"Expedited",Standard:"Standard"},yxe={SQL:"SQL"},Exe={BZIP2:"BZIP2",GZIP:"GZIP",NONE:"NONE"},Sxe={IGNORE:"IGNORE",NONE:"NONE",USE:"USE"},Cxe={DOCUMENT:"DOCUMENT",LINES:"LINES"},_xe={ALWAYS:"ALWAYS",ASNEEDED:"ASNEEDED"},bxe={SELECT:"SELECT"};I.SelectObjectContentEventStream=void 0;(function(e){e.visit=(t,r)=>t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])})(I.SelectObjectContentEventStream||(I.SelectObjectContentEventStream={}));var lX=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING}}),uX=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Qk(e.ServerSideEncryptionConfiguration)}}),dX=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:ZA(e.InventoryConfiguration)}}),fX=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:u.SENSITIVE_STRING}}),hX=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING},...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:u.SENSITIVE_STRING}}),pX=e=>({...e,...e.KMSKeyId&&{KMSKeyId:u.SENSITIVE_STRING}}),mX=e=>({...e,...e.Encryption&&{Encryption:pX(e.Encryption)}}),gX=e=>({...e,...e.S3&&{S3:mX(e.S3)}}),yX=e=>({...e,...e.OutputLocation&&{OutputLocation:gX(e.OutputLocation)}}),EX=e=>({...e,...e.RestoreRequest&&{RestoreRequest:yX(e.RestoreRequest)}}),vxe=e=>{if(e.Records!==void 0)return{Records:e.Records};if(e.Stats!==void 0)return{Stats:e.Stats};if(e.Progress!==void 0)return{Progress:e.Progress};if(e.Cont!==void 0)return{Cont:e.Cont};if(e.End!==void 0)return{End:e.End};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},SX=e=>({...e,...e.Payload&&{Payload:"STREAMING_CONTENT"}}),CX=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING}}),_X=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING}}),bX=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING}}),vX=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING}}),AX=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:u.SENSITIVE_STRING},...e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:u.SENSITIVE_STRING}}),xX=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:u.SENSITIVE_STRING}}),Axe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ur]:e[lr],[ue]:e[le],[ALe]:[()=>u.isSerializableHeaderValue(e[SJ]),()=>u.dateToUtcString(e[SJ]).toString()]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[os]:[,"AbortMultipartUpload"],[e0]:[,u.expectNonNull(e[vi],"UploadId")]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},xxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[zd]:e[Cr],[$d]:e[_r],[Gd]:e[br],[Wd]:e[vr],[Jd]:e[Ar],[Np]:e[xr],[TLe]:[()=>u.isSerializableHeaderValue(e[AJ]),()=>e[AJ].toString()],[ur]:e[lr],[ue]:e[le],[wp]:e[zy],[Qy]:e[rx],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[e0]:[,u.expectNonNull(e[vi],"UploadId")]}),i,o;return e.MultipartUpload!==void 0&&(o=YRe(e.MultipartUpload),o=o.n("CompleteMultipartUpload"),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("POST").h(n).q(s).b(i),r.build()},Ixe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((o,a)=>(o[`x-amz-meta-${a.toLowerCase()}`]=e.Metadata[a],o),{}),[Rp]:e[gp],[Gy]:e[yp],[NB]:e[st],[Wy]:e[Ep],[Jy]:e[Sp],[Xy]:e[Cp],[Yy]:e[_p],[JY]:e[WX],[XY]:e[JX],[YY]:[()=>u.isSerializableHeaderValue(e[Jb]),()=>u.dateToUtcString(e[Jb]).toString()],[QY]:e[XX],[ZY]:[()=>u.isSerializableHeaderValue(e[Xb]),()=>u.dateToUtcString(e[Xb]).toString()],[Ud]:[()=>u.isSerializableHeaderValue(e[Fa]),()=>u.dateToUtcString(e[Fa]).toString()],[Pp]:e[bp],[Op]:e[vp],[Dp]:e[Ap],[kp]:e[xp],[wLe]:e[tBe],[HLe]:e[r2e],[Hi]:e[Hs],[s0]:e[ut],[i0]:e[$y],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[ji]:e[bs],[Jl]:e[Wl],[un]:[()=>u.isSerializableHeaderValue(e[Nr]),()=>e[Nr].toString()],[eQ]:e[YX],[tQ]:e[QX],[rQ]:e[ZX],[ur]:e[lr],[kB]:e[Bd],[n0]:e[Ip],[qd]:[()=>u.isSerializableHeaderValue(e[Ma]),()=>u.serializeDateTime(e[Ma]).toString()],[r0]:e[jd],[ue]:e[le],[oQ]:e[rY]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[os]:[,"CopyObject"]});return r.m("PUT").h(n).q(s).b(void 0),r.build()},wxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[Rp]:e[gp],[Pp]:e[bp],[Op]:e[vp],[Dp]:e[Ap],[PB]:e[cB],[kp]:e[xp],[L2e]:[()=>u.isSerializableHeaderValue(e[IJ]),()=>e[IJ].toString()],[PLe]:e[Fy]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s,i;return e.CreateBucketConfiguration!==void 0&&(i=sNe(e.CreateBucketConfiguration),s=Qt,i.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=i.toString()),r.m("PUT").h(n).b(s),r.build()},Txe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[_B]:[,""]}),i,o;return e.MetadataConfiguration!==void 0&&(o=GNe(e.MetadataConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("POST").h(n).q(s).b(i),r.build()},Rxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[bB]:[,""]}),i,o;return e.MetadataTableConfiguration!==void 0&&(o=JNe(e.MetadataTableConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("POST").h(n).q(s).b(i),r.build()},Nxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((o,a)=>(o[`x-amz-meta-${a.toLowerCase()}`]=e.Metadata[a],o),{}),[Rp]:e[gp],[Gy]:e[yp],[Wy]:e[Ep],[Jy]:e[Sp],[Xy]:e[Cp],[Yy]:e[_p],[Ud]:[()=>u.isSerializableHeaderValue(e[Fa]),()=>u.dateToUtcString(e[Fa]).toString()],[Pp]:e[bp],[Op]:e[vp],[Dp]:e[Ap],[kp]:e[xp],[Hi]:e[Hs],[s0]:e[ut],[i0]:e[$y],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[ji]:e[bs],[Jl]:e[Wl],[un]:[()=>u.isSerializableHeaderValue(e[Nr]),()=>e[Nr].toString()],[ur]:e[lr],[kB]:e[Bd],[n0]:e[Ip],[qd]:[()=>u.isSerializableHeaderValue(e[Ma]),()=>u.serializeDateTime(e[Ma]).toString()],[r0]:e[jd],[ue]:e[le],[NB]:e[st],[Np]:e[xr]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[jY]:[,""]});return r.m("POST").h(n).q(s).b(void 0),r.build()},Pxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[U2e]:e[JBe],[Hi]:e[Hs],[ji]:e[bs],[Jl]:e[Wl],[un]:[()=>u.isSerializableHeaderValue(e[Nr]),()=>e[Nr].toString()]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[x2e]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},Oxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});return r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.m("DELETE").h(n).b(void 0),r.build()},Dxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[nx]:[,""],[Eo]:[,u.expectNonNull(e[Ke],"Id")]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},kxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[gB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Bxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[yB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Lxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[lx]:[,""],[Eo]:[,u.expectNonNull(e[Ke],"Id")]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Fxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[cx]:[,""],[Eo]:[,u.expectNonNull(e[Ke],"Id")]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Mxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[CB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Uxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[_B]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},qxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[bB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Vxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[ux]:[,""],[Eo]:[,u.expectNonNull(e[Ke],"Id")]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Hxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[AB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},jxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[xB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Kxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[wB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},zxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[Tp]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},$xe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[TB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Gxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[OB]:e[lB],[ur]:e[lr],[RB]:[()=>u.isSerializableHeaderValue(e[cp]),()=>e[cp].toString()],[ue]:e[le],[wp]:e[zy],[xLe]:[()=>u.isSerializableHeaderValue(e[CJ]),()=>u.dateToUtcString(e[CJ]).toString()],[ILe]:[()=>u.isSerializableHeaderValue(e[_J]),()=>e[_J].toString()]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[os]:[,"DeleteObject"],[Ai]:[,e[pt]]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Wxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[OB]:e[lB],[ur]:e[lr],[RB]:[()=>u.isSerializableHeaderValue(e[cp]),()=>e[cp].toString()],[ue]:e[le],[Ir]:e[st]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[d2e]:[,""]}),i,o;return e.Delete!==void 0&&(o=cNe(e.Delete),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("POST").h(n).q(s).b(i),r.build()},Jxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[Tp]:[,""],[Ai]:[,e[pt]]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Xxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[IB]:[,""]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},Yxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le],[ur]:e[lr]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[AY]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},Qxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[sx]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},Zxe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[nx]:[,""],[os]:[,"GetBucketAnalyticsConfiguration"],[Eo]:[,u.expectNonNull(e[Ke],"Id")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},eIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[gB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},tIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[yB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},rIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[lx]:[,""],[os]:[,"GetBucketIntelligentTieringConfiguration"],[Eo]:[,u.expectNonNull(e[Ke],"Id")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},nIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[cx]:[,""],[os]:[,"GetBucketInventoryConfiguration"],[Eo]:[,u.expectNonNull(e[Ke],"Id")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},sIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[CB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},iIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[NY]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},oIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[PY]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},aIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[_B]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},cIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[bB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},lIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[ux]:[,""],[os]:[,"GetBucketMetricsConfiguration"],[Eo]:[,u.expectNonNull(e[Ke],"Id")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},uIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[OY]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},dIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[AB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},fIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[xB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},hIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[_2e]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},pIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[wB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},mIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[kY]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},gIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[Tp]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},yIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[KY]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},EIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[TB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},SIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[wp]:e[zy],[EB]:[()=>u.isSerializableHeaderValue(e[Yb]),()=>u.dateToUtcString(e[Yb]).toString()],[Qy]:e[rx],[SB]:[()=>u.isSerializableHeaderValue(e[Qb]),()=>u.dateToUtcString(e[Qb]).toString()],[BY]:e[hY],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[ur]:e[lr],[ue]:e[le],[WY]:e[GX]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[os]:[,"GetObject"],[LY]:[,e[pY]],[FY]:[,e[mY]],[MY]:[,e[gY]],[UY]:[,e[yY]],[qY]:[,e[EY]],[VY]:[()=>e.ResponseExpires!==void 0,()=>u.dateToUtcString(e[SY]).toString()],[Ai]:[,e[pt]],[dx]:[()=>e.PartNumber!==void 0,()=>e[Ci].toString()]});return r.m("GET").h(n).q(s).b(void 0),r.build()},CIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ur]:e[lr],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[sx]:[,""],[Ai]:[,e[pt]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},_Ie=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[RLe]:[()=>u.isSerializableHeaderValue(e[Bc]),()=>e[Bc].toString()],[OLe]:e[Hl],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[ur]:e[lr],[ue]:e[le],[NLe]:[()=>u.isSerializableHeaderValue(e[xJ]),()=>(e[xJ]||[]).map(u.quoteHeader).join(", ")]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[l2e]:[,""],[Ai]:[,e[pt]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},bIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ur]:e[lr],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[RY]:[,""],[Ai]:[,e[pt]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},vIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[DY]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},AIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ur]:e[lr],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[HY]:[,""],[Ai]:[,e[pt]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},xIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le],[ur]:e[lr]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[Tp]:[,""],[Ai]:[,e[pt]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},IIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ur]:e[lr],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[R2e]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},wIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[IB]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},TIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});return r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.m("HEAD").h(n).b(void 0),r.build()},RIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[wp]:e[zy],[EB]:[()=>u.isSerializableHeaderValue(e[Yb]),()=>u.dateToUtcString(e[Yb]).toString()],[Qy]:e[rx],[SB]:[()=>u.isSerializableHeaderValue(e[Qb]),()=>u.dateToUtcString(e[Qb]).toString()],[BY]:e[hY],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[ur]:e[lr],[ue]:e[le],[WY]:e[GX]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[LY]:[,e[pY]],[FY]:[,e[mY]],[MY]:[,e[gY]],[UY]:[,e[yY]],[qY]:[,e[EY]],[VY]:[()=>e.ResponseExpires!==void 0,()=>u.dateToUtcString(e[SY]).toString()],[Ai]:[,e[pt]],[dx]:[()=>e.PartNumber!==void 0,()=>e[Ci].toString()]});return r.m("HEAD").h(n).q(s).b(void 0),r.build()},NIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[nx]:[,""],[os]:[,"ListBucketAnalyticsConfigurations"],[Kd]:[,e[pr]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},PIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[lx]:[,""],[os]:[,"ListBucketIntelligentTieringConfigurations"],[Kd]:[,e[pr]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},OIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[cx]:[,""],[os]:[,"ListBucketInventoryConfigurations"],[Kd]:[,e[pr]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},DIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[ux]:[,""],[os]:[,"ListBucketMetricsConfigurations"],[Kd]:[,e[pr]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},kIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n={};r.bp("/");let s=u.map({[os]:[,"ListBuckets"],[y2e]:[()=>e.MaxBuckets!==void 0,()=>e[Zke].toString()],[Kd]:[,e[pr]],[Zy]:[,e[pe]],[u2e]:[,e[Ly]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},BIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n={};r.bp("/");let s=u.map({[os]:[,"ListDirectoryBuckets"],[Kd]:[,e[pr]],[E2e]:[()=>e.MaxDirectoryBuckets!==void 0,()=>e[rBe].toString()]});return r.m("GET").h(n).q(s).b(void 0),r.build()},LIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le],[ur]:e[lr]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[jY]:[,""],[ix]:[,e[Ms]],[ox]:[,e[qs]],[TY]:[,e[Vl]],[C2e]:[()=>e.MaxUploads!==void 0,()=>e[hb].toString()],[Zy]:[,e[pe]],[N2e]:[,e[Ob]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},FIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ur]:e[lr],[ue]:e[le],[DB]:[()=>u.isSerializableHeaderValue(e[lp]),()=>(e[lp]||[]).map(u.quoteHeader).join(", ")]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[ix]:[,e[Ms]],[ox]:[,e[qs]],[g2e]:[,e[db]],[vB]:[()=>e.MaxKeys!==void 0,()=>e[co].toString()],[Zy]:[,e[pe]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},MIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ur]:e[lr],[ue]:e[le],[DB]:[()=>u.isSerializableHeaderValue(e[lp]),()=>(e[lp]||[]).map(u.quoteHeader).join(", ")]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[h2e]:[,"2"],[ix]:[,e[Ms]],[ox]:[,e[qs]],[vB]:[()=>e.MaxKeys!==void 0,()=>e[co].toString()],[Zy]:[,e[pe]],[Kd]:[,e[pr]],[f2e]:[()=>e.FetchOwner!==void 0,()=>e[yke].toString()],[I2e]:[,e[Ab]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},UIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ue]:e[le],[ur]:e[lr],[DB]:[()=>u.isSerializableHeaderValue(e[lp]),()=>(e[lp]||[]).map(u.quoteHeader).join(", ")]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[P2e]:[,""],[ix]:[,e[Ms]],[ox]:[,e[qs]],[TY]:[,e[Vl]],[vB]:[()=>e.MaxKeys!==void 0,()=>e[co].toString()],[Zy]:[,e[pe]],[O2e]:[,e[kb]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},qIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[ur]:e[lr],[ue]:e[le],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[os]:[,"ListParts"],[S2e]:[()=>e.MaxParts!==void 0,()=>e[Bc].toString()],[b2e]:[,e[Hl]],[e0]:[,u.expectNonNull(e[vi],"UploadId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},VIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ue]:e[le],[Ir]:e[st]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[AY]:[,""]}),i,o;return e.AccelerateConfiguration!==void 0&&(o=MRe(e.AccelerateConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},HIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[Rp]:e[gp],[nn]:e[rn],[Ir]:e[st],[Pp]:e[bp],[Op]:e[vp],[Dp]:e[Ap],[PB]:e[cB],[kp]:e[xp],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[sx]:[,""]}),i,o;return e.AccessControlPolicy!==void 0&&(o=IX(e.AccessControlPolicy),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},jIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[nx]:[,""],[Eo]:[,u.expectNonNull(e[Ke],"Id")]}),i,o;return e.AnalyticsConfiguration!==void 0&&(o=KRe(e.AnalyticsConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},KIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[gB]:[,""]}),i,o;return e.CORSConfiguration!==void 0&&(o=tNe(e.CORSConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},zIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[yB]:[,""]}),i,o;return e.ServerSideEncryptionConfiguration!==void 0&&(o=q1e(e.ServerSideEncryptionConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},$Ie=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[lx]:[,""],[Eo]:[,u.expectNonNull(e[Ke],"Id")]}),i,o;return e.IntelligentTieringConfiguration!==void 0&&(o=vNe(e.IntelligentTieringConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},GIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[cx]:[,""],[Eo]:[,u.expectNonNull(e[Ke],"Id")]}),i,o;return e.InventoryConfiguration!==void 0&&(o=xNe(e.InventoryConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},WIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[Ir]:e[st],[ue]:e[le],[BB]:e[mB]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[CB]:[,""]}),i,o;return e.LifecycleConfiguration!==void 0&&(o=JRe(e.LifecycleConfiguration),o=o.n("LifecycleConfiguration"),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},JIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[PY]:[,""]}),i,o;return e.BucketLoggingStatus!==void 0&&(o=XRe(e.BucketLoggingStatus),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},XIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[ux]:[,""],[Eo]:[,u.expectNonNull(e[Ke],"Id")]}),i,o;return e.MetricsConfiguration!==void 0&&(o=QNe(e.MetricsConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},YIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ue]:e[le],[VLe]:[()=>u.isSerializableHeaderValue(e[TJ]),()=>e[TJ].toString()]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[OY]:[,""]}),i,o;return e.NotificationConfiguration!==void 0&&(o=n1e(e.NotificationConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},QIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[ue]:e[le],[Ir]:e[st]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[AB]:[,""]}),i,o;return e.OwnershipControls!==void 0&&(o=f1e(e.OwnershipControls),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},ZIe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"text/plain",[nn]:e[rn],[Ir]:e[st],[M2e]:[()=>u.isSerializableHeaderValue(e[hJ]),()=>e[hJ].toString()],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[xB]:[,""]}),i,o;return e.Policy!==void 0&&(o=e.Policy,i=o),r.m("PUT").h(n).q(s).b(i),r.build()},ewe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[GY]:e[bY],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[wB]:[,""]}),i,o;return e.ReplicationConfiguration!==void 0&&(o=v1e(e.ReplicationConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},twe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[kY]:[,""]}),i,o;return e.RequestPaymentConfiguration!==void 0&&(o=R1e(e.RequestPaymentConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},rwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[Tp]:[,""]}),i,o;return e.Tagging!==void 0&&(o=rB(e.Tagging),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},nwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[OB]:e[lB],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[KY]:[,""]}),i,o;return e.VersioningConfiguration!==void 0&&(o=oPe(e.VersioningConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},swe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[TB]:[,""]}),i,o;return e.WebsiteConfiguration!==void 0&&(o=aPe(e.WebsiteConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},iwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((a,c)=>(a[`x-amz-meta-${c.toLowerCase()}`]=e.Metadata[c],a),{}),[Yy]:e[_p]||"application/octet-stream",[Rp]:e[gp],[Gy]:e[yp],[Wy]:e[Ep],[Jy]:e[Sp],[Xy]:e[Cp],[Md]:[()=>u.isSerializableHeaderValue(e[Kl]),()=>e[Kl].toString()],[nn]:e[rn],[Ir]:e[st],[zd]:e[Cr],[$d]:e[_r],[Gd]:e[br],[Wd]:e[vr],[Jd]:e[Ar],[Ud]:[()=>u.isSerializableHeaderValue(e[Fa]),()=>u.dateToUtcString(e[Fa]).toString()],[wp]:e[zy],[Qy]:e[rx],[Pp]:e[bp],[Op]:e[vp],[Dp]:e[Ap],[kp]:e[xp],[jLe]:[()=>u.isSerializableHeaderValue(e[BJ]),()=>e[BJ].toString()],[Hi]:e[Hs],[s0]:e[ut],[i0]:e[$y],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[ji]:e[bs],[Jl]:e[Wl],[un]:[()=>u.isSerializableHeaderValue(e[Nr]),()=>e[Nr].toString()],[ur]:e[lr],[kB]:e[Bd],[n0]:e[Ip],[qd]:[()=>u.isSerializableHeaderValue(e[Ma]),()=>u.serializeDateTime(e[Ma]).toString()],[r0]:e[jd],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[os]:[,"PutObject"]}),i,o;return e.Body!==void 0&&(o=e.Body,i=o),r.m("PUT").h(n).q(s).b(i),r.build()},owe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[Rp]:e[gp],[nn]:e[rn],[Ir]:e[st],[Pp]:e[bp],[Op]:e[vp],[Dp]:e[Ap],[PB]:e[cB],[kp]:e[xp],[ur]:e[lr],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[sx]:[,""],[Ai]:[,e[pt]]}),i,o;return e.AccessControlPolicy!==void 0&&(o=IX(e.AccessControlPolicy),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},awe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ur]:e[lr],[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[RY]:[,""],[Ai]:[,e[pt]]}),i,o;return e.LegalHold!==void 0&&(o=a1e(e.LegalHold),o=o.n("LegalHold"),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},cwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ur]:e[lr],[GY]:e[bY],[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[DY]:[,""]}),i,o;return e.ObjectLockConfiguration!==void 0&&(o=o1e(e.ObjectLockConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},lwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ur]:e[lr],[RB]:[()=>u.isSerializableHeaderValue(e[cp]),()=>e[cp].toString()],[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[HY]:[,""],[Ai]:[,e[pt]]}),i,o;return e.Retention!==void 0&&(o=c1e(e.Retention),o=o.n("Retention"),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},uwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le],[ur]:e[lr]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[Tp]:[,""],[Ai]:[,e[pt]]}),i,o;return e.Tagging!==void 0&&(o=rB(e.Tagging),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},dwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[IB]:[,""]}),i,o;return e.PublicAccessBlockConfiguration!==void 0&&(o=y1e(e.PublicAccessBlockConfiguration),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},fwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[BLe]:e[MBe],[wp]:e[oke],[Qy]:e[ake],[EB]:[()=>u.isSerializableHeaderValue(e[pJ]),()=>u.dateToUtcString(e[pJ]).toString()],[SB]:[()=>u.isSerializableHeaderValue(e[mJ]),()=>u.dateToUtcString(e[mJ]).toString()],[LLe]:e[KBe],[MLe]:e[zBe],[FLe]:[()=>u.isSerializableHeaderValue(e[RJ]),()=>u.dateToUtcString(e[RJ]).toString()],[ULe]:[()=>u.isSerializableHeaderValue(e[NJ]),()=>u.dateToUtcString(e[NJ]).toString()],[V2e]:e[nke]??nAe.v4()});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[v2e]:[,""]});return r.m("PUT").h(n).q(s).b(void 0),r.build()},hwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ur]:e[lr],[Ir]:e[st],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[A2e]:[,""],[Ai]:[,e[pt]]}),i,o;return e.RestoreRequest!==void 0&&(o=P1e(e.RestoreRequest),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("POST").h(n).q(s).b(i),r.build()},pwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[w2e]:[,""],[T2e]:[,"2"]}),i;i=Qt;let o=new w.XmlNode(XBe);return o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),o.cc(e,sY),o.cc(e,nY),e[Cd]!=null&&o.c(RX(e[Cd]).n(Cd)),e[xd]!=null&&o.c(NX(e[xd]).n(xd)),e[bb]!=null&&o.c(N1e(e[bb]).n(bb)),e[Ib]!=null&&o.c(F1e(e[Ib]).n(Ib)),i+=o.toString(),r.m("POST").h(n).q(s).b(i),r.build()},mwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[p2e]:[,""]}),i,o;return e.InventoryTableConfiguration!==void 0&&(o=DNe(e.InventoryTableConfiguration),o=o.n("InventoryTableConfiguration"),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},gwe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/xml",[nn]:e[rn],[Ir]:e[st],[ue]:e[le]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let s=u.map({[m2e]:[,""]}),i,o;return e.JournalTableConfiguration!==void 0&&(o=BNe(e.JournalTableConfiguration),o=o.n("JournalTableConfiguration"),i=Qt,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},ywe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"content-type":"application/octet-stream",[Md]:[()=>u.isSerializableHeaderValue(e[Kl]),()=>e[Kl].toString()],[nn]:e[rn],[Ir]:e[st],[zd]:e[Cr],[$d]:e[_r],[Gd]:e[br],[Wd]:e[vr],[Jd]:e[Ar],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[ur]:e[lr],[ue]:e[le]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[os]:[,"UploadPart"],[dx]:[u.expectNonNull(e.PartNumber,"PartNumber")!=null,()=>e[Ci].toString()],[e0]:[,u.expectNonNull(e[vi],"UploadId")]}),i,o;return e.Body!==void 0&&(o=e.Body,i=o),r.m("PUT").h(n).q(s).b(i),r.build()},Ewe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{[JY]:e[WX],[XY]:e[JX],[YY]:[()=>u.isSerializableHeaderValue(e[Jb]),()=>u.dateToUtcString(e[Jb]).toString()],[QY]:e[XX],[ZY]:[()=>u.isSerializableHeaderValue(e[Xb]),()=>u.dateToUtcString(e[Xb]).toString()],[q2e]:e[eke],[ss]:e[Mn],[Xo]:e[Jo],[is]:e[Un],[eQ]:e[YX],[tQ]:e[QX],[rQ]:e[ZX],[ur]:e[lr],[ue]:e[le],[oQ]:e[rY]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let s=u.map({[os]:[,"UploadPartCopy"],[dx]:[u.expectNonNull(e.PartNumber,"PartNumber")!=null,()=>e[Ci].toString()],[e0]:[,u.expectNonNull(e[vi],"UploadId")]});return r.m("PUT").h(n).q(s).b(void 0),r.build()},Swe=async(e,t)=>{let r=ee.requestBuilder(e,t),n=u.map({},u.isSerializableHeaderValue,{"x-amz-content-sha256":"UNSIGNED-PAYLOAD",...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((a,c)=>(a[`x-amz-meta-${c.toLowerCase()}`]=e.Metadata[c],a),{}),"content-type":"application/octet-stream",[kLe]:e[PBe],[qLe]:e[UBe],[vLe]:[()=>u.isSerializableHeaderValue(e[wJ]),()=>e[wJ].toString()],[H2e]:e[rb],[j2e]:e[nb],[K2e]:e[oB],[z2e]:e[yp],[$2e]:e[Ep],[G2e]:e[Sp],[W2e]:e[Cp],[Md]:[()=>u.isSerializableHeaderValue(e[Kl]),()=>e[Kl].toString()],[J2e]:e[aB],[X2e]:e[_p],[eLe]:e[Cr],[tLe]:e[_r],[rLe]:e[br],[nLe]:e[vr],[sLe]:e[Ar],[iLe]:[()=>u.isSerializableHeaderValue(e[zo]),()=>e[zo].toString()],[Y2e]:e[mr],[Q2e]:[()=>u.isSerializableHeaderValue(e[Fa]),()=>u.dateToUtcString(e[Fa]).toString()],[oLe]:e[_n],[Z2e]:[()=>u.isSerializableHeaderValue(e[tn]),()=>u.dateToUtcString(e[tn]).toString()],[aLe]:[()=>u.isSerializableHeaderValue(e[Zb]),()=>e[Zb].toString()],[uLe]:e[Ip],[lLe]:e[jd],[dLe]:[()=>u.isSerializableHeaderValue(e[Ma]),()=>u.serializeDateTime(e[Ma]).toString()],[cLe]:[()=>u.isSerializableHeaderValue(e[up]),()=>e[up].toString()],[pLe]:e[hB],[hLe]:e[Or],[fLe]:e[pB],[gLe]:e[Hs],[SLe]:e[Mn],[yLe]:e[bs],[CLe]:e[Un],[mLe]:e[ut],[_Le]:[()=>u.isSerializableHeaderValue(e[sv]),()=>e[sv].toString()],[bLe]:e[pt],[ELe]:[()=>u.isSerializableHeaderValue(e[Nr]),()=>e[Nr].toString()]});r.bp("/WriteGetObjectResponse");let s,i;e.Body!==void 0&&(i=e.Body,s=i);let{hostname:o}=await t.endpoint();if(t.disableHostPrefix!==!0){if(o="{RequestRoute}."+o,e.RequestRoute===void 0)throw new Error("Empty value provided for input host prefix: RequestRoute.");if(o=o.replace("{RequestRoute}",e.RequestRoute),!gk.isValidHostname(o))throw new Error("ValidationError: prefixed hostname must be hostname compatible.")}return r.hn(o),r.m("POST").h(n).b(s),r.build()},Cwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]});return await u.collectBody(e.body,t),r},_we=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[_n]:[,e.headers[t0]],[Hs]:[,e.headers[Hi]],[pt]:[,e.headers[Ua]],[bs]:[,e.headers[ji]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])],[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[Tt]!=null&&(r[Tt]=u.expectString(n[Tt])),n[Cr]!=null&&(r[Cr]=u.expectString(n[Cr])),n[_r]!=null&&(r[_r]=u.expectString(n[_r])),n[br]!=null&&(r[br]=u.expectString(n[br])),n[vr]!=null&&(r[vr]=u.expectString(n[vr])),n[Ar]!=null&&(r[Ar]=u.expectString(n[Ar])),n[xr]!=null&&(r[xr]=u.expectString(n[xr])),n[mr]!=null&&(r[mr]=u.expectString(n[mr])),n[et]!=null&&(r[et]=u.expectString(n[et])),n[_d]!=null&&(r[_d]=u.expectString(n[_d])),r},bwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[_n]:[,e.headers[t0]],[eY]:[,e.headers[nQ]],[pt]:[,e.headers[Ua]],[Hs]:[,e.headers[Hi]],[Mn]:[,e.headers[ss]],[Un]:[,e.headers[is]],[bs]:[,e.headers[ji]],[Wl]:[,e.headers[Jl]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])],[Or]:[,e.headers[Vr]]}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.CopyObjectResult=vPe(n),r},vwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[_d]:[,e.headers[NY]],[By]:[,e.headers[$Y]]});return await u.collectBody(e.body,t),r},Awe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},xwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Iwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[zX]:[()=>e.headers[iv]!==void 0,()=>u.expectNonNull(u.parseRfc7231DateTime(e.headers[iv]))],[$X]:[,e.headers[zY]],[Hs]:[,e.headers[Hi]],[Mn]:[,e.headers[ss]],[Un]:[,e.headers[is]],[bs]:[,e.headers[ji]],[Wl]:[,e.headers[Jl]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])],[Or]:[,e.headers[Vr]],[st]:[,e.headers[NB]],[xr]:[,e.headers[Np]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[Tt]!=null&&(r[Tt]=u.expectString(n[Tt])),n[et]!=null&&(r[et]=u.expectString(n[et])),n[vi]!=null&&(r[vi]=u.expectString(n[vi])),r},wwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Hs]:[,e.headers[Hi]],[bs]:[,e.headers[ji]],[Wl]:[,e.headers[Jl]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[MD]!=null&&(r[MD]=dDe(n[MD])),r},Twe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Rwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Nwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Pwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Owe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Dwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},kwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Bwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Lwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Fwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Mwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Uwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},qwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Vwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Hwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},jwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[zo]:[()=>e.headers[zl]!==void 0,()=>u.parseBoolean(e.headers[zl])],[pt]:[,e.headers[Ua]],[Or]:[,e.headers[Vr]]});return await u.collectBody(e.body,t),r},Kwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.Deleted).trim()===""?r[J_]=[]:n[J_]!=null&&(r[J_]=RPe(u.getArrayIfSingleItem(n[J_]))),String(n.Error).trim()===""?r[yJ]=[]:n[Go]!=null&&(r[yJ]=UPe(u.getArrayIfSingleItem(n[Go]))),r},zwe=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[pt]:[,e.headers[Ua]]});return await u.collectBody(e.body,t),r},$we=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},Gwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[_e]!=null&&(r[_e]=u.expectString(n[_e])),r},Wwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.AccessControlList).trim()===""?r[My]=[]:n[ud]!=null&&n[ud][Uc]!=null&&(r[My]=FX(u.getArrayIfSingleItem(n[ud][Uc]))),n[qt]!=null&&(r[qt]=Gl(n[qt])),r},Jwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.AnalyticsConfiguration=DX(n),r},Xwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.CORSRule).trim()===""?r[Ik]=[]:n[xk]!=null&&(r[Ik]=IPe(u.getArrayIfSingleItem(n[xk]))),r},Ywe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.ServerSideEncryptionConfiguration=cDe(n),r},Qwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.IntelligentTieringConfiguration=UX(n),r},Zwe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.InventoryConfiguration=qX(n),r},eTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[mB]:[,e.headers[BB]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.Rule).trim()===""?r[yo]=[]:n[_i]!=null&&(r[yo]=pOe(u.getArrayIfSingleItem(n[_i]))),r},tTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[Xh]!=null&&(r[Xh]=u.expectString(n[Xh])),r},rTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[bd]!=null&&(r[bd]=mOe(n[bd])),r},nTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.GetBucketMetadataConfigurationResult=zPe(n),r},sTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.GetBucketMetadataTableConfigurationResult=$Pe(n),r},iTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.MetricsConfiguration=VX(n),r},oTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[gd]!=null&&(r[gd]=qPe(n[gd])),String(n.CloudFunctionConfiguration).trim()===""?r[kk]=[]:n[fJ]!=null&&(r[kk]=lOe(u.getArrayIfSingleItem(n[fJ]))),String(n.QueueConfiguration).trim()===""?r[qk]=[]:n[Uk]!=null&&(r[qk]=$Oe(u.getArrayIfSingleItem(n[Uk]))),String(n.TopicConfiguration).trim()===""?r[$k]=[]:n[zk]!=null&&(r[$k]=IDe(u.getArrayIfSingleItem(n[zk]))),r},aTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.OwnershipControls=BOe(n),r},cTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=await RDe(e.body,t);return r.Policy=u.expectString(n),r},lTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.PolicyStatus=HOe(n),r},uTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.ReplicationConfiguration=YOe(n),r},dTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[yb]!=null&&(r[yb]=u.expectString(n[yb])),r},fTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.TagSet).trim()===""?r[Ko]=[]:n[Ko]!=null&&n[Ko][ct]!=null&&(r[Ko]=Hd(u.getArrayIfSingleItem(n[Ko][ct]))),r},hTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[Lk]!=null&&(r[fb]=u.expectString(n[Lk])),n[_e]!=null&&(r[_e]=u.expectString(n[_e])),r},pTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[yd]!=null&&(r[yd]=MPe(n[yd])),n[Sd]!=null&&(r[Sd]=JPe(n[Sd])),n[wd]!=null&&(r[wd]=JOe(n[wd])),String(n.RoutingRules).trim()===""?r[Th]=[]:n[Th]!=null&&n[Th][tv]!=null&&(r[Th]=sDe(u.getArrayIfSingleItem(n[Th][tv]))),r},mTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[zo]:[()=>e.headers[zl]!==void 0,()=>u.parseBoolean(e.headers[zl])],[oB]:[,e.headers[xY]],[_n]:[,e.headers[t0]],[pB]:[,e.headers[sQ]],[tn]:[()=>e.headers[dp]!==void 0,()=>u.expectNonNull(u.parseRfc7231DateTime(e.headers[dp]))],[Kl]:[()=>e.headers[Md]!==void 0,()=>u.strictParseLong(e.headers[Md])],[mr]:[,e.headers[ax]],[Cr]:[,e.headers[zd]],[_r]:[,e.headers[$d]],[br]:[,e.headers[Gd]],[vr]:[,e.headers[Wd]],[Ar]:[,e.headers[Jd]],[xr]:[,e.headers[Np]],[Zb]:[()=>e.headers[ov]!==void 0,()=>u.strictParseInt32(e.headers[ov])],[pt]:[,e.headers[Ua]],[yp]:[,e.headers[Gy]],[Ep]:[,e.headers[Wy]],[Sp]:[,e.headers[Jy]],[Cp]:[,e.headers[Xy]],[aB]:[,e.headers[IY]],[_p]:[,e.headers[Yy]],[Fa]:[()=>e.headers[Ud]!==void 0,()=>u.expectNonNull(u.parseRfc7231DateTime(e.headers[Ud]))],[tY]:[,e.headers[wY]],[$y]:[,e.headers[i0]],[Hs]:[,e.headers[Hi]],[Mn]:[,e.headers[ss]],[Un]:[,e.headers[is]],[bs]:[,e.headers[ji]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])],[ut]:[,e.headers[s0]],[Or]:[,e.headers[Vr]],[hB]:[,e.headers[iQ]],[up]:[()=>e.headers[av]!==void 0,()=>u.strictParseInt32(e.headers[av])],[sv]:[()=>e.headers[cv]!==void 0,()=>u.strictParseInt32(e.headers[cv])],[Ip]:[,e.headers[n0]],[Ma]:[()=>e.headers[qd]!==void 0,()=>u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e.headers[qd]))],[jd]:[,e.headers[r0]],Metadata:[,Object.keys(e.headers).filter(s=>s.startsWith("x-amz-meta-")).reduce((s,i)=>(s[i.substring(11)]=e.headers[i],s),{})]}),n=e.body;return t.sdkStreamMixin(n),r.Body=n,r},gTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.AccessControlList).trim()===""?r[My]=[]:n[ud]!=null&&n[ud][Uc]!=null&&(r[My]=FX(u.getArrayIfSingleItem(n[ud][Uc]))),n[qt]!=null&&(r[qt]=Gl(n[qt])),r},yTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[zo]:[()=>e.headers[zl]!==void 0,()=>u.parseBoolean(e.headers[zl])],[tn]:[()=>e.headers[dp]!==void 0,()=>u.expectNonNull(u.parseRfc7231DateTime(e.headers[dp]))],[pt]:[,e.headers[Ua]],[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[VD]!=null&&(r[VD]=SPe(n[VD])),n[mr]!=null&&(r[mr]=u.expectString(n[mr])),n[ok]!=null&&(r[ok]=GPe(n[ok])),n[ak]!=null&&(r[ak]=u.strictParseLong(n[ak])),n[ut]!=null&&(r[ut]=u.expectString(n[ut])),r},ETe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.LegalHold=ROe(n),r},STe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.ObjectLockConfiguration=TOe(n),r},CTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.Retention=NOe(n),r},_Te=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[pt]:[,e.headers[Ua]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.TagSet).trim()===""?r[Ko]=[]:n[Ko]!=null&&n[Ko][ct]!=null&&(r[Ko]=Hd(u.getArrayIfSingleItem(n[Ko][ct]))),r},bTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]}),n=e.body;return t.sdkStreamMixin(n),r.Body=n,r},vTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.PublicAccessBlockConfiguration=KOe(n),r},ATe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[By]:[,e.headers[$Y]],[GDe]:[,e.headers[B2e]],[KDe]:[,e.headers[k2e]],[Ly]:[,e.headers[F2e]],[LDe]:[()=>e.headers[FJ]!==void 0,()=>u.parseBoolean(e.headers[FJ])]});return await u.collectBody(e.body,t),r},xTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[zo]:[()=>e.headers[zl]!==void 0,()=>u.parseBoolean(e.headers[zl])],[oB]:[,e.headers[xY]],[_n]:[,e.headers[t0]],[pB]:[,e.headers[sQ]],[FDe]:[,e.headers[D2e]],[tn]:[()=>e.headers[dp]!==void 0,()=>u.expectNonNull(u.parseRfc7231DateTime(e.headers[dp]))],[Kl]:[()=>e.headers[Md]!==void 0,()=>u.strictParseLong(e.headers[Md])],[Cr]:[,e.headers[zd]],[_r]:[,e.headers[$d]],[br]:[,e.headers[Gd]],[vr]:[,e.headers[Wd]],[Ar]:[,e.headers[Jd]],[xr]:[,e.headers[Np]],[mr]:[,e.headers[ax]],[Zb]:[()=>e.headers[ov]!==void 0,()=>u.strictParseInt32(e.headers[ov])],[pt]:[,e.headers[Ua]],[yp]:[,e.headers[Gy]],[Ep]:[,e.headers[Wy]],[Sp]:[,e.headers[Jy]],[Cp]:[,e.headers[Xy]],[_p]:[,e.headers[Yy]],[aB]:[,e.headers[IY]],[Fa]:[()=>e.headers[Ud]!==void 0,()=>u.expectNonNull(u.parseRfc7231DateTime(e.headers[Ud]))],[tY]:[,e.headers[wY]],[$y]:[,e.headers[i0]],[Hs]:[,e.headers[Hi]],[Mn]:[,e.headers[ss]],[Un]:[,e.headers[is]],[bs]:[,e.headers[ji]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])],[ut]:[,e.headers[s0]],[Or]:[,e.headers[Vr]],[hB]:[,e.headers[iQ]],[up]:[()=>e.headers[av]!==void 0,()=>u.strictParseInt32(e.headers[av])],[sv]:[()=>e.headers[cv]!==void 0,()=>u.strictParseInt32(e.headers[cv])],[Ip]:[,e.headers[n0]],[Ma]:[()=>e.headers[qd]!==void 0,()=>u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e.headers[qd]))],[jd]:[,e.headers[r0]],Metadata:[,Object.keys(e.headers).filter(n=>n.startsWith("x-amz-meta-")).reduce((n,s)=>(n[s.substring(11)]=e.headers[s],n),{})]});return await u.collectBody(e.body,t),r},ITe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.AnalyticsConfiguration).trim()===""?r[dJ]=[]:n[yk]!=null&&(r[dJ]=pPe(u.getArrayIfSingleItem(n[yk]))),n[pr]!=null&&(r[pr]=u.expectString(n[pr])),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),n[ni]!=null&&(r[ni]=u.expectString(n[ni])),r},wTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[pr]!=null&&(r[pr]=u.expectString(n[pr])),String(n.IntelligentTieringConfiguration).trim()===""?r[bJ]=[]:n[Dk]!=null&&(r[bJ]=YPe(u.getArrayIfSingleItem(n[Dk]))),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),n[ni]!=null&&(r[ni]=u.expectString(n[ni])),r},TTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[pr]!=null&&(r[pr]=u.expectString(n[pr])),String(n.InventoryConfiguration).trim()===""?r[EJ]=[]:n[Ok]!=null&&(r[EJ]=ZPe(u.getArrayIfSingleItem(n[Ok]))),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),n[ni]!=null&&(r[ni]=u.expectString(n[ni])),r},RTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[pr]!=null&&(r[pr]=u.expectString(n[pr])),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),String(n.MetricsConfiguration).trim()===""?r[vJ]=[]:n[Bk]!=null&&(r[vJ]=COe(u.getArrayIfSingleItem(n[Bk]))),n[ni]!=null&&(r[ni]=u.expectString(n[ni])),r},NTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.Buckets).trim()===""?r[Da]=[]:n[Da]!=null&&n[Da][Tt]!=null&&(r[Da]=kX(u.getArrayIfSingleItem(n[Da][Tt]))),n[pr]!=null&&(r[pr]=u.expectString(n[pr])),n[qt]!=null&&(r[qt]=Gl(n[qt])),n[pe]!=null&&(r[pe]=u.expectString(n[pe])),r},PTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.Buckets).trim()===""?r[Da]=[]:n[Da]!=null&&n[Da][Tt]!=null&&(r[Da]=kX(u.getArrayIfSingleItem(n[Da][Tt]))),n[pr]!=null&&(r[pr]=u.expectString(n[pr])),r},OTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[Tt]!=null&&(r[Tt]=u.expectString(n[Tt])),String(n.CommonPrefixes).trim()===""?r[Fs]=[]:n[Fs]!=null&&(r[Fs]=ex(u.getArrayIfSingleItem(n[Fs]))),n[Ms]!=null&&(r[Ms]=u.expectString(n[Ms])),n[qs]!=null&&(r[qs]=u.expectString(n[qs])),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),n[Vl]!=null&&(r[Vl]=u.expectString(n[Vl])),n[hb]!=null&&(r[hb]=u.strictParseInt32(n[hb])),n[Yh]!=null&&(r[Yh]=u.expectString(n[Yh])),n[sk]!=null&&(r[sk]=u.expectString(n[sk])),n[pe]!=null&&(r[pe]=u.expectString(n[pe])),n[Ob]!=null&&(r[Ob]=u.expectString(n[Ob])),String(n.Upload).trim()===""?r[OJ]=[]:n[PJ]!=null&&(r[OJ]=vOe(u.getArrayIfSingleItem(n[PJ]))),r},DTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.CommonPrefixes).trim()===""?r[Fs]=[]:n[Fs]!=null&&(r[Fs]=ex(u.getArrayIfSingleItem(n[Fs]))),String(n.Contents).trim()===""?r[Ul]=[]:n[Ul]!=null&&(r[Ul]=HX(u.getArrayIfSingleItem(n[Ul]))),n[Ms]!=null&&(r[Ms]=u.expectString(n[Ms])),n[qs]!=null&&(r[qs]=u.expectString(n[qs])),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),n[db]!=null&&(r[db]=u.expectString(n[db])),n[co]!=null&&(r[co]=u.strictParseInt32(n[co])),n[Gr]!=null&&(r[Gr]=u.expectString(n[Gr])),n[nk]!=null&&(r[nk]=u.expectString(n[nk])),n[pe]!=null&&(r[pe]=u.expectString(n[pe])),r},kTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.CommonPrefixes).trim()===""?r[Fs]=[]:n[Fs]!=null&&(r[Fs]=ex(u.getArrayIfSingleItem(n[Fs]))),String(n.Contents).trim()===""?r[Ul]=[]:n[Ul]!=null&&(r[Ul]=HX(u.getArrayIfSingleItem(n[Ul]))),n[pr]!=null&&(r[pr]=u.expectString(n[pr])),n[Ms]!=null&&(r[Ms]=u.expectString(n[Ms])),n[qs]!=null&&(r[qs]=u.expectString(n[qs])),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),n[QD]!=null&&(r[QD]=u.strictParseInt32(n[QD])),n[co]!=null&&(r[co]=u.strictParseInt32(n[co])),n[Gr]!=null&&(r[Gr]=u.expectString(n[Gr])),n[ni]!=null&&(r[ni]=u.expectString(n[ni])),n[pe]!=null&&(r[pe]=u.expectString(n[pe])),n[Ab]!=null&&(r[Ab]=u.expectString(n[Ab])),r},BTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return String(n.CommonPrefixes).trim()===""?r[Fs]=[]:n[Fs]!=null&&(r[Fs]=ex(u.getArrayIfSingleItem(n[Fs]))),String(n.DeleteMarker).trim()===""?r[gJ]=[]:n[zo]!=null&&(r[gJ]=OPe(u.getArrayIfSingleItem(n[zo]))),n[Ms]!=null&&(r[Ms]=u.expectString(n[Ms])),n[qs]!=null&&(r[qs]=u.expectString(n[qs])),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),n[Vl]!=null&&(r[Vl]=u.expectString(n[Vl])),n[co]!=null&&(r[co]=u.strictParseInt32(n[co])),n[Gr]!=null&&(r[Gr]=u.expectString(n[Gr])),n[Yh]!=null&&(r[Yh]=u.expectString(n[Yh])),n[ik]!=null&&(r[ik]=u.expectString(n[ik])),n[pe]!=null&&(r[pe]=u.expectString(n[pe])),n[kb]!=null&&(r[kb]=u.expectString(n[kb])),String(n.Version).trim()===""?r[kJ]=[]:n[DJ]!=null&&(r[kJ]=kOe(u.getArrayIfSingleItem(n[DJ]))),r},LTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[zX]:[()=>e.headers[iv]!==void 0,()=>u.expectNonNull(u.parseRfc7231DateTime(e.headers[iv]))],[$X]:[,e.headers[zY]],[Or]:[,e.headers[Vr]]}),n=u.expectNonNull(u.expectObject(await We.parseXmlBody(e.body,t)),"body");return n[Tt]!=null&&(r[Tt]=u.expectString(n[Tt])),n[st]!=null&&(r[st]=u.expectString(n[st])),n[xr]!=null&&(r[xr]=u.expectString(n[xr])),n[$h]!=null&&(r[$h]=MX(n[$h])),n[rr]!=null&&(r[rr]=u.parseBoolean(n[rr])),n[et]!=null&&(r[et]=u.expectString(n[et])),n[Bc]!=null&&(r[Bc]=u.strictParseInt32(n[Bc])),n[Qh]!=null&&(r[Qh]=u.expectString(n[Qh])),n[qt]!=null&&(r[qt]=Gl(n[qt])),n[Hl]!=null&&(r[Hl]=u.expectString(n[Hl])),String(n.Part).trim()===""?r[Uy]=[]:n[ev]!=null&&(r[Uy]=qOe(u.getArrayIfSingleItem(n[ev]))),n[ut]!=null&&(r[ut]=u.expectString(n[ut])),n[vi]!=null&&(r[vi]=u.expectString(n[vi])),r},FTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},MTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},UTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},qTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},VTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},HTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},jTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},KTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[mB]:[,e.headers[BB]]});return await u.collectBody(e.body,t),r},zTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},$Te=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},GTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},WTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},JTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},XTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},YTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},QTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},ZTe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},eRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},tRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[_n]:[,e.headers[t0]],[mr]:[,e.headers[ax]],[Cr]:[,e.headers[zd]],[_r]:[,e.headers[$d]],[br]:[,e.headers[Gd]],[vr]:[,e.headers[Wd]],[Ar]:[,e.headers[Jd]],[xr]:[,e.headers[Np]],[Hs]:[,e.headers[Hi]],[pt]:[,e.headers[Ua]],[Mn]:[,e.headers[ss]],[Un]:[,e.headers[is]],[bs]:[,e.headers[ji]],[Wl]:[,e.headers[Jl]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])],[_s]:[()=>e.headers[MJ]!==void 0,()=>u.strictParseLong(e.headers[MJ])],[Or]:[,e.headers[Vr]]});return await u.collectBody(e.body,t),r},rRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]});return await u.collectBody(e.body,t),r},nRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]});return await u.collectBody(e.body,t),r},sRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]});return await u.collectBody(e.body,t),r},iRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]]});return await u.collectBody(e.body,t),r},oRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[pt]:[,e.headers[Ua]]});return await u.collectBody(e.body,t),r},aRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},cRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},lRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Or]:[,e.headers[Vr]],[RBe]:[,e.headers[DLe]]});return await u.collectBody(e.body,t),r},uRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)}),n=e.body;return r.Payload=PRe(n,t),r},dRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},fRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},hRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[Hs]:[,e.headers[Hi]],[mr]:[,e.headers[ax]],[Cr]:[,e.headers[zd]],[_r]:[,e.headers[$d]],[br]:[,e.headers[Gd]],[vr]:[,e.headers[Wd]],[Ar]:[,e.headers[Jd]],[Mn]:[,e.headers[ss]],[Un]:[,e.headers[is]],[bs]:[,e.headers[ji]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])],[Or]:[,e.headers[Vr]]});return await u.collectBody(e.body,t),r},pRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e),[eY]:[,e.headers[nQ]],[Hs]:[,e.headers[Hi]],[Mn]:[,e.headers[ss]],[Un]:[,e.headers[is]],[bs]:[,e.headers[ji]],[Nr]:[()=>e.headers[un]!==void 0,()=>u.parseBoolean(e.headers[un])],[Or]:[,e.headers[Vr]]}),n=u.expectObject(await We.parseXmlBody(e.body,t));return r.CopyPartResult=APe(n),r},mRe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ie(e,t);let r=u.map({$metadata:Z(e)});return await u.collectBody(e.body,t),r},ie=async(e,t)=>{let r={...e,body:await We.parseXmlErrorBody(e.body,t)},n=We.loadRestXmlErrorCode(e,r.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await IRe(r);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await RRe(r);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await yRe(r);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await ERe(r);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await ARe(r);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await _Re(r);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await xRe(r);case"NotFound":case"com.amazonaws.s3#NotFound":throw await wRe(r);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await SRe(r);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await bRe(r);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await vRe(r);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await NRe(r);case"IdempotencyParameterMismatch":case"com.amazonaws.s3#IdempotencyParameterMismatch":throw await CRe(r);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await TRe(r);default:let s=r.body;return gRe({output:e,parsedBody:s,errorCode:n})}},gRe=u.withBaseException(ns),yRe=async(e,t)=>{let r=u.map({});e.body;let n=new Fb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},ERe=async(e,t)=>{let r=u.map({});e.body;let n=new Mb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},SRe=async(e,t)=>{let r=u.map({});e.body;let n=new jb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},CRe=async(e,t)=>{let r=u.map({});e.body;let n=new Gb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},_Re=async(e,t)=>{let r=u.map({}),n=e.body;n[Dc]!=null&&(r[Dc]=u.expectString(n[Dc])),n[ut]!=null&&(r[ut]=u.expectString(n[ut]));let s=new qb({$metadata:Z(e),...r});return u.decorateServiceException(s,e.body)},bRe=async(e,t)=>{let r=u.map({});e.body;let n=new Kb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},vRe=async(e,t)=>{let r=u.map({});e.body;let n=new zb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},ARe=async(e,t)=>{let r=u.map({});e.body;let n=new Ub({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},xRe=async(e,t)=>{let r=u.map({});e.body;let n=new Vb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},IRe=async(e,t)=>{let r=u.map({});e.body;let n=new Bb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},wRe=async(e,t)=>{let r=u.map({});e.body;let n=new Hb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},TRe=async(e,t)=>{let r=u.map({});e.body;let n=new Wb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},RRe=async(e,t)=>{let r=u.map({});e.body;let n=new Lb({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},NRe=async(e,t)=>{let r=u.map({});e.body;let n=new $b({$metadata:Z(e),...r});return u.decorateServiceException(n,e.body)},PRe=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.Records!=null?{Records:await BRe(r.Records)}:r.Stats!=null?{Stats:await LRe(r.Stats,t)}:r.Progress!=null?{Progress:await kRe(r.Progress,t)}:r.Cont!=null?{Cont:await ORe(r.Cont,t)}:r.End!=null?{End:await DRe(r.End,t)}:{$unknown:r}),ORe=async(e,t)=>{let r={};return await We.parseXmlBody(e.body,t),Object.assign(r,bPe()),r},DRe=async(e,t)=>{let r={};return await We.parseXmlBody(e.body,t),Object.assign(r,LPe()),r},kRe=async(e,t)=>{let r={},n=await We.parseXmlBody(e.body,t);return r.Details=jOe(n),r},BRe=async(e,t)=>{let r={};return r.Payload=e.body,r},LRe=async(e,t)=>{let r={},n=await We.parseXmlBody(e.body,t);return r.Details=yDe(n),r},FRe=(e,t)=>{let r=new w.XmlNode(fd);return e[nd]!=null&&r.c(w.XmlNode.of(nd,String(e[nd])).n(nd)),r},MRe=(e,t)=>{let r=new w.XmlNode(ODe);return e[_e]!=null&&r.c(w.XmlNode.of(qDe,e[_e]).n(_e)),r},IX=(e,t)=>{let r=new w.XmlNode(PDe);return r.lc(e,"Grants","AccessControlList",()=>TX(e[My])),e[qt]!=null&&r.c(d1e(e[qt]).n(qt)),r},URe=(e,t)=>{let r=new w.XmlNode(dd);return e[qt]!=null&&r.c(w.XmlNode.of(CBe,e[qt]).n(qt)),r},qRe=(e,t)=>e.filter(r=>r!=null).map(r=>w.XmlNode.of(Ek,r).n(qn)),VRe=(e,t)=>e.filter(r=>r!=null).map(r=>w.XmlNode.of(Ck,r).n(qn)),HRe=(e,t)=>e.filter(r=>r!=null).map(r=>w.XmlNode.of(bk,r).n(qn)),jRe=(e,t)=>{let r=new w.XmlNode(NDe);return r.cc(e,pe),r.l(e,"Tags","Tag",()=>Vd(e[Vs])),r},KRe=(e,t)=>{let r=new w.XmlNode(yk);return e[Ke]!=null&&r.c(w.XmlNode.of(BDe,e[Ke]).n(Ke)),e[je]!=null&&r.c($Re(e[je]).n(je)),e[Pd]!=null&&r.c(W1e(e[Pd]).n(Pd)),r},zRe=(e,t)=>{let r=new w.XmlNode(DDe);return e[mo]!=null&&r.c(GRe(e[mo]).n(mo)),r},$Re=(e,t)=>{let r=new w.XmlNode(kDe);return I.AnalyticsFilter.visit(e,{Prefix:n=>{e[pe]!=null&&r.c(w.XmlNode.of(pe,n).n(pe))},Tag:n=>{e[ct]!=null&&r.c(pp(n).n(ct))},And:n=>{e[Pr]!=null&&r.c(jRe(n).n(Pr))},_:(n,s)=>{if(!(s instanceof w.XmlNode||s instanceof w.XmlText))throw new Error("Unable to serialize unknown union members in XML.");r.c(new w.XmlNode(n).c(s))}}),r},GRe=(e,t)=>{let r=new w.XmlNode(MDe);return e[ao]!=null&&r.c(w.XmlNode.of(UDe,e[ao]).n(ao)),e[Dh]!=null&&r.c(w.XmlNode.of(Nh,e[Dh]).n(Dh)),e[Tt]!=null&&r.c(w.XmlNode.of(tx,e[Tt]).n(Tt)),r.cc(e,pe),r},WRe=(e,t)=>{let r=new w.XmlNode(VDe);return r.cc(e,lke),e[bi]!=null&&r.c(w.XmlNode.of(WDe,e[bi]).n(bi)),r},JRe=(e,t)=>{let r=new w.XmlNode(HDe);return r.l(e,"Rules","Rule",()=>KNe(e[yo])),r},XRe=(e,t)=>{let r=new w.XmlNode($De);return e[bd]!=null&&r.c($Ne(e[bd]).n(bd)),r},YRe=(e,t)=>{let r=new w.XmlNode(YDe);return r.l(e,"Parts","Part",()=>ZRe(e[Uy])),r},QRe=(e,t)=>{let r=new w.XmlNode(ZDe);return r.cc(e,mr),r.cc(e,Cr),r.cc(e,_r),r.cc(e,br),r.cc(e,vr),r.cc(e,Ar),e[Ci]!=null&&r.c(w.XmlNode.of(Ci,String(e[Ci])).n(Ci)),r},ZRe=(e,t)=>e.filter(r=>r!=null).map(r=>QRe(r).n(qn)),eNe=(e,t)=>{let r=new w.XmlNode(hd);return r.cc(e,ib),r.cc(e,lb),r},tNe=(e,t)=>{let r=new w.XmlNode(QDe);return r.l(e,"CORSRules","CORSRule",()=>nNe(e[Ik])),r},rNe=(e,t)=>{let r=new w.XmlNode(xk);return r.cc(e,en),r.l(e,"AllowedHeaders","AllowedHeader",()=>qRe(e[Sk])),r.l(e,"AllowedMethods","AllowedMethod",()=>VRe(e[_k])),r.l(e,"AllowedOrigins","AllowedOrigin",()=>HRe(e[vk])),r.l(e,"ExposeHeaders","ExposeHeader",()=>gNe(e[wk])),e[od]!=null&&r.c(w.XmlNode.of(od,String(e[od])).n(od)),r},nNe=(e,t)=>e.filter(r=>r!=null).map(r=>rNe(r).n(qn)),sNe=(e,t)=>{let r=new w.XmlNode(XDe);return e[Xh]!=null&&r.c(w.XmlNode.of(jDe,e[Xh]).n(Xh)),e[_d]!=null&&r.c(zNe(e[_d]).n(_d)),e[Tt]!=null&&r.c(WRe(e[Tt]).n(Tt)),r.lc(e,"Tags","Tags",()=>Vd(e[Vs])),r},iNe=(e,t)=>{let r=new w.XmlNode(tke);return r.cc(e,gke),r.cc(e,ike),r.cc(e,fY),r.cc(e,fB),r.cc(e,iY),r.cc(e,dY),e[W_]!=null&&r.c(w.XmlNode.of(W_,String(e[W_])).n(W_)),r},oNe=(e,t)=>{let r=new w.XmlNode(rke);return r.cc(e,xBe),r.cc(e,fY),r.cc(e,fB),r.cc(e,iY),r.cc(e,dY),r},aNe=(e,t)=>{let r=new w.XmlNode(md);return e[lo]!=null&&r.c(w.XmlNode.of(cY,e[lo]).n(lo)),e[bt]!=null&&r.c(w.XmlNode.of(bt,String(e[bt])).n(bt)),e[ld]!=null&&r.c(w.XmlNode.of(ld,String(e[ld])).n(ld)),r},cNe=(e,t)=>{let r=new w.XmlNode(uke);return r.l(e,"Objects","Object",()=>i1e(e[bBe])),e[Q_]!=null&&r.c(w.XmlNode.of(Q_,String(e[Q_])).n(Q_)),r},lNe=(e,t)=>{let r=new w.XmlNode(pd);return e[_e]!=null&&r.c(w.XmlNode.of(cke,e[_e]).n(_e)),r},uNe=(e,t)=>{let r=new w.XmlNode(Fn);return e[Tt]!=null&&r.c(w.XmlNode.of(tx,e[Tt]).n(Tt)),e[Oh]!=null&&r.c(w.XmlNode.of(Nh,e[Oh]).n(Oh)),r.cc(e,ut),e[dd]!=null&&r.c(URe(e[dd]).n(dd)),e[Us]!=null&&r.c(fNe(e[Us]).n(Us)),e[Rd]!=null&&r.c(T1e(e[Rd]).n(Rd)),e[vd]!=null&&r.c(XNe(e[vd]).n(vd)),r},dNe=(e,t)=>{let r=new w.XmlNode(ka);return e[zD]!=null&&r.c(w.XmlNode.of(Hs,e[zD]).n(zD)),e[ZD]!=null&&r.c(w.XmlNode.of(bs,e[ZD]).n(ZD)),r.cc(e,Hke),r},fNe=(e,t)=>{let r=new w.XmlNode(Us);return r.cc(e,Sb),r},hNe=(e,t)=>{let r=new w.XmlNode(yd);return e[et]!=null&&r.c(w.XmlNode.of(dB,e[et]).n(et)),r},pNe=(e,t)=>new w.XmlNode(gd),Zk=(e,t)=>e.filter(r=>r!=null).map(r=>w.XmlNode.of(Fd,r).n(qn)),mNe=(e,t)=>{let r=new w.XmlNode(Ed);return e[_e]!=null&&r.c(w.XmlNode.of(fke,e[_e]).n(_e)),r},gNe=(e,t)=>e.filter(r=>r!=null).map(r=>w.XmlNode.of(Tk,r).n(qn)),yNe=(e,t)=>{let r=new w.XmlNode(Rk);return e[Gr]!=null&&r.c(w.XmlNode.of(Eke,e[Gr]).n(Gr)),e[Vi]!=null&&r.c(w.XmlNode.of(Ske,e[Vi]).n(Vi)),r},ENe=(e,t)=>e.filter(r=>r!=null).map(r=>yNe(r).n(qn)),SNe=(e,t)=>{let r=new w.XmlNode(sb);return r.cc(e,_Y),r},CNe=(e,t)=>{let r=new w.XmlNode(Uc);if(e[qi]!=null){let n=wX(e[qi]).n(qi);n.a("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),r.c(n)}return r.cc(e,Ba),r},wX=(e,t)=>{let r=new w.XmlNode(qi);return r.cc(e,$o),r.cc(e,tb),r.cc(e,en),r.cc(e,Db),r.a("xsi:type",e[bi]),r},TX=(e,t)=>e.filter(r=>r!=null).map(r=>CNe(r).n(Uc)),_Ne=(e,t)=>{let r=new w.XmlNode(Sd);return r.cc(e,Tb),r},RX=(e,t)=>{let r=new w.XmlNode(Cd);return e[Uh]!=null&&r.c(iNe(e[Uh]).n(Uh)),r.cc(e,ske),e[Gh]!=null&&r.c(LNe(e[Gh]).n(Gh)),e[ck]!=null&&r.c(m1e(e[ck]).n(ck)),r},bNe=(e,t)=>{let r=new w.XmlNode(Nke);return r.cc(e,pe),r.l(e,"Tags","Tag",()=>Vd(e[Vs])),r},vNe=(e,t)=>{let r=new w.XmlNode(Dk);return e[Ke]!=null&&r.c(w.XmlNode.of(Bke,e[Ke]).n(Ke)),e[je]!=null&&r.c(ANe(e[je]).n(je)),e[_e]!=null&&r.c(w.XmlNode.of(Lke,e[_e]).n(_e)),r.l(e,"Tierings","Tiering",()=>ePe(e[Gk])),r},ANe=(e,t)=>{let r=new w.XmlNode(kke);return r.cc(e,pe),e[ct]!=null&&r.c(pp(e[ct]).n(ct)),e[Pr]!=null&&r.c(bNe(e[Pr]).n(Pr)),r},xNe=(e,t)=>{let r=new w.XmlNode(Ok);return e[Fn]!=null&&r.c(INe(e[Fn]).n(Fn)),e[id]!=null&&r.c(w.XmlNode.of(id,String(e[id])).n(id)),e[je]!=null&&r.c(TNe(e[je]).n(je)),e[Ke]!=null&&r.c(w.XmlNode.of(xke,e[Ke]).n(Ke)),e[Kh]!=null&&r.c(w.XmlNode.of(Ike,e[Kh]).n(Kh)),r.lc(e,"OptionalFields","OptionalFields",()=>RNe(e[wh])),e[sp]!=null&&r.c(PNe(e[sp]).n(sp)),r},INe=(e,t)=>{let r=new w.XmlNode(Cke);return e[mo]!=null&&r.c(NNe(e[mo]).n(mo)),r},wNe=(e,t)=>{let r=new w.XmlNode(_ke);return e[Kk]!=null&&r.c(G1e(e[Kk]).n(nv)),e[jk]!=null&&r.c(z1e(e[jk]).n(rv)),r},TNe=(e,t)=>{let r=new w.XmlNode(bke);return r.cc(e,pe),r},RNe=(e,t)=>e.filter(r=>r!=null).map(r=>w.XmlNode.of(wke,r).n(Pk)),NNe=(e,t)=>{let r=new w.XmlNode(Tke);return r.cc(e,Nh),e[Tt]!=null&&r.c(w.XmlNode.of(tx,e[Tt]).n(Tt)),e[ao]!=null&&r.c(w.XmlNode.of(vke,e[ao]).n(ao)),r.cc(e,pe),e[ka]!=null&&r.c(wNe(e[ka]).n(ka)),r},PNe=(e,t)=>{let r=new w.XmlNode(Rke);return e[Hh]!=null&&r.c(w.XmlNode.of(Ake,e[Hh]).n(Hh)),r},ONe=(e,t)=>{let r=new w.XmlNode(ab);return e[kc]!=null&&r.c(w.XmlNode.of(oY,e[kc]).n(kc)),e[Us]!=null&&r.c(eB(e[Us]).n(Us)),r},DNe=(e,t)=>{let r=new w.XmlNode(Oke);return e[kc]!=null&&r.c(w.XmlNode.of(oY,e[kc]).n(kc)),e[Us]!=null&&r.c(eB(e[Us]).n(Us)),r},kNe=(e,t)=>{let r=new w.XmlNode(cb);return e[La]!=null&&r.c(PX(e[La]).n(La)),e[Us]!=null&&r.c(eB(e[Us]).n(Us)),r},BNe=(e,t)=>{let r=new w.XmlNode(qke);return e[La]!=null&&r.c(PX(e[La]).n(La)),r},LNe=(e,t)=>{let r=new w.XmlNode(Fke);return e[bi]!=null&&r.c(w.XmlNode.of(Uke,e[bi]).n(bi)),r},FNe=(e,t)=>{let r=new w.XmlNode(Mke);return r.cc(e,fB),r},MNe=(e,t)=>{let r=new w.XmlNode(Kke);return e[Ke]!=null&&r.c(w.XmlNode.of(uB,e[Ke]).n(Ke)),e[ub]!=null&&r.c(w.XmlNode.of(ub,e[ub]).n(Ak)),r.l(e,"Events","Event",()=>Zk(e[Mc])),e[je]!=null&&r.c(tB(e[je]).n(je)),r},UNe=(e,t)=>e.filter(r=>r!=null).map(r=>MNe(r).n(qn)),qNe=(e,t)=>{let r=new w.XmlNode(jke);return e[ri]!=null&&r.c(w.XmlNode.of(ri,u.serializeDateTime(e[ri]).toString()).n(ri)),e[bt]!=null&&r.c(w.XmlNode.of(bt,String(e[bt])).n(bt)),e[sd]!=null&&r.c(w.XmlNode.of(sd,String(e[sd])).n(sd)),r},VNe=(e,t)=>{let r=new w.XmlNode(Wke);return e[_n]!=null&&r.c(qNe(e[_n]).n(_n)),r.cc(e,en),r.cc(e,pe),e[je]!=null&&r.c(jNe(e[je]).n(je)),e[_e]!=null&&r.c(w.XmlNode.of(pke,e[_e]).n(_e)),r.l(e,"Transitions","Transition",()=>sPe(e[Xk])),r.l(e,"NoncurrentVersionTransitions","NoncurrentVersionTransition",()=>r1e(e[Fk])),e[Ad]!=null&&r.c(e1e(e[Ad]).n(Ad)),e[fd]!=null&&r.c(FRe(e[fd]).n(fd)),r},HNe=(e,t)=>{let r=new w.XmlNode(Jke);return r.cc(e,pe),r.l(e,"Tags","Tag",()=>Vd(e[Vs])),e[ho]!=null&&r.c(w.XmlNode.of(lY,String(e[ho])).n(ho)),e[po]!=null&&r.c(w.XmlNode.of(uY,String(e[po])).n(po)),r},jNe=(e,t)=>{let r=new w.XmlNode(Xke);return r.cc(e,pe),e[ct]!=null&&r.c(pp(e[ct]).n(ct)),e[ho]!=null&&r.c(w.XmlNode.of(lY,String(e[ho])).n(ho)),e[po]!=null&&r.c(w.XmlNode.of(uY,String(e[po])).n(po)),e[Pr]!=null&&r.c(HNe(e[Pr]).n(Pr)),r},KNe=(e,t)=>e.filter(r=>r!=null).map(r=>VNe(r).n(qn)),zNe=(e,t)=>{let r=new w.XmlNode(zke);return e[bi]!=null&&r.c(w.XmlNode.of(Yke,e[bi]).n(bi)),e[Gr]!=null&&r.c(w.XmlNode.of($ke,e[Gr]).n(Gr)),r},$Ne=(e,t)=>{let r=new w.XmlNode(bd);return r.cc(e,Nb),r.lc(e,"TargetGrants","TargetGrants",()=>Y1e(e[Rh])),r.cc(e,Pb),e[Ld]!=null&&r.c(Q1e(e[Ld]).n(Ld)),r},GNe=(e,t)=>{let r=new w.XmlNode(eBe);return e[cb]!=null&&r.c(kNe(e[cb]).n(cb)),e[ab]!=null&&r.c(ONe(e[ab]).n(ab)),r},WNe=(e,t)=>{let r=new w.XmlNode(aY);return e[Gr]!=null&&r.c(w.XmlNode.of(iBe,e[Gr]).n(Gr)),e[Vi]!=null&&r.c(w.XmlNode.of(lBe,e[Vi]).n(Vi)),r},JNe=(e,t)=>{let r=new w.XmlNode(aBe);return e[wb]!=null&&r.c(L1e(e[wb]).n(wb)),r},eB=(e,t)=>{let r=new w.XmlNode(cBe);return e[dk]!=null&&r.c(w.XmlNode.of(i2e,e[dk]).n(dk)),r.cc(e,Vke),r},XNe=(e,t)=>{let r=new w.XmlNode(vd);return e[_e]!=null&&r.c(w.XmlNode.of(oBe,e[_e]).n(_e)),e[Vh]!=null&&r.c(OX(e[Vh]).n(Vh)),r},YNe=(e,t)=>{let r=new w.XmlNode(Qke);return r.cc(e,pe),r.l(e,"Tags","Tag",()=>Vd(e[Vs])),r.cc(e,Oc),r},QNe=(e,t)=>{let r=new w.XmlNode(Bk);return e[Ke]!=null&&r.c(w.XmlNode.of(sBe,e[Ke]).n(Ke)),e[je]!=null&&r.c(ZNe(e[je]).n(je)),r},ZNe=(e,t)=>{let r=new w.XmlNode(nBe);return I.MetricsFilter.visit(e,{Prefix:n=>{e[pe]!=null&&r.c(w.XmlNode.of(pe,n).n(pe))},Tag:n=>{e[ct]!=null&&r.c(pp(n).n(ct))},AccessPointArn:n=>{e[Oc]!=null&&r.c(w.XmlNode.of(Oc,n).n(Oc))},And:n=>{e[Pr]!=null&&r.c(YNe(n).n(Pr))},_:(n,s)=>{if(!(s instanceof w.XmlNode||s instanceof w.XmlText))throw new Error("Unable to serialize unknown union members in XML.");r.c(new w.XmlNode(n).c(s))}}),r},e1e=(e,t)=>{let r=new w.XmlNode(Ad);return e[uo]!=null&&r.c(w.XmlNode.of(bt,String(e[uo])).n(uo)),e[fo]!=null&&r.c(w.XmlNode.of(vY,String(e[fo])).n(fo)),r},t1e=(e,t)=>{let r=new w.XmlNode(Mk);return e[uo]!=null&&r.c(w.XmlNode.of(bt,String(e[uo])).n(uo)),e[ut]!=null&&r.c(w.XmlNode.of(CY,e[ut]).n(ut)),e[fo]!=null&&r.c(w.XmlNode.of(vY,String(e[fo])).n(fo)),r},r1e=(e,t)=>e.filter(r=>r!=null).map(r=>t1e(r).n(qn)),n1e=(e,t)=>{let r=new w.XmlNode(uBe);return r.l(e,"TopicConfigurations","TopicConfiguration",()=>rPe(e[$k])),r.l(e,"QueueConfigurations","QueueConfiguration",()=>S1e(e[qk])),r.l(e,"LambdaFunctionConfigurations","CloudFunctionConfiguration",()=>UNe(e[kk])),e[gd]!=null&&r.c(pNe(e[gd]).n(gd)),r},tB=(e,t)=>{let r=new w.XmlNode(dBe);return e[et]!=null&&r.c(k1e(e[et]).n(Hk)),r},s1e=(e,t)=>{let r=new w.XmlNode(mBe);return e[et]!=null&&r.c(w.XmlNode.of(dB,e[et]).n(et)),e[pt]!=null&&r.c(w.XmlNode.of(_Be,e[pt]).n(pt)),r.cc(e,mr),e[Y_]!=null&&r.c(w.XmlNode.of(Y_,u.dateToUtcString(e[Y_]).toString()).n(Y_)),e[_s]!=null&&r.c(w.XmlNode.of(_s,String(e[_s])).n(_s)),r},i1e=(e,t)=>e.filter(r=>r!=null).map(r=>s1e(r).n(qn)),o1e=(e,t)=>{let r=new w.XmlNode(gBe);return r.cc(e,mb),e[_i]!=null&&r.c(l1e(e[_i]).n(_i)),r},a1e=(e,t)=>{let r=new w.XmlNode(yBe);return e[_e]!=null&&r.c(w.XmlNode.of(jd,e[_e]).n(_e)),r},c1e=(e,t)=>{let r=new w.XmlNode(EBe);return e[lo]!=null&&r.c(w.XmlNode.of(cY,e[lo]).n(lo)),e[rp]!=null&&r.c(w.XmlNode.of(ri,u.serializeDateTime(e[rp]).toString()).n(rp)),r},l1e=(e,t)=>{let r=new w.XmlNode(SBe);return e[md]!=null&&r.c(aNe(e[md]).n(md)),r},u1e=(e,t)=>{let r=new w.XmlNode(pb);return e[pk]!=null&&r.c(B1e(e[pk]).n(pk)),r},NX=(e,t)=>{let r=new w.XmlNode(xd);return e[Uh]!=null&&r.c(oNe(e[Uh]).n(Uh)),e[Gh]!=null&&r.c(FNe(e[Gh]).n(Gh)),r},d1e=(e,t)=>{let r=new w.XmlNode(qt);return r.cc(e,$o),r.cc(e,en),r},f1e=(e,t)=>{let r=new w.XmlNode(fBe);return r.l(e,"Rules","Rule",()=>p1e(e[yo])),r},h1e=(e,t)=>{let r=new w.XmlNode(pBe);return r.cc(e,Fy),r},p1e=(e,t)=>e.filter(r=>r!=null).map(r=>h1e(r).n(qn)),m1e=(e,t)=>new w.XmlNode(ABe),g1e=(e,t)=>{let r=new w.XmlNode(Id);return r.cc(e,gb),r},y1e=(e,t)=>{let r=new w.XmlNode(vBe);return e[Bh]!=null&&r.c(w.XmlNode.of(Z_,String(e[Bh])).n(Bh)),e[zh]!=null&&r.c(w.XmlNode.of(Z_,String(e[zh])).n(zh)),e[Lh]!=null&&r.c(w.XmlNode.of(Z_,String(e[Lh])).n(Lh)),e[ep]!=null&&r.c(w.XmlNode.of(Z_,String(e[ep])).n(ep)),r},E1e=(e,t)=>{let r=new w.XmlNode(Uk);return e[Ke]!=null&&r.c(w.XmlNode.of(uB,e[Ke]).n(Ke)),e[Eb]!=null&&r.c(w.XmlNode.of(Eb,e[Eb]).n(Vk)),r.l(e,"Events","Event",()=>Zk(e[Mc])),e[je]!=null&&r.c(tB(e[je]).n(je)),r},S1e=(e,t)=>e.filter(r=>r!=null).map(r=>E1e(r).n(qn)),PX=(e,t)=>{let r=new w.XmlNode(La);return e[_n]!=null&&r.c(w.XmlNode.of(mke,e[_n]).n(_n)),e[bt]!=null&&r.c(w.XmlNode.of(wBe,String(e[bt])).n(bt)),r},C1e=(e,t)=>{let r=new w.XmlNode(Nd);return r.cc(e,ql),r.cc(e,ob),r.cc(e,jl),r.cc(e,Cb),r.cc(e,_b),r},_1e=(e,t)=>{let r=new w.XmlNode(wd);return r.cc(e,ql),r.cc(e,jl),r},b1e=(e,t)=>{let r=new w.XmlNode(Td);return e[_e]!=null&&r.c(w.XmlNode.of(TBe,e[_e]).n(_e)),r},v1e=(e,t)=>{let r=new w.XmlNode(IBe);return r.cc(e,vb),r.l(e,"Rules","Rule",()=>w1e(e[yo])),r},A1e=(e,t)=>{let r=new w.XmlNode(LBe);return r.cc(e,en),e[cd]!=null&&r.c(w.XmlNode.of(cd,String(e[cd])).n(cd)),r.cc(e,pe),e[je]!=null&&r.c(I1e(e[je]).n(je)),e[_e]!=null&&r.c(w.XmlNode.of(kBe,e[_e]).n(_e)),e[kd]!=null&&r.c(K1e(e[kd]).n(kd)),e[Ed]!=null&&r.c(mNe(e[Ed]).n(Ed)),e[Fn]!=null&&r.c(uNe(e[Fn]).n(Fn)),e[pd]!=null&&r.c(lNe(e[pd]).n(pd)),r},x1e=(e,t)=>{let r=new w.XmlNode(OBe);return r.cc(e,pe),r.l(e,"Tags","Tag",()=>Vd(e[Vs])),r},I1e=(e,t)=>{let r=new w.XmlNode(DBe);return r.cc(e,pe),e[ct]!=null&&r.c(pp(e[ct]).n(ct)),e[Pr]!=null&&r.c(x1e(e[Pr]).n(Pr)),r},w1e=(e,t)=>e.filter(r=>r!=null).map(r=>A1e(r).n(qn)),T1e=(e,t)=>{let r=new w.XmlNode(Rd);return e[_e]!=null&&r.c(w.XmlNode.of(qBe,e[_e]).n(_e)),e[ap]!=null&&r.c(OX(e[ap]).n(ap)),r},OX=(e,t)=>{let r=new w.XmlNode(VBe);return e[ad]!=null&&r.c(w.XmlNode.of(ad,String(e[ad])).n(ad)),r},R1e=(e,t)=>{let r=new w.XmlNode(NBe);return r.cc(e,yb),r},N1e=(e,t)=>{let r=new w.XmlNode(bb);return e[$D]!=null&&r.c(w.XmlNode.of(hke,String(e[$D])).n($D)),r},P1e=(e,t)=>{let r=new w.XmlNode(FBe);return e[bt]!=null&&r.c(w.XmlNode.of(bt,String(e[bt])).n(bt)),e[sb]!=null&&r.c(SNe(e[sb]).n(sb)),e[bi]!=null&&r.c(w.XmlNode.of(BBe,e[bi]).n(bi)),r.cc(e,_Y),r.cc(e,dke),e[xb]!=null&&r.c(M1e(e[xb]).n(xb)),e[pb]!=null&&r.c(u1e(e[pb]).n(pb)),r},O1e=(e,t)=>{let r=new w.XmlNode(tv);return e[hd]!=null&&r.c(eNe(e[hd]).n(hd)),e[Nd]!=null&&r.c(C1e(e[Nd]).n(Nd)),r},D1e=(e,t)=>e.filter(r=>r!=null).map(r=>O1e(r).n(tv)),k1e=(e,t)=>{let r=new w.XmlNode(GBe);return r.l(e,"FilterRules","FilterRule",()=>ENe(e[Nk])),r},B1e=(e,t)=>{let r=new w.XmlNode(WBe);return r.cc(e,tx),e[pe]!=null&&r.c(w.XmlNode.of(Gke,e[pe]).n(pe)),e[ka]!=null&&r.c(dNe(e[ka]).n(ka)),e[UD]!=null&&r.c(w.XmlNode.of(hBe,e[UD]).n(UD)),r.lc(e,"AccessControlList","AccessControlList",()=>TX(e[ud])),e[Bd]!=null&&r.c(rB(e[Bd]).n(Bd)),r.lc(e,"UserMetadata","UserMetadata",()=>iPe(e[o2e])),r.cc(e,ut),r},L1e=(e,t)=>{let r=new w.XmlNode(wb);return e[Fc]!=null&&r.c(w.XmlNode.of(e2e,e[Fc]).n(Fc)),e[go]!=null&&r.c(w.XmlNode.of(t2e,e[go]).n(go)),r},F1e=(e,t)=>{let r=new w.XmlNode(Ib);return e[eb]!=null&&r.c(w.XmlNode.of(eb,String(e[eb])).n(eb)),e[X_]!=null&&r.c(w.XmlNode.of(X_,String(e[X_])).n(X_)),r},M1e=(e,t)=>{let r=new w.XmlNode(xb);return e[Cd]!=null&&r.c(RX(e[Cd]).n(Cd)),r.cc(e,nY),r.cc(e,sY),e[xd]!=null&&r.c(NX(e[xd]).n(xd)),r},U1e=(e,t)=>{let r=new w.XmlNode(YBe);return e[np]!=null&&r.c(w.XmlNode.of(Hs,e[np]).n(np)),e[Jh]!=null&&r.c(w.XmlNode.of(bs,e[Jh]).n(Jh)),r},q1e=(e,t)=>{let r=new w.XmlNode(QBe);return r.l(e,"Rules","Rule",()=>H1e(e[yo])),r},V1e=(e,t)=>{let r=new w.XmlNode(ZBe);return e[Ph]!=null&&r.c(U1e(e[Ph]).n(Ph)),e[Nr]!=null&&r.c(w.XmlNode.of(Nr,String(e[Nr])).n(Nr)),r},H1e=(e,t)=>e.filter(r=>r!=null).map(r=>V1e(r).n(qn)),j1e=(e,t)=>new w.XmlNode(Dd),K1e=(e,t)=>{let r=new w.XmlNode(kd);return e[Od]!=null&&r.c($1e(e[Od]).n(Od)),e[Td]!=null&&r.c(b1e(e[Td]).n(Td)),r},z1e=(e,t)=>{let r=new w.XmlNode(rv);return e[Wh]!=null&&r.c(w.XmlNode.of(bs,e[Wh]).n(Wh)),r},$1e=(e,t)=>{let r=new w.XmlNode(Od);return e[_e]!=null&&r.c(w.XmlNode.of($Be,e[_e]).n(_e)),r},G1e=(e,t)=>new w.XmlNode(nv),W1e=(e,t)=>{let r=new w.XmlNode(Pd);return e[qh]!=null&&r.c(J1e(e[qh]).n(qh)),r},J1e=(e,t)=>{let r=new w.XmlNode(HBe);return e[Zh]!=null&&r.c(w.XmlNode.of(jBe,e[Zh]).n(Zh)),e[Fn]!=null&&r.c(zRe(e[Fn]).n(Fn)),r},pp=(e,t)=>{let r=new w.XmlNode(ct);return e[et]!=null&&r.c(w.XmlNode.of(dB,e[et]).n(et)),r.cc(e,Vi),r},rB=(e,t)=>{let r=new w.XmlNode(Bd);return r.lc(e,"TagSet","TagSet",()=>Vd(e[Ko])),r},Vd=(e,t)=>e.filter(r=>r!=null).map(r=>pp(r).n(ct)),X1e=(e,t)=>{let r=new w.XmlNode(n2e);if(e[qi]!=null){let n=wX(e[qi]).n(qi);n.a("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),r.c(n)}return e[Ba]!=null&&r.c(w.XmlNode.of(zDe,e[Ba]).n(Ba)),r},Y1e=(e,t)=>e.filter(r=>r!=null).map(r=>X1e(r).n(Uc)),Q1e=(e,t)=>{let r=new w.XmlNode(Ld);return e[Dd]!=null&&r.c(j1e(e[Dd]).n(Dd)),e[Id]!=null&&r.c(g1e(e[Id]).n(Id)),r},Z1e=(e,t)=>{let r=new w.XmlNode(Wk);return e[bt]!=null&&r.c(w.XmlNode.of(Dke,String(e[bt])).n(bt)),e[Dc]!=null&&r.c(w.XmlNode.of(Pke,e[Dc]).n(Dc)),r},ePe=(e,t)=>e.filter(r=>r!=null).map(r=>Z1e(r).n(qn)),tPe=(e,t)=>{let r=new w.XmlNode(zk);return e[Ke]!=null&&r.c(w.XmlNode.of(uB,e[Ke]).n(Ke)),e[Rb]!=null&&r.c(w.XmlNode.of(Rb,e[Rb]).n(Jk)),r.l(e,"Events","Event",()=>Zk(e[Mc])),e[je]!=null&&r.c(tB(e[je]).n(je)),r},rPe=(e,t)=>e.filter(r=>r!=null).map(r=>tPe(r).n(qn)),nPe=(e,t)=>{let r=new w.XmlNode(Yk);return e[ri]!=null&&r.c(w.XmlNode.of(ri,u.serializeDateTime(e[ri]).toString()).n(ri)),e[bt]!=null&&r.c(w.XmlNode.of(bt,String(e[bt])).n(bt)),e[ut]!=null&&r.c(w.XmlNode.of(CY,e[ut]).n(ut)),r},sPe=(e,t)=>e.filter(r=>r!=null).map(r=>nPe(r).n(qn)),iPe=(e,t)=>e.filter(r=>r!=null).map(r=>WNe(r).n(aY)),oPe=(e,t)=>{let r=new w.XmlNode(a2e);return e[fb]!=null&&r.c(w.XmlNode.of(fb,e[fb]).n(Lk)),e[_e]!=null&&r.c(w.XmlNode.of(JDe,e[_e]).n(_e)),r},aPe=(e,t)=>{let r=new w.XmlNode(c2e);return e[yd]!=null&&r.c(hNe(e[yd]).n(yd)),e[Sd]!=null&&r.c(_Ne(e[Sd]).n(Sd)),e[wd]!=null&&r.c(_1e(e[wd]).n(wd)),r.lc(e,"RoutingRules","RoutingRules",()=>D1e(e[Th])),r},cPe=(e,t)=>{let r={};return e[nd]!=null&&(r[nd]=u.strictParseInt32(e[nd])),r},lPe=(e,t)=>{let r={};return e[qt]!=null&&(r[qt]=u.expectString(e[qt])),r},uPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>u.expectString(r)),dPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>u.expectString(r)),fPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>u.expectString(r)),hPe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),String(e.Tag).trim()===""?r[Vs]=[]:e[ct]!=null&&(r[Vs]=Hd(u.getArrayIfSingleItem(e[ct]))),r},DX=(e,t)=>{let r={};return e[Ke]!=null&&(r[Ke]=u.expectString(e[Ke])),String(e.Filter).trim()===""||e[je]!=null&&(r[je]=gPe(u.expectUnion(e[je]))),e[Pd]!=null&&(r[Pd]=EDe(e[Pd])),r},pPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>DX(r)),mPe=(e,t)=>{let r={};return e[mo]!=null&&(r[mo]=yPe(e[mo])),r},gPe=(e,t)=>e[pe]!=null?{Prefix:u.expectString(e[pe])}:e[ct]!=null?{Tag:mp(e[ct])}:e[Pr]!=null?{And:hPe(e[Pr])}:{$unknown:Object.entries(e)[0]},yPe=(e,t)=>{let r={};return e[ao]!=null&&(r[ao]=u.expectString(e[ao])),e[Dh]!=null&&(r[Dh]=u.expectString(e[Dh])),e[Tt]!=null&&(r[Tt]=u.expectString(e[Tt])),e[pe]!=null&&(r[pe]=u.expectString(e[pe])),r},EPe=(e,t)=>{let r={};return e[Gr]!=null&&(r[Gr]=u.expectString(e[Gr])),e[qD]!=null&&(r[qD]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[qD]))),e[Ly]!=null&&(r[Ly]=u.expectString(e[Ly])),e[By]!=null&&(r[By]=u.expectString(e[By])),r},kX=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>EPe(r)),SPe=(e,t)=>{let r={};return e[Cr]!=null&&(r[Cr]=u.expectString(e[Cr])),e[_r]!=null&&(r[_r]=u.expectString(e[_r])),e[br]!=null&&(r[br]=u.expectString(e[br])),e[vr]!=null&&(r[vr]=u.expectString(e[vr])),e[Ar]!=null&&(r[Ar]=u.expectString(e[Ar])),e[xr]!=null&&(r[xr]=u.expectString(e[xr])),r},BX=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>u.expectString(r)),CPe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),r},ex=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>CPe(r)),_Pe=(e,t)=>{let r={};return e[ib]!=null&&(r[ib]=u.expectString(e[ib])),e[lb]!=null&&(r[lb]=u.expectString(e[lb])),r},bPe=(e,t)=>({}),vPe=(e,t)=>{let r={};return e[mr]!=null&&(r[mr]=u.expectString(e[mr])),e[tn]!=null&&(r[tn]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[tn]))),e[xr]!=null&&(r[xr]=u.expectString(e[xr])),e[Cr]!=null&&(r[Cr]=u.expectString(e[Cr])),e[_r]!=null&&(r[_r]=u.expectString(e[_r])),e[br]!=null&&(r[br]=u.expectString(e[br])),e[vr]!=null&&(r[vr]=u.expectString(e[vr])),e[Ar]!=null&&(r[Ar]=u.expectString(e[Ar])),r},APe=(e,t)=>{let r={};return e[mr]!=null&&(r[mr]=u.expectString(e[mr])),e[tn]!=null&&(r[tn]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[tn]))),e[Cr]!=null&&(r[Cr]=u.expectString(e[Cr])),e[_r]!=null&&(r[_r]=u.expectString(e[_r])),e[br]!=null&&(r[br]=u.expectString(e[br])),e[vr]!=null&&(r[vr]=u.expectString(e[vr])),e[Ar]!=null&&(r[Ar]=u.expectString(e[Ar])),r},xPe=(e,t)=>{let r={};return e[en]!=null&&(r[en]=u.expectString(e[en])),String(e.AllowedHeader).trim()===""?r[Sk]=[]:e[Ek]!=null&&(r[Sk]=uPe(u.getArrayIfSingleItem(e[Ek]))),String(e.AllowedMethod).trim()===""?r[_k]=[]:e[Ck]!=null&&(r[_k]=dPe(u.getArrayIfSingleItem(e[Ck]))),String(e.AllowedOrigin).trim()===""?r[vk]=[]:e[bk]!=null&&(r[vk]=fPe(u.getArrayIfSingleItem(e[bk]))),String(e.ExposeHeader).trim()===""?r[wk]=[]:e[Tk]!=null&&(r[wk]=HPe(u.getArrayIfSingleItem(e[Tk]))),e[od]!=null&&(r[od]=u.strictParseInt32(e[od])),r},IPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>xPe(r)),wPe=(e,t)=>{let r={};return e[lo]!=null&&(r[lo]=u.expectString(e[lo])),e[bt]!=null&&(r[bt]=u.strictParseInt32(e[bt])),e[ld]!=null&&(r[ld]=u.strictParseInt32(e[ld])),r},TPe=(e,t)=>{let r={};return e[et]!=null&&(r[et]=u.expectString(e[et])),e[pt]!=null&&(r[pt]=u.expectString(e[pt])),e[zo]!=null&&(r[zo]=u.parseBoolean(e[zo])),e[jD]!=null&&(r[jD]=u.expectString(e[jD])),r},RPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>TPe(r)),NPe=(e,t)=>{let r={};return e[qt]!=null&&(r[qt]=Gl(e[qt])),e[et]!=null&&(r[et]=u.expectString(e[et])),e[pt]!=null&&(r[pt]=u.expectString(e[pt])),e[jh]!=null&&(r[jh]=u.parseBoolean(e[jh])),e[tn]!=null&&(r[tn]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[tn]))),r},PPe=(e,t)=>{let r={};return e[_e]!=null&&(r[_e]=u.expectString(e[_e])),r},OPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>NPe(r)),DPe=(e,t)=>{let r={};return e[Tt]!=null&&(r[Tt]=u.expectString(e[Tt])),e[Oh]!=null&&(r[Oh]=u.expectString(e[Oh])),e[ut]!=null&&(r[ut]=u.expectString(e[ut])),e[dd]!=null&&(r[dd]=lPe(e[dd])),e[Us]!=null&&(r[Us]=BPe(e[Us])),e[Rd]!=null&&(r[Rd]=rDe(e[Rd])),e[vd]!=null&&(r[vd]=EOe(e[vd])),r},kPe=(e,t)=>{let r={};return e[mk]!=null&&(r[mk]=u.expectString(e[mk])),e[Fc]!=null&&(r[Fc]=u.expectString(e[Fc])),e[ip]!=null&&(r[ip]=u.expectString(e[ip])),r},BPe=(e,t)=>{let r={};return e[Sb]!=null&&(r[Sb]=u.expectString(e[Sb])),r},LPe=(e,t)=>({}),FPe=(e,t)=>{let r={};return e[et]!=null&&(r[et]=u.expectString(e[et])),e[pt]!=null&&(r[pt]=u.expectString(e[pt])),e[HD]!=null&&(r[HD]=u.expectString(e[HD])),e[rk]!=null&&(r[rk]=u.expectString(e[rk])),r},nB=(e,t)=>{let r={};return e[rb]!=null&&(r[rb]=u.expectString(e[rb])),e[nb]!=null&&(r[nb]=u.expectString(e[nb])),r},MPe=(e,t)=>{let r={};return e[et]!=null&&(r[et]=u.expectString(e[et])),r},UPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>FPe(r)),qPe=(e,t)=>({}),sB=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>u.expectString(r)),VPe=(e,t)=>{let r={};return e[_e]!=null&&(r[_e]=u.expectString(e[_e])),r},HPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>u.expectString(r)),jPe=(e,t)=>{let r={};return e[Gr]!=null&&(r[Gr]=u.expectString(e[Gr])),e[Vi]!=null&&(r[Vi]=u.expectString(e[Vi])),r},KPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>jPe(r)),zPe=(e,t)=>{let r={};return e[ek]!=null&&(r[ek]=gOe(e[ek])),r},$Pe=(e,t)=>{let r={};return e[tk]!=null&&(r[tk]=yOe(e[tk])),e[_e]!=null&&(r[_e]=u.expectString(e[_e])),e[Go]!=null&&(r[Go]=nB(e[Go])),r},GPe=(e,t)=>{let r={};return e[up]!=null&&(r[s2e]=u.strictParseInt32(e[up])),e[Hl]!=null&&(r[Hl]=u.expectString(e[Hl])),e[Qh]!=null&&(r[Qh]=u.expectString(e[Qh])),e[Bc]!=null&&(r[Bc]=u.strictParseInt32(e[Bc])),e[rr]!=null&&(r[rr]=u.parseBoolean(e[rr])),String(e.Part).trim()===""?r[Uy]=[]:e[ev]!=null&&(r[Uy]=VOe(u.getArrayIfSingleItem(e[ev]))),r},WPe=(e,t)=>{let r={};return e[qi]!=null&&(r[qi]=LX(e[qi])),e[Ba]!=null&&(r[Ba]=u.expectString(e[Ba])),r},LX=(e,t)=>{let r={};return e[$o]!=null&&(r[$o]=u.expectString(e[$o])),e[tb]!=null&&(r[tb]=u.expectString(e[tb])),e[en]!=null&&(r[en]=u.expectString(e[en])),e[Db]!=null&&(r[Db]=u.expectString(e[Db])),e[LJ]!=null&&(r[bi]=u.expectString(e[LJ])),r},FX=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>WPe(r)),JPe=(e,t)=>{let r={};return e[Tb]!=null&&(r[Tb]=u.expectString(e[Tb])),r},MX=(e,t)=>{let r={};return e[en]!=null&&(r[en]=u.expectString(e[en])),e[$o]!=null&&(r[$o]=u.expectString(e[$o])),r},XPe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),String(e.Tag).trim()===""?r[Vs]=[]:e[ct]!=null&&(r[Vs]=Hd(u.getArrayIfSingleItem(e[ct]))),r},UX=(e,t)=>{let r={};return e[Ke]!=null&&(r[Ke]=u.expectString(e[Ke])),e[je]!=null&&(r[je]=QPe(e[je])),e[_e]!=null&&(r[_e]=u.expectString(e[_e])),String(e.Tiering).trim()===""?r[Gk]=[]:e[Wk]!=null&&(r[Gk]=ADe(u.getArrayIfSingleItem(e[Wk]))),r},YPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>UX(r)),QPe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),e[ct]!=null&&(r[ct]=mp(e[ct])),e[Pr]!=null&&(r[Pr]=XPe(e[Pr])),r},qX=(e,t)=>{let r={};return e[Fn]!=null&&(r[Fn]=eOe(e[Fn])),e[id]!=null&&(r[id]=u.parseBoolean(e[id])),e[je]!=null&&(r[je]=rOe(e[je])),e[Ke]!=null&&(r[Ke]=u.expectString(e[Ke])),e[Kh]!=null&&(r[Kh]=u.expectString(e[Kh])),String(e.OptionalFields).trim()===""?r[wh]=[]:e[wh]!=null&&e[wh][Pk]!=null&&(r[wh]=nOe(u.getArrayIfSingleItem(e[wh][Pk]))),e[sp]!=null&&(r[sp]=iOe(e[sp])),r},ZPe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>qX(r)),eOe=(e,t)=>{let r={};return e[mo]!=null&&(r[mo]=sOe(e[mo])),r},tOe=(e,t)=>{let r={};return e[nv]!=null&&(r[Kk]=gDe(e[nv])),e[rv]!=null&&(r[jk]=pDe(e[rv])),r},rOe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),r},nOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>u.expectString(r)),sOe=(e,t)=>{let r={};return e[Nh]!=null&&(r[Nh]=u.expectString(e[Nh])),e[Tt]!=null&&(r[Tt]=u.expectString(e[Tt])),e[ao]!=null&&(r[ao]=u.expectString(e[ao])),e[pe]!=null&&(r[pe]=u.expectString(e[pe])),e[ka]!=null&&(r[ka]=tOe(e[ka])),r},iOe=(e,t)=>{let r={};return e[Hh]!=null&&(r[Hh]=u.expectString(e[Hh])),r},oOe=(e,t)=>{let r={};return e[kc]!=null&&(r[kc]=u.expectString(e[kc])),e[op]!=null&&(r[op]=u.expectString(e[op])),e[Go]!=null&&(r[Go]=nB(e[Go])),e[go]!=null&&(r[go]=u.expectString(e[go])),e[Lc]!=null&&(r[Lc]=u.expectString(e[Lc])),r},aOe=(e,t)=>{let r={};return e[op]!=null&&(r[op]=u.expectString(e[op])),e[Go]!=null&&(r[Go]=nB(e[Go])),e[go]!=null&&(r[go]=u.expectString(e[go])),e[Lc]!=null&&(r[Lc]=u.expectString(e[Lc])),e[La]!=null&&(r[La]=GOe(e[La])),r},cOe=(e,t)=>{let r={};return e[Ke]!=null&&(r[Ke]=u.expectString(e[Ke])),e[Ak]!=null&&(r[ub]=u.expectString(e[Ak])),String(e.Event).trim()===""?r[Mc]=[]:e[Fd]!=null&&(r[Mc]=sB(u.getArrayIfSingleItem(e[Fd]))),e[je]!=null&&(r[je]=iB(e[je])),r},lOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>cOe(r)),uOe=(e,t)=>{let r={};return e[ri]!=null&&(r[ri]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[ri]))),e[bt]!=null&&(r[bt]=u.strictParseInt32(e[bt])),e[sd]!=null&&(r[sd]=u.parseBoolean(e[sd])),r},dOe=(e,t)=>{let r={};return e[_n]!=null&&(r[_n]=uOe(e[_n])),e[en]!=null&&(r[en]=u.expectString(e[en])),e[pe]!=null&&(r[pe]=u.expectString(e[pe])),e[je]!=null&&(r[je]=hOe(e[je])),e[_e]!=null&&(r[_e]=u.expectString(e[_e])),String(e.Transition).trim()===""?r[Xk]=[]:e[Yk]!=null&&(r[Xk]=TDe(u.getArrayIfSingleItem(e[Yk]))),String(e.NoncurrentVersionTransition).trim()===""?r[Fk]=[]:e[Mk]!=null&&(r[Fk]=IOe(u.getArrayIfSingleItem(e[Mk]))),e[Ad]!=null&&(r[Ad]=AOe(e[Ad])),e[fd]!=null&&(r[fd]=cPe(e[fd])),r},fOe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),String(e.Tag).trim()===""?r[Vs]=[]:e[ct]!=null&&(r[Vs]=Hd(u.getArrayIfSingleItem(e[ct]))),e[ho]!=null&&(r[ho]=u.strictParseLong(e[ho])),e[po]!=null&&(r[po]=u.strictParseLong(e[po])),r},hOe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),e[ct]!=null&&(r[ct]=mp(e[ct])),e[ho]!=null&&(r[ho]=u.strictParseLong(e[ho])),e[po]!=null&&(r[po]=u.strictParseLong(e[po])),e[Pr]!=null&&(r[Pr]=fOe(e[Pr])),r},pOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>dOe(r)),mOe=(e,t)=>{let r={};return e[Nb]!=null&&(r[Nb]=u.expectString(e[Nb])),String(e.TargetGrants).trim()===""?r[Rh]=[]:e[Rh]!=null&&e[Rh][Uc]!=null&&(r[Rh]=_De(u.getArrayIfSingleItem(e[Rh][Uc]))),e[Pb]!=null&&(r[Pb]=u.expectString(e[Pb])),e[Ld]!=null&&(r[Ld]=bDe(e[Ld])),r},gOe=(e,t)=>{let r={};return e[KD]!=null&&(r[KD]=kPe(e[KD])),e[YD]!=null&&(r[YD]=aOe(e[YD])),e[JD]!=null&&(r[JD]=oOe(e[JD])),r},yOe=(e,t)=>{let r={};return e[hk]!=null&&(r[hk]=oDe(e[hk])),r},EOe=(e,t)=>{let r={};return e[_e]!=null&&(r[_e]=u.expectString(e[_e])),e[Vh]!=null&&(r[Vh]=jX(e[Vh])),r},SOe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),String(e.Tag).trim()===""?r[Vs]=[]:e[ct]!=null&&(r[Vs]=Hd(u.getArrayIfSingleItem(e[ct]))),e[Oc]!=null&&(r[Oc]=u.expectString(e[Oc])),r},VX=(e,t)=>{let r={};return e[Ke]!=null&&(r[Ke]=u.expectString(e[Ke])),String(e.Filter).trim()===""||e[je]!=null&&(r[je]=_Oe(u.expectUnion(e[je]))),r},COe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>VX(r)),_Oe=(e,t)=>e[pe]!=null?{Prefix:u.expectString(e[pe])}:e[ct]!=null?{Tag:mp(e[ct])}:e[Oc]!=null?{AccessPointArn:u.expectString(e[Oc])}:e[Pr]!=null?{And:SOe(e[Pr])}:{$unknown:Object.entries(e)[0]},bOe=(e,t)=>{let r={};return e[vi]!=null&&(r[vi]=u.expectString(e[vi])),e[et]!=null&&(r[et]=u.expectString(e[et])),e[XD]!=null&&(r[XD]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[XD]))),e[ut]!=null&&(r[ut]=u.expectString(e[ut])),e[qt]!=null&&(r[qt]=Gl(e[qt])),e[$h]!=null&&(r[$h]=MX(e[$h])),e[st]!=null&&(r[st]=u.expectString(e[st])),e[xr]!=null&&(r[xr]=u.expectString(e[xr])),r},vOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>bOe(r)),AOe=(e,t)=>{let r={};return e[uo]!=null&&(r[uo]=u.strictParseInt32(e[uo])),e[fo]!=null&&(r[fo]=u.strictParseInt32(e[fo])),r},xOe=(e,t)=>{let r={};return e[uo]!=null&&(r[uo]=u.strictParseInt32(e[uo])),e[ut]!=null&&(r[ut]=u.expectString(e[ut])),e[fo]!=null&&(r[fo]=u.strictParseInt32(e[fo])),r},IOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>xOe(r)),iB=(e,t)=>{let r={};return e[Hk]!=null&&(r[et]=iDe(e[Hk])),r},wOe=(e,t)=>{let r={};return e[et]!=null&&(r[et]=u.expectString(e[et])),e[tn]!=null&&(r[tn]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[tn]))),e[mr]!=null&&(r[mr]=u.expectString(e[mr])),String(e.ChecksumAlgorithm).trim()===""?r[st]=[]:e[st]!=null&&(r[st]=BX(u.getArrayIfSingleItem(e[st]))),e[xr]!=null&&(r[xr]=u.expectString(e[xr])),e[_s]!=null&&(r[_s]=u.strictParseLong(e[_s])),e[ut]!=null&&(r[ut]=u.expectString(e[ut])),e[qt]!=null&&(r[qt]=Gl(e[qt])),e[tp]!=null&&(r[tp]=KX(e[tp])),r},HX=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>wOe(r)),TOe=(e,t)=>{let r={};return e[mb]!=null&&(r[mb]=u.expectString(e[mb])),e[_i]!=null&&(r[_i]=POe(e[_i])),r},ROe=(e,t)=>{let r={};return e[_e]!=null&&(r[_e]=u.expectString(e[_e])),r},NOe=(e,t)=>{let r={};return e[lo]!=null&&(r[lo]=u.expectString(e[lo])),e[rp]!=null&&(r[rp]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[rp]))),r},POe=(e,t)=>{let r={};return e[md]!=null&&(r[md]=wPe(e[md])),r},OOe=(e,t)=>{let r={};return e[Ci]!=null&&(r[Ci]=u.strictParseInt32(e[Ci])),e[_s]!=null&&(r[_s]=u.strictParseLong(e[_s])),e[Cr]!=null&&(r[Cr]=u.expectString(e[Cr])),e[_r]!=null&&(r[_r]=u.expectString(e[_r])),e[br]!=null&&(r[br]=u.expectString(e[br])),e[vr]!=null&&(r[vr]=u.expectString(e[vr])),e[Ar]!=null&&(r[Ar]=u.expectString(e[Ar])),r},DOe=(e,t)=>{let r={};return e[mr]!=null&&(r[mr]=u.expectString(e[mr])),String(e.ChecksumAlgorithm).trim()===""?r[st]=[]:e[st]!=null&&(r[st]=BX(u.getArrayIfSingleItem(e[st]))),e[xr]!=null&&(r[xr]=u.expectString(e[xr])),e[_s]!=null&&(r[_s]=u.strictParseLong(e[_s])),e[ut]!=null&&(r[ut]=u.expectString(e[ut])),e[et]!=null&&(r[et]=u.expectString(e[et])),e[pt]!=null&&(r[pt]=u.expectString(e[pt])),e[jh]!=null&&(r[jh]=u.parseBoolean(e[jh])),e[tn]!=null&&(r[tn]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[tn]))),e[qt]!=null&&(r[qt]=Gl(e[qt])),e[tp]!=null&&(r[tp]=KX(e[tp])),r},kOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>DOe(r)),Gl=(e,t)=>{let r={};return e[$o]!=null&&(r[$o]=u.expectString(e[$o])),e[en]!=null&&(r[en]=u.expectString(e[en])),r},BOe=(e,t)=>{let r={};return String(e.Rule).trim()===""?r[yo]=[]:e[_i]!=null&&(r[yo]=FOe(u.getArrayIfSingleItem(e[_i]))),r},LOe=(e,t)=>{let r={};return e[Fy]!=null&&(r[Fy]=u.expectString(e[Fy])),r},FOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>LOe(r)),MOe=(e,t)=>{let r={};return e[Ci]!=null&&(r[Ci]=u.strictParseInt32(e[Ci])),e[tn]!=null&&(r[tn]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[tn]))),e[mr]!=null&&(r[mr]=u.expectString(e[mr])),e[_s]!=null&&(r[_s]=u.strictParseLong(e[_s])),e[Cr]!=null&&(r[Cr]=u.expectString(e[Cr])),e[_r]!=null&&(r[_r]=u.expectString(e[_r])),e[br]!=null&&(r[br]=u.expectString(e[br])),e[vr]!=null&&(r[vr]=u.expectString(e[vr])),e[Ar]!=null&&(r[Ar]=u.expectString(e[Ar])),r},UOe=(e,t)=>{let r={};return e[gb]!=null&&(r[gb]=u.expectString(e[gb])),r},qOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>MOe(r)),VOe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>OOe(r)),HOe=(e,t)=>{let r={};return e[GD]!=null&&(r[GD]=u.parseBoolean(e[GD])),r},jOe=(e,t)=>{let r={};return e[Mh]!=null&&(r[Mh]=u.strictParseLong(e[Mh])),e[kh]!=null&&(r[kh]=u.strictParseLong(e[kh])),e[Fh]!=null&&(r[Fh]=u.strictParseLong(e[Fh])),r},KOe=(e,t)=>{let r={};return e[Bh]!=null&&(r[Bh]=u.parseBoolean(e[Bh])),e[zh]!=null&&(r[zh]=u.parseBoolean(e[zh])),e[Lh]!=null&&(r[Lh]=u.parseBoolean(e[Lh])),e[ep]!=null&&(r[ep]=u.parseBoolean(e[ep])),r},zOe=(e,t)=>{let r={};return e[Ke]!=null&&(r[Ke]=u.expectString(e[Ke])),e[Vk]!=null&&(r[Eb]=u.expectString(e[Vk])),String(e.Event).trim()===""?r[Mc]=[]:e[Fd]!=null&&(r[Mc]=sB(u.getArrayIfSingleItem(e[Fd]))),e[je]!=null&&(r[je]=iB(e[je])),r},$Oe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>zOe(r)),GOe=(e,t)=>{let r={};return e[_n]!=null&&(r[_n]=u.expectString(e[_n])),e[bt]!=null&&(r[bt]=u.strictParseInt32(e[bt])),r},WOe=(e,t)=>{let r={};return e[ql]!=null&&(r[ql]=u.expectString(e[ql])),e[ob]!=null&&(r[ob]=u.expectString(e[ob])),e[jl]!=null&&(r[jl]=u.expectString(e[jl])),e[Cb]!=null&&(r[Cb]=u.expectString(e[Cb])),e[_b]!=null&&(r[_b]=u.expectString(e[_b])),r},JOe=(e,t)=>{let r={};return e[ql]!=null&&(r[ql]=u.expectString(e[ql])),e[jl]!=null&&(r[jl]=u.expectString(e[jl])),r},XOe=(e,t)=>{let r={};return e[_e]!=null&&(r[_e]=u.expectString(e[_e])),r},YOe=(e,t)=>{let r={};return e[vb]!=null&&(r[vb]=u.expectString(e[vb])),String(e.Rule).trim()===""?r[yo]=[]:e[_i]!=null&&(r[yo]=tDe(u.getArrayIfSingleItem(e[_i]))),r},QOe=(e,t)=>{let r={};return e[en]!=null&&(r[en]=u.expectString(e[en])),e[cd]!=null&&(r[cd]=u.strictParseInt32(e[cd])),e[pe]!=null&&(r[pe]=u.expectString(e[pe])),e[je]!=null&&(r[je]=eDe(e[je])),e[_e]!=null&&(r[_e]=u.expectString(e[_e])),e[kd]!=null&&(r[kd]=hDe(e[kd])),e[Ed]!=null&&(r[Ed]=VPe(e[Ed])),e[Fn]!=null&&(r[Fn]=DPe(e[Fn])),e[pd]!=null&&(r[pd]=PPe(e[pd])),r},ZOe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),String(e.Tag).trim()===""?r[Vs]=[]:e[ct]!=null&&(r[Vs]=Hd(u.getArrayIfSingleItem(e[ct]))),r},eDe=(e,t)=>{let r={};return e[pe]!=null&&(r[pe]=u.expectString(e[pe])),e[ct]!=null&&(r[ct]=mp(e[ct])),e[Pr]!=null&&(r[Pr]=ZOe(e[Pr])),r},tDe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>QOe(r)),rDe=(e,t)=>{let r={};return e[_e]!=null&&(r[_e]=u.expectString(e[_e])),e[ap]!=null&&(r[ap]=jX(e[ap])),r},jX=(e,t)=>{let r={};return e[ad]!=null&&(r[ad]=u.strictParseInt32(e[ad])),r},KX=(e,t)=>{let r={};return e[WD]!=null&&(r[WD]=u.parseBoolean(e[WD])),e[lk]!=null&&(r[lk]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[lk]))),r},nDe=(e,t)=>{let r={};return e[hd]!=null&&(r[hd]=_Pe(e[hd])),e[Nd]!=null&&(r[Nd]=WOe(e[Nd])),r},sDe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>nDe(r)),iDe=(e,t)=>{let r={};return String(e.FilterRule).trim()===""?r[Nk]=[]:e[Rk]!=null&&(r[Nk]=KPe(u.getArrayIfSingleItem(e[Rk]))),r},oDe=(e,t)=>{let r={};return e[Fc]!=null&&(r[Fc]=u.expectString(e[Fc])),e[go]!=null&&(r[go]=u.expectString(e[go])),e[Lc]!=null&&(r[Lc]=u.expectString(e[Lc])),e[ip]!=null&&(r[ip]=u.expectString(e[ip])),r},aDe=(e,t)=>{let r={};return e[np]!=null&&(r[np]=u.expectString(e[np])),e[Jh]!=null&&(r[Jh]=u.expectString(e[Jh])),r},cDe=(e,t)=>{let r={};return String(e.Rule).trim()===""?r[yo]=[]:e[_i]!=null&&(r[yo]=uDe(u.getArrayIfSingleItem(e[_i]))),r},lDe=(e,t)=>{let r={};return e[Ph]!=null&&(r[Ph]=aDe(e[Ph])),e[Nr]!=null&&(r[Nr]=u.parseBoolean(e[Nr])),r},uDe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>lDe(r)),dDe=(e,t)=>{let r={};return e[FD]!=null&&(r[FD]=u.expectString(e[FD])),e[uk]!=null&&(r[uk]=u.expectString(e[uk])),e[fk]!=null&&(r[fk]=u.expectString(e[fk])),e[_n]!=null&&(r[_n]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[_n]))),r},fDe=(e,t)=>({}),hDe=(e,t)=>{let r={};return e[Od]!=null&&(r[Od]=mDe(e[Od])),e[Td]!=null&&(r[Td]=XOe(e[Td])),r},pDe=(e,t)=>{let r={};return e[Wh]!=null&&(r[Wh]=u.expectString(e[Wh])),r},mDe=(e,t)=>{let r={};return e[_e]!=null&&(r[_e]=u.expectString(e[_e])),r},gDe=(e,t)=>({}),yDe=(e,t)=>{let r={};return e[Mh]!=null&&(r[Mh]=u.strictParseLong(e[Mh])),e[kh]!=null&&(r[kh]=u.strictParseLong(e[kh])),e[Fh]!=null&&(r[Fh]=u.strictParseLong(e[Fh])),r},EDe=(e,t)=>{let r={};return e[qh]!=null&&(r[qh]=SDe(e[qh])),r},SDe=(e,t)=>{let r={};return e[Zh]!=null&&(r[Zh]=u.expectString(e[Zh])),e[Fn]!=null&&(r[Fn]=mPe(e[Fn])),r},mp=(e,t)=>{let r={};return e[et]!=null&&(r[et]=u.expectString(e[et])),e[Vi]!=null&&(r[Vi]=u.expectString(e[Vi])),r},Hd=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>mp(r)),CDe=(e,t)=>{let r={};return e[qi]!=null&&(r[qi]=LX(e[qi])),e[Ba]!=null&&(r[Ba]=u.expectString(e[Ba])),r},_De=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>CDe(r)),bDe=(e,t)=>{let r={};return e[Dd]!=null&&(r[Dd]=fDe(e[Dd])),e[Id]!=null&&(r[Id]=UOe(e[Id])),r},vDe=(e,t)=>{let r={};return e[bt]!=null&&(r[bt]=u.strictParseInt32(e[bt])),e[Dc]!=null&&(r[Dc]=u.expectString(e[Dc])),r},ADe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>vDe(r)),xDe=(e,t)=>{let r={};return e[Ke]!=null&&(r[Ke]=u.expectString(e[Ke])),e[Jk]!=null&&(r[Rb]=u.expectString(e[Jk])),String(e.Event).trim()===""?r[Mc]=[]:e[Fd]!=null&&(r[Mc]=sB(u.getArrayIfSingleItem(e[Fd]))),e[je]!=null&&(r[je]=iB(e[je])),r},IDe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>xDe(r)),wDe=(e,t)=>{let r={};return e[ri]!=null&&(r[ri]=u.expectNonNull(u.parseRfc3339DateTimeWithOffset(e[ri]))),e[bt]!=null&&(r[bt]=u.strictParseInt32(e[bt])),e[ut]!=null&&(r[ut]=u.expectString(e[ut])),r},TDe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>wDe(r)),Z=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),RDe=(e,t)=>u.collectBody(e,t).then(r=>t.utf8Encoder(r)),Pr="And",NDe="AnalyticsAndOperator",yk="AnalyticsConfiguration",gp="ACL",ud="AccessControlList",dJ="AnalyticsConfigurationList",PDe="AccessControlPolicy",dd="AccessControlTranslation",ODe="AccelerateConfiguration",zX="AbortDate",DDe="AnalyticsExportDestination",kDe="AnalyticsFilter",Ek="AllowedHeader",Sk="AllowedHeaders",BDe="AnalyticsId",fd="AbortIncompleteMultipartUpload",Nh="AccountId",FD="AccessKeyId",Ck="AllowedMethod",_k="AllowedMethods",bk="AllowedOrigin",vk="AllowedOrigins",LDe="AccessPointAlias",Oc="AccessPointArn",W_="AllowQuotedRecordDelimiter",oB="AcceptRanges",$X="AbortRuleId",FDe="ArchiveStatus",MDe="AnalyticsS3BucketDestination",UDe="AnalyticsS3ExportFileFormat",Ph="ApplyServerSideEncryptionByDefault",Dc="AccessTier",Oh="Account",Tt="Bucket",By="BucketArn",Dh="BucketAccountId",qDe="BucketAccelerateStatus",cp="BypassGovernanceRetention",VDe="BucketInfo",Nr="BucketKeyEnabled",HDe="BucketLifecycleConfiguration",jDe="BucketLocationConstraint",KDe="BucketLocationName",zDe="BucketLogsPermission",$De="BucketLoggingStatus",GDe="BucketLocationType",tx="BucketName",kh="BytesProcessed",Bh="BlockPublicAcls",Lh="BlockPublicPolicy",Ly="BucketRegion",Fh="BytesReturned",Mh="BytesScanned",WDe="BucketType",JDe="BucketVersioningStatus",Da="Buckets",MD="Credentials",st="ChecksumAlgorithm",UD="CannedACL",XDe="CreateBucketConfiguration",yp="CacheControl",Cr="ChecksumCRC32",_r="ChecksumCRC32C",br="ChecksumCRC64NVME",Ep="ContentDisposition",qD="CreationDate",Sp="ContentEncoding",Ak="CloudFunction",fJ="CloudFunctionConfiguration",Cp="ContentLanguage",Kl="ContentLength",GX="ChecksumMode",rn="ContentMD5",YDe="CompletedMultipartUpload",QDe="CORSConfiguration",xk="CORSRule",Ik="CORSRules",Fs="CommonPrefixes",ZDe="CompletedPart",aB="ContentRange",hJ="ConfirmRemoveSelfBucketAccess",WX="CopySource",vr="ChecksumSHA1",Ar="ChecksumSHA256",JX="CopySourceIfMatch",Jb="CopySourceIfModifiedSince",XX="CopySourceIfNoneMatch",Xb="CopySourceIfUnmodifiedSince",eke="CopySourceRange",YX="CopySourceSSECustomerAlgorithm",QX="CopySourceSSECustomerKey",ZX="CopySourceSSECustomerKeyMD5",Uh="CSV",eY="CopySourceVersionId",tke="CSVInput",rke="CSVOutput",kc="ConfigurationState",xr="ChecksumType",nke="ClientToken",_p="ContentType",ske="CompressionType",pr="ContinuationToken",VD="Checksum",Ul="Contents",HD="Code",ike="Comments",hd="Condition",Ms="Delimiter",nd="DaysAfterInitiation",qh="DataExport",oke="DestinationIfMatch",pJ="DestinationIfModifiedSince",ake="DestinationIfNoneMatch",mJ="DestinationIfUnmodifiedSince",zo="DeleteMarker",pd="DeleteMarkerReplication",cke="DeleteMarkerReplicationStatus",jD="DeleteMarkerVersionId",gJ="DeleteMarkers",$o="DisplayName",lke="DataRedundancy",md="DefaultRetention",KD="DestinationResult",bt="Days",ri="Date",J_="Deleted",uke="Delete",Fn="Destination",dke="Description",Fa="Expires",tb="EmailAddress",gd="EventBridgeConfiguration",le="ExpectedBucketOwner",rb="ErrorCode",Us="EncryptionConfiguration",yd="ErrorDocument",wk="ExposeHeaders",Tk="ExposeHeader",nb="ErrorMessage",sd="ExpiredObjectDeleteMarker",Ed="ExistingObjectReplication",fke="ExistingObjectReplicationStatus",hke="EnableRequestProgress",tY="ExpiresString",rY="ExpectedSourceBucketOwner",pke="ExpirationStatus",mke="ExpirationState",qs="EncodingType",mr="ETag",zD="EncryptionType",Vh="EventThreshold",nY="ExpressionType",ka="Encryption",$D="Enabled",X_="End",Go="Error",yJ="Errors",Fd="Event",Mc="Events",sY="Expression",_n="Expiration",je="Filter",iY="FieldDelimiter",gke="FileHeaderInfo",yke="FetchOwner",Rk="FilterRule",Eke="FilterRuleName",Ske="FilterRuleValue",Nk="FilterRules",Pk="Field",ao="Format",Hh="Frequency",Uc="Grant",bp="GrantFullControl",sb="GlacierJobParameters",vp="GrantRead",Ap="GrantReadACP",cB="GrantWrite",xp="GrantWriteACP",My="Grants",qi="Grantee",ib="HttpErrorCodeReturnedEquals",ql="HostName",ob="HttpRedirectCode",Ke="Id",Ok="InventoryConfiguration",EJ="InventoryConfigurationList",oY="InventoryConfigurationState",Sd="IndexDocument",en="ID",Cke="InventoryDestination",id="IsEnabled",_ke="InventoryEncryption",bke="InventoryFilter",vke="InventoryFormat",Ake="InventoryFrequency",xke="InventoryId",Ike="InventoryIncludedObjectVersions",jh="IsLatest",zy="IfMatch",SJ="IfMatchInitiatedTime",CJ="IfMatchLastModifiedTime",_J="IfMatchSize",Yb="IfModifiedSince",rx="IfNoneMatch",wke="InventoryOptionalField",Kh="IncludedObjectVersions",GD="IsPublic",zh="IgnorePublicAcls",WD="IsRestoreInProgress",Cd="InputSerialization",Tke="InventoryS3BucketDestination",Rke="InventorySchedule",rr="IsTruncated",Nke="IntelligentTieringAndOperator",Pke="IntelligentTieringAccessTier",Dk="IntelligentTieringConfiguration",bJ="IntelligentTieringConfigurationList",JD="InventoryTableConfigurationResult",Oke="InventoryTableConfigurationUpdates",ab="InventoryTableConfiguration",Dke="IntelligentTieringDays",kke="IntelligentTieringFilter",Bke="IntelligentTieringId",Lke="IntelligentTieringStatus",Qb="IfUnmodifiedSince",$h="Initiator",XD="Initiated",Gh="JSON",Fke="JSONInput",Mke="JSONOutput",Uke="JSONType",cb="JournalTableConfiguration",YD="JournalTableConfigurationResult",qke="JournalTableConfigurationUpdates",et="Key",QD="KeyCount",Wh="KeyId",Vke="KmsKeyArn",Vl="KeyMarker",Hke="KMSContext",ZD="KMSKeyId",Jh="KMSMasterKeyID",lb="KeyPrefixEquals",_d="Location",Xh="LocationConstraint",bd="LoggingEnabled",jke="LifecycleExpiration",ub="LambdaFunctionArn",kk="LambdaFunctionConfigurations",Kke="LambdaFunctionConfiguration",zke="LocationInfo",tn="LastModified",Y_="LastModifiedTime",$ke="LocationNameAsString",Gke="LocationPrefix",Wke="LifecycleRule",Jke="LifecycleRuleAndOperator",Xke="LifecycleRuleFilter",Yke="LocationType",db="Marker",Qke="MetricsAndOperator",od="MaxAgeSeconds",Zke="MaxBuckets",Bk="MetricsConfiguration",vJ="MetricsConfigurationList",ek="MetadataConfigurationResult",eBe="MetadataConfiguration",tBe="MetadataDirective",rBe="MaxDirectoryBuckets",Lk="MfaDelete",aY="MetadataEntry",nBe="MetricsFilter",lB="MFA",fb="MFADelete",sBe="MetricsId",co="MaxKeys",iBe="MetadataKey",Zb="MissingMeta",AJ="MpuObjectSize",Bc="MaxParts",oBe="MetricsStatus",aBe="MetadataTableConfiguration",tk="MetadataTableConfigurationResult",cBe="MetadataTableEncryptionConfiguration",hb="MaxUploads",lBe="MetadataValue",vd="Metrics",rk="Message",ad="Minutes",lo="Mode",Gr="Name",uBe="NotificationConfiguration",dBe="NotificationConfigurationFilter",ni="NextContinuationToken",uo="NoncurrentDays",uB="NotificationId",Yh="NextKeyMarker",nk="NextMarker",fo="NewerNoncurrentVersions",Qh="NextPartNumberMarker",sk="NextUploadIdMarker",Ad="NoncurrentVersionExpiration",ik="NextVersionIdMarker",Fk="NoncurrentVersionTransitions",Mk="NoncurrentVersionTransition",qt="Owner",xJ="ObjectAttributes",fBe="OwnershipControls",hBe="ObjectCannedACL",pBe="OwnershipControlsRule",wh="OptionalFields",mBe="ObjectIdentifier",dB="ObjectKey",pb="OutputLocation",gBe="ObjectLockConfiguration",mb="ObjectLockEnabled",IJ="ObjectLockEnabledForBucket",yBe="ObjectLockLegalHold",jd="ObjectLockLegalHoldStatus",Ip="ObjectLockMode",EBe="ObjectLockRetention",cY="ObjectLockRetentionMode",Ma="ObjectLockRetainUntilDate",SBe="ObjectLockRule",Fy="ObjectOwnership",lp="OptionalObjectAttributes",CBe="OwnerOverride",ok="ObjectParts",xd="OutputSerialization",ho="ObjectSizeGreaterThan",lY="ObjectSizeGreaterThanBytes",po="ObjectSizeLessThan",uY="ObjectSizeLessThanBytes",Zh="OutputSchemaVersion",ak="ObjectSize",_Be="ObjectVersionId",bBe="Objects",pe="Prefix",vBe="PublicAccessBlockConfiguration",up="PartsCount",gb="PartitionDateSource",ABe="ParquetInput",Ci="PartNumber",Hl="PartNumberMarker",Id="PartitionedPrefix",yb="Payer",ev="Part",ck="Parquet",Uy="Parts",Ba="Permission",jl="Protocol",cd="Priority",Q_="Quiet",Eb="QueueArn",Uk="QueueConfiguration",qk="QueueConfigurations",dY="QuoteCharacter",fY="QuoteEscapeCharacter",xBe="QuoteFields",Vk="Queue",hY="Range",wd="RedirectAllRequestsTo",Or="RequestCharged",pY="ResponseCacheControl",mY="ResponseContentDisposition",gY="ResponseContentEncoding",yY="ResponseContentLanguage",EY="ResponseContentType",IBe="ReplicationConfiguration",fB="RecordDelimiter",SY="ResponseExpires",wBe="RecordExpirationDays",lk="RestoreExpiryDate",La="RecordExpiration",Sb="ReplicaKmsKeyID",Cb="ReplaceKeyPrefixWith",_b="ReplaceKeyWith",Td="ReplicaModifications",TBe="ReplicaModificationsStatus",RBe="RestoreOutputPath",lr="RequestPayer",ep="RestrictPublicBuckets",NBe="RequestPaymentConfiguration",bb="RequestProgress",PBe="RequestRoute",OBe="ReplicationRuleAndOperator",DBe="ReplicationRuleFilter",kBe="ReplicationRuleStatus",BBe="RestoreRequestType",LBe="ReplicationRule",FBe="RestoreRequest",Th="RoutingRules",tv="RoutingRule",MBe="RenameSource",hB="ReplicationStatus",tp="RestoreStatus",UBe="RequestToken",qBe="ReplicationTimeStatus",VBe="ReplicationTimeValue",Rd="ReplicationTime",rp="RetainUntilDate",pB="Restore",Nd="Redirect",vb="Role",_i="Rule",yo="Rules",_e="Status",Ab="StartAfter",uk="SecretAccessKey",dk="SseAlgorithm",mo="S3BucketDestination",ut="StorageClass",Pd="StorageClassAnalysis",HBe="StorageClassAnalysisDataExport",jBe="StorageClassAnalysisSchemaVersion",wJ="StatusCode",TJ="SkipDestinationValidation",KBe="SourceIfMatch",RJ="SourceIfModifiedSince",zBe="SourceIfNoneMatch",NJ="SourceIfUnmodifiedSince",rv="SSE-KMS",Od="SseKmsEncryptedObjects",$Be="SseKmsEncryptedObjectsStatus",GBe="S3KeyFilter",Hk="S3Key",WBe="S3Location",JBe="SessionMode",XBe="SelectObjectContentRequest",xb="SelectParameters",Dd="SimplePrefix",Ib="ScanRange",nv="SSE-S3",kd="SourceSelectionCriteria",Hs="ServerSideEncryption",np="SSEAlgorithm",YBe="ServerSideEncryptionByDefault",QBe="ServerSideEncryptionConfiguration",Mn="SSECustomerAlgorithm",Jo="SSECustomerKey",Un="SSECustomerKeyMD5",jk="SSEKMS",Wl="SSEKMSEncryptionContext",bs="SSEKMSKeyId",ZBe="ServerSideEncryptionRule",Kk="SSES3",fk="SessionToken",e2e="S3TablesBucketArn",wb="S3TablesDestination",hk="S3TablesDestinationResult",t2e="S3TablesName",pk="S3",sp="Schedule",Z_="Setting",_s="Size",eb="Start",Tb="Suffix",Bd="Tagging",Rb="TopicArn",Lc="TableArn",Nb="TargetBucket",Fc="TableBucketArn",mk="TableBucketType",sv="TagCount",zk="TopicConfiguration",$k="TopicConfigurations",r2e="TaggingDirective",mB="TransitionDefaultMinimumObjectSize",Rh="TargetGrants",n2e="TargetGrant",go="TableName",ip="TableNamespace",Ld="TargetObjectKeyFormat",Pb="TargetPrefix",s2e="TotalPartsCount",Ko="TagSet",i2e="TableSseAlgorithm",CY="TransitionStorageClass",op="TableStatus",ct="Tag",Vs="Tags",_Y="Tier",Gk="Tierings",Wk="Tiering",ap="Time",bY="Token",Jk="Topic",Xk="Transitions",Yk="Transition",bi="Type",PJ="Upload",vi="UploadId",Ob="UploadIdMarker",o2e="UserMetadata",Db="URI",OJ="Uploads",DJ="Version",vY="VersionCount",a2e="VersioningConfiguration",pt="VersionId",kb="VersionIdMarker",Vi="Value",kJ="Versions",c2e="WebsiteConfiguration",BJ="WriteOffsetBytes",$y="WebsiteRedirectLocation",ld="Years",nx="analytics",AY="accelerate",sx="acl",xY="accept-ranges",l2e="attributes",u2e="bucket-region",gB="cors",Gy="cache-control",Wy="content-disposition",Jy="content-encoding",Xy="content-language",Md="content-length",nn="content-md5",IY="content-range",Yy="content-type",Kd="continuation-token",d2e="delete",ix="delimiter",Ud="expires",yB="encryption",ox="encoding-type",ax="etag",wY="expiresstring",f2e="fetch-owner",Eo="id",wp="if-match",EB="if-modified-since",cx="inventory",Qy="if-none-match",lx="intelligent-tiering",SB="if-unmodified-since",TY="key-marker",CB="lifecycle",RY="legal-hold",dp="last-modified",NY="location",PY="logging",h2e="list-type",ux="metrics",_B="metadataConfiguration",p2e="metadataInventoryTable",m2e="metadataJournalTable",bB="metadataTable",g2e="marker",y2e="max-buckets",E2e="max-directory-buckets",qn="member",vB="max-keys",S2e="max-parts",C2e="max-uploads",OY="notification",AB="ownershipControls",DY="object-lock",xB="policy",IB="publicAccessBlock",dx="partNumber",_2e="policyStatus",b2e="part-number-marker",Zy="prefix",wB="replication",v2e="renameObject",kY="requestPayment",BY="range",LY="response-cache-control",FY="response-content-disposition",MY="response-content-encoding",UY="response-content-language",qY="response-content-type",VY="response-expires",A2e="restore",HY="retention",x2e="session",I2e="start-after",w2e="select",T2e="select-type",Tp="tagging",R2e="torrent",jY="uploads",e0="uploadId",N2e="upload-id-marker",KY="versioning",Ai="versionId",Qt='<?xml version="1.0" encoding="UTF-8"?>',P2e="versions",O2e="version-id-marker",TB="website",LJ="xsi:type",Rp="x-amz-acl",iv="x-amz-abort-date",FJ="x-amz-access-point-alias",zY="x-amz-abort-rule-id",D2e="x-amz-archive-status",$Y="x-amz-bucket-arn",RB="x-amz-bypass-governance-retention",k2e="x-amz-bucket-location-name",B2e="x-amz-bucket-location-type",L2e="x-amz-bucket-object-lock-enabled",GY="x-amz-bucket-object-lock-token",F2e="x-amz-bucket-region",NB="x-amz-checksum-algorithm",zd="x-amz-checksum-crc32",$d="x-amz-checksum-crc32c",Gd="x-amz-checksum-crc64nvme",WY="x-amz-checksum-mode",M2e="x-amz-confirm-remove-self-bucket-access",Wd="x-amz-checksum-sha1",Jd="x-amz-checksum-sha256",JY="x-amz-copy-source",XY="x-amz-copy-source-if-match",YY="x-amz-copy-source-if-modified-since",QY="x-amz-copy-source-if-none-match",ZY="x-amz-copy-source-if-unmodified-since",U2e="x-amz-create-session-mode",q2e="x-amz-copy-source-range",eQ="x-amz-copy-source-server-side-encryption-customer-algorithm",tQ="x-amz-copy-source-server-side-encryption-customer-key",rQ="x-amz-copy-source-server-side-encryption-customer-key-md5",nQ="x-amz-copy-source-version-id",Np="x-amz-checksum-type",V2e="x-amz-client-token",zl="x-amz-delete-marker",t0="x-amz-expiration",ue="x-amz-expected-bucket-owner",H2e="x-amz-fwd-error-code",j2e="x-amz-fwd-error-message",K2e="x-amz-fwd-header-accept-ranges",z2e="x-amz-fwd-header-cache-control",$2e="x-amz-fwd-header-content-disposition",G2e="x-amz-fwd-header-content-encoding",W2e="x-amz-fwd-header-content-language",J2e="x-amz-fwd-header-content-range",X2e="x-amz-fwd-header-content-type",Y2e="x-amz-fwd-header-etag",Q2e="x-amz-fwd-header-expires",Z2e="x-amz-fwd-header-last-modified",eLe="x-amz-fwd-header-x-amz-checksum-crc32",tLe="x-amz-fwd-header-x-amz-checksum-crc32c",rLe="x-amz-fwd-header-x-amz-checksum-crc64nvme",nLe="x-amz-fwd-header-x-amz-checksum-sha1",sLe="x-amz-fwd-header-x-amz-checksum-sha256",iLe="x-amz-fwd-header-x-amz-delete-marker",oLe="x-amz-fwd-header-x-amz-expiration",aLe="x-amz-fwd-header-x-amz-missing-meta",cLe="x-amz-fwd-header-x-amz-mp-parts-count",lLe="x-amz-fwd-header-x-amz-object-lock-legal-hold",uLe="x-amz-fwd-header-x-amz-object-lock-mode",dLe="x-amz-fwd-header-x-amz-object-lock-retain-until-date",fLe="x-amz-fwd-header-x-amz-restore",hLe="x-amz-fwd-header-x-amz-request-charged",pLe="x-amz-fwd-header-x-amz-replication-status",mLe="x-amz-fwd-header-x-amz-storage-class",gLe="x-amz-fwd-header-x-amz-server-side-encryption",yLe="x-amz-fwd-header-x-amz-server-side-encryption-aws-kms-key-id",ELe="x-amz-fwd-header-x-amz-server-side-encryption-bucket-key-enabled",SLe="x-amz-fwd-header-x-amz-server-side-encryption-customer-algorithm",CLe="x-amz-fwd-header-x-amz-server-side-encryption-customer-key-md5",_Le="x-amz-fwd-header-x-amz-tagging-count",bLe="x-amz-fwd-header-x-amz-version-id",vLe="x-amz-fwd-status",Pp="x-amz-grant-full-control",Op="x-amz-grant-read",Dp="x-amz-grant-read-acp",PB="x-amz-grant-write",kp="x-amz-grant-write-acp",ALe="x-amz-if-match-initiated-time",xLe="x-amz-if-match-last-modified-time",ILe="x-amz-if-match-size",OB="x-amz-mfa",wLe="x-amz-metadata-directive",ov="x-amz-missing-meta",TLe="x-amz-mp-object-size",RLe="x-amz-max-parts",av="x-amz-mp-parts-count",NLe="x-amz-object-attributes",r0="x-amz-object-lock-legal-hold",n0="x-amz-object-lock-mode",qd="x-amz-object-lock-retain-until-date",PLe="x-amz-object-ownership",DB="x-amz-optional-object-attributes",MJ="x-amz-object-size",OLe="x-amz-part-number-marker",sQ="x-amz-restore",Vr="x-amz-request-charged",DLe="x-amz-restore-output-path",ur="x-amz-request-payer",kLe="x-amz-request-route",BLe="x-amz-rename-source",iQ="x-amz-replication-status",LLe="x-amz-rename-source-if-match",FLe="x-amz-rename-source-if-modified-since",MLe="x-amz-rename-source-if-none-match",ULe="x-amz-rename-source-if-unmodified-since",qLe="x-amz-request-token",s0="x-amz-storage-class",Ir="x-amz-sdk-checksum-algorithm",VLe="x-amz-skip-destination-validation",oQ="x-amz-source-expected-bucket-owner",Hi="x-amz-server-side-encryption",ji="x-amz-server-side-encryption-aws-kms-key-id",un="x-amz-server-side-encryption-bucket-key-enabled",Jl="x-amz-server-side-encryption-context",ss="x-amz-server-side-encryption-customer-algorithm",Xo="x-amz-server-side-encryption-customer-key",is="x-amz-server-side-encryption-customer-key-md5",kB="x-amz-tagging",cv="x-amz-tagging-count",HLe="x-amz-tagging-directive",BB="x-amz-transition-default-minimum-object-size",Ua="x-amz-version-id",jLe="x-amz-write-offset-bytes",i0="x-amz-website-redirect-location",os="x-id",qy=class extends u.Command.classBuilder().ep({...se,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(GJ,$J).ser(Pxe).de(wwe).build(){},KLe=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},zLe=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),$Le=(e,t)=>{let r=Object.assign(uJ.getAwsRegionExtensionConfiguration(e),u.getDefaultExtensionConfiguration(e),gk.getHttpHandlerExtensionConfiguration(e),KLe(e));return t.forEach(n=>n.configure(r)),Object.assign(e,uJ.resolveAwsRegionExtensionConfiguration(r),u.resolveDefaultRuntimeConfig(r),gk.resolveHttpHandlerRuntimeConfig(r),zLe(r))},$l=class extends u.Client{config;constructor(...[t]){let r=sAe.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=oAe(r),s=aJ.resolveUserAgentConfig(n),i=cr.resolveFlexibleChecksumsConfig(s),o=cJ.resolveRetryConfig(i),a=eAe.resolveRegionConfig(o),c=oJ.resolveHostHeaderConfig(a),l=re.resolveEndpointConfig(c),d=tAe.resolveEventStreamSerdeConfig(l),f=lJ.resolveHttpAuthSchemeConfig(d),h=we.resolveS3Config(f,{session:[()=>this,qy]}),p=$Le(h,t?.extensions||[]);this.config=p,this.middlewareStack.use(aJ.getUserAgentPlugin(this.config)),this.middlewareStack.use(cJ.getRetryPlugin(this.config)),this.middlewareStack.use(rAe.getContentLengthPlugin(this.config)),this.middlewareStack.use(oJ.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Qve.getLoggerPlugin(this.config)),this.middlewareStack.use(Zve.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(ee.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:lJ.defaultS3HttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new ee.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials,"aws.auth#sigv4a":m.credentials})})),this.middlewareStack.use(ee.getHttpSigningPlugin(this.config)),this.middlewareStack.use(we.getValidateBucketNamePlugin(this.config)),this.middlewareStack.use(Yve.getAddExpectContinuePlugin(this.config)),this.middlewareStack.use(we.getRegionRedirectMiddlewarePlugin(this.config)),this.middlewareStack.use(we.getS3ExpressPlugin(this.config)),this.middlewareStack.use(we.getS3ExpressHttpSigningPlugin(this.config))}destroy(){super.destroy()}},lv=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","AbortMultipartUpload",{}).n("S3Client","AbortMultipartUploadCommand").f(void 0,void 0).ser(Axe).de(Cwe).build(){},uv=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","CompleteMultipartUpload",{}).n("S3Client","CompleteMultipartUploadCommand").f(qJ,UJ).ser(xxe).de(_we).build(){},dv=class extends u.Command.classBuilder().ep({...se,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"},CopySource:{type:"contextParams",name:"CopySource"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","CopyObject",{}).n("S3Client","CopyObjectCommand").f(HJ,VJ).ser(Ixe).de(bwe).build(){},fv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},DisableAccessPoints:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),iAe.getLocationConstraintPlugin(n)]}).s("AmazonS3","CreateBucket",{}).n("S3Client","CreateBucketCommand").f(void 0,void 0).ser(wxe).de(vwe).build(){},hv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","CreateBucketMetadataConfiguration",{}).n("S3Client","CreateBucketMetadataConfigurationCommand").f(void 0,void 0).ser(Txe).de(Awe).build(){},pv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","CreateBucketMetadataTableConfiguration",{}).n("S3Client","CreateBucketMetadataTableConfigurationCommand").f(void 0,void 0).ser(Rxe).de(xwe).build(){},mv=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","CreateMultipartUpload",{}).n("S3Client","CreateMultipartUploadCommand").f(KJ,jJ).ser(Nxe).de(Iwe).build(){},gv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketAnalyticsConfiguration",{}).n("S3Client","DeleteBucketAnalyticsConfigurationCommand").f(void 0,void 0).ser(Dxe).de(Rwe).build(){},yv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucket",{}).n("S3Client","DeleteBucketCommand").f(void 0,void 0).ser(Oxe).de(Twe).build(){},Ev=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketCors",{}).n("S3Client","DeleteBucketCorsCommand").f(void 0,void 0).ser(kxe).de(Nwe).build(){},Sv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketEncryption",{}).n("S3Client","DeleteBucketEncryptionCommand").f(void 0,void 0).ser(Bxe).de(Pwe).build(){},Cv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketIntelligentTieringConfiguration",{}).n("S3Client","DeleteBucketIntelligentTieringConfigurationCommand").f(void 0,void 0).ser(Lxe).de(Owe).build(){},_v=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketInventoryConfiguration",{}).n("S3Client","DeleteBucketInventoryConfigurationCommand").f(void 0,void 0).ser(Fxe).de(Dwe).build(){},bv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketLifecycle",{}).n("S3Client","DeleteBucketLifecycleCommand").f(void 0,void 0).ser(Mxe).de(kwe).build(){},vv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketMetadataConfiguration",{}).n("S3Client","DeleteBucketMetadataConfigurationCommand").f(void 0,void 0).ser(Uxe).de(Bwe).build(){},Av=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketMetadataTableConfiguration",{}).n("S3Client","DeleteBucketMetadataTableConfigurationCommand").f(void 0,void 0).ser(qxe).de(Lwe).build(){},xv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketMetricsConfiguration",{}).n("S3Client","DeleteBucketMetricsConfigurationCommand").f(void 0,void 0).ser(Vxe).de(Fwe).build(){},Iv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketOwnershipControls",{}).n("S3Client","DeleteBucketOwnershipControlsCommand").f(void 0,void 0).ser(Hxe).de(Mwe).build(){},wv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketPolicy",{}).n("S3Client","DeleteBucketPolicyCommand").f(void 0,void 0).ser(jxe).de(Uwe).build(){},Tv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketReplication",{}).n("S3Client","DeleteBucketReplicationCommand").f(void 0,void 0).ser(Kxe).de(qwe).build(){},Rv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketTagging",{}).n("S3Client","DeleteBucketTaggingCommand").f(void 0,void 0).ser(zxe).de(Vwe).build(){},Nv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketWebsite",{}).n("S3Client","DeleteBucketWebsiteCommand").f(void 0,void 0).ser($xe).de(Hwe).build(){},Pv=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","DeleteObject",{}).n("S3Client","DeleteObjectCommand").f(void 0,void 0).ser(Gxe).de(jwe).build(){},Ov=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","DeleteObjects",{}).n("S3Client","DeleteObjectsCommand").f(void 0,void 0).ser(Wxe).de(Kwe).build(){},Dv=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","DeleteObjectTagging",{}).n("S3Client","DeleteObjectTaggingCommand").f(void 0,void 0).ser(Jxe).de(zwe).build(){},kv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeletePublicAccessBlock",{}).n("S3Client","DeletePublicAccessBlockCommand").f(void 0,void 0).ser(Xxe).de($we).build(){},Bv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketAccelerateConfiguration",{}).n("S3Client","GetBucketAccelerateConfigurationCommand").f(void 0,void 0).ser(Yxe).de(Gwe).build(){},Lv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketAcl",{}).n("S3Client","GetBucketAclCommand").f(void 0,void 0).ser(Qxe).de(Wwe).build(){},Fv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketAnalyticsConfiguration",{}).n("S3Client","GetBucketAnalyticsConfigurationCommand").f(void 0,void 0).ser(Zxe).de(Jwe).build(){},Mv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketCors",{}).n("S3Client","GetBucketCorsCommand").f(void 0,void 0).ser(eIe).de(Xwe).build(){},Uv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketEncryption",{}).n("S3Client","GetBucketEncryptionCommand").f(void 0,XJ).ser(tIe).de(Ywe).build(){},qv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketIntelligentTieringConfiguration",{}).n("S3Client","GetBucketIntelligentTieringConfigurationCommand").f(void 0,void 0).ser(rIe).de(Qwe).build(){},Vv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketInventoryConfiguration",{}).n("S3Client","GetBucketInventoryConfigurationCommand").f(void 0,tX).ser(nIe).de(Zwe).build(){},Hv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketLifecycleConfiguration",{}).n("S3Client","GetBucketLifecycleConfigurationCommand").f(void 0,void 0).ser(sIe).de(eTe).build(){},jv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketLocation",{}).n("S3Client","GetBucketLocationCommand").f(void 0,void 0).ser(iIe).de(tTe).build(){},Kv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketLogging",{}).n("S3Client","GetBucketLoggingCommand").f(void 0,void 0).ser(oIe).de(rTe).build(){},zv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketMetadataConfiguration",{}).n("S3Client","GetBucketMetadataConfigurationCommand").f(void 0,void 0).ser(aIe).de(nTe).build(){},$v=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketMetadataTableConfiguration",{}).n("S3Client","GetBucketMetadataTableConfigurationCommand").f(void 0,void 0).ser(cIe).de(sTe).build(){},Gv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketMetricsConfiguration",{}).n("S3Client","GetBucketMetricsConfigurationCommand").f(void 0,void 0).ser(lIe).de(iTe).build(){},Wv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketNotificationConfiguration",{}).n("S3Client","GetBucketNotificationConfigurationCommand").f(void 0,void 0).ser(uIe).de(oTe).build(){},Jv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketOwnershipControls",{}).n("S3Client","GetBucketOwnershipControlsCommand").f(void 0,void 0).ser(dIe).de(aTe).build(){},Xv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketPolicy",{}).n("S3Client","GetBucketPolicyCommand").f(void 0,void 0).ser(fIe).de(cTe).build(){},Yv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketPolicyStatus",{}).n("S3Client","GetBucketPolicyStatusCommand").f(void 0,void 0).ser(hIe).de(lTe).build(){},Qv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketReplication",{}).n("S3Client","GetBucketReplicationCommand").f(void 0,void 0).ser(pIe).de(uTe).build(){},Zv=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketRequestPayment",{}).n("S3Client","GetBucketRequestPaymentCommand").f(void 0,void 0).ser(mIe).de(dTe).build(){},eA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketTagging",{}).n("S3Client","GetBucketTaggingCommand").f(void 0,void 0).ser(gIe).de(fTe).build(){},tA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketVersioning",{}).n("S3Client","GetBucketVersioningCommand").f(void 0,void 0).ser(yIe).de(hTe).build(){},rA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetBucketWebsite",{}).n("S3Client","GetBucketWebsiteCommand").f(void 0,void 0).ser(EIe).de(pTe).build(){},nA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetObjectAcl",{}).n("S3Client","GetObjectAclCommand").f(void 0,void 0).ser(CIe).de(gTe).build(){},sA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","GetObjectAttributes",{}).n("S3Client","GetObjectAttributesCommand").f(sX,void 0).ser(_Ie).de(yTe).build(){},iA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC64NVME","CRC32","CRC32C","SHA256","SHA1"]}),Wo.getSsecPlugin(n),we.getS3ExpiresMiddlewarePlugin(n)]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").f(nX,rX).ser(SIe).de(mTe).build(){},oA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetObjectLegalHold",{}).n("S3Client","GetObjectLegalHoldCommand").f(void 0,void 0).ser(bIe).de(ETe).build(){},aA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetObjectLockConfiguration",{}).n("S3Client","GetObjectLockConfigurationCommand").f(void 0,void 0).ser(vIe).de(STe).build(){},cA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetObjectRetention",{}).n("S3Client","GetObjectRetentionCommand").f(void 0,void 0).ser(AIe).de(CTe).build(){},lA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetObjectTagging",{}).n("S3Client","GetObjectTaggingCommand").f(void 0,void 0).ser(xIe).de(_Te).build(){},uA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","GetObjectTorrent",{}).n("S3Client","GetObjectTorrentCommand").f(void 0,iX).ser(IIe).de(bTe).build(){},dA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","GetPublicAccessBlock",{}).n("S3Client","GetPublicAccessBlockCommand").f(void 0,void 0).ser(wIe).de(vTe).build(){},fp=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","HeadBucket",{}).n("S3Client","HeadBucketCommand").f(void 0,void 0).ser(TIe).de(ATe).build(){},hp=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n),we.getS3ExpiresMiddlewarePlugin(n)]}).s("AmazonS3","HeadObject",{}).n("S3Client","HeadObjectCommand").f(aX,oX).ser(RIe).de(xTe).build(){},fA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListBucketAnalyticsConfigurations",{}).n("S3Client","ListBucketAnalyticsConfigurationsCommand").f(void 0,void 0).ser(NIe).de(ITe).build(){},hA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListBucketIntelligentTieringConfigurations",{}).n("S3Client","ListBucketIntelligentTieringConfigurationsCommand").f(void 0,void 0).ser(PIe).de(wTe).build(){},pA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListBucketInventoryConfigurations",{}).n("S3Client","ListBucketInventoryConfigurationsCommand").f(void 0,cX).ser(OIe).de(TTe).build(){},mA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListBucketMetricsConfigurations",{}).n("S3Client","ListBucketMetricsConfigurationsCommand").f(void 0,void 0).ser(DIe).de(RTe).build(){},Vy=class extends u.Command.classBuilder().ep(se).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListBuckets",{}).n("S3Client","ListBucketsCommand").f(void 0,void 0).ser(kIe).de(NTe).build(){},Hy=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListDirectoryBuckets",{}).n("S3Client","ListDirectoryBucketsCommand").f(void 0,void 0).ser(BIe).de(PTe).build(){},gA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListMultipartUploads",{}).n("S3Client","ListMultipartUploadsCommand").f(void 0,void 0).ser(LIe).de(OTe).build(){},yA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListObjects",{}).n("S3Client","ListObjectsCommand").f(void 0,void 0).ser(FIe).de(DTe).build(){},jy=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").f(void 0,void 0).ser(MIe).de(kTe).build(){},EA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","ListObjectVersions",{}).n("S3Client","ListObjectVersionsCommand").f(void 0,void 0).ser(UIe).de(BTe).build(){},Ky=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","ListParts",{}).n("S3Client","ListPartsCommand").f(lX,void 0).ser(qIe).de(LTe).build(){},SA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1})]}).s("AmazonS3","PutBucketAccelerateConfiguration",{}).n("S3Client","PutBucketAccelerateConfigurationCommand").f(void 0,void 0).ser(VIe).de(FTe).build(){},CA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketAcl",{}).n("S3Client","PutBucketAclCommand").f(void 0,void 0).ser(HIe).de(MTe).build(){},_A=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketAnalyticsConfiguration",{}).n("S3Client","PutBucketAnalyticsConfigurationCommand").f(void 0,void 0).ser(jIe).de(UTe).build(){},bA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketCors",{}).n("S3Client","PutBucketCorsCommand").f(void 0,void 0).ser(KIe).de(qTe).build(){},vA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketEncryption",{}).n("S3Client","PutBucketEncryptionCommand").f(uX,void 0).ser(zIe).de(VTe).build(){},AA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketIntelligentTieringConfiguration",{}).n("S3Client","PutBucketIntelligentTieringConfigurationCommand").f(void 0,void 0).ser($Ie).de(HTe).build(){},xA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketInventoryConfiguration",{}).n("S3Client","PutBucketInventoryConfigurationCommand").f(dX,void 0).ser(GIe).de(jTe).build(){},IA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","PutBucketLifecycleConfiguration",{}).n("S3Client","PutBucketLifecycleConfigurationCommand").f(void 0,void 0).ser(WIe).de(KTe).build(){},wA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketLogging",{}).n("S3Client","PutBucketLoggingCommand").f(void 0,void 0).ser(JIe).de(zTe).build(){},TA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketMetricsConfiguration",{}).n("S3Client","PutBucketMetricsConfigurationCommand").f(void 0,void 0).ser(XIe).de($Te).build(){},RA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketNotificationConfiguration",{}).n("S3Client","PutBucketNotificationConfigurationCommand").f(void 0,void 0).ser(YIe).de(GTe).build(){},NA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketOwnershipControls",{}).n("S3Client","PutBucketOwnershipControlsCommand").f(void 0,void 0).ser(QIe).de(WTe).build(){},PA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketPolicy",{}).n("S3Client","PutBucketPolicyCommand").f(void 0,void 0).ser(ZIe).de(JTe).build(){},OA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketReplication",{}).n("S3Client","PutBucketReplicationCommand").f(void 0,void 0).ser(ewe).de(XTe).build(){},DA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketRequestPayment",{}).n("S3Client","PutBucketRequestPaymentCommand").f(void 0,void 0).ser(twe).de(YTe).build(){},kA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketTagging",{}).n("S3Client","PutBucketTaggingCommand").f(void 0,void 0).ser(rwe).de(QTe).build(){},BA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketVersioning",{}).n("S3Client","PutBucketVersioningCommand").f(void 0,void 0).ser(nwe).de(ZTe).build(){},LA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketWebsite",{}).n("S3Client","PutBucketWebsiteCommand").f(void 0,void 0).ser(swe).de(eRe).build(){},FA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","PutObjectAcl",{}).n("S3Client","PutObjectAclCommand").f(void 0,void 0).ser(owe).de(rRe).build(){},MA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),we.getCheckContentLengthHeaderPlugin(n),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(hX,fX).ser(iwe).de(tRe).build(){},UA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","PutObjectLegalHold",{}).n("S3Client","PutObjectLegalHoldCommand").f(void 0,void 0).ser(awe).de(nRe).build(){},qA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","PutObjectLockConfiguration",{}).n("S3Client","PutObjectLockConfigurationCommand").f(void 0,void 0).ser(cwe).de(sRe).build(){},VA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","PutObjectRetention",{}).n("S3Client","PutObjectRetentionCommand").f(void 0,void 0).ser(lwe).de(iRe).build(){},HA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","PutObjectTagging",{}).n("S3Client","PutObjectTaggingCommand").f(void 0,void 0).ser(uwe).de(oRe).build(){},jA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutPublicAccessBlock",{}).n("S3Client","PutPublicAccessBlockCommand").f(void 0,void 0).ser(dwe).de(aRe).build(){},KA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","RenameObject",{}).n("S3Client","RenameObjectCommand").f(void 0,void 0).ser(fwe).de(cRe).build(){},zA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),we.getThrow200ExceptionsPlugin(n)]}).s("AmazonS3","RestoreObject",{}).n("S3Client","RestoreObjectCommand").f(EX,void 0).ser(hwe).de(lRe).build(){},$A=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","SelectObjectContent",{eventStream:{output:!0}}).n("S3Client","SelectObjectContentCommand").f(CX,SX).ser(pwe).de(uRe).build(){},GA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","UpdateBucketMetadataInventoryTableConfiguration",{}).n("S3Client","UpdateBucketMetadataInventoryTableConfigurationCommand").f(void 0,void 0).ser(mwe).de(dRe).build(){},WA=class extends u.Command.classBuilder().ep({...se,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","UpdateBucketMetadataJournalTableConfiguration",{}).n("S3Client","UpdateBucketMetadataJournalTableConfigurationCommand").f(void 0,void 0).ser(gwe).de(fRe).build(){},JA=class extends u.Command.classBuilder().ep({...se,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),cr.getFlexibleChecksumsPlugin(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","UploadPart",{}).n("S3Client","UploadPartCommand").f(bX,_X).ser(ywe).de(hRe).build(){},XA=class extends u.Command.classBuilder().ep({...se,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions()),we.getThrow200ExceptionsPlugin(n),Wo.getSsecPlugin(n)]}).s("AmazonS3","UploadPartCopy",{}).n("S3Client","UploadPartCopyCommand").f(AX,vX).ser(Ewe).de(pRe).build(){},YA=class extends u.Command.classBuilder().ep({...se,UseObjectLambdaEndpoint:{type:"staticContextParams",value:!0}}).m(function(t,r,n,s){return[ne.getSerdePlugin(n,this.serialize,this.deserialize),re.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","WriteGetObjectResponse",{}).n("S3Client","WriteGetObjectResponseCommand").f(xX,void 0).ser(Swe).de(mRe).build(){},GLe={AbortMultipartUploadCommand:lv,CompleteMultipartUploadCommand:uv,CopyObjectCommand:dv,CreateBucketCommand:fv,CreateBucketMetadataConfigurationCommand:hv,CreateBucketMetadataTableConfigurationCommand:pv,CreateMultipartUploadCommand:mv,CreateSessionCommand:qy,DeleteBucketCommand:yv,DeleteBucketAnalyticsConfigurationCommand:gv,DeleteBucketCorsCommand:Ev,DeleteBucketEncryptionCommand:Sv,DeleteBucketIntelligentTieringConfigurationCommand:Cv,DeleteBucketInventoryConfigurationCommand:_v,DeleteBucketLifecycleCommand:bv,DeleteBucketMetadataConfigurationCommand:vv,DeleteBucketMetadataTableConfigurationCommand:Av,DeleteBucketMetricsConfigurationCommand:xv,DeleteBucketOwnershipControlsCommand:Iv,DeleteBucketPolicyCommand:wv,DeleteBucketReplicationCommand:Tv,DeleteBucketTaggingCommand:Rv,DeleteBucketWebsiteCommand:Nv,DeleteObjectCommand:Pv,DeleteObjectsCommand:Ov,DeleteObjectTaggingCommand:Dv,DeletePublicAccessBlockCommand:kv,GetBucketAccelerateConfigurationCommand:Bv,GetBucketAclCommand:Lv,GetBucketAnalyticsConfigurationCommand:Fv,GetBucketCorsCommand:Mv,GetBucketEncryptionCommand:Uv,GetBucketIntelligentTieringConfigurationCommand:qv,GetBucketInventoryConfigurationCommand:Vv,GetBucketLifecycleConfigurationCommand:Hv,GetBucketLocationCommand:jv,GetBucketLoggingCommand:Kv,GetBucketMetadataConfigurationCommand:zv,GetBucketMetadataTableConfigurationCommand:$v,GetBucketMetricsConfigurationCommand:Gv,GetBucketNotificationConfigurationCommand:Wv,GetBucketOwnershipControlsCommand:Jv,GetBucketPolicyCommand:Xv,GetBucketPolicyStatusCommand:Yv,GetBucketReplicationCommand:Qv,GetBucketRequestPaymentCommand:Zv,GetBucketTaggingCommand:eA,GetBucketVersioningCommand:tA,GetBucketWebsiteCommand:rA,GetObjectCommand:iA,GetObjectAclCommand:nA,GetObjectAttributesCommand:sA,GetObjectLegalHoldCommand:oA,GetObjectLockConfigurationCommand:aA,GetObjectRetentionCommand:cA,GetObjectTaggingCommand:lA,GetObjectTorrentCommand:uA,GetPublicAccessBlockCommand:dA,HeadBucketCommand:fp,HeadObjectCommand:hp,ListBucketAnalyticsConfigurationsCommand:fA,ListBucketIntelligentTieringConfigurationsCommand:hA,ListBucketInventoryConfigurationsCommand:pA,ListBucketMetricsConfigurationsCommand:mA,ListBucketsCommand:Vy,ListDirectoryBucketsCommand:Hy,ListMultipartUploadsCommand:gA,ListObjectsCommand:yA,ListObjectsV2Command:jy,ListObjectVersionsCommand:EA,ListPartsCommand:Ky,PutBucketAccelerateConfigurationCommand:SA,PutBucketAclCommand:CA,PutBucketAnalyticsConfigurationCommand:_A,PutBucketCorsCommand:bA,PutBucketEncryptionCommand:vA,PutBucketIntelligentTieringConfigurationCommand:AA,PutBucketInventoryConfigurationCommand:xA,PutBucketLifecycleConfigurationCommand:IA,PutBucketLoggingCommand:wA,PutBucketMetricsConfigurationCommand:TA,PutBucketNotificationConfigurationCommand:RA,PutBucketOwnershipControlsCommand:NA,PutBucketPolicyCommand:PA,PutBucketReplicationCommand:OA,PutBucketRequestPaymentCommand:DA,PutBucketTaggingCommand:kA,PutBucketVersioningCommand:BA,PutBucketWebsiteCommand:LA,PutObjectCommand:MA,PutObjectAclCommand:FA,PutObjectLegalHoldCommand:UA,PutObjectLockConfigurationCommand:qA,PutObjectRetentionCommand:VA,PutObjectTaggingCommand:HA,PutPublicAccessBlockCommand:jA,RenameObjectCommand:KA,RestoreObjectCommand:zA,SelectObjectContentCommand:$A,UpdateBucketMetadataInventoryTableConfigurationCommand:GA,UpdateBucketMetadataJournalTableConfigurationCommand:WA,UploadPartCommand:JA,UploadPartCopyCommand:XA,WriteGetObjectResponseCommand:YA},QA=class extends $l{};u.createAggregatedClient(GLe,QA);var WLe=ee.createPaginator($l,Vy,"ContinuationToken","ContinuationToken","MaxBuckets"),JLe=ee.createPaginator($l,Hy,"ContinuationToken","ContinuationToken","MaxDirectoryBuckets"),XLe=ee.createPaginator($l,jy,"ContinuationToken","NextContinuationToken","MaxKeys"),YLe=ee.createPaginator($l,Ky,"PartNumberMarker","NextPartNumberMarker","MaxParts"),aQ=async(e,t)=>{let r;try{return r=await e.send(new fp(t)),{state:ln.WaiterState.SUCCESS,reason:r}}catch(n){if(r=n,n.name&&n.name=="NotFound")return{state:ln.WaiterState.RETRY,reason:r}}return{state:ln.WaiterState.RETRY,reason:r}},QLe=async(e,t)=>{let r={minDelay:5,maxDelay:120};return ln.createWaiter({...r,...e},t,aQ)},ZLe=async(e,t)=>{let r={minDelay:5,maxDelay:120},n=await ln.createWaiter({...r,...e},t,aQ);return ln.checkExceptions(n)},cQ=async(e,t)=>{let r;try{r=await e.send(new fp(t))}catch(n){if(r=n,n.name&&n.name=="NotFound")return{state:ln.WaiterState.SUCCESS,reason:r}}return{state:ln.WaiterState.RETRY,reason:r}},e3e=async(e,t)=>{let r={minDelay:5,maxDelay:120};return ln.createWaiter({...r,...e},t,cQ)},t3e=async(e,t)=>{let r={minDelay:5,maxDelay:120},n=await ln.createWaiter({...r,...e},t,cQ);return ln.checkExceptions(n)},lQ=async(e,t)=>{let r;try{return r=await e.send(new hp(t)),{state:ln.WaiterState.SUCCESS,reason:r}}catch(n){if(r=n,n.name&&n.name=="NotFound")return{state:ln.WaiterState.RETRY,reason:r}}return{state:ln.WaiterState.RETRY,reason:r}},r3e=async(e,t)=>{let r={minDelay:5,maxDelay:120};return ln.createWaiter({...r,...e},t,lQ)},n3e=async(e,t)=>{let r={minDelay:5,maxDelay:120},n=await ln.createWaiter({...r,...e},t,lQ);return ln.checkExceptions(n)},uQ=async(e,t)=>{let r;try{r=await e.send(new hp(t))}catch(n){if(r=n,n.name&&n.name=="NotFound")return{state:ln.WaiterState.SUCCESS,reason:r}}return{state:ln.WaiterState.RETRY,reason:r}},s3e=async(e,t)=>{let r={minDelay:5,maxDelay:120};return ln.createWaiter({...r,...e},t,uQ)},i3e=async(e,t)=>{let r={minDelay:5,maxDelay:120},n=await ln.createWaiter({...r,...e},t,uQ);return ln.checkExceptions(n)};Object.defineProperty(I,"$Command",{enumerable:!0,get:function(){return u.Command}});Object.defineProperty(I,"__Client",{enumerable:!0,get:function(){return u.Client}});I.AbortMultipartUploadCommand=lv;I.AnalyticsS3ExportFileFormat=OAe;I.ArchiveStatus=uxe;I.BucketAccelerateStatus=lAe;I.BucketAlreadyExists=Fb;I.BucketAlreadyOwnedByYou=Mb;I.BucketCannedACL=bAe;I.BucketLocationConstraint=IAe;I.BucketLogsPermission=jAe;I.BucketType=AAe;I.BucketVersioningStatus=nxe;I.ChecksumAlgorithm=gAe;I.ChecksumMode=oxe;I.ChecksumType=hAe;I.CompleteMultipartUploadCommand=uv;I.CompleteMultipartUploadOutputFilterSensitiveLog=UJ;I.CompleteMultipartUploadRequestFilterSensitiveLog=qJ;I.CompressionType=Exe;I.CopyObjectCommand=dv;I.CopyObjectOutputFilterSensitiveLog=VJ;I.CopyObjectRequestFilterSensitiveLog=HJ;I.CreateBucketCommand=fv;I.CreateBucketMetadataConfigurationCommand=hv;I.CreateBucketMetadataTableConfigurationCommand=pv;I.CreateMultipartUploadCommand=mv;I.CreateMultipartUploadOutputFilterSensitiveLog=jJ;I.CreateMultipartUploadRequestFilterSensitiveLog=KJ;I.CreateSessionCommand=qy;I.CreateSessionOutputFilterSensitiveLog=$J;I.CreateSessionRequestFilterSensitiveLog=GJ;I.DataRedundancy=vAe;I.DeleteBucketAnalyticsConfigurationCommand=gv;I.DeleteBucketCommand=yv;I.DeleteBucketCorsCommand=Ev;I.DeleteBucketEncryptionCommand=Sv;I.DeleteBucketIntelligentTieringConfigurationCommand=Cv;I.DeleteBucketInventoryConfigurationCommand=_v;I.DeleteBucketLifecycleCommand=bv;I.DeleteBucketMetadataConfigurationCommand=vv;I.DeleteBucketMetadataTableConfigurationCommand=Av;I.DeleteBucketMetricsConfigurationCommand=xv;I.DeleteBucketOwnershipControlsCommand=Iv;I.DeleteBucketPolicyCommand=wv;I.DeleteBucketReplicationCommand=Tv;I.DeleteBucketTaggingCommand=Rv;I.DeleteBucketWebsiteCommand=Nv;I.DeleteMarkerReplicationStatus=WAe;I.DeleteObjectCommand=Pv;I.DeleteObjectTaggingCommand=Dv;I.DeleteObjectsCommand=Ov;I.DeletePublicAccessBlockCommand=kv;I.EncodingType=dxe;I.EncryptionFilterSensitiveLog=pX;I.EncryptionTypeMismatch=jb;I.Event=$Ae;I.ExistingObjectReplicationStatus=YAe;I.ExpirationState=NAe;I.ExpirationStatus=VAe;I.ExpressionType=yxe;I.FileHeaderInfo=Sxe;I.FilterRuleName=GAe;I.GetBucketAccelerateConfigurationCommand=Bv;I.GetBucketAclCommand=Lv;I.GetBucketAnalyticsConfigurationCommand=Fv;I.GetBucketCorsCommand=Mv;I.GetBucketEncryptionCommand=Uv;I.GetBucketEncryptionOutputFilterSensitiveLog=XJ;I.GetBucketIntelligentTieringConfigurationCommand=qv;I.GetBucketInventoryConfigurationCommand=Vv;I.GetBucketInventoryConfigurationOutputFilterSensitiveLog=tX;I.GetBucketLifecycleConfigurationCommand=Hv;I.GetBucketLocationCommand=jv;I.GetBucketLoggingCommand=Kv;I.GetBucketMetadataConfigurationCommand=zv;I.GetBucketMetadataTableConfigurationCommand=$v;I.GetBucketMetricsConfigurationCommand=Gv;I.GetBucketNotificationConfigurationCommand=Wv;I.GetBucketOwnershipControlsCommand=Jv;I.GetBucketPolicyCommand=Xv;I.GetBucketPolicyStatusCommand=Yv;I.GetBucketReplicationCommand=Qv;I.GetBucketRequestPaymentCommand=Zv;I.GetBucketTaggingCommand=eA;I.GetBucketVersioningCommand=tA;I.GetBucketWebsiteCommand=rA;I.GetObjectAclCommand=nA;I.GetObjectAttributesCommand=sA;I.GetObjectAttributesRequestFilterSensitiveLog=sX;I.GetObjectCommand=iA;I.GetObjectLegalHoldCommand=oA;I.GetObjectLockConfigurationCommand=aA;I.GetObjectOutputFilterSensitiveLog=rX;I.GetObjectRequestFilterSensitiveLog=nX;I.GetObjectRetentionCommand=cA;I.GetObjectTaggingCommand=lA;I.GetObjectTorrentCommand=uA;I.GetObjectTorrentOutputFilterSensitiveLog=iX;I.GetPublicAccessBlockCommand=dA;I.HeadBucketCommand=fp;I.HeadObjectCommand=hp;I.HeadObjectOutputFilterSensitiveLog=oX;I.HeadObjectRequestFilterSensitiveLog=aX;I.IdempotencyParameterMismatch=Gb;I.IntelligentTieringAccessTier=BAe;I.IntelligentTieringStatus=kAe;I.InvalidObjectState=qb;I.InvalidRequest=Kb;I.InvalidWriteOffset=zb;I.InventoryConfigurationFilterSensitiveLog=ZA;I.InventoryConfigurationState=TAe;I.InventoryDestinationFilterSensitiveLog=eX;I.InventoryEncryptionFilterSensitiveLog=QJ;I.InventoryFormat=LAe;I.InventoryFrequency=UAe;I.InventoryIncludedObjectVersions=FAe;I.InventoryOptionalField=MAe;I.InventoryS3BucketDestinationFilterSensitiveLog=ZJ;I.JSONType=Cxe;I.ListBucketAnalyticsConfigurationsCommand=fA;I.ListBucketIntelligentTieringConfigurationsCommand=hA;I.ListBucketInventoryConfigurationsCommand=pA;I.ListBucketInventoryConfigurationsOutputFilterSensitiveLog=cX;I.ListBucketMetricsConfigurationsCommand=mA;I.ListBucketsCommand=Vy;I.ListDirectoryBucketsCommand=Hy;I.ListMultipartUploadsCommand=gA;I.ListObjectVersionsCommand=EA;I.ListObjectsCommand=yA;I.ListObjectsV2Command=jy;I.ListPartsCommand=Ky;I.ListPartsRequestFilterSensitiveLog=lX;I.LocationType=xAe;I.MFADelete=mxe;I.MFADeleteStatus=rxe;I.MetadataDirective=yAe;I.MetricsStatus=JAe;I.NoSuchBucket=Ub;I.NoSuchKey=Vb;I.NoSuchUpload=Bb;I.NotFound=Hb;I.ObjectAlreadyInActiveTierError=Wb;I.ObjectAttributes=axe;I.ObjectCannedACL=mAe;I.ObjectLockEnabled=cxe;I.ObjectLockLegalHoldStatus=EAe;I.ObjectLockMode=SAe;I.ObjectLockRetentionMode=lxe;I.ObjectNotInActiveTierError=Lb;I.ObjectOwnership=wAe;I.ObjectStorageClass=fxe;I.ObjectVersionStorageClass=pxe;I.OptionalObjectAttributes=hxe;I.OutputLocationFilterSensitiveLog=gX;I.OwnerOverride=fAe;I.PartitionDateSource=KAe;I.Payer=txe;I.Permission=dAe;I.Protocol=sxe;I.PutBucketAccelerateConfigurationCommand=SA;I.PutBucketAclCommand=CA;I.PutBucketAnalyticsConfigurationCommand=_A;I.PutBucketCorsCommand=bA;I.PutBucketEncryptionCommand=vA;I.PutBucketEncryptionRequestFilterSensitiveLog=uX;I.PutBucketIntelligentTieringConfigurationCommand=AA;I.PutBucketInventoryConfigurationCommand=xA;I.PutBucketInventoryConfigurationRequestFilterSensitiveLog=dX;I.PutBucketLifecycleConfigurationCommand=IA;I.PutBucketLoggingCommand=wA;I.PutBucketMetricsConfigurationCommand=TA;I.PutBucketNotificationConfigurationCommand=RA;I.PutBucketOwnershipControlsCommand=NA;I.PutBucketPolicyCommand=PA;I.PutBucketReplicationCommand=OA;I.PutBucketRequestPaymentCommand=DA;I.PutBucketTaggingCommand=kA;I.PutBucketVersioningCommand=BA;I.PutBucketWebsiteCommand=LA;I.PutObjectAclCommand=FA;I.PutObjectCommand=MA;I.PutObjectLegalHoldCommand=UA;I.PutObjectLockConfigurationCommand=qA;I.PutObjectOutputFilterSensitiveLog=fX;I.PutObjectRequestFilterSensitiveLog=hX;I.PutObjectRetentionCommand=VA;I.PutObjectTaggingCommand=HA;I.PutPublicAccessBlockCommand=jA;I.QuoteFields=_xe;I.RenameObjectCommand=KA;I.ReplicaModificationsStatus=QAe;I.ReplicationRuleStatus=exe;I.ReplicationStatus=ixe;I.ReplicationTimeStatus=XAe;I.RequestCharged=aAe;I.RequestPayer=cAe;I.RestoreObjectCommand=zA;I.RestoreObjectRequestFilterSensitiveLog=EX;I.RestoreRequestFilterSensitiveLog=yX;I.RestoreRequestType=bxe;I.S3=QA;I.S3Client=$l;I.S3LocationFilterSensitiveLog=mX;I.S3ServiceException=ns;I.S3TablesBucketType=zAe;I.SSEKMSFilterSensitiveLog=YJ;I.SelectObjectContentCommand=$A;I.SelectObjectContentEventStreamFilterSensitiveLog=vxe;I.SelectObjectContentOutputFilterSensitiveLog=SX;I.SelectObjectContentRequestFilterSensitiveLog=CX;I.ServerSideEncryption=pAe;I.ServerSideEncryptionByDefaultFilterSensitiveLog=WJ;I.ServerSideEncryptionConfigurationFilterSensitiveLog=Qk;I.ServerSideEncryptionRuleFilterSensitiveLog=JJ;I.SessionCredentialsFilterSensitiveLog=zJ;I.SessionMode=PAe;I.SseKmsEncryptedObjectsStatus=ZAe;I.StorageClass=CAe;I.StorageClassAnalysisSchemaVersion=DAe;I.TableSseAlgorithm=RAe;I.TaggingDirective=_Ae;I.Tier=gxe;I.TooManyParts=$b;I.TransitionDefaultMinimumObjectSize=HAe;I.TransitionStorageClass=qAe;I.Type=uAe;I.UpdateBucketMetadataInventoryTableConfigurationCommand=GA;I.UpdateBucketMetadataJournalTableConfigurationCommand=WA;I.UploadPartCommand=JA;I.UploadPartCopyCommand=XA;I.UploadPartCopyOutputFilterSensitiveLog=vX;I.UploadPartCopyRequestFilterSensitiveLog=AX;I.UploadPartOutputFilterSensitiveLog=_X;I.UploadPartRequestFilterSensitiveLog=bX;I.WriteGetObjectResponseCommand=YA;I.WriteGetObjectResponseRequestFilterSensitiveLog=xX;I.paginateListBuckets=WLe;I.paginateListDirectoryBuckets=JLe;I.paginateListObjectsV2=XLe;I.paginateListParts=YLe;I.waitForBucketExists=QLe;I.waitForBucketNotExists=e3e;I.waitForObjectExists=r3e;I.waitForObjectNotExists=s3e;I.waitUntilBucketExists=ZLe;I.waitUntilBucketNotExists=t3e;I.waitUntilObjectExists=n3e;I.waitUntilObjectNotExists=i3e});var hQ=S(fQ=>{"use strict";var o3e=kE();function a3e(e){let{port:t,query:r}=e,{protocol:n,path:s,hostname:i}=e;n&&n.slice(-1)!==":"&&(n+=":"),t&&(i+=`:${t}`),s&&s.charAt(0)!=="/"&&(s=`/${s}`);let o=r?o3e.buildQueryString(r):"";o&&o[0]!=="?"&&(o=`?${o}`);let a="";if(e.username!=null||e.password!=null){let l=e.username??"",d=e.password??"";a=`${l}:${d}@`}let c="";return e.fragment&&(c=`#${e.fragment}`),`${n}//${a}${i}${s}${o}${c}`}fQ.formatUrl=a3e});var pQ=S(LB=>{"use strict";var c3e=hQ(),l3e=Aa(),u3e=Xt(),d3e=_C(),f3e="UNSIGNED-PAYLOAD",h3e="X-Amz-Content-Sha256",o0=class{signer;constructor(t){let r={service:t.signingName||t.service||"s3",uriEscapePath:t.uriEscapePath||!1,applyChecksum:t.applyChecksum||!1,...t};this.signer=new d3e.SignatureV4MultiRegion(r)}presign(t,{unsignableHeaders:r=new Set,hoistableHeaders:n=new Set,unhoistableHeaders:s=new Set,...i}={}){return this.prepareRequest(t,{unsignableHeaders:r,unhoistableHeaders:s,hoistableHeaders:n}),this.signer.presign(t,{expiresIn:900,unsignableHeaders:r,unhoistableHeaders:s,...i})}presignWithCredentials(t,r,{unsignableHeaders:n=new Set,hoistableHeaders:s=new Set,unhoistableHeaders:i=new Set,...o}={}){return this.prepareRequest(t,{unsignableHeaders:n,unhoistableHeaders:i,hoistableHeaders:s}),this.signer.presignWithCredentials(t,r,{expiresIn:900,unsignableHeaders:n,unhoistableHeaders:i,...o})}prepareRequest(t,{unsignableHeaders:r=new Set,unhoistableHeaders:n=new Set,hoistableHeaders:s=new Set}={}){r.add("content-type"),Object.keys(t.headers).map(c=>c.toLowerCase()).filter(c=>c.startsWith("x-amz-server-side-encryption")).forEach(c=>{s.has(c)||n.add(c)}),t.headers[h3e]=f3e;let i=t.headers.host,o=t.port,a=`${t.hostname}${t.port!=null?":"+o:""}`;(!i||i===t.hostname&&t.port!=null)&&(t.headers.host=a)}},p3e=async(e,t,r={})=>{let n,s;if(typeof e.config.endpointProvider=="function"){let h=(await l3e.getEndpointFromInstructions(t.input,t.constructor,e.config)).properties?.authSchemes?.[0];h?.name==="sigv4a"?s=h?.signingRegionSet?.join(","):s=h?.signingRegion,n=new o0({...e.config,signingName:h?.signingName,region:async()=>s})}else n=new o0(e.config);let i=(f,h)=>async p=>{let{request:m}=p;if(!u3e.HttpRequest.isInstance(m))throw new Error("Request to be presigned is not an valid HTTP request.");delete m.headers["amz-sdk-invocation-id"],delete m.headers["amz-sdk-request"],delete m.headers["x-amz-user-agent"];let E,b={...r,signingRegion:r.signingRegion??h.signing_region??s,signingService:r.signingService??h.signing_service};return h.s3ExpressIdentity?E=await n.presignWithCredentials(m,h.s3ExpressIdentity,b):E=await n.presign(m,b),{response:{},output:{$metadata:{httpStatusCode:200},presigned:E}}},o="presignInterceptMiddleware",a=e.middlewareStack.clone();a.addRelativeTo(i,{name:o,relation:"before",toMiddleware:"awsAuthMiddleware",override:!0});let c=t.resolveMiddleware(a,e.config,{}),{output:l}=await c({input:t.input}),{presigned:d}=l;return c3e.formatUrl(d)};LB.S3RequestPresigner=o0;LB.getSignedUrl=p3e});var qa=S(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.deepExtend=Bp.deepCopy=void 0;function m3e(e){return FB(void 0,e)}Bp.deepCopy=m3e;function FB(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:{let r=t;return new Date(r.getTime())}case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=FB(e[r],t[r]));return e}Bp.deepExtend=FB});var as=S(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.InstanceIdClientErrorCode=Zt.InstallationsClientErrorCode=Zt.MessagingClientErrorCode=Zt.AuthClientErrorCode=Zt.AppErrorCodes=Zt.FirebaseProjectManagementError=Zt.FirebaseMessagingError=Zt.FirebaseInstallationsError=Zt.FirebaseInstanceIdError=Zt.FirebaseFirestoreError=Zt.FirebaseDatabaseError=Zt.FirebaseAuthError=Zt.FirebaseAppError=Zt.PrefixedFirebaseError=Zt.FirebaseError=void 0;var MB=qa(),Xl=class e extends Error{constructor(t){super(t.message),this.errorInfo=t,this.__proto__=e.prototype}get code(){return this.errorInfo?.code}get message(){return this.errorInfo?.message}toJSON(){return{code:this.code,message:this.message}}};Zt.FirebaseError=Xl;var Xd=class e extends Xl{constructor(t,r,n){super({code:`${t}/${r}`,message:n}),this.codePrefix=t,this.__proto__=e.prototype}hasCode(t){return`${this.codePrefix}/${t}`===this.code}};Zt.PrefixedFirebaseError=Xd;var UB=class e extends Xd{constructor(t,r){super("app",t,r),this.__proto__=e.prototype}};Zt.FirebaseAppError=UB;var qB=class e extends Xd{static fromServerError(t,r,n){let s=(t||"").indexOf(":"),i=null;s!==-1&&(i=t.substring(s+1).trim(),t=t.substring(0,s).trim());let o=g3e[t]||"INTERNAL_ERROR",a=(0,MB.deepCopy)(de[o]);if(a.message=i||r||a.message,o==="INTERNAL_ERROR"&&typeof n<"u")try{a.message+=` Raw server response: "${JSON.stringify(n)}"`}catch{}return new e(a)}constructor(t,r){super("auth",t.code,r||t.message),this.__proto__=e.prototype}};Zt.FirebaseAuthError=qB;var VB=class extends Xl{constructor(t,r){super({code:"database/"+t.code,message:r||t.message})}};Zt.FirebaseDatabaseError=VB;var HB=class extends Xl{constructor(t,r){super({code:"firestore/"+t.code,message:r||t.message})}};Zt.FirebaseFirestoreError=HB;var jB=class e extends Xl{constructor(t,r){super({code:"instance-id/"+t.code,message:r||t.message}),this.__proto__=e.prototype}};Zt.FirebaseInstanceIdError=jB;var KB=class e extends Xl{constructor(t,r){super({code:"installations/"+t.code,message:r||t.message}),this.__proto__=e.prototype}};Zt.FirebaseInstallationsError=KB;var zB=class e extends Xd{static fromServerError(t,r,n){let s="UNKNOWN_ERROR";t&&t in mQ&&(s=mQ[t]);let i=(0,MB.deepCopy)(Wr[s]);if(i.message=r||i.message,s==="UNKNOWN_ERROR"&&typeof n<"u")try{i.message+=` Raw server response: "${JSON.stringify(n)}"`}catch{}return new e(i)}static fromTopicManagementServerError(t,r,n){let s=y3e[t]||"UNKNOWN_ERROR",i=(0,MB.deepCopy)(Wr[s]);if(i.message=r||i.message,s==="UNKNOWN_ERROR"&&typeof n<"u")try{i.message+=` Raw server response: "${JSON.stringify(n)}"`}catch{}return new e(i)}constructor(t,r){super("messaging",t.code,r||t.message),this.__proto__=e.prototype}};Zt.FirebaseMessagingError=zB;var $B=class e extends Xd{constructor(t,r){super("project-management",t,r),this.__proto__=e.prototype}};Zt.FirebaseProjectManagementError=$B;var xi=class{};Zt.AppErrorCodes=xi;xi.APP_DELETED="app-deleted";xi.DUPLICATE_APP="duplicate-app";xi.INVALID_ARGUMENT="invalid-argument";xi.INTERNAL_ERROR="internal-error";xi.INVALID_APP_NAME="invalid-app-name";xi.INVALID_APP_OPTIONS="invalid-app-options";xi.INVALID_CREDENTIAL="invalid-credential";xi.NETWORK_ERROR="network-error";xi.NETWORK_TIMEOUT="network-timeout";xi.NO_APP="no-app";xi.UNABLE_TO_PARSE_RESPONSE="unable-to-parse-response";var de=class{};Zt.AuthClientErrorCode=de;de.AUTH_BLOCKING_TOKEN_EXPIRED={code:"auth-blocking-token-expired",message:"The provided Firebase Auth Blocking token is expired."};de.BILLING_NOT_ENABLED={code:"billing-not-enabled",message:"Feature requires billing to be enabled."};de.CLAIMS_TOO_LARGE={code:"claims-too-large",message:"Developer claims maximum payload size exceeded."};de.CONFIGURATION_EXISTS={code:"configuration-exists",message:"A configuration already exists with the provided identifier."};de.CONFIGURATION_NOT_FOUND={code:"configuration-not-found",message:"There is no configuration corresponding to the provided identifier."};de.ID_TOKEN_EXPIRED={code:"id-token-expired",message:"The provided Firebase ID token is expired."};de.INVALID_ARGUMENT={code:"argument-error",message:"Invalid argument provided."};de.INVALID_CONFIG={code:"invalid-config",message:"The provided configuration is invalid."};de.EMAIL_ALREADY_EXISTS={code:"email-already-exists",message:"The email address is already in use by another account."};de.EMAIL_NOT_FOUND={code:"email-not-found",message:"There is no user record corresponding to the provided email."};de.FORBIDDEN_CLAIM={code:"reserved-claim",message:"The specified developer claim is reserved and cannot be specified."};de.INVALID_ID_TOKEN={code:"invalid-id-token",message:"The provided ID token is not a valid Firebase ID token."};de.ID_TOKEN_REVOKED={code:"id-token-revoked",message:"The Firebase ID token has been revoked."};de.INTERNAL_ERROR={code:"internal-error",message:"An internal error has occurred."};de.INVALID_CLAIMS={code:"invalid-claims",message:"The provided custom claim attributes are invalid."};de.INVALID_CONTINUE_URI={code:"invalid-continue-uri",message:"The continue URL must be a valid URL string."};de.INVALID_CREATION_TIME={code:"invalid-creation-time",message:"The creation time must be a valid UTC date string."};de.INVALID_CREDENTIAL={code:"invalid-credential",message:"Invalid credential object provided."};de.INVALID_DISABLED_FIELD={code:"invalid-disabled-field",message:"The disabled field must be a boolean."};de.INVALID_DISPLAY_NAME={code:"invalid-display-name",message:"The displayName field must be a valid string."};de.INVALID_DYNAMIC_LINK_DOMAIN={code:"invalid-dynamic-link-domain",message:"The provided dynamic link domain is not configured or authorized for the current project."};de.INVALID_EMAIL_VERIFIED={code:"invalid-email-verified",message:"The emailVerified field must be a boolean."};de.INVALID_EMAIL={code:"invalid-email",message:"The email address is improperly formatted."};de.INVALID_NEW_EMAIL={code:"invalid-new-email",message:"The new email address is improperly formatted."};de.INVALID_ENROLLED_FACTORS={code:"invalid-enrolled-factors",message:"The enrolled factors must be a valid array of MultiFactorInfo objects."};de.INVALID_ENROLLMENT_TIME={code:"invalid-enrollment-time",message:"The second factor enrollment time must be a valid UTC date string."};de.INVALID_HASH_ALGORITHM={code:"invalid-hash-algorithm",message:"The hash algorithm must match one of the strings in the list of supported algorithms."};de.INVALID_HASH_BLOCK_SIZE={code:"invalid-hash-block-size",message:"The hash block size must be a valid number."};de.INVALID_HASH_DERIVED_KEY_LENGTH={code:"invalid-hash-derived-key-length",message:"The hash derived key length must be a valid number."};de.INVALID_HASH_KEY={code:"invalid-hash-key",message:"The hash key must a valid byte buffer."};de.INVALID_HASH_MEMORY_COST={code:"invalid-hash-memory-cost",message:"The hash memory cost must be a valid number."};de.INVALID_HASH_PARALLELIZATION={code:"invalid-hash-parallelization",message:"The hash parallelization must be a valid number."};de.INVALID_HASH_ROUNDS={code:"invalid-hash-rounds",message:"The hash rounds must be a valid number."};de.INVALID_HASH_SALT_SEPARATOR={code:"invalid-hash-salt-separator",message:"The hashing algorithm salt separator field must be a valid byte buffer."};de.INVALID_LAST_SIGN_IN_TIME={code:"invalid-last-sign-in-time",message:"The last sign-in time must be a valid UTC date string."};de.INVALID_NAME={code:"invalid-name",message:"The resource name provided is invalid."};de.INVALID_OAUTH_CLIENT_ID={code:"invalid-oauth-client-id",message:"The provided OAuth client ID is invalid."};de.INVALID_PAGE_TOKEN={code:"invalid-page-token",message:"The page token must be a valid non-empty string."};de.INVALID_PASSWORD={code:"invalid-password",message:"The password must be a string with at least 6 characters."};de.INVALID_PASSWORD_HASH={code:"invalid-password-hash",message:"The password hash must be a valid byte buffer."};de.INVALID_PASSWORD_SALT={code:"invalid-password-salt",message:"The password salt must be a valid byte buffer."};de.INVALID_PHONE_NUMBER={code:"invalid-phone-number",message:"The phone number must be a non-empty E.164 standard compliant identifier string."};de.INVALID_PHOTO_URL={code:"invalid-photo-url",message:"The photoURL field must be a valid URL."};de.INVALID_PROJECT_ID={code:"invalid-project-id",message:"Invalid parent project. Either parent project doesn't exist or didn't enable multi-tenancy."};de.INVALID_PROVIDER_DATA={code:"invalid-provider-data",message:"The providerData must be a valid array of UserInfo objects."};de.INVALID_PROVIDER_ID={code:"invalid-provider-id",message:"The providerId must be a valid supported provider identifier string."};de.INVALID_PROVIDER_UID={code:"invalid-provider-uid",message:"The providerUid must be a valid provider uid string."};de.INVALID_OAUTH_RESPONSETYPE={code:"invalid-oauth-responsetype",message:"Only exactly one OAuth responseType should be set to true."};de.INVALID_SESSION_COOKIE_DURATION={code:"invalid-session-cookie-duration",message:"The session cookie duration must be a valid number in milliseconds between 5 minutes and 2 weeks."};de.INVALID_TENANT_ID={code:"invalid-tenant-id",message:"The tenant ID must be a valid non-empty string."};de.INVALID_TENANT_TYPE={code:"invalid-tenant-type",message:'Tenant type must be either "full_service" or "lightweight".'};de.INVALID_TESTING_PHONE_NUMBER={code:"invalid-testing-phone-number",message:"Invalid testing phone number or invalid test code provided."};de.INVALID_UID={code:"invalid-uid",message:"The uid must be a non-empty string with at most 128 characters."};de.INVALID_USER_IMPORT={code:"invalid-user-import",message:"The user record to import is invalid."};de.INVALID_TOKENS_VALID_AFTER_TIME={code:"invalid-tokens-valid-after-time",message:"The tokensValidAfterTime must be a valid UTC number in seconds."};de.MISMATCHING_TENANT_ID={code:"mismatching-tenant-id",message:"User tenant ID does not match with the current TenantAwareAuth tenant ID."};de.MISSING_ANDROID_PACKAGE_NAME={code:"missing-android-pkg-name",message:"An Android Package Name must be provided if the Android App is required to be installed."};de.MISSING_CONFIG={code:"missing-config",message:"The provided configuration is missing required attributes."};de.MISSING_CONTINUE_URI={code:"missing-continue-uri",message:"A valid continue URL must be provided in the request."};de.MISSING_DISPLAY_NAME={code:"missing-display-name",message:"The resource being created or edited is missing a valid display name."};de.MISSING_EMAIL={code:"missing-email",message:"The email is required for the specified action. For example, a multi-factor user requires a verified email."};de.MISSING_IOS_BUNDLE_ID={code:"missing-ios-bundle-id",message:"The request is missing an iOS Bundle ID."};de.MISSING_ISSUER={code:"missing-issuer",message:"The OAuth/OIDC configuration issuer must not be empty."};de.MISSING_HASH_ALGORITHM={code:"missing-hash-algorithm",message:"Importing users with password hashes requires that the hashing algorithm and its parameters be provided."};de.MISSING_OAUTH_CLIENT_ID={code:"missing-oauth-client-id",message:"The OAuth/OIDC configuration client ID must not be empty."};de.MISSING_OAUTH_CLIENT_SECRET={code:"missing-oauth-client-secret",message:"The OAuth configuration client secret is required to enable OIDC code flow."};de.MISSING_PROVIDER_ID={code:"missing-provider-id",message:"A valid provider ID must be provided in the request."};de.MISSING_SAML_RELYING_PARTY_CONFIG={code:"missing-saml-relying-party-config",message:"The SAML configuration provided is missing a relying party configuration."};de.MAXIMUM_TEST_PHONE_NUMBER_EXCEEDED={code:"test-phone-number-limit-exceeded",message:"The maximum allowed number of test phone number / code pairs has been exceeded."};de.MAXIMUM_USER_COUNT_EXCEEDED={code:"maximum-user-count-exceeded",message:"The maximum allowed number of users to import has been exceeded."};de.MISSING_UID={code:"missing-uid",message:"A uid identifier is required for the current operation."};de.OPERATION_NOT_ALLOWED={code:"operation-not-allowed",message:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."};de.PHONE_NUMBER_ALREADY_EXISTS={code:"phone-number-already-exists",message:"The user with the provided phone number already exists."};de.PROJECT_NOT_FOUND={code:"project-not-found",message:"No Firebase project was found for the provided credential."};de.INSUFFICIENT_PERMISSION={code:"insufficient-permission",message:'Credential implementation provided to initializeApp() via the "credential" property has insufficient permission to access the requested resource. See https://firebase.google.com/docs/admin/setup for details on how to authenticate this SDK with appropriate permissions.'};de.QUOTA_EXCEEDED={code:"quota-exceeded",message:"The project quota for the specified operation has been exceeded."};de.SECOND_FACTOR_LIMIT_EXCEEDED={code:"second-factor-limit-exceeded",message:"The maximum number of allowed second factors on a user has been exceeded."};de.SECOND_FACTOR_UID_ALREADY_EXISTS={code:"second-factor-uid-already-exists",message:'The specified second factor "uid" already exists.'};de.SESSION_COOKIE_EXPIRED={code:"session-cookie-expired",message:"The Firebase session cookie is expired."};de.SESSION_COOKIE_REVOKED={code:"session-cookie-revoked",message:"The Firebase session cookie has been revoked."};de.TENANT_NOT_FOUND={code:"tenant-not-found",message:"There is no tenant corresponding to the provided identifier."};de.UID_ALREADY_EXISTS={code:"uid-already-exists",message:"The user with the provided uid already exists."};de.UNAUTHORIZED_DOMAIN={code:"unauthorized-continue-uri",message:"The domain of the continue URL is not whitelisted. Whitelist the domain in the Firebase console."};de.UNSUPPORTED_FIRST_FACTOR={code:"unsupported-first-factor",message:"A multi-factor user requires a supported first factor."};de.UNSUPPORTED_SECOND_FACTOR={code:"unsupported-second-factor",message:"The request specified an unsupported type of second factor."};de.UNSUPPORTED_TENANT_OPERATION={code:"unsupported-tenant-operation",message:"This operation is not supported in a multi-tenant context."};de.UNVERIFIED_EMAIL={code:"unverified-email",message:"A verified email is required for the specified action. For example, a multi-factor user requires a verified email."};de.USER_NOT_FOUND={code:"user-not-found",message:"There is no user record corresponding to the provided identifier."};de.NOT_FOUND={code:"not-found",message:"The requested resource was not found."};de.USER_DISABLED={code:"user-disabled",message:"The user record is disabled."};de.USER_NOT_DISABLED={code:"user-not-disabled",message:"The user must be disabled in order to bulk delete it (or you must pass force=true)."};de.INVALID_RECAPTCHA_ACTION={code:"invalid-recaptcha-action",message:'reCAPTCHA action must be "BLOCK".'};de.INVALID_RECAPTCHA_ENFORCEMENT_STATE={code:"invalid-recaptcha-enforcement-state",message:'reCAPTCHA enforcement state must be either "OFF", "AUDIT" or "ENFORCE".'};de.RECAPTCHA_NOT_ENABLED={code:"racaptcha-not-enabled",message:"reCAPTCHA enterprise is not enabled."};var Wr=class{};Zt.MessagingClientErrorCode=Wr;Wr.INVALID_ARGUMENT={code:"invalid-argument",message:"Invalid argument provided."};Wr.INVALID_RECIPIENT={code:"invalid-recipient",message:"Invalid message recipient provided."};Wr.INVALID_PAYLOAD={code:"invalid-payload",message:"Invalid message payload provided."};Wr.INVALID_DATA_PAYLOAD_KEY={code:"invalid-data-payload-key",message:"The data message payload contains an invalid key. See the reference documentation for the DataMessagePayload type for restricted keys."};Wr.PAYLOAD_SIZE_LIMIT_EXCEEDED={code:"payload-size-limit-exceeded",message:"The provided message payload exceeds the FCM size limits. See the error documentation for more details."};Wr.INVALID_OPTIONS={code:"invalid-options",message:"Invalid message options provided."};Wr.INVALID_REGISTRATION_TOKEN={code:"invalid-registration-token",message:"Invalid registration token provided. Make sure it matches the registration token the client app receives from registering with FCM."};Wr.REGISTRATION_TOKEN_NOT_REGISTERED={code:"registration-token-not-registered",message:"The provided registration token is not registered. A previously valid registration token can be unregistered for a variety of reasons. See the error documentation for more details. Remove this registration token and stop using it to send messages."};Wr.MISMATCHED_CREDENTIAL={code:"mismatched-credential",message:"The credential used to authenticate this SDK does not have permission to send messages to the device corresponding to the provided registration token. Make sure the credential and registration token both belong to the same Firebase project."};Wr.INVALID_PACKAGE_NAME={code:"invalid-package-name",message:'The message was addressed to a registration token whose package name does not match the provided "restrictedPackageName" option.'};Wr.DEVICE_MESSAGE_RATE_EXCEEDED={code:"device-message-rate-exceeded",message:"The rate of messages to a particular device is too high. Reduce the number of messages sent to this device and do not immediately retry sending to this device."};Wr.TOPICS_MESSAGE_RATE_EXCEEDED={code:"topics-message-rate-exceeded",message:"The rate of messages to subscribers to a particular topic is too high. Reduce the number of messages sent for this topic, and do not immediately retry sending to this topic."};Wr.MESSAGE_RATE_EXCEEDED={code:"message-rate-exceeded",message:"Sending limit exceeded for the message target."};Wr.THIRD_PARTY_AUTH_ERROR={code:"third-party-auth-error",message:"A message targeted to an iOS device could not be sent because the required APNs SSL certificate was not uploaded or has expired. Check the validity of your development and production certificates."};Wr.TOO_MANY_TOPICS={code:"too-many-topics",message:"The maximum number of topics the provided registration token can be subscribed to has been exceeded."};Wr.AUTHENTICATION_ERROR={code:"authentication-error",message:"An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions."};Wr.SERVER_UNAVAILABLE={code:"server-unavailable",message:"The FCM server could not process the request in time. See the error documentation for more details."};Wr.INTERNAL_ERROR={code:"internal-error",message:"An internal error has occurred. Please retry the request."};Wr.UNKNOWN_ERROR={code:"unknown-error",message:"An unknown server error was returned."};var Yl=class{};Zt.InstallationsClientErrorCode=Yl;Yl.INVALID_ARGUMENT={code:"invalid-argument",message:"Invalid argument provided."};Yl.INVALID_PROJECT_ID={code:"invalid-project-id",message:"Invalid project ID provided."};Yl.INVALID_INSTALLATION_ID={code:"invalid-installation-id",message:"Invalid installation ID provided."};Yl.API_ERROR={code:"api-error",message:"Installation ID API call failed."};var fx=class extends Yl{};Zt.InstanceIdClientErrorCode=fx;fx.INVALID_INSTANCE_ID={code:"invalid-instance-id",message:"Invalid instance ID provided."};var g3e={BILLING_NOT_ENABLED:"BILLING_NOT_ENABLED",CLAIMS_TOO_LARGE:"CLAIMS_TOO_LARGE",CONFIGURATION_EXISTS:"CONFIGURATION_EXISTS",CONFIGURATION_NOT_FOUND:"CONFIGURATION_NOT_FOUND",INSUFFICIENT_PERMISSION:"INSUFFICIENT_PERMISSION",INVALID_CONFIG:"INVALID_CONFIG",INVALID_CONFIG_ID:"INVALID_PROVIDER_ID",INVALID_CONTINUE_URI:"INVALID_CONTINUE_URI",INVALID_DYNAMIC_LINK_DOMAIN:"INVALID_DYNAMIC_LINK_DOMAIN",DUPLICATE_EMAIL:"EMAIL_ALREADY_EXISTS",DUPLICATE_LOCAL_ID:"UID_ALREADY_EXISTS",DUPLICATE_MFA_ENROLLMENT_ID:"SECOND_FACTOR_UID_ALREADY_EXISTS",EMAIL_EXISTS:"EMAIL_ALREADY_EXISTS",EMAIL_NOT_FOUND:"EMAIL_NOT_FOUND",FORBIDDEN_CLAIM:"FORBIDDEN_CLAIM",INVALID_CLAIMS:"INVALID_CLAIMS",INVALID_DURATION:"INVALID_SESSION_COOKIE_DURATION",INVALID_EMAIL:"INVALID_EMAIL",INVALID_NEW_EMAIL:"INVALID_NEW_EMAIL",INVALID_DISPLAY_NAME:"INVALID_DISPLAY_NAME",INVALID_ID_TOKEN:"INVALID_ID_TOKEN",INVALID_NAME:"INVALID_NAME",INVALID_OAUTH_CLIENT_ID:"INVALID_OAUTH_CLIENT_ID",INVALID_PAGE_SELECTION:"INVALID_PAGE_TOKEN",INVALID_PHONE_NUMBER:"INVALID_PHONE_NUMBER",INVALID_PROJECT_ID:"INVALID_PROJECT_ID",INVALID_PROVIDER_ID:"INVALID_PROVIDER_ID",INVALID_SERVICE_ACCOUNT:"INVALID_SERVICE_ACCOUNT",INVALID_TESTING_PHONE_NUMBER:"INVALID_TESTING_PHONE_NUMBER",INVALID_TENANT_TYPE:"INVALID_TENANT_TYPE",MISSING_ANDROID_PACKAGE_NAME:"MISSING_ANDROID_PACKAGE_NAME",MISSING_CONFIG:"MISSING_CONFIG",MISSING_CONFIG_ID:"MISSING_PROVIDER_ID",MISSING_DISPLAY_NAME:"MISSING_DISPLAY_NAME",MISSING_EMAIL:"MISSING_EMAIL",MISSING_IOS_BUNDLE_ID:"MISSING_IOS_BUNDLE_ID",MISSING_ISSUER:"MISSING_ISSUER",MISSING_LOCAL_ID:"MISSING_UID",MISSING_OAUTH_CLIENT_ID:"MISSING_OAUTH_CLIENT_ID",MISSING_PROVIDER_ID:"MISSING_PROVIDER_ID",MISSING_SAML_RELYING_PARTY_CONFIG:"MISSING_SAML_RELYING_PARTY_CONFIG",MISSING_USER_ACCOUNT:"MISSING_UID",OPERATION_NOT_ALLOWED:"OPERATION_NOT_ALLOWED",PERMISSION_DENIED:"INSUFFICIENT_PERMISSION",PHONE_NUMBER_EXISTS:"PHONE_NUMBER_ALREADY_EXISTS",PROJECT_NOT_FOUND:"PROJECT_NOT_FOUND",QUOTA_EXCEEDED:"QUOTA_EXCEEDED",SECOND_FACTOR_LIMIT_EXCEEDED:"SECOND_FACTOR_LIMIT_EXCEEDED",TENANT_NOT_FOUND:"TENANT_NOT_FOUND",TENANT_ID_MISMATCH:"MISMATCHING_TENANT_ID",TOKEN_EXPIRED:"ID_TOKEN_EXPIRED",UNAUTHORIZED_DOMAIN:"UNAUTHORIZED_DOMAIN",UNSUPPORTED_FIRST_FACTOR:"UNSUPPORTED_FIRST_FACTOR",UNSUPPORTED_SECOND_FACTOR:"UNSUPPORTED_SECOND_FACTOR",UNSUPPORTED_TENANT_OPERATION:"UNSUPPORTED_TENANT_OPERATION",UNVERIFIED_EMAIL:"UNVERIFIED_EMAIL",USER_NOT_FOUND:"USER_NOT_FOUND",USER_DISABLED:"USER_DISABLED",WEAK_PASSWORD:"INVALID_PASSWORD",INVALID_RECAPTCHA_ACTION:"INVALID_RECAPTCHA_ACTION",INVALID_RECAPTCHA_ENFORCEMENT_STATE:"INVALID_RECAPTCHA_ENFORCEMENT_STATE",RECAPTCHA_NOT_ENABLED:"RECAPTCHA_NOT_ENABLED"},mQ={InvalidParameters:"INVALID_ARGUMENT",MismatchSenderId:"MISMATCHED_CREDENTIAL",Unavailable:"SERVER_UNAVAILABLE",InternalServerError:"INTERNAL_ERROR",InvalidRegistration:"INVALID_REGISTRATION_TOKEN",NotRegistered:"REGISTRATION_TOKEN_NOT_REGISTERED",InvalidPackageName:"INVALID_PACKAGE_NAME",MessageTooBig:"PAYLOAD_SIZE_LIMIT_EXCEEDED",InvalidDataKey:"INVALID_DATA_PAYLOAD_KEY",InvalidTtl:"INVALID_OPTIONS",DeviceMessageRateExceeded:"DEVICE_MESSAGE_RATE_EXCEEDED",TopicsMessageRateExceeded:"TOPICS_MESSAGE_RATE_EXCEEDED",InvalidApnsCredential:"THIRD_PARTY_AUTH_ERROR",NOT_FOUND:"REGISTRATION_TOKEN_NOT_REGISTERED",PERMISSION_DENIED:"MISMATCHED_CREDENTIAL",RESOURCE_EXHAUSTED:"MESSAGE_RATE_EXCEEDED",UNAUTHENTICATED:"THIRD_PARTY_AUTH_ERROR",APNS_AUTH_ERROR:"THIRD_PARTY_AUTH_ERROR",INTERNAL:"INTERNAL_ERROR",INVALID_ARGUMENT:"INVALID_ARGUMENT",QUOTA_EXCEEDED:"MESSAGE_RATE_EXCEEDED",SENDER_ID_MISMATCH:"MISMATCHED_CREDENTIAL",THIRD_PARTY_AUTH_ERROR:"THIRD_PARTY_AUTH_ERROR",UNAVAILABLE:"SERVER_UNAVAILABLE",UNREGISTERED:"REGISTRATION_TOKEN_NOT_REGISTERED",UNSPECIFIED_ERROR:"UNKNOWN_ERROR"},y3e={NOT_FOUND:"REGISTRATION_TOKEN_NOT_REGISTERED",INVALID_ARGUMENT:"INVALID_REGISTRATION_TOKEN",TOO_MANY_TOPICS:"TOO_MANY_TOPICS",RESOURCE_EXHAUSTED:"TOO_MANY_TOPICS",PERMISSION_DENIED:"AUTHENTICATION_ERROR",DEADLINE_EXCEEDED:"SERVER_UNAVAILABLE",INTERNAL:"INTERNAL_ERROR",UNKNOWN:"UNKNOWN_ERROR"}});var Vn=S(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.isTaskId=mt.isTopic=mt.isURL=mt.isUTCDateString=mt.isISODateString=mt.isPhoneNumber=mt.isEmail=mt.isPassword=mt.isUid=mt.isNonNullObject=mt.isObject=mt.isNonEmptyString=mt.isBase64String=mt.isString=mt.isNumber=mt.isBoolean=mt.isNonEmptyArray=mt.isArray=mt.isBuffer=void 0;var E3e=require("url");function S3e(e){return e instanceof Buffer}mt.isBuffer=S3e;function GB(e){return Array.isArray(e)}mt.isArray=GB;function C3e(e){return GB(e)&&e.length!==0}mt.isNonEmptyArray=C3e;function _3e(e){return typeof e=="boolean"}mt.isBoolean=_3e;function b3e(e){return typeof e=="number"&&!isNaN(e)}mt.isNumber=b3e;function WB(e){return typeof e=="string"}mt.isString=WB;function v3e(e){return WB(e)?/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e):!1}mt.isBase64String=v3e;function JB(e){return WB(e)&&e!==""}mt.isNonEmptyString=JB;function gQ(e){return typeof e=="object"&&!GB(e)}mt.isObject=gQ;function A3e(e){return gQ(e)&&e!==null}mt.isNonNullObject=A3e;function x3e(e){return typeof e=="string"&&e.length>0&&e.length<=128}mt.isUid=x3e;function I3e(e){return typeof e=="string"&&e.length>=6}mt.isPassword=I3e;function w3e(e){return typeof e!="string"?!1:/^[^@]+@[^@]+$/.test(e)}mt.isEmail=w3e;function T3e(e){if(typeof e!="string")return!1;let t=/^\+/,r=/[\da-zA-Z]+/;return t.test(e)&&r.test(e)}mt.isPhoneNumber=T3e;function R3e(e){try{return JB(e)&&new Date(e).toISOString()===e}catch{return!1}}mt.isISODateString=R3e;function N3e(e){try{return JB(e)&&new Date(e).toUTCString()===e}catch{return!1}}mt.isUTCDateString=N3e;function P3e(e){if(typeof e!="string"||/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(e))return!1;try{let r=E3e.parse(e),n=r.protocol,s=r.slashes,i=r.hostname,o=r.pathname;if(n!=="http:"&&n!=="https:"||!s||!i||!/^[a-zA-Z0-9]+[\w-]*([.]?[a-zA-Z0-9]+[\w-]*)*$/.test(i)||o&&o!=="/"&&!/^(\/[\w\-.~!$'()*+,;=:@%]+)*\/?$/.test(o))return!1}catch{return!1}return!0}mt.isURL=P3e;function O3e(e){return typeof e!="string"?!1:/^(\/topics\/)?(private\/)?[a-zA-Z0-9-_.~%]+$/.test(e)}mt.isTopic=O3e;function D3e(e){return typeof e!="string"?!1:/^[A-Za-z0-9_-]+$/.test(e)}mt.isTaskId=D3e});var XB=S((glt,yQ)=>{"use strict";var{EventEmitter:k3e}=require("node:events"),{inherits:B3e}=require("node:util");function Yd(e){if(typeof e=="string"&&(e=Buffer.from(e)),!Buffer.isBuffer(e))throw new TypeError("The needle has to be a String or a Buffer.");let t=e.length,r=t-1;if(t===0)throw new Error("The needle cannot be an empty String/Buffer.");if(t>256)throw new Error("The needle cannot have a length bigger than 256.");this.maxMatches=1/0,this.matches=0,this._occ=new Uint8Array(256).fill(t),this._lookbehind_size=0,this._needle=e,this._bufpos=0,this._lookbehind=Buffer.alloc(r);for(var n=0;n<r;++n)this._occ[e[n]]=r-n}B3e(Yd,k3e);Yd.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0};Yd.prototype.push=function(e,t){Buffer.isBuffer(e)||(e=Buffer.from(e,"binary"));let r=e.length;this._bufpos=t||0;let n;for(;n!==r&&this.matches<this.maxMatches;)n=this._sbmh_feed(e);return n};Yd.prototype._sbmh_feed=function(e){let t=e.length,r=this._needle,n=r.length,s=n-1,i=r[s],o=-this._lookbehind_size,a;if(o<0){for(;o<0&&o<=t-n;){if(a=e[o+s],a===i&&this._sbmh_memcmp(e,o,s))return this._lookbehind_size=0,++this.matches,this.emit("info",!0),this._bufpos=o+n;o+=this._occ[a]}for(;o<0&&!this._sbmh_memcmp(e,o,t-o);)++o;if(o>=0)this.emit("info",!1,this._lookbehind,0,this._lookbehind_size),this._lookbehind_size=0;else{let c=this._lookbehind_size+o;return c>0&&this.emit("info",!1,this._lookbehind,0,c),this._lookbehind_size-=c,this._lookbehind.copy(this._lookbehind,0,c,this._lookbehind_size),e.copy(this._lookbehind,this._lookbehind_size),this._lookbehind_size+=t,this._bufpos=t,t}}if(o=e.indexOf(r,o+this._bufpos),o!==-1)return++this.matches,o===0?this.emit("info",!0):this.emit("info",!0,e,this._bufpos,o),this._bufpos=o+n;for(o=t-s,o<0&&(o=0);o!==t&&(e[o]!==r[0]||Buffer.compare(e.subarray(o+1,t),r.subarray(1,t-o))!==0);)++o;return o!==t&&(e.copy(this._lookbehind,0,o,t),this._lookbehind_size=t-o),o!==0&&this.emit("info",!1,e,this._bufpos,o),this._bufpos=t,t};Yd.prototype._sbmh_lookup_char=function(e,t){return t<0?this._lookbehind[this._lookbehind_size+t]:e[t]};Yd.prototype._sbmh_memcmp=function(e,t,r){for(var n=0;n<r;++n)if(this._sbmh_lookup_char(e,t+n)!==this._needle[n])return!1;return!0};yQ.exports=Yd});var CQ=S((ylt,SQ)=>{"use strict";var L3e=require("node:util").inherits,EQ=require("node:stream").Readable;function YB(e){EQ.call(this,e)}L3e(YB,EQ);YB.prototype._read=function(e){};SQ.exports=YB});var hx=S((Elt,_Q)=>{"use strict";_Q.exports=function(t,r,n){if(!t||t[r]===void 0||t[r]===null)return n;if(typeof t[r]!="number"||isNaN(t[r]))throw new TypeError("Limit "+r+" is not a valid number");return t[r]}});var xQ=S((Slt,AQ)=>{"use strict";var vQ=require("node:events").EventEmitter,F3e=require("node:util").inherits,bQ=hx(),M3e=XB(),U3e=Buffer.from(`\r
\r
`),q3e=/\r\n/g,V3e=/^([^:]+):[ \t]?([\x00-\xFF]+)?$/;function Lp(e){vQ.call(this),e=e||{};let t=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=bQ(e,"maxHeaderPairs",2e3),this.maxHeaderSize=bQ(e,"maxHeaderSize",80*1024),this.buffer="",this.header={},this.finished=!1,this.ss=new M3e(U3e),this.ss.on("info",function(r,n,s,i){n&&!t.maxed&&(t.nread+i-s>=t.maxHeaderSize?(i=t.maxHeaderSize-t.nread+s,t.nread=t.maxHeaderSize,t.maxed=!0):t.nread+=i-s,t.buffer+=n.toString("binary",s,i)),r&&t._finish()})}F3e(Lp,vQ);Lp.prototype.push=function(e){let t=this.ss.push(e);if(this.finished)return t};Lp.prototype.reset=function(){this.finished=!1,this.buffer="",this.header={},this.ss.reset()};Lp.prototype._finish=function(){this.buffer&&this._parseHeader(),this.ss.matches=this.ss.maxMatches;let e=this.header;this.header={},this.buffer="",this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit("header",e)};Lp.prototype._parseHeader=function(){if(this.npairs===this.maxHeaderPairs)return;let e=this.buffer.split(q3e),t=e.length,r,n;for(var s=0;s<t;++s){if(e[s].length===0)continue;if((e[s][0]==="	"||e[s][0]===" ")&&n){this.header[n][this.header[n].length-1]+=e[s];continue}let i=e[s].indexOf(":");if(i===-1||i===0)return;if(r=V3e.exec(e[s]),n=r[1].toLowerCase(),this.header[n]=this.header[n]||[],this.header[n].push(r[2]||""),++this.npairs===this.maxHeaderPairs)break}};AQ.exports=Lp});var ZB=S((Clt,wQ)=>{"use strict";var QB=require("node:stream").Writable,H3e=require("node:util").inherits,j3e=XB(),IQ=CQ(),K3e=xQ(),z3e=45,$3e=Buffer.from("-"),G3e=Buffer.from(`\r
`),W3e=function(){};function Yo(e){if(!(this instanceof Yo))return new Yo(e);if(QB.call(this,e),!e||!e.headerFirst&&typeof e.boundary!="string")throw new TypeError("Boundary required");typeof e.boundary=="string"?this.setBoundary(e.boundary):this._bparser=void 0,this._headerFirst=e.headerFirst,this._dashes=0,this._parts=0,this._finished=!1,this._realFinish=!1,this._isPreamble=!0,this._justMatched=!1,this._firstWrite=!0,this._inHeader=!0,this._part=void 0,this._cb=void 0,this._ignoreData=!1,this._partOpts={highWaterMark:e.partHwm},this._pause=!1;let t=this;this._hparser=new K3e(e),this._hparser.on("header",function(r){t._inHeader=!1,t._part.emit("header",r)})}H3e(Yo,QB);Yo.prototype.emit=function(e){if(e==="finish"&&!this._realFinish){if(!this._finished){let t=this;process.nextTick(function(){if(t.emit("error",new Error("Unexpected end of multipart data")),t._part&&!t._ignoreData){let r=t._isPreamble?"Preamble":"Part";t._part.emit("error",new Error(r+" terminated early due to unexpected end of multipart data")),t._part.push(null),process.nextTick(function(){t._realFinish=!0,t.emit("finish"),t._realFinish=!1});return}t._realFinish=!0,t.emit("finish"),t._realFinish=!1})}}else QB.prototype.emit.apply(this,arguments)};Yo.prototype._write=function(e,t,r){if(!this._hparser&&!this._bparser)return r();if(this._headerFirst&&this._isPreamble){this._part||(this._part=new IQ(this._partOpts),this.listenerCount("preamble")!==0?this.emit("preamble",this._part):this._ignore());let n=this._hparser.push(e);if(!this._inHeader&&n!==void 0&&n<e.length)e=e.slice(n);else return r()}this._firstWrite&&(this._bparser.push(G3e),this._firstWrite=!1),this._bparser.push(e),this._pause?this._cb=r:r()};Yo.prototype.reset=function(){this._part=void 0,this._bparser=void 0,this._hparser=void 0};Yo.prototype.setBoundary=function(e){let t=this;this._bparser=new j3e(`\r
--`+e),this._bparser.on("info",function(r,n,s,i){t._oninfo(r,n,s,i)})};Yo.prototype._ignore=function(){this._part&&!this._ignoreData&&(this._ignoreData=!0,this._part.on("error",W3e),this._part.resume())};Yo.prototype._oninfo=function(e,t,r,n){let s,i=this,o=0,a,c=!0;if(!this._part&&this._justMatched&&t){for(;this._dashes<2&&r+o<n;)if(t[r+o]===z3e)++o,++this._dashes;else{this._dashes&&(s=$3e),this._dashes=0;break}if(this._dashes===2&&(r+o<n&&this.listenerCount("trailer")!==0&&this.emit("trailer",t.slice(r+o,n)),this.reset(),this._finished=!0,i._parts===0&&(i._realFinish=!0,i.emit("finish"),i._realFinish=!1)),this._dashes)return}this._justMatched&&(this._justMatched=!1),this._part||(this._part=new IQ(this._partOpts),this._part._read=function(l){i._unpause()},this._isPreamble&&this.listenerCount("preamble")!==0?this.emit("preamble",this._part):this._isPreamble!==!0&&this.listenerCount("part")!==0?this.emit("part",this._part):this._ignore(),this._isPreamble||(this._inHeader=!0)),t&&r<n&&!this._ignoreData&&(this._isPreamble||!this._inHeader?(s&&(c=this._part.push(s)),c=this._part.push(t.slice(r,n)),c||(this._pause=!0)):!this._isPreamble&&this._inHeader&&(s&&this._hparser.push(s),a=this._hparser.push(t.slice(r,n)),!this._inHeader&&a!==void 0&&a<n&&this._oninfo(!1,t,r+a,n))),e&&(this._hparser.reset(),this._isPreamble?this._isPreamble=!1:r!==n&&(++this._parts,this._part.on("end",function(){--i._parts===0&&(i._finished?(i._realFinish=!0,i.emit("finish"),i._realFinish=!1):i._unpause())})),this._part.push(null),this._part=void 0,this._ignoreData=!1,this._justMatched=!0,this._dashes=0)};Yo.prototype._unpause=function(){if(this._pause&&(this._pause=!1,this._cb)){let e=this._cb;this._cb=void 0,e()}};wQ.exports=Yo});var px=S((e2,NQ)=>{"use strict";var TQ=new TextDecoder("utf-8"),RQ=new Map([["utf-8",TQ],["utf8",TQ]]);function J3e(e){let t;for(;;)switch(e){case"utf-8":case"utf8":return a0.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return a0.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return a0.utf16le;case"base64":return a0.base64;default:if(t===void 0){t=!0,e=e.toLowerCase();continue}return a0.other.bind(e)}}var a0={utf8:(e,t)=>e.length===0?"":(typeof e=="string"&&(e=Buffer.from(e,t)),e.utf8Slice(0,e.length)),latin1:(e,t)=>e.length===0?"":typeof e=="string"?e:e.latin1Slice(0,e.length),utf16le:(e,t)=>e.length===0?"":(typeof e=="string"&&(e=Buffer.from(e,t)),e.ucs2Slice(0,e.length)),base64:(e,t)=>e.length===0?"":(typeof e=="string"&&(e=Buffer.from(e,t)),e.base64Slice(0,e.length)),other:(e,t)=>{if(e.length===0)return"";if(typeof e=="string"&&(e=Buffer.from(e,t)),RQ.has(e2.toString()))try{return RQ.get(e2).decode(e)}catch{}return typeof e=="string"?e:e.toString()}};function X3e(e,t,r){return e&&J3e(r)(e,t)}NQ.exports=X3e});var r2=S((_lt,BQ)=>{"use strict";var mx=px(),PQ=/%[a-fA-F0-9][a-fA-F0-9]/g,Y3e={"%00":"\0","%01":"","%02":"","%03":"","%04":"","%05":"","%06":"","%07":"\x07","%08":"\b","%09":"	","%0a":`
`,"%0A":`
`,"%0b":"\v","%0B":"\v","%0c":"\f","%0C":"\f","%0d":"\r","%0D":"\r","%0e":"","%0E":"","%0f":"","%0F":"","%10":"","%11":"","%12":"","%13":"","%14":"","%15":"","%16":"","%17":"","%18":"","%19":"","%1a":"","%1A":"","%1b":"\x1B","%1B":"\x1B","%1c":"","%1C":"","%1d":"","%1D":"","%1e":"","%1E":"","%1f":"","%1F":"","%20":" ","%21":"!","%22":'"',"%23":"#","%24":"$","%25":"%","%26":"&","%27":"'","%28":"(","%29":")","%2a":"*","%2A":"*","%2b":"+","%2B":"+","%2c":",","%2C":",","%2d":"-","%2D":"-","%2e":".","%2E":".","%2f":"/","%2F":"/","%30":"0","%31":"1","%32":"2","%33":"3","%34":"4","%35":"5","%36":"6","%37":"7","%38":"8","%39":"9","%3a":":","%3A":":","%3b":";","%3B":";","%3c":"<","%3C":"<","%3d":"=","%3D":"=","%3e":">","%3E":">","%3f":"?","%3F":"?","%40":"@","%41":"A","%42":"B","%43":"C","%44":"D","%45":"E","%46":"F","%47":"G","%48":"H","%49":"I","%4a":"J","%4A":"J","%4b":"K","%4B":"K","%4c":"L","%4C":"L","%4d":"M","%4D":"M","%4e":"N","%4E":"N","%4f":"O","%4F":"O","%50":"P","%51":"Q","%52":"R","%53":"S","%54":"T","%55":"U","%56":"V","%57":"W","%58":"X","%59":"Y","%5a":"Z","%5A":"Z","%5b":"[","%5B":"[","%5c":"\\","%5C":"\\","%5d":"]","%5D":"]","%5e":"^","%5E":"^","%5f":"_","%5F":"_","%60":"`","%61":"a","%62":"b","%63":"c","%64":"d","%65":"e","%66":"f","%67":"g","%68":"h","%69":"i","%6a":"j","%6A":"j","%6b":"k","%6B":"k","%6c":"l","%6C":"l","%6d":"m","%6D":"m","%6e":"n","%6E":"n","%6f":"o","%6F":"o","%70":"p","%71":"q","%72":"r","%73":"s","%74":"t","%75":"u","%76":"v","%77":"w","%78":"x","%79":"y","%7a":"z","%7A":"z","%7b":"{","%7B":"{","%7c":"|","%7C":"|","%7d":"}","%7D":"}","%7e":"~","%7E":"~","%7f":"\x7F","%7F":"\x7F","%80":"\x80","%81":"\x81","%82":"\x82","%83":"\x83","%84":"\x84","%85":"\x85","%86":"\x86","%87":"\x87","%88":"\x88","%89":"\x89","%8a":"\x8A","%8A":"\x8A","%8b":"\x8B","%8B":"\x8B","%8c":"\x8C","%8C":"\x8C","%8d":"\x8D","%8D":"\x8D","%8e":"\x8E","%8E":"\x8E","%8f":"\x8F","%8F":"\x8F","%90":"\x90","%91":"\x91","%92":"\x92","%93":"\x93","%94":"\x94","%95":"\x95","%96":"\x96","%97":"\x97","%98":"\x98","%99":"\x99","%9a":"\x9A","%9A":"\x9A","%9b":"\x9B","%9B":"\x9B","%9c":"\x9C","%9C":"\x9C","%9d":"\x9D","%9D":"\x9D","%9e":"\x9E","%9E":"\x9E","%9f":"\x9F","%9F":"\x9F","%a0":"\xA0","%A0":"\xA0","%a1":"\xA1","%A1":"\xA1","%a2":"\xA2","%A2":"\xA2","%a3":"\xA3","%A3":"\xA3","%a4":"\xA4","%A4":"\xA4","%a5":"\xA5","%A5":"\xA5","%a6":"\xA6","%A6":"\xA6","%a7":"\xA7","%A7":"\xA7","%a8":"\xA8","%A8":"\xA8","%a9":"\xA9","%A9":"\xA9","%aa":"\xAA","%Aa":"\xAA","%aA":"\xAA","%AA":"\xAA","%ab":"\xAB","%Ab":"\xAB","%aB":"\xAB","%AB":"\xAB","%ac":"\xAC","%Ac":"\xAC","%aC":"\xAC","%AC":"\xAC","%ad":"\xAD","%Ad":"\xAD","%aD":"\xAD","%AD":"\xAD","%ae":"\xAE","%Ae":"\xAE","%aE":"\xAE","%AE":"\xAE","%af":"\xAF","%Af":"\xAF","%aF":"\xAF","%AF":"\xAF","%b0":"\xB0","%B0":"\xB0","%b1":"\xB1","%B1":"\xB1","%b2":"\xB2","%B2":"\xB2","%b3":"\xB3","%B3":"\xB3","%b4":"\xB4","%B4":"\xB4","%b5":"\xB5","%B5":"\xB5","%b6":"\xB6","%B6":"\xB6","%b7":"\xB7","%B7":"\xB7","%b8":"\xB8","%B8":"\xB8","%b9":"\xB9","%B9":"\xB9","%ba":"\xBA","%Ba":"\xBA","%bA":"\xBA","%BA":"\xBA","%bb":"\xBB","%Bb":"\xBB","%bB":"\xBB","%BB":"\xBB","%bc":"\xBC","%Bc":"\xBC","%bC":"\xBC","%BC":"\xBC","%bd":"\xBD","%Bd":"\xBD","%bD":"\xBD","%BD":"\xBD","%be":"\xBE","%Be":"\xBE","%bE":"\xBE","%BE":"\xBE","%bf":"\xBF","%Bf":"\xBF","%bF":"\xBF","%BF":"\xBF","%c0":"\xC0","%C0":"\xC0","%c1":"\xC1","%C1":"\xC1","%c2":"\xC2","%C2":"\xC2","%c3":"\xC3","%C3":"\xC3","%c4":"\xC4","%C4":"\xC4","%c5":"\xC5","%C5":"\xC5","%c6":"\xC6","%C6":"\xC6","%c7":"\xC7","%C7":"\xC7","%c8":"\xC8","%C8":"\xC8","%c9":"\xC9","%C9":"\xC9","%ca":"\xCA","%Ca":"\xCA","%cA":"\xCA","%CA":"\xCA","%cb":"\xCB","%Cb":"\xCB","%cB":"\xCB","%CB":"\xCB","%cc":"\xCC","%Cc":"\xCC","%cC":"\xCC","%CC":"\xCC","%cd":"\xCD","%Cd":"\xCD","%cD":"\xCD","%CD":"\xCD","%ce":"\xCE","%Ce":"\xCE","%cE":"\xCE","%CE":"\xCE","%cf":"\xCF","%Cf":"\xCF","%cF":"\xCF","%CF":"\xCF","%d0":"\xD0","%D0":"\xD0","%d1":"\xD1","%D1":"\xD1","%d2":"\xD2","%D2":"\xD2","%d3":"\xD3","%D3":"\xD3","%d4":"\xD4","%D4":"\xD4","%d5":"\xD5","%D5":"\xD5","%d6":"\xD6","%D6":"\xD6","%d7":"\xD7","%D7":"\xD7","%d8":"\xD8","%D8":"\xD8","%d9":"\xD9","%D9":"\xD9","%da":"\xDA","%Da":"\xDA","%dA":"\xDA","%DA":"\xDA","%db":"\xDB","%Db":"\xDB","%dB":"\xDB","%DB":"\xDB","%dc":"\xDC","%Dc":"\xDC","%dC":"\xDC","%DC":"\xDC","%dd":"\xDD","%Dd":"\xDD","%dD":"\xDD","%DD":"\xDD","%de":"\xDE","%De":"\xDE","%dE":"\xDE","%DE":"\xDE","%df":"\xDF","%Df":"\xDF","%dF":"\xDF","%DF":"\xDF","%e0":"\xE0","%E0":"\xE0","%e1":"\xE1","%E1":"\xE1","%e2":"\xE2","%E2":"\xE2","%e3":"\xE3","%E3":"\xE3","%e4":"\xE4","%E4":"\xE4","%e5":"\xE5","%E5":"\xE5","%e6":"\xE6","%E6":"\xE6","%e7":"\xE7","%E7":"\xE7","%e8":"\xE8","%E8":"\xE8","%e9":"\xE9","%E9":"\xE9","%ea":"\xEA","%Ea":"\xEA","%eA":"\xEA","%EA":"\xEA","%eb":"\xEB","%Eb":"\xEB","%eB":"\xEB","%EB":"\xEB","%ec":"\xEC","%Ec":"\xEC","%eC":"\xEC","%EC":"\xEC","%ed":"\xED","%Ed":"\xED","%eD":"\xED","%ED":"\xED","%ee":"\xEE","%Ee":"\xEE","%eE":"\xEE","%EE":"\xEE","%ef":"\xEF","%Ef":"\xEF","%eF":"\xEF","%EF":"\xEF","%f0":"\xF0","%F0":"\xF0","%f1":"\xF1","%F1":"\xF1","%f2":"\xF2","%F2":"\xF2","%f3":"\xF3","%F3":"\xF3","%f4":"\xF4","%F4":"\xF4","%f5":"\xF5","%F5":"\xF5","%f6":"\xF6","%F6":"\xF6","%f7":"\xF7","%F7":"\xF7","%f8":"\xF8","%F8":"\xF8","%f9":"\xF9","%F9":"\xF9","%fa":"\xFA","%Fa":"\xFA","%fA":"\xFA","%FA":"\xFA","%fb":"\xFB","%Fb":"\xFB","%fB":"\xFB","%FB":"\xFB","%fc":"\xFC","%Fc":"\xFC","%fC":"\xFC","%FC":"\xFC","%fd":"\xFD","%Fd":"\xFD","%fD":"\xFD","%FD":"\xFD","%fe":"\xFE","%Fe":"\xFE","%fE":"\xFE","%FE":"\xFE","%ff":"\xFF","%Ff":"\xFF","%fF":"\xFF","%FF":"\xFF"};function OQ(e){return Y3e[e]}var gx=0,DQ=1,t2=2,kQ=3;function Q3e(e){let t=[],r=gx,n="",s=!1,i=!1,o=0,a="",c=e.length;for(var l=0;l<c;++l){let d=e[l];if(d==="\\"&&s)if(i)i=!1;else{i=!0;continue}else if(d==='"')if(i)i=!1;else{if(s)for(s=!1,r=gx;l+1<c&&e[l+1]!==";";)++l;else s=!0;continue}else if(i&&s&&(a+="\\"),i=!1,(r===t2||r===kQ)&&d==="'"){r===t2?(r=kQ,n=a.substring(1)):r=DQ,a="";continue}else if(r===gx&&(d==="*"||d==="=")&&t.length){r=d==="*"?t2:DQ,t[o]=[a,void 0],a="";continue}else if(!s&&d===";"){r=gx,n?(a.length&&(a=mx(a.replace(PQ,OQ),"binary",n)),n=""):a.length&&(a=mx(a,"binary","utf8")),t[o]===void 0?t[o]=a:t[o][1]=a,a="",++o;continue}else if(!s&&(d===" "||d==="	"))continue;a+=d}return n&&a.length?a=mx(a.replace(PQ,OQ),"binary",n):a&&(a=mx(a,"binary","utf8")),t[o]===void 0?a&&(t[o]=a):t[o][1]=a,t}BQ.exports=Q3e});var FQ=S((blt,LQ)=>{"use strict";LQ.exports=function(t){if(typeof t!="string")return"";for(var r=t.length-1;r>=0;--r)switch(t.charCodeAt(r)){case 47:case 92:return t=t.slice(r+1),t===".."||t==="."?"":t}return t===".."||t==="."?"":t}});var VQ=S((vlt,qQ)=>{"use strict";var{Readable:UQ}=require("node:stream"),{inherits:Z3e}=require("node:util"),eFe=ZB(),MQ=r2(),tFe=px(),rFe=FQ(),Qd=hx(),nFe=/^boundary$/i,sFe=/^form-data$/i,iFe=/^charset$/i,oFe=/^filename$/i,aFe=/^name$/i;yx.detect=/^multipart\/form-data/i;function yx(e,t){let r,n,s=this,i,o=t.limits,a=t.isPartAFile||((Ue,Ge,zt)=>Ge==="application/octet-stream"||zt!==void 0),c=t.parsedConType||[],l=t.defCharset||"utf8",d=t.preservePath,f={highWaterMark:t.fileHwm};for(r=0,n=c.length;r<n;++r)if(Array.isArray(c[r])&&nFe.test(c[r][0])){i=c[r][1];break}function h(){G===0&&xe&&!e._done&&(xe=!1,s.end())}if(typeof i!="string")throw new Error("Multipart: Boundary not found");let p=Qd(o,"fieldSize",1*1024*1024),m=Qd(o,"fileSize",1/0),E=Qd(o,"files",1/0),b=Qd(o,"fields",1/0),A=Qd(o,"parts",1/0),R=Qd(o,"headerPairs",2e3),D=Qd(o,"headerSize",80*1024),K=0,z=0,G=0,ye,he,xe=!1;this._needDrain=!1,this._pause=!1,this._cb=void 0,this._nparts=0,this._boy=e;let Me={boundary:i,maxHeaderPairs:R,maxHeaderSize:D,partHwm:f.highWaterMark,highWaterMark:t.highWaterMark};this.parser=new eFe(Me),this.parser.on("drain",function(){if(s._needDrain=!1,s._cb&&!s._pause){let Ue=s._cb;s._cb=void 0,Ue()}}).on("part",function Ue(Ge){if(++s._nparts>A)return s.parser.removeListener("part",Ue),s.parser.on("part",Fp),e.hitPartsLimit=!0,e.emit("partsLimit"),Fp(Ge);if(he){let zt=he;zt.emit("end"),zt.removeAllListeners("end")}Ge.on("header",function(zt){let gr,Ot,Dt,Be,fi,hi,sr=0;if(zt["content-type"]&&(Dt=MQ(zt["content-type"][0]),Dt[0])){for(gr=Dt[0].toLowerCase(),r=0,n=Dt.length;r<n;++r)if(iFe.test(Dt[r][0])){Be=Dt[r][1].toLowerCase();break}}if(gr===void 0&&(gr="text/plain"),Be===void 0&&(Be=l),zt["content-disposition"]){if(Dt=MQ(zt["content-disposition"][0]),!sFe.test(Dt[0]))return Fp(Ge);for(r=0,n=Dt.length;r<n;++r)aFe.test(Dt[r][0])?Ot=Dt[r][1]:oFe.test(Dt[r][0])&&(hi=Dt[r][1],d||(hi=rFe(hi)))}else return Fp(Ge);zt["content-transfer-encoding"]?fi=zt["content-transfer-encoding"][0].toLowerCase():fi="7bit";let Tr,qr;if(a(Ot,gr,hi)){if(K===E)return e.hitFilesLimit||(e.hitFilesLimit=!0,e.emit("filesLimit")),Fp(Ge);if(++K,e.listenerCount("file")===0){s.parser._ignore();return}++G;let It=new n2(f);ye=It,It.on("end",function(){if(--G,s._pause=!1,h(),s._cb&&!s._needDrain){let ir=s._cb;s._cb=void 0,ir()}}),It._read=function(ir){if(s._pause&&(s._pause=!1,s._cb&&!s._needDrain)){let fr=s._cb;s._cb=void 0,fr()}},e.emit("file",Ot,It,hi,fi,gr),Tr=function(ir){if((sr+=ir.length)>m){let fr=m-sr+ir.length;fr>0&&It.push(ir.slice(0,fr)),It.truncated=!0,It.bytesRead=m,Ge.removeAllListeners("data"),It.emit("limit");return}else It.push(ir)||(s._pause=!0);It.bytesRead=sr},qr=function(){ye=void 0,It.push(null)}}else{if(z===b)return e.hitFieldsLimit||(e.hitFieldsLimit=!0,e.emit("fieldsLimit")),Fp(Ge);++z,++G;let It="",ir=!1;he=Ge,Tr=function(fr){if((sr+=fr.length)>p){let An=p-(sr-fr.length);It+=fr.toString("binary",0,An),ir=!0,Ge.removeAllListeners("data")}else It+=fr.toString("binary")},qr=function(){he=void 0,It.length&&(It=tFe(It,"binary",Be)),e.emit("field",Ot,It,!1,ir,fi,gr),--G,h()}}Ge._readableState.sync=!1,Ge.on("data",Tr),Ge.on("end",qr)}).on("error",function(zt){ye&&ye.emit("error",zt)})}).on("error",function(Ue){e.emit("error",Ue)}).on("finish",function(){xe=!0,h()})}yx.prototype.write=function(e,t){let r=this.parser.write(e);r&&!this._pause?t():(this._needDrain=!r,this._cb=t)};yx.prototype.end=function(){let e=this;e.parser.writable?e.parser.end():e._boy._done||process.nextTick(function(){e._boy._done=!0,e._boy.emit("finish")})};function Fp(e){e.resume()}function n2(e){UQ.call(this,e),this.bytesRead=0,this.truncated=!1}Z3e(n2,UQ);n2.prototype._read=function(e){};qQ.exports=yx});var jQ=S((Alt,HQ)=>{"use strict";var cFe=/\+/g,lFe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function s2(){this.buffer=void 0}s2.prototype.write=function(e){e=e.replace(cFe," ");let t="",r=0,n=0,s=e.length;for(;r<s;++r)this.buffer!==void 0?lFe[e.charCodeAt(r)]?(this.buffer+=e[r],++n,this.buffer.length===2&&(t+=String.fromCharCode(parseInt(this.buffer,16)),this.buffer=void 0)):(t+="%"+this.buffer,this.buffer=void 0,--r):e[r]==="%"&&(r>n&&(t+=e.substring(n,r),n=r),this.buffer="",++n);return n<s&&this.buffer===void 0&&(t+=e.substring(n)),t};s2.prototype.reset=function(){this.buffer=void 0};HQ.exports=s2});var zQ=S((xlt,KQ)=>{"use strict";var uFe=jQ(),Mp=px(),i2=hx(),dFe=/^charset$/i;Ex.detect=/^application\/x-www-form-urlencoded/i;function Ex(e,t){let r=t.limits,n=t.parsedConType;this.boy=e,this.fieldSizeLimit=i2(r,"fieldSize",1*1024*1024),this.fieldNameSizeLimit=i2(r,"fieldNameSize",100),this.fieldsLimit=i2(r,"fields",1/0);let s;for(var i=0,o=n.length;i<o;++i)if(Array.isArray(n[i])&&dFe.test(n[i][0])){s=n[i][1].toLowerCase();break}s===void 0&&(s=t.defCharset||"utf8"),this.decoder=new uFe,this.charset=s,this._fields=0,this._state="key",this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1}Ex.prototype.write=function(e,t){if(this._fields===this.fieldsLimit)return this.boy.hitFieldsLimit||(this.boy.hitFieldsLimit=!0,this.boy.emit("fieldsLimit")),t();let r,n,s,i=0,o=e.length;for(;i<o;)if(this._state==="key"){for(r=n=void 0,s=i;s<o;++s){if(this._checkingBytes||++i,e[s]===61){r=s;break}else if(e[s]===38){n=s;break}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesKey}if(r!==void 0)r>i&&(this._key+=this.decoder.write(e.toString("binary",i,r))),this._state="val",this._hitLimit=!1,this._checkingBytes=!0,this._val="",this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),i=r+1;else if(n!==void 0){++this._fields;let a,c=this._keyTrunc;if(n>i?a=this._key+=this.decoder.write(e.toString("binary",i,n)):a=this._key,this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),a.length&&this.boy.emit("field",Mp(a,"binary",this.charset),"",c,!1),i=n+1,this._fields===this.fieldsLimit)return t()}else this._hitLimit?(s>i&&(this._key+=this.decoder.write(e.toString("binary",i,s))),i=s,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit&&(this._checkingBytes=!1,this._keyTrunc=!0)):(i<o&&(this._key+=this.decoder.write(e.toString("binary",i))),i=o)}else{for(n=void 0,s=i;s<o;++s){if(this._checkingBytes||++i,e[s]===38){n=s;break}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesVal}if(n!==void 0){if(++this._fields,n>i&&(this._val+=this.decoder.write(e.toString("binary",i,n))),this.boy.emit("field",Mp(this._key,"binary",this.charset),Mp(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this._state="key",this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),i=n+1,this._fields===this.fieldsLimit)return t()}else this._hitLimit?(s>i&&(this._val+=this.decoder.write(e.toString("binary",i,s))),i=s,(this._val===""&&this.fieldSizeLimit===0||(this._bytesVal=this._val.length)===this.fieldSizeLimit)&&(this._checkingBytes=!1,this._valTrunc=!0)):(i<o&&(this._val+=this.decoder.write(e.toString("binary",i))),i=o)}t()};Ex.prototype.end=function(){this.boy._done||(this._state==="key"&&this._key.length>0?this.boy.emit("field",Mp(this._key,"binary",this.charset),"",this._keyTrunc,!1):this._state==="val"&&this.boy.emit("field",Mp(this._key,"binary",this.charset),Mp(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this.boy._done=!0,this.boy.emit("finish"))};KQ.exports=Ex});var WQ=S((Ilt,c0)=>{"use strict";var o2=require("node:stream").Writable,{inherits:fFe}=require("node:util"),hFe=ZB(),$Q=VQ(),GQ=zQ(),pFe=r2();function qc(e){if(!(this instanceof qc))return new qc(e);if(typeof e!="object")throw new TypeError("Busboy expected an options-Object.");if(typeof e.headers!="object")throw new TypeError("Busboy expected an options-Object with headers-attribute.");if(typeof e.headers["content-type"]!="string")throw new TypeError("Missing Content-Type-header.");let{headers:t,...r}=e;this.opts={autoDestroy:!1,...r},o2.call(this,this.opts),this._done=!1,this._parser=this.getParserByHeaders(t),this._finished=!1}fFe(qc,o2);qc.prototype.emit=function(e){if(e==="finish"){if(this._done){if(this._finished)return}else{this._parser?.end();return}this._finished=!0}o2.prototype.emit.apply(this,arguments)};qc.prototype.getParserByHeaders=function(e){let t=pFe(e["content-type"]),r={defCharset:this.opts.defCharset,fileHwm:this.opts.fileHwm,headers:e,highWaterMark:this.opts.highWaterMark,isPartAFile:this.opts.isPartAFile,limits:this.opts.limits,parsedConType:t,preservePath:this.opts.preservePath};if($Q.detect.test(t[0]))return new $Q(this,r);if(GQ.detect.test(t[0]))return new GQ(this,r);throw new Error("Unsupported Content-Type.")};qc.prototype._write=function(e,t,r){this._parser.write(e,r)};c0.exports=qc;c0.exports.default=qc;c0.exports.Busboy=qc;c0.exports.Dicer=hFe});var d0=S(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.Http2SessionHandler=Jr.ExponentialBackoffPoller=Jr.ApiSettings=Jr.AuthorizedHttp2Client=Jr.AuthorizedHttpClient=Jr.parseHttpResponse=Jr.Http2Client=Jr.HttpClient=Jr.RequestClient=Jr.defaultRetryConfig=Jr.RequestResponseError=void 0;var At=as(),Qo=Vn(),mFe=require("http"),gFe=require("https"),yFe=require("http2"),a2=require("url"),EFe=require("events"),Sx=class{constructor(t){this.status=t.status,this.headers=t.headers,this.text=t.data;try{if(!t.data)throw new At.FirebaseAppError(At.AppErrorCodes.INTERNAL_ERROR,"HTTP response missing data.");this.parsedData=JSON.parse(t.data)}catch(r){this.parsedData=void 0,this.parseError=r}this.request=`${t.config.method} ${t.config.url}`}get data(){if(this.isJson())return this.parsedData;throw new At.FirebaseAppError(At.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,`Error while parsing response data: "${this.parseError.toString()}". Raw server response: "${this.text}". Status code: "${this.status}". Outgoing request: "${this.request}."`)}isJson(){return typeof this.parsedData<"u"}},c2=class{constructor(t){this.status=t.status,this.headers=t.headers,this.multipart=t.multipart}get text(){throw new At.FirebaseAppError(At.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,"Unable to parse multipart payload as text")}get data(){throw new At.FirebaseAppError(At.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,"Unable to parse multipart payload as JSON")}isJson(){return!1}},l0=class e extends Error{constructor(t){super(`Server responded with status ${t.status}.`),this.response=t,Object.setPrototypeOf(this,e.prototype)}};Jr.RequestResponseError=l0;function E2(){return{maxRetries:4,statusCodes:[503],ioErrorCodes:["ECONNRESET","ETIMEDOUT"],backOffFactor:.5,maxDelayInMillis:60*1e3}}Jr.defaultRetryConfig=E2;function SFe(e){if(!Qo.isNumber(e.maxRetries)||e.maxRetries<0)throw new At.FirebaseAppError(At.AppErrorCodes.INVALID_ARGUMENT,"maxRetries must be a non-negative integer");if(typeof e.backOffFactor<"u"&&(!Qo.isNumber(e.backOffFactor)||e.backOffFactor<0))throw new At.FirebaseAppError(At.AppErrorCodes.INVALID_ARGUMENT,"backOffFactor must be a non-negative number");if(!Qo.isNumber(e.maxDelayInMillis)||e.maxDelayInMillis<0)throw new At.FirebaseAppError(At.AppErrorCodes.INVALID_ARGUMENT,"maxDelayInMillis must be a non-negative integer");if(typeof e.statusCodes<"u"&&!Qo.isArray(e.statusCodes))throw new At.FirebaseAppError(At.AppErrorCodes.INVALID_ARGUMENT,"statusCodes must be an array");if(typeof e.ioErrorCodes<"u"&&!Qo.isArray(e.ioErrorCodes))throw new At.FirebaseAppError(At.AppErrorCodes.INVALID_ARGUMENT,"ioErrorCodes must be an array")}var u0=class{constructor(t=E2()){t&&(this.retry=t,SFe(this.retry))}createRequestResponse(t){return t.multipart?new c2(t):new Sx(t)}waitForRetry(t){return t>0?new Promise(r=>{setTimeout(r,t)}):Promise.resolve()}getRetryDelayMillis(t,r){if(!this.isRetryEligible(t,r))return[0,!1];let n=r.response;if(n&&n.headers["retry-after"]){let s=this.parseRetryAfterIntoMillis(n.headers["retry-after"]);if(s>0)return[s,!0]}return[this.backOffDelayMillis(t),!0]}isRetryEligible(t,r){return!this.retry||t>=this.retry.maxRetries?!1:r.response?(this.retry.statusCodes||[]).indexOf(r.response.status)!==-1:r.code?(this.retry.ioErrorCodes||[]).indexOf(r.code)!==-1:!1}parseRetryAfterIntoMillis(t){let r=parseInt(t,10);if(!isNaN(r))return r*1e3;let n=new Date(t);return isNaN(n.getTime())?-1:n.getTime()-Date.now()}backOffDelayMillis(t){if(t===0)return 0;if(!this.retry)throw new At.FirebaseAppError(At.AppErrorCodes.INTERNAL_ERROR,"Expected this.retry to exist.");let r=this.retry.backOffFactor||0,n=2**t*r;return Math.min(n*1e3,this.retry.maxDelayInMillis)}};Jr.RequestClient=u0;var Cx=class extends u0{constructor(t){super(t)}send(t){return this.sendWithRetry(t)}sendWithRetry(t,r=0){return l2.invoke(t).then(n=>this.createRequestResponse(n)).catch(n=>{let[s,i]=this.getRetryDelayMillis(r,n);if(i&&this.retry&&s<=this.retry.maxDelayInMillis)return this.waitForRetry(s).then(()=>this.sendWithRetry(t,r+1));throw n.response?new l0(this.createRequestResponse(n.response)):n.code==="ETIMEDOUT"?new At.FirebaseAppError(At.AppErrorCodes.NETWORK_TIMEOUT,`Error while making request: ${n.message}.`):new At.FirebaseAppError(At.AppErrorCodes.NETWORK_ERROR,`Error while making request: ${n.message}. Error code: ${n.code}`)})}};Jr.HttpClient=Cx;var _x=class extends u0{constructor(t=E2()){super(t)}send(t){return this.sendWithRetry(t)}sendWithRetry(t,r=0){return u2.invoke(t).then(n=>this.createRequestResponse(n)).catch(n=>{let[s,i]=this.getRetryDelayMillis(r,n);if(i&&this.retry&&s<=this.retry.maxDelayInMillis)return this.waitForRetry(s).then(()=>this.sendWithRetry(t,r+1));throw n.response?new l0(this.createRequestResponse(n.response)):n.code==="ETIMEDOUT"?new At.FirebaseAppError(At.AppErrorCodes.NETWORK_TIMEOUT,`Error while making request: ${n.message}.`):new At.FirebaseAppError(At.AppErrorCodes.NETWORK_ERROR,`Error while making request: ${n.message}. Error code: ${n.code}`)})}};Jr.Http2Client=_x;function CFe(e,t){let r=Qo.isBuffer(e)?e.toString("utf-8"):e,n=r.indexOf(`\r
\r
`),s=r.substring(0,n).split(`\r
`),o=s[0].trim().split(/\s/)[1],a={};s.slice(1).forEach(d=>{let f=d.indexOf(":"),h=d.substring(0,f).trim().toLowerCase(),p=d.substring(f+1).trim();a[h]=p});let c=r.substring(n+4);c.endsWith(`
`)&&(c=c.slice(0,-1)),c.endsWith("\r")&&(c=c.slice(0,-1));let l={status:parseInt(o,10),headers:a,data:c,config:t,request:null};if(!Qo.isNumber(l.status))throw new At.FirebaseAppError(At.AppErrorCodes.INTERNAL_ERROR,"Malformed HTTP status line.");return new Sx(l)}Jr.parseHttpResponse=CFe;var bx=class{constructor(t){this.configImpl=t}getMultipartBoundary(t){let r=t["content-type"];if(!r||!r.startsWith("multipart/"))return null;let n=r.split(";"),s={};return n.slice(1).map(o=>o.trim().split("=")).reduce((o,a)=>{if(a.length===2){let c={};return c[a[0]]=a[1],Object.assign(o,c)}return o},s).boundary}handleMultipartResponse(t,r,n){let s=WQ(),i=new s.Dicer({boundary:n}),o=[];i.on("part",a=>{let c=[];a.on("data",l=>{c.push(l)}),a.on("end",()=>{o.push(Buffer.concat(c))})}),i.on("finish",()=>{t.data=void 0,t.multipart=o,this.finalizeResponse(t)}),r.pipe(i)}handleRegularResponse(t,r){let n=[];r.on("data",s=>{n.push(s)}),r.on("error",s=>{let i=t.request;i&&i.destroyed||this.enhanceAndReject(s,null,i)}),r.on("end",()=>{t.data=Buffer.concat(n).toString(),this.finalizeResponse(t)})}finalizeResponse(t){t.status>=200&&t.status<300?this.resolve(t):this.rejectWithError("Request failed with status code "+t.status,null,t.request,t)}rejectWithError(t,r,n,s){let i=new Error(t);this.enhanceAndReject(i,r,n,s)}enhanceAndReject(t,r,n,s){this.reject(this.enhanceError(t,r,n,s))}enhanceError(t,r,n,s){return t.config=this.configImpl,r&&(t.code=r),t.request=n,t.response=s,t}},l2=class e extends bx{static invoke(t){return new e(t).promise}constructor(t){let r=new d2(t);super(r);try{this.httpConfigImpl=r,this.options=this.httpConfigImpl.buildRequestOptions(),this.entity=this.httpConfigImpl.buildEntity(this.options.headers),this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s,this.execute()})}catch(n){this.promise=Promise.reject(this.enhanceError(n,null))}}execute(){let r=(this.options.protocol==="https:"?gFe:mFe).request(this.options,i=>{this.handleResponse(i,r)});r.on("error",i=>{r.aborted||this.enhanceAndReject(i,null,r)});let n=this.httpConfigImpl.timeout,s=()=>{r.destroy(),this.rejectWithError(`timeout of ${n}ms exceeded`,"ETIMEDOUT",r)};n&&r.setTimeout(n,s),r.end(this.entity)}handleResponse(t,r){if(r.aborted)return;if(!t.statusCode)throw new At.FirebaseAppError(At.AppErrorCodes.INTERNAL_ERROR,"Expected a statusCode on the response from a ClientRequest");let n={status:t.statusCode,headers:t.headers,request:r,data:void 0,config:this.httpConfigImpl},s=this.getMultipartBoundary(t.headers),i=this.uncompressResponse(t);s?this.handleMultipartResponse(n,i,s):this.handleRegularResponse(n,i)}uncompressResponse(t){let r=t,n=["gzip","compress","deflate"];if(t.headers["content-encoding"]&&n.indexOf(t.headers["content-encoding"])!==-1){let s=require("zlib");r=r.pipe(s.createUnzip()),delete t.headers["content-encoding"]}return r}},u2=class e extends bx{static invoke(t){return new e(t).promise}constructor(t){let r=new f2(t);super(r);try{this.http2ConfigImpl=r,this.options=this.http2ConfigImpl.buildRequestOptions(),this.entity=this.http2ConfigImpl.buildEntity(this.options.headers),this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s,this.execute()})}catch(n){this.promise=Promise.reject(this.enhanceError(n,null))}}execute(){let t=this.http2ConfigImpl.http2SessionHandler.session.request({":method":this.options.method,":scheme":this.options.protocol,":path":this.options.path,...this.options.headers});t.on("response",s=>{this.handleHttp2Response(s,t)}),t.on("error",s=>{t.aborted||this.enhanceAndReject(s,null,t)});let r=this.http2ConfigImpl.timeout,n=()=>{t.destroy(),this.rejectWithError(`timeout of ${r}ms exceeded`,"ETIMEDOUT",t)};r&&t.setTimeout(r,n),t.end(this.entity)}handleHttp2Response(t,r){if(r.aborted)return;if(!t[":status"])throw new At.FirebaseAppError(At.AppErrorCodes.INTERNAL_ERROR,"Expected a statusCode on the response from a ClientRequest");let n={status:t[":status"],headers:t,request:r,data:void 0,config:this.http2ConfigImpl},s=this.getMultipartBoundary(t),i=this.uncompressResponse(t,r);s?this.handleMultipartResponse(n,i,s):this.handleRegularResponse(n,i)}uncompressResponse(t,r){let n=r,s=["gzip","compress","deflate"];if(t["content-encoding"]&&s.indexOf(t["content-encoding"])!==-1){let i=require("zlib");n=n.pipe(i.createUnzip()),delete t["content-encoding"]}return n}},vx=class{constructor(t){this.config=t,this.config=t}get method(){return this.config.method}get url(){return this.config.url}get headers(){return this.config.headers}get data(){return this.config.data}get timeout(){return this.config.timeout}buildEntity(t){let r;if(!this.hasEntity()||!this.isEntityEnclosingRequest())return r;if(Qo.isBuffer(this.data))r=this.data;else if(Qo.isObject(this.data))r=Buffer.from(JSON.stringify(this.data),"utf-8"),typeof t["content-type"]>"u"&&(t["content-type"]="application/json;charset=utf-8");else if(Qo.isString(this.data))r=Buffer.from(this.data,"utf-8");else throw new Error("Request data must be a string, a Buffer or a json serializable object");return t["Content-Length"]=r.length.toString(),r}buildUrl(){let t=this.urlWithProtocol();if(!this.hasEntity()||this.isEntityEnclosingRequest())return a2.parse(t);if(!Qo.isObject(this.data))throw new Error(`${this.method} requests cannot have a body`);let r=new a2.URL(t),n=this.data;for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.searchParams.append(s,n[s]);return a2.parse(r.toString())}urlWithProtocol(){let t=this.url;return t.startsWith("http://")||t.startsWith("https://")?t:`https://${t}`}hasEntity(){return!!this.data}isEntityEnclosingRequest(){return this.method!=="GET"&&this.method!=="HEAD"}},d2=class extends vx{constructor(t){super(t),this.httpConfig=t}get httpAgent(){return this.httpConfig.httpAgent}buildRequestOptions(){let t=this.buildUrl(),r=t.protocol,n=t.port;return n||(n=r==="https:"?"443":"80"),{protocol:r,hostname:t.hostname,port:n,path:t.path,method:this.method,agent:this.httpAgent,headers:Object.assign({},this.headers)}}},f2=class extends vx{constructor(t){super(t),this.http2Config=t}get http2SessionHandler(){return this.http2Config.http2SessionHandler}buildRequestOptions(){let t=this.buildUrl();return{protocol:t.protocol,path:t.path,method:this.method,headers:Object.assign({},this.headers)}}},h2=class extends Cx{constructor(t){super(),this.app=t}send(t){return this.getToken().then(r=>{let n=Object.assign({},t);n.headers=Object.assign({},t.headers);let s="Authorization";return n.headers[s]=`Bearer ${r}`,!n.headers["x-goog-user-project"]&&this.app.options.projectId&&(n.headers["x-goog-user-project"]=this.app.options.projectId),!n.httpAgent&&this.app.options.httpAgent&&(n.httpAgent=this.app.options.httpAgent),super.send(n)})}getToken(){return this.app.INTERNAL.getToken().then(t=>t.accessToken)}};Jr.AuthorizedHttpClient=h2;var p2=class extends _x{constructor(t){super(),this.app=t}send(t){return this.getToken().then(r=>{let n=Object.assign({},t);n.headers=Object.assign({},t.headers);let s="Authorization";return n.headers[s]=`Bearer ${r}`,super.send(n)})}getToken(){return this.app.INTERNAL.getToken().then(t=>t.accessToken)}};Jr.AuthorizedHttp2Client=p2;var m2=class{constructor(t,r="POST"){this.endpoint=t,this.httpMethod=r,this.setRequestValidator(null).setResponseValidator(null)}getEndpoint(){return this.endpoint}getHttpMethod(){return this.httpMethod}setRequestValidator(t){let r=()=>{};return this.requestValidator=t||r,this}getRequestValidator(){return this.requestValidator}setResponseValidator(t){let r=()=>{};return this.responseValidator=t||r,this}getResponseValidator(){return this.responseValidator}};Jr.ApiSettings=m2;var g2=class extends EFe.EventEmitter{constructor(t=1e3,r=1e4,n=6e4){super(),this.initialPollingDelayMillis=t,this.maxPollingDelayMillis=r,this.masterTimeoutMillis=n,this.numTries=0,this.completed=!1}poll(t){if(this.pollCallback)throw new Error("poll() can only be called once per instance of ExponentialBackoffPoller");return this.pollCallback=t,this.on("poll",this.repoll),this.masterTimer=setTimeout(()=>{this.completed||(this.markCompleted(),this.reject(new Error("ExponentialBackoffPoller deadline exceeded - Master timeout reached")))},this.masterTimeoutMillis),new Promise((r,n)=>{this.resolve=r,this.reject=n,this.repoll()})}repoll(){this.pollCallback().then(t=>{if(!this.completed){if(!t){this.repollTimer=setTimeout(()=>this.emit("poll"),this.getPollingDelayMillis()),this.numTries++;return}this.markCompleted(),this.resolve(t)}}).catch(t=>{this.completed||(this.markCompleted(),this.reject(t))})}getPollingDelayMillis(){let t=Math.pow(2,this.numTries)*this.initialPollingDelayMillis;return Math.min(t,this.maxPollingDelayMillis)}markCompleted(){this.completed=!0,this.masterTimer&&clearTimeout(this.masterTimer),this.repollTimer&&clearTimeout(this.repollTimer)}};Jr.ExponentialBackoffPoller=g2;var y2=class{constructor(t){this.http2Session=this.createSession(t)}createSession(t){if(!this.http2Session||this.isClosed){let r={peerMaxConcurrentStreams:100,ALPNProtocols:["h2"]},n=yFe.connect(t,r);return n.on("goaway",(s,i,o)=>{throw new At.FirebaseAppError(At.AppErrorCodes.NETWORK_ERROR,`Error while making requests: GOAWAY - ${o.toString()}, Error code: ${s}`)}),n.on("error",s=>{throw new At.FirebaseAppError(At.AppErrorCodes.NETWORK_ERROR,`Error while making requests: ${s}`)}),n}return this.http2Session}get session(){return this.http2Session}get isClosed(){return this.http2Session.closed}close(){this.http2Session.close()}};Jr.Http2SessionHandler=y2});var Up=S((S2,XQ)=>{var Ax=require("buffer"),Va=Ax.Buffer;function JQ(e,t){for(var r in e)t[r]=e[r]}Va.from&&Va.alloc&&Va.allocUnsafe&&Va.allocUnsafeSlow?XQ.exports=Ax:(JQ(Ax,S2),S2.Buffer=Zd);function Zd(e,t,r){return Va(e,t,r)}Zd.prototype=Object.create(Va.prototype);JQ(Va,Zd);Zd.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Va(e,t,r)};Zd.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Va(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Zd.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Va(e)};Zd.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ax.SlowBuffer(e)}});var C2=S((Tlt,YQ)=>{var xx=Up().Buffer,_Fe=require("stream"),bFe=require("util");function Ix(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=xx.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=xx.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}bFe.inherits(Ix,_Fe);Ix.prototype.write=function(t){this.buffer=xx.concat([this.buffer,xx.from(t)]),this.emit("data",t)};Ix.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1};YQ.exports=Ix});var ZQ=S((Rlt,QQ)=>{"use strict";function _2(e){var t=(e/8|0)+(e%8===0?0:1);return t}var vFe={ES256:_2(256),ES384:_2(384),ES512:_2(521)};function AFe(e){var t=vFe[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}QQ.exports=AFe});var oZ=S((Nlt,iZ)=>{"use strict";var wx=Up().Buffer,tZ=ZQ(),Tx=128,rZ=0,xFe=32,IFe=16,wFe=2,nZ=IFe|xFe|rZ<<6,Rx=wFe|rZ<<6;function TFe(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sZ(e){if(wx.isBuffer(e))return e;if(typeof e=="string")return wx.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function RFe(e,t){e=sZ(e);var r=tZ(t),n=r+1,s=e.length,i=0;if(e[i++]!==nZ)throw new Error('Could not find expected "seq"');var o=e[i++];if(o===(Tx|1)&&(o=e[i++]),s-i<o)throw new Error('"seq" specified length of "'+o+'", only "'+(s-i)+'" remaining');if(e[i++]!==Rx)throw new Error('Could not find expected "int" for "r"');var a=e[i++];if(s-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(s-i-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var c=i;if(i+=a,e[i++]!==Rx)throw new Error('Could not find expected "int" for "s"');var l=e[i++];if(s-i!==l)throw new Error('"s" specified length of "'+l+'", expected "'+(s-i)+'"');if(n<l)throw new Error('"s" specified length of "'+l+'", max of "'+n+'" is acceptable');var d=i;if(i+=l,i!==s)throw new Error('Expected to consume entire buffer, but "'+(s-i)+'" bytes remain');var f=r-a,h=r-l,p=wx.allocUnsafe(f+a+h+l);for(i=0;i<f;++i)p[i]=0;e.copy(p,i,c+Math.max(-f,0),c+a),i=r;for(var m=i;i<m+h;++i)p[i]=0;return e.copy(p,i,d+Math.max(-h,0),d+l),p=p.toString("base64"),p=TFe(p),p}function eZ(e,t,r){for(var n=0;t+n<r&&e[t+n]===0;)++n;var s=e[t+n]>=Tx;return s&&--n,n}function NFe(e,t){e=sZ(e);var r=tZ(t),n=e.length;if(n!==r*2)throw new TypeError('"'+t+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var s=eZ(e,0,r),i=eZ(e,r,e.length),o=r-s,a=r-i,c=2+o+1+1+a,l=c<Tx,d=wx.allocUnsafe((l?2:3)+c),f=0;return d[f++]=nZ,l?d[f++]=c:(d[f++]=Tx|1,d[f++]=c&255),d[f++]=Rx,d[f++]=o,s<0?(d[f++]=0,f+=e.copy(d,f,0,r)):f+=e.copy(d,f,s,r),d[f++]=Rx,d[f++]=a,i<0?(d[f++]=0,e.copy(d,f,r)):e.copy(d,f,r+i),d}iZ.exports={derToJose:RFe,joseToDer:NFe}});var cZ=S((Plt,aZ)=>{"use strict";var f0=require("buffer").Buffer,b2=require("buffer").SlowBuffer;aZ.exports=Nx;function Nx(e,t){if(!f0.isBuffer(e)||!f0.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}Nx.install=function(){f0.prototype.equal=b2.prototype.equal=function(t){return Nx(this,t)}};var PFe=f0.prototype.equal,OFe=b2.prototype.equal;Nx.restore=function(){f0.prototype.equal=PFe,b2.prototype.equal=OFe}});var I2=S((Olt,yZ)=>{var Vp=Up().Buffer,So=require("crypto"),uZ=oZ(),lZ=require("util"),DFe=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,h0="secret must be a string or buffer",qp="key must be a string or a buffer",kFe="key must be a string, a buffer or an object",A2=typeof So.createPublicKey=="function";A2&&(qp+=" or a KeyObject",h0+="or a KeyObject");function dZ(e){if(!Vp.isBuffer(e)&&typeof e!="string"&&(!A2||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw Zo(qp)}function fZ(e){if(!Vp.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw Zo(kFe)}function BFe(e){if(!Vp.isBuffer(e)){if(typeof e=="string")return e;if(!A2||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw Zo(h0)}}function x2(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hZ(e){e=e.toString();var t=4-e.length%4;if(t!==4)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function Zo(e){var t=[].slice.call(arguments,1),r=lZ.format.bind(lZ,e).apply(null,t);return new TypeError(r)}function LFe(e){return Vp.isBuffer(e)||typeof e=="string"}function p0(e){return LFe(e)||(e=JSON.stringify(e)),e}function pZ(e){return function(r,n){BFe(n),r=p0(r);var s=So.createHmac("sha"+e,n),i=(s.update(r),s.digest("base64"));return x2(i)}}var v2,FFe="timingSafeEqual"in So?function(t,r){return t.byteLength!==r.byteLength?!1:So.timingSafeEqual(t,r)}:function(t,r){return v2||(v2=cZ()),v2(t,r)};function MFe(e){return function(r,n,s){var i=pZ(e)(r,s);return FFe(Vp.from(n),Vp.from(i))}}function mZ(e){return function(r,n){fZ(n),r=p0(r);var s=So.createSign("RSA-SHA"+e),i=(s.update(r),s.sign(n,"base64"));return x2(i)}}function gZ(e){return function(r,n,s){dZ(s),r=p0(r),n=hZ(n);var i=So.createVerify("RSA-SHA"+e);return i.update(r),i.verify(s,n,"base64")}}function UFe(e){return function(r,n){fZ(n),r=p0(r);var s=So.createSign("RSA-SHA"+e),i=(s.update(r),s.sign({key:n,padding:So.constants.RSA_PKCS1_PSS_PADDING,saltLength:So.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return x2(i)}}function qFe(e){return function(r,n,s){dZ(s),r=p0(r),n=hZ(n);var i=So.createVerify("RSA-SHA"+e);return i.update(r),i.verify({key:s,padding:So.constants.RSA_PKCS1_PSS_PADDING,saltLength:So.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function VFe(e){var t=mZ(e);return function(){var n=t.apply(null,arguments);return n=uZ.derToJose(n,"ES"+e),n}}function HFe(e){var t=gZ(e);return function(n,s,i){s=uZ.joseToDer(s,"ES"+e).toString("base64");var o=t(n,s,i);return o}}function jFe(){return function(){return""}}function KFe(){return function(t,r){return r===""}}yZ.exports=function(t){var r={hs:pZ,rs:mZ,ps:UFe,es:VFe,none:jFe},n={hs:MFe,rs:gZ,ps:qFe,es:HFe,none:KFe},s=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!s)throw Zo(DFe,t);var i=(s[1]||s[3]).toLowerCase(),o=s[2];return{sign:r[i](o),verify:n[i](o)}}});var w2=S((Dlt,EZ)=>{var zFe=require("buffer").Buffer;EZ.exports=function(t){return typeof t=="string"?t:typeof t=="number"||zFe.isBuffer(t)?t.toString():JSON.stringify(t)}});var AZ=S((klt,vZ)=>{var $Fe=Up().Buffer,SZ=C2(),GFe=I2(),WFe=require("stream"),CZ=w2(),T2=require("util");function _Z(e,t){return $Fe.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function JFe(e,t,r){r=r||"utf8";var n=_Z(CZ(e),"binary"),s=_Z(CZ(t),r);return T2.format("%s.%s",n,s)}function bZ(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,s=e.encoding,i=GFe(t.alg),o=JFe(t,r,s),a=i.sign(o,n);return T2.format("%s.%s",o,a)}function Px(e){var t=e.secret||e.privateKey||e.key,r=new SZ(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new SZ(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}T2.inherits(Px,WFe);Px.prototype.sign=function(){try{var t=bZ({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Px.sign=bZ;vZ.exports=Px});var kZ=S((Blt,DZ)=>{var IZ=Up().Buffer,xZ=C2(),XFe=I2(),YFe=require("stream"),wZ=w2(),QFe=require("util"),ZFe=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function eMe(e){return Object.prototype.toString.call(e)==="[object Object]"}function tMe(e){if(eMe(e))return e;try{return JSON.parse(e)}catch{return}}function TZ(e){var t=e.split(".",1)[0];return tMe(IZ.from(t,"base64").toString("binary"))}function rMe(e){return e.split(".",2).join(".")}function RZ(e){return e.split(".")[2]}function nMe(e,t){t=t||"utf8";var r=e.split(".")[1];return IZ.from(r,"base64").toString(t)}function NZ(e){return ZFe.test(e)&&!!TZ(e)}function PZ(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}e=wZ(e);var s=RZ(e),i=rMe(e),o=XFe(t);return o.verify(i,s,r)}function OZ(e,t){if(t=t||{},e=wZ(e),!NZ(e))return null;var r=TZ(e);if(!r)return null;var n=nMe(e);return(r.typ==="JWT"||t.json)&&(n=JSON.parse(n,t.encoding)),{header:r,payload:n,signature:RZ(e)}}function Hp(e){e=e||{};var t=e.secret||e.publicKey||e.key,r=new xZ(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new xZ(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}QFe.inherits(Hp,YFe);Hp.prototype.verify=function(){try{var t=PZ(this.signature.buffer,this.algorithm,this.key.buffer),r=OZ(this.signature.buffer,this.encoding);return this.emit("done",t,r),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};Hp.decode=OZ;Hp.isValid=NZ;Hp.verify=PZ;DZ.exports=Hp});var Dx=S(Ql=>{var BZ=AZ(),Ox=kZ(),sMe=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Ql.ALGORITHMS=sMe;Ql.sign=BZ.sign;Ql.verify=Ox.verify;Ql.decode=Ox.decode;Ql.isValid=Ox.isValid;Ql.createSign=function(t){return new BZ(t)};Ql.createVerify=function(t){return new Ox(t)}});var R2=S((Flt,LZ)=>{var iMe=Dx();LZ.exports=function(e,t){t=t||{};var r=iMe.decode(e,t);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var s=JSON.parse(n);s!==null&&typeof s=="object"&&(n=s)}catch{}return t.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var m0=S((Mlt,FZ)=>{var kx=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};kx.prototype=Object.create(Error.prototype);kx.prototype.constructor=kx;FZ.exports=kx});var N2=S((Ult,UZ)=>{var MZ=m0(),Bx=function(e,t){MZ.call(this,e),this.name="NotBeforeError",this.date=t};Bx.prototype=Object.create(MZ.prototype);Bx.prototype.constructor=Bx;UZ.exports=Bx});var P2=S((qlt,VZ)=>{var qZ=m0(),Lx=function(e,t){qZ.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};Lx.prototype=Object.create(qZ.prototype);Lx.prototype.constructor=Lx;VZ.exports=Lx});var O2=S((Vlt,HZ)=>{var jp=1e3,Kp=jp*60,zp=Kp*60,ef=zp*24,oMe=ef*7,aMe=ef*365.25;HZ.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return cMe(e);if(r==="number"&&isFinite(e))return t.long?uMe(e):lMe(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function cMe(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*aMe;case"weeks":case"week":case"w":return r*oMe;case"days":case"day":case"d":return r*ef;case"hours":case"hour":case"hrs":case"hr":case"h":return r*zp;case"minutes":case"minute":case"mins":case"min":case"m":return r*Kp;case"seconds":case"second":case"secs":case"sec":case"s":return r*jp;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function lMe(e){var t=Math.abs(e);return t>=ef?Math.round(e/ef)+"d":t>=zp?Math.round(e/zp)+"h":t>=Kp?Math.round(e/Kp)+"m":t>=jp?Math.round(e/jp)+"s":e+"ms"}function uMe(e){var t=Math.abs(e);return t>=ef?Fx(e,t,ef,"day"):t>=zp?Fx(e,t,zp,"hour"):t>=Kp?Fx(e,t,Kp,"minute"):t>=jp?Fx(e,t,jp,"second"):e+" ms"}function Fx(e,t,r,n){var s=t>=r*1.5;return Math.round(e/r)+" "+n+(s?"s":"")}});var D2=S((Hlt,jZ)=>{var dMe=O2();jZ.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if(typeof e=="string"){var n=dMe(e);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof e=="number"?r+e:void 0}});var g0=S((jlt,KZ)=>{"use strict";var fMe="2.0.0",hMe=Number.MAX_SAFE_INTEGER||9007199254740991,pMe=16,mMe=250,gMe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];KZ.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:pMe,MAX_SAFE_BUILD_LENGTH:mMe,MAX_SAFE_INTEGER:hMe,RELEASE_TYPES:gMe,SEMVER_SPEC_VERSION:fMe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var y0=S((Klt,zZ)=>{"use strict";var yMe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};zZ.exports=yMe});var $p=S((Ha,$Z)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:k2,MAX_SAFE_BUILD_LENGTH:EMe,MAX_LENGTH:SMe}=g0(),CMe=y0();Ha=$Z.exports={};var _Me=Ha.re=[],bMe=Ha.safeRe=[],Oe=Ha.src=[],vMe=Ha.safeSrc=[],De=Ha.t={},AMe=0,B2="[a-zA-Z0-9-]",xMe=[["\\s",1],["\\d",SMe],[B2,EMe]],IMe=e=>{for(let[t,r]of xMe)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},it=(e,t,r)=>{let n=IMe(t),s=AMe++;CMe(e,s,t),De[e]=s,Oe[s]=t,vMe[s]=n,_Me[s]=new RegExp(t,r?"g":void 0),bMe[s]=new RegExp(n,r?"g":void 0)};it("NUMERICIDENTIFIER","0|[1-9]\\d*");it("NUMERICIDENTIFIERLOOSE","\\d+");it("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${B2}*`);it("MAINVERSION",`(${Oe[De.NUMERICIDENTIFIER]})\\.(${Oe[De.NUMERICIDENTIFIER]})\\.(${Oe[De.NUMERICIDENTIFIER]})`);it("MAINVERSIONLOOSE",`(${Oe[De.NUMERICIDENTIFIERLOOSE]})\\.(${Oe[De.NUMERICIDENTIFIERLOOSE]})\\.(${Oe[De.NUMERICIDENTIFIERLOOSE]})`);it("PRERELEASEIDENTIFIER",`(?:${Oe[De.NONNUMERICIDENTIFIER]}|${Oe[De.NUMERICIDENTIFIER]})`);it("PRERELEASEIDENTIFIERLOOSE",`(?:${Oe[De.NONNUMERICIDENTIFIER]}|${Oe[De.NUMERICIDENTIFIERLOOSE]})`);it("PRERELEASE",`(?:-(${Oe[De.PRERELEASEIDENTIFIER]}(?:\\.${Oe[De.PRERELEASEIDENTIFIER]})*))`);it("PRERELEASELOOSE",`(?:-?(${Oe[De.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Oe[De.PRERELEASEIDENTIFIERLOOSE]})*))`);it("BUILDIDENTIFIER",`${B2}+`);it("BUILD",`(?:\\+(${Oe[De.BUILDIDENTIFIER]}(?:\\.${Oe[De.BUILDIDENTIFIER]})*))`);it("FULLPLAIN",`v?${Oe[De.MAINVERSION]}${Oe[De.PRERELEASE]}?${Oe[De.BUILD]}?`);it("FULL",`^${Oe[De.FULLPLAIN]}$`);it("LOOSEPLAIN",`[v=\\s]*${Oe[De.MAINVERSIONLOOSE]}${Oe[De.PRERELEASELOOSE]}?${Oe[De.BUILD]}?`);it("LOOSE",`^${Oe[De.LOOSEPLAIN]}$`);it("GTLT","((?:<|>)?=?)");it("XRANGEIDENTIFIERLOOSE",`${Oe[De.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);it("XRANGEIDENTIFIER",`${Oe[De.NUMERICIDENTIFIER]}|x|X|\\*`);it("XRANGEPLAIN",`[v=\\s]*(${Oe[De.XRANGEIDENTIFIER]})(?:\\.(${Oe[De.XRANGEIDENTIFIER]})(?:\\.(${Oe[De.XRANGEIDENTIFIER]})(?:${Oe[De.PRERELEASE]})?${Oe[De.BUILD]}?)?)?`);it("XRANGEPLAINLOOSE",`[v=\\s]*(${Oe[De.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Oe[De.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Oe[De.XRANGEIDENTIFIERLOOSE]})(?:${Oe[De.PRERELEASELOOSE]})?${Oe[De.BUILD]}?)?)?`);it("XRANGE",`^${Oe[De.GTLT]}\\s*${Oe[De.XRANGEPLAIN]}$`);it("XRANGELOOSE",`^${Oe[De.GTLT]}\\s*${Oe[De.XRANGEPLAINLOOSE]}$`);it("COERCEPLAIN",`(^|[^\\d])(\\d{1,${k2}})(?:\\.(\\d{1,${k2}}))?(?:\\.(\\d{1,${k2}}))?`);it("COERCE",`${Oe[De.COERCEPLAIN]}(?:$|[^\\d])`);it("COERCEFULL",Oe[De.COERCEPLAIN]+`(?:${Oe[De.PRERELEASE]})?(?:${Oe[De.BUILD]})?(?:$|[^\\d])`);it("COERCERTL",Oe[De.COERCE],!0);it("COERCERTLFULL",Oe[De.COERCEFULL],!0);it("LONETILDE","(?:~>?)");it("TILDETRIM",`(\\s*)${Oe[De.LONETILDE]}\\s+`,!0);Ha.tildeTrimReplace="$1~";it("TILDE",`^${Oe[De.LONETILDE]}${Oe[De.XRANGEPLAIN]}$`);it("TILDELOOSE",`^${Oe[De.LONETILDE]}${Oe[De.XRANGEPLAINLOOSE]}$`);it("LONECARET","(?:\\^)");it("CARETTRIM",`(\\s*)${Oe[De.LONECARET]}\\s+`,!0);Ha.caretTrimReplace="$1^";it("CARET",`^${Oe[De.LONECARET]}${Oe[De.XRANGEPLAIN]}$`);it("CARETLOOSE",`^${Oe[De.LONECARET]}${Oe[De.XRANGEPLAINLOOSE]}$`);it("COMPARATORLOOSE",`^${Oe[De.GTLT]}\\s*(${Oe[De.LOOSEPLAIN]})$|^$`);it("COMPARATOR",`^${Oe[De.GTLT]}\\s*(${Oe[De.FULLPLAIN]})$|^$`);it("COMPARATORTRIM",`(\\s*)${Oe[De.GTLT]}\\s*(${Oe[De.LOOSEPLAIN]}|${Oe[De.XRANGEPLAIN]})`,!0);Ha.comparatorTrimReplace="$1$2$3";it("HYPHENRANGE",`^\\s*(${Oe[De.XRANGEPLAIN]})\\s+-\\s+(${Oe[De.XRANGEPLAIN]})\\s*$`);it("HYPHENRANGELOOSE",`^\\s*(${Oe[De.XRANGEPLAINLOOSE]})\\s+-\\s+(${Oe[De.XRANGEPLAINLOOSE]})\\s*$`);it("STAR","(<|>)?=?\\s*\\*");it("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");it("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Mx=S((zlt,GZ)=>{"use strict";var wMe=Object.freeze({loose:!0}),TMe=Object.freeze({}),RMe=e=>e?typeof e!="object"?wMe:e:TMe;GZ.exports=RMe});var L2=S(($lt,XZ)=>{"use strict";var WZ=/^[0-9]+$/,JZ=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let r=WZ.test(e),n=WZ.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},NMe=(e,t)=>JZ(t,e);XZ.exports={compareIdentifiers:JZ,rcompareIdentifiers:NMe}});var js=S((Glt,QZ)=>{"use strict";var Ux=y0(),{MAX_LENGTH:YZ,MAX_SAFE_INTEGER:qx}=g0(),{safeRe:Vx,t:Hx}=$p(),PMe=Mx(),{compareIdentifiers:F2}=L2(),M2=class e{constructor(t,r){if(r=PMe(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>YZ)throw new TypeError(`version is longer than ${YZ} characters`);Ux("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?Vx[Hx.LOOSE]:Vx[Hx.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>qx||this.major<0)throw new TypeError("Invalid major version");if(this.minor>qx||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>qx||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<qx)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ux("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=t.prerelease[r];if(Ux("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return F2(n,s)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],s=t.build[r];if(Ux("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return F2(n,s)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?Vx[Hx.PRERELEASELOOSE]:Vx[Hx.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),F2(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};QZ.exports=M2});var tf=S((Wlt,eee)=>{"use strict";var ZZ=js(),OMe=(e,t,r=!1)=>{if(e instanceof ZZ)return e;try{return new ZZ(e,t)}catch(n){if(!r)return null;throw n}};eee.exports=OMe});var ree=S((Jlt,tee)=>{"use strict";var DMe=tf(),kMe=(e,t)=>{let r=DMe(e,t);return r?r.version:null};tee.exports=kMe});var see=S((Xlt,nee)=>{"use strict";var BMe=tf(),LMe=(e,t)=>{let r=BMe(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};nee.exports=LMe});var aee=S((Ylt,oee)=>{"use strict";var iee=js(),FMe=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new iee(e instanceof iee?e.version:e,r).inc(t,n,s).version}catch{return null}};oee.exports=FMe});var uee=S((Qlt,lee)=>{"use strict";var cee=tf(),MMe=(e,t)=>{let r=cee(e,null,!0),n=cee(t,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let d=c?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"};lee.exports=MMe});var fee=S((Zlt,dee)=>{"use strict";var UMe=js(),qMe=(e,t)=>new UMe(e,t).major;dee.exports=qMe});var pee=S((eut,hee)=>{"use strict";var VMe=js(),HMe=(e,t)=>new VMe(e,t).minor;hee.exports=HMe});var gee=S((tut,mee)=>{"use strict";var jMe=js(),KMe=(e,t)=>new jMe(e,t).patch;mee.exports=KMe});var Eee=S((rut,yee)=>{"use strict";var zMe=tf(),$Me=(e,t)=>{let r=zMe(e,t);return r&&r.prerelease.length?r.prerelease:null};yee.exports=$Me});var Co=S((nut,Cee)=>{"use strict";var See=js(),GMe=(e,t,r)=>new See(e,r).compare(new See(t,r));Cee.exports=GMe});var bee=S((sut,_ee)=>{"use strict";var WMe=Co(),JMe=(e,t,r)=>WMe(t,e,r);_ee.exports=JMe});var Aee=S((iut,vee)=>{"use strict";var XMe=Co(),YMe=(e,t)=>XMe(e,t,!0);vee.exports=YMe});var jx=S((out,Iee)=>{"use strict";var xee=js(),QMe=(e,t,r)=>{let n=new xee(e,r),s=new xee(t,r);return n.compare(s)||n.compareBuild(s)};Iee.exports=QMe});var Tee=S((aut,wee)=>{"use strict";var ZMe=jx(),eUe=(e,t)=>e.sort((r,n)=>ZMe(r,n,t));wee.exports=eUe});var Nee=S((cut,Ree)=>{"use strict";var tUe=jx(),rUe=(e,t)=>e.sort((r,n)=>tUe(n,r,t));Ree.exports=rUe});var E0=S((lut,Pee)=>{"use strict";var nUe=Co(),sUe=(e,t,r)=>nUe(e,t,r)>0;Pee.exports=sUe});var Kx=S((uut,Oee)=>{"use strict";var iUe=Co(),oUe=(e,t,r)=>iUe(e,t,r)<0;Oee.exports=oUe});var U2=S((dut,Dee)=>{"use strict";var aUe=Co(),cUe=(e,t,r)=>aUe(e,t,r)===0;Dee.exports=cUe});var q2=S((fut,kee)=>{"use strict";var lUe=Co(),uUe=(e,t,r)=>lUe(e,t,r)!==0;kee.exports=uUe});var zx=S((hut,Bee)=>{"use strict";var dUe=Co(),fUe=(e,t,r)=>dUe(e,t,r)>=0;Bee.exports=fUe});var $x=S((put,Lee)=>{"use strict";var hUe=Co(),pUe=(e,t,r)=>hUe(e,t,r)<=0;Lee.exports=pUe});var V2=S((mut,Fee)=>{"use strict";var mUe=U2(),gUe=q2(),yUe=E0(),EUe=zx(),SUe=Kx(),CUe=$x(),_Ue=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return mUe(e,r,n);case"!=":return gUe(e,r,n);case">":return yUe(e,r,n);case">=":return EUe(e,r,n);case"<":return SUe(e,r,n);case"<=":return CUe(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};Fee.exports=_Ue});var Uee=S((gut,Mee)=>{"use strict";var bUe=js(),vUe=tf(),{safeRe:Gx,t:Wx}=$p(),AUe=(e,t)=>{if(e instanceof bUe)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Gx[Wx.COERCEFULL]:Gx[Wx.COERCE]);else{let c=t.includePrerelease?Gx[Wx.COERCERTLFULL]:Gx[Wx.COERCERTL],l;for(;(l=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||l.index+l[0].length!==r.index+r[0].length)&&(r=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return vUe(`${n}.${s}.${i}${o}${a}`,t)};Mee.exports=AUe});var Vee=S((yut,qee)=>{"use strict";var H2=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}};qee.exports=H2});var _o=S((Eut,zee)=>{"use strict";var xUe=/\s+/g,j2=class e{constructor(t,r){if(r=wUe(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof K2)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(xUe," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!jee(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&kUe(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&OUe)|(this.options.loose&&DUe))+":"+t,s=Hee.get(n);if(s)return s;let i=this.options.loose,o=i?si[Ks.HYPHENRANGELOOSE]:si[Ks.HYPHENRANGE];t=t.replace(o,KUe(this.options.includePrerelease)),Hr("hyphen replace",t),t=t.replace(si[Ks.COMPARATORTRIM],RUe),Hr("comparator trim",t),t=t.replace(si[Ks.TILDETRIM],NUe),Hr("tilde trim",t),t=t.replace(si[Ks.CARETTRIM],PUe),Hr("caret trim",t);let a=t.split(" ").map(f=>BUe(f,this.options)).join(" ").split(/\s+/).map(f=>jUe(f,this.options));i&&(a=a.filter(f=>(Hr("loose invalid filter",f,this.options),!!f.match(si[Ks.COMPARATORLOOSE])))),Hr("range list",a);let c=new Map,l=a.map(f=>new K2(f,this.options));for(let f of l){if(jee(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return Hee.set(n,d),d}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>Kee(n,r)&&t.set.some(s=>Kee(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new TUe(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(zUe(this.set[r],t,this.options))return!0;return!1}};zee.exports=j2;var IUe=Vee(),Hee=new IUe,wUe=Mx(),K2=S0(),Hr=y0(),TUe=js(),{safeRe:si,t:Ks,comparatorTrimReplace:RUe,tildeTrimReplace:NUe,caretTrimReplace:PUe}=$p(),{FLAG_INCLUDE_PRERELEASE:OUe,FLAG_LOOSE:DUe}=g0(),jee=e=>e.value==="<0.0.0-0",kUe=e=>e.value==="",Kee=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,t)),s=n.pop();return r},BUe=(e,t)=>(e=e.replace(si[Ks.BUILD],""),Hr("comp",e,t),e=MUe(e,t),Hr("caret",e),e=LUe(e,t),Hr("tildes",e),e=qUe(e,t),Hr("xrange",e),e=HUe(e,t),Hr("stars",e),e),ii=e=>!e||e.toLowerCase()==="x"||e==="*",LUe=(e,t)=>e.trim().split(/\s+/).map(r=>FUe(r,t)).join(" "),FUe=(e,t)=>{let r=t.loose?si[Ks.TILDELOOSE]:si[Ks.TILDE];return e.replace(r,(n,s,i,o,a)=>{Hr("tilde",e,n,s,i,o,a);let c;return ii(s)?c="":ii(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:ii(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(Hr("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,Hr("tilde return",c),c})},MUe=(e,t)=>e.trim().split(/\s+/).map(r=>UUe(r,t)).join(" "),UUe=(e,t)=>{Hr("caret",e,t);let r=t.loose?si[Ks.CARETLOOSE]:si[Ks.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(s,i,o,a,c)=>{Hr("caret",e,s,i,o,a,c);let l;return ii(i)?l="":ii(o)?l=`>=${i}.0.0${n} <${+i+1}.0.0-0`:ii(a)?i==="0"?l=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(Hr("replaceCaret pr",c),i==="0"?o==="0"?l=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(Hr("no pr"),i==="0"?o==="0"?l=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),Hr("caret return",l),l})},qUe=(e,t)=>(Hr("replaceXRanges",e,t),e.split(/\s+/).map(r=>VUe(r,t)).join(" ")),VUe=(e,t)=>{e=e.trim();let r=t.loose?si[Ks.XRANGELOOSE]:si[Ks.XRANGE];return e.replace(r,(n,s,i,o,a,c)=>{Hr("xRange",e,n,s,i,o,a,c);let l=ii(i),d=l||ii(o),f=d||ii(a),h=f;return s==="="&&h&&(s=""),c=t.includePrerelease?"-0":"",l?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&h?(d&&(o=0),a=0,s===">"?(s=">=",d?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",d?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):d?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),Hr("xRange return",n),n})},HUe=(e,t)=>(Hr("replaceStars",e,t),e.trim().replace(si[Ks.STAR],"")),jUe=(e,t)=>(Hr("replaceGTE0",e,t),e.trim().replace(si[t.includePrerelease?Ks.GTE0PRE:Ks.GTE0],"")),KUe=e=>(t,r,n,s,i,o,a,c,l,d,f,h)=>(ii(n)?r="":ii(s)?r=`>=${n}.0.0${e?"-0":""}`:ii(i)?r=`>=${n}.${s}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,ii(l)?c="":ii(d)?c=`<${+l+1}.0.0-0`:ii(f)?c=`<${l}.${+d+1}.0-0`:h?c=`<=${l}.${d}.${f}-${h}`:e?c=`<${l}.${d}.${+f+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),zUe=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Hr(e[n].semver),e[n].semver!==K2.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}});var S0=S((Sut,Yee)=>{"use strict";var C0=Symbol("SemVer ANY"),G2=class e{static get ANY(){return C0}constructor(t,r){if(r=$ee(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),$2("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===C0?this.value="":this.value=this.operator+this.semver.version,$2("comp",this)}parse(t){let r=this.options.loose?Gee[Wee.COMPARATORLOOSE]:Gee[Wee.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Jee(n[2],this.options.loose):this.semver=C0}toString(){return this.value}test(t){if($2("Comparator.test",t,this.options.loose),this.semver===C0||t===C0)return!0;if(typeof t=="string")try{t=new Jee(t,this.options)}catch{return!1}return z2(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Xee(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new Xee(this.value,r).test(t.semver):(r=$ee(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||z2(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||z2(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};Yee.exports=G2;var $ee=Mx(),{safeRe:Gee,t:Wee}=$p(),z2=V2(),$2=y0(),Jee=js(),Xee=_o()});var _0=S((Cut,Qee)=>{"use strict";var $Ue=_o(),GUe=(e,t,r)=>{try{t=new $Ue(t,r)}catch{return!1}return t.test(e)};Qee.exports=GUe});var ete=S((_ut,Zee)=>{"use strict";var WUe=_o(),JUe=(e,t)=>new WUe(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Zee.exports=JUe});var rte=S((but,tte)=>{"use strict";var XUe=js(),YUe=_o(),QUe=(e,t,r)=>{let n=null,s=null,i=null;try{i=new YUe(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new XUe(n,r))}),n};tte.exports=QUe});var ste=S((vut,nte)=>{"use strict";var ZUe=js(),eqe=_o(),tqe=(e,t,r)=>{let n=null,s=null,i=null;try{i=new eqe(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new ZUe(n,r))}),n};nte.exports=tqe});var ate=S((Aut,ote)=>{"use strict";var W2=js(),rqe=_o(),ite=E0(),nqe=(e,t)=>{e=new rqe(e,t);let r=new W2("0.0.0");if(e.test(r)||(r=new W2("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new W2(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||ite(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||ite(r,i))&&(r=i)}return r&&e.test(r)?r:null};ote.exports=nqe});var lte=S((xut,cte)=>{"use strict";var sqe=_o(),iqe=(e,t)=>{try{return new sqe(e,t).range||"*"}catch{return null}};cte.exports=iqe});var Jx=S((Iut,hte)=>{"use strict";var oqe=js(),fte=S0(),{ANY:aqe}=fte,cqe=_o(),lqe=_0(),ute=E0(),dte=Kx(),uqe=$x(),dqe=zx(),fqe=(e,t,r,n)=>{e=new oqe(e,n),t=new cqe(t,n);let s,i,o,a,c;switch(r){case">":s=ute,i=uqe,o=dte,a=">",c=">=";break;case"<":s=dte,i=dqe,o=ute,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(lqe(e,t,n))return!1;for(let l=0;l<t.set.length;++l){let d=t.set[l],f=null,h=null;if(d.forEach(p=>{p.semver===aqe&&(p=new fte(">=0.0.0")),f=f||p,h=h||p,s(p.semver,f.semver,n)?f=p:o(p.semver,h.semver,n)&&(h=p)}),f.operator===a||f.operator===c||(!h.operator||h.operator===a)&&i(e,h.semver))return!1;if(h.operator===c&&o(e,h.semver))return!1}return!0};hte.exports=fqe});var mte=S((wut,pte)=>{"use strict";var hqe=Jx(),pqe=(e,t,r)=>hqe(e,t,">",r);pte.exports=pqe});var yte=S((Tut,gte)=>{"use strict";var mqe=Jx(),gqe=(e,t,r)=>mqe(e,t,"<",r);gte.exports=gqe});var Cte=S((Rut,Ste)=>{"use strict";var Ete=_o(),yqe=(e,t,r)=>(e=new Ete(e,r),t=new Ete(t,r),e.intersects(t,r));Ste.exports=yqe});var bte=S((Nut,_te)=>{"use strict";var Eqe=_0(),Sqe=Co();_te.exports=(e,t,r)=>{let n=[],s=null,i=null,o=e.sort((d,f)=>Sqe(d,f,r));for(let d of o)Eqe(d,t,r)?(i=d,s||(s=d)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[d,f]of n)d===f?a.push(d):!f&&d===o[0]?a.push("*"):f?d===o[0]?a.push(`<=${f}`):a.push(`${d} - ${f}`):a.push(`>=${d}`);let c=a.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return c.length<l.length?c:t}});var Tte=S((Put,wte)=>{"use strict";var vte=_o(),X2=S0(),{ANY:J2}=X2,b0=_0(),Y2=Co(),Cqe=(e,t,r={})=>{if(e===t)return!0;e=new vte(e,r),t=new vte(t,r);let n=!1;e:for(let s of e.set){for(let i of t.set){let o=bqe(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},_qe=[new X2(">=0.0.0-0")],Ate=[new X2(">=0.0.0")],bqe=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===J2){if(t.length===1&&t[0].semver===J2)return!0;r.includePrerelease?e=_qe:e=Ate}if(t.length===1&&t[0].semver===J2){if(r.includePrerelease)return!0;t=Ate}let n=new Set,s,i;for(let p of e)p.operator===">"||p.operator===">="?s=xte(s,p,r):p.operator==="<"||p.operator==="<="?i=Ite(i,p,r):n.add(p.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Y2(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let p of n){if(s&&!b0(p,String(s),r)||i&&!b0(p,String(i),r))return null;for(let m of t)if(!b0(p,String(m),r))return!1;return!0}let a,c,l,d,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let p of t){if(d=d||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",s){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator===">"||p.operator===">="){if(a=xte(s,p,r),a===p&&a!==s)return!1}else if(s.operator===">="&&!b0(s.semver,String(p),r))return!1}if(i){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator==="<"||p.operator==="<="){if(c=Ite(i,p,r),c===p&&c!==i)return!1}else if(i.operator==="<="&&!b0(i.semver,String(p),r))return!1}if(!p.operator&&(i||s)&&o!==0)return!1}return!(s&&l&&!i&&o!==0||i&&d&&!s&&o!==0||h||f)},xte=(e,t,r)=>{if(!e)return t;let n=Y2(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Ite=(e,t,r)=>{if(!e)return t;let n=Y2(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};wte.exports=Cqe});var Xx=S((Out,Pte)=>{"use strict";var Q2=$p(),Rte=g0(),vqe=js(),Nte=L2(),Aqe=tf(),xqe=ree(),Iqe=see(),wqe=aee(),Tqe=uee(),Rqe=fee(),Nqe=pee(),Pqe=gee(),Oqe=Eee(),Dqe=Co(),kqe=bee(),Bqe=Aee(),Lqe=jx(),Fqe=Tee(),Mqe=Nee(),Uqe=E0(),qqe=Kx(),Vqe=U2(),Hqe=q2(),jqe=zx(),Kqe=$x(),zqe=V2(),$qe=Uee(),Gqe=S0(),Wqe=_o(),Jqe=_0(),Xqe=ete(),Yqe=rte(),Qqe=ste(),Zqe=ate(),e4e=lte(),t4e=Jx(),r4e=mte(),n4e=yte(),s4e=Cte(),i4e=bte(),o4e=Tte();Pte.exports={parse:Aqe,valid:xqe,clean:Iqe,inc:wqe,diff:Tqe,major:Rqe,minor:Nqe,patch:Pqe,prerelease:Oqe,compare:Dqe,rcompare:kqe,compareLoose:Bqe,compareBuild:Lqe,sort:Fqe,rsort:Mqe,gt:Uqe,lt:qqe,eq:Vqe,neq:Hqe,gte:jqe,lte:Kqe,cmp:zqe,coerce:$qe,Comparator:Gqe,Range:Wqe,satisfies:Jqe,toComparators:Xqe,maxSatisfying:Yqe,minSatisfying:Qqe,minVersion:Zqe,validRange:e4e,outside:t4e,gtr:r4e,ltr:n4e,intersects:s4e,simplifyRange:i4e,subset:o4e,SemVer:vqe,re:Q2.re,src:Q2.src,tokens:Q2.t,SEMVER_SPEC_VERSION:Rte.SEMVER_SPEC_VERSION,RELEASE_TYPES:Rte.RELEASE_TYPES,compareIdentifiers:Nte.compareIdentifiers,rcompareIdentifiers:Nte.rcompareIdentifiers}});var Dte=S((Dut,Ote)=>{var a4e=Xx();Ote.exports=a4e.satisfies(process.version,">=15.7.0")});var Bte=S((kut,kte)=>{var c4e=Xx();kte.exports=c4e.satisfies(process.version,">=16.9.0")});var Z2=S((But,Lte)=>{var l4e=Dte(),u4e=Bte(),d4e={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},f4e={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};Lte.exports=function(e,t){if(!e||!t)return;let r=t.asymmetricKeyType;if(!r)return;let n=d4e[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(e))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(l4e)switch(r){case"ec":let s=t.asymmetricKeyDetails.namedCurve,i=f4e[e];if(s!==i)throw new Error(`"alg" parameter "${e}" requires curve "${i}".`);break;case"rsa-pss":if(u4e){let o=parseInt(e.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:c,saltLength:l}=t.asymmetricKeyDetails;if(a!==`sha${o}`||c!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(l!==void 0&&l>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var eL=S((Lut,Fte)=>{var h4e=Xx();Fte.exports=h4e.satisfies(process.version,"^6.12.0 || >=8.0.0")});var qte=S((Fut,Ute)=>{var Dr=m0(),p4e=N2(),Mte=P2(),m4e=R2(),g4e=D2(),y4e=Z2(),E4e=eL(),S4e=Dx(),{KeyObject:C4e,createSecretKey:_4e,createPublicKey:b4e}=require("crypto"),tL=["RS256","RS384","RS512"],v4e=["ES256","ES384","ES512"],rL=["RS256","RS384","RS512"],A4e=["HS256","HS384","HS512"];E4e&&(tL.splice(tL.length,0,"PS256","PS384","PS512"),rL.splice(rL.length,0,"PS256","PS384","PS512"));Ute.exports=function(e,t,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let s;if(n?s=n:s=function(d,f){if(d)throw d;return f},r.clockTimestamp&&typeof r.clockTimestamp!="number")return s(new Dr("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return s(new Dr("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return s(new Dr("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return s(new Dr("jwt must be provided"));if(typeof e!="string")return s(new Dr("jwt must be a string"));let o=e.split(".");if(o.length!==3)return s(new Dr("jwt malformed"));let a;try{a=m4e(e,{complete:!0})}catch(d){return s(d)}if(!a)return s(new Dr("invalid token"));let c=a.header,l;if(typeof t=="function"){if(!n)return s(new Dr("verify must be called asynchronous if secret or public key is provided as a callback"));l=t}else l=function(d,f){return f(null,t)};return l(c,function(d,f){if(d)return s(new Dr("error in secret or public key callback: "+d.message));let h=o[2].trim()!=="";if(!h&&f)return s(new Dr("jwt signature is required"));if(h&&!f)return s(new Dr("secret or public key must be provided"));if(!h&&!r.algorithms)return s(new Dr('please specify "none" in "algorithms" to verify unsigned tokens'));if(f!=null&&!(f instanceof C4e))try{f=b4e(f)}catch{try{f=_4e(typeof f=="string"?Buffer.from(f):f)}catch{return s(new Dr("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(f.type==="secret"?r.algorithms=A4e:["rsa","rsa-pss"].includes(f.asymmetricKeyType)?r.algorithms=rL:f.asymmetricKeyType==="ec"?r.algorithms=v4e:r.algorithms=tL),r.algorithms.indexOf(a.header.alg)===-1)return s(new Dr("invalid algorithm"));if(c.alg.startsWith("HS")&&f.type!=="secret")return s(new Dr(`secretOrPublicKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)&&f.type!=="public")return s(new Dr(`secretOrPublicKey must be an asymmetric key when using ${c.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{y4e(c.alg,f)}catch(E){return s(E)}let p;try{p=S4e.verify(e,a.header.alg,f)}catch(E){return s(E)}if(!p)return s(new Dr("invalid signature"));let m=a.payload;if(typeof m.nbf<"u"&&!r.ignoreNotBefore){if(typeof m.nbf!="number")return s(new Dr("invalid nbf value"));if(m.nbf>i+(r.clockTolerance||0))return s(new p4e("jwt not active",new Date(m.nbf*1e3)))}if(typeof m.exp<"u"&&!r.ignoreExpiration){if(typeof m.exp!="number")return s(new Dr("invalid exp value"));if(i>=m.exp+(r.clockTolerance||0))return s(new Mte("jwt expired",new Date(m.exp*1e3)))}if(r.audience){let E=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(m.aud)?m.aud:[m.aud]).some(function(R){return E.some(function(D){return D instanceof RegExp?D.test(R):D===R})}))return s(new Dr("jwt audience invalid. expected: "+E.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&m.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(m.iss)===-1))return s(new Dr("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&m.sub!==r.subject)return s(new Dr("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&m.jti!==r.jwtid)return s(new Dr("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&m.nonce!==r.nonce)return s(new Dr("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof m.iat!="number")return s(new Dr("iat required when maxAge is specified"));let E=g4e(r.maxAge,m.iat);if(typeof E>"u")return s(new Dr('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=E+(r.clockTolerance||0))return s(new Mte("maxAge exceeded",new Date(E*1e3)))}if(r.complete===!0){let E=a.signature;return s(null,{header:c,payload:m,signature:E})}return s(null,m)})}});var $te=S((Mut,zte)=>{var Vte=1/0,jte=9007199254740991,x4e=17976931348623157e292,Hte=NaN,I4e="[object Arguments]",w4e="[object Function]",T4e="[object GeneratorFunction]",R4e="[object String]",N4e="[object Symbol]",P4e=/^\s+|\s+$/g,O4e=/^[-+]0x[0-9a-f]+$/i,D4e=/^0b[01]+$/i,k4e=/^0o[0-7]+$/i,B4e=/^(?:0|[1-9]\d*)$/,L4e=parseInt;function F4e(e,t){for(var r=-1,n=e?e.length:0,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}function M4e(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}function U4e(e,t,r){if(t!==t)return M4e(e,q4e,r);for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}function q4e(e){return e!==e}function V4e(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function H4e(e,t){return F4e(t,function(r){return e[r]})}function j4e(e,t){return function(r){return e(t(r))}}var Yx=Object.prototype,sL=Yx.hasOwnProperty,Qx=Yx.toString,K4e=Yx.propertyIsEnumerable,z4e=j4e(Object.keys,Object),$4e=Math.max;function G4e(e,t){var r=Kte(e)||Q4e(e)?V4e(e.length,String):[],n=r.length,s=!!n;for(var i in e)(t||sL.call(e,i))&&!(s&&(i=="length"||J4e(i,n)))&&r.push(i);return r}function W4e(e){if(!X4e(e))return z4e(e);var t=[];for(var r in Object(e))sL.call(e,r)&&r!="constructor"&&t.push(r);return t}function J4e(e,t){return t=t??jte,!!t&&(typeof e=="number"||B4e.test(e))&&e>-1&&e%1==0&&e<t}function X4e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Yx;return e===r}function Y4e(e,t,r,n){e=iL(e)?e:c6e(e),r=r&&!n?i6e(r):0;var s=e.length;return r<0&&(r=$4e(s+r,0)),r6e(e)?r<=s&&e.indexOf(t,r)>-1:!!s&&U4e(e,t,r)>-1}function Q4e(e){return Z4e(e)&&sL.call(e,"callee")&&(!K4e.call(e,"callee")||Qx.call(e)==I4e)}var Kte=Array.isArray;function iL(e){return e!=null&&t6e(e.length)&&!e6e(e)}function Z4e(e){return oL(e)&&iL(e)}function e6e(e){var t=nL(e)?Qx.call(e):"";return t==w4e||t==T4e}function t6e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=jte}function nL(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function oL(e){return!!e&&typeof e=="object"}function r6e(e){return typeof e=="string"||!Kte(e)&&oL(e)&&Qx.call(e)==R4e}function n6e(e){return typeof e=="symbol"||oL(e)&&Qx.call(e)==N4e}function s6e(e){if(!e)return e===0?e:0;if(e=o6e(e),e===Vte||e===-Vte){var t=e<0?-1:1;return t*x4e}return e===e?e:0}function i6e(e){var t=s6e(e),r=t%1;return t===t?r?t-r:t:0}function o6e(e){if(typeof e=="number")return e;if(n6e(e))return Hte;if(nL(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=nL(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(P4e,"");var r=D4e.test(e);return r||k4e.test(e)?L4e(e.slice(2),r?2:8):O4e.test(e)?Hte:+e}function a6e(e){return iL(e)?G4e(e):W4e(e)}function c6e(e){return e?H4e(e,a6e(e)):[]}zte.exports=Y4e});var Wte=S((Uut,Gte)=>{var l6e="[object Boolean]",u6e=Object.prototype,d6e=u6e.toString;function f6e(e){return e===!0||e===!1||h6e(e)&&d6e.call(e)==l6e}function h6e(e){return!!e&&typeof e=="object"}Gte.exports=f6e});var Zte=S((qut,Qte)=>{var Jte=1/0,p6e=17976931348623157e292,Xte=NaN,m6e="[object Symbol]",g6e=/^\s+|\s+$/g,y6e=/^[-+]0x[0-9a-f]+$/i,E6e=/^0b[01]+$/i,S6e=/^0o[0-7]+$/i,C6e=parseInt,_6e=Object.prototype,b6e=_6e.toString;function v6e(e){return typeof e=="number"&&e==w6e(e)}function Yte(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function A6e(e){return!!e&&typeof e=="object"}function x6e(e){return typeof e=="symbol"||A6e(e)&&b6e.call(e)==m6e}function I6e(e){if(!e)return e===0?e:0;if(e=T6e(e),e===Jte||e===-Jte){var t=e<0?-1:1;return t*p6e}return e===e?e:0}function w6e(e){var t=I6e(e),r=t%1;return t===t?r?t-r:t:0}function T6e(e){if(typeof e=="number")return e;if(x6e(e))return Xte;if(Yte(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Yte(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(g6e,"");var r=E6e.test(e);return r||S6e.test(e)?C6e(e.slice(2),r?2:8):y6e.test(e)?Xte:+e}Qte.exports=v6e});var tre=S((Vut,ere)=>{var R6e="[object Number]",N6e=Object.prototype,P6e=N6e.toString;function O6e(e){return!!e&&typeof e=="object"}function D6e(e){return typeof e=="number"||O6e(e)&&P6e.call(e)==R6e}ere.exports=D6e});var ire=S((Hut,sre)=>{var k6e="[object Object]";function B6e(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function L6e(e,t){return function(r){return e(t(r))}}var F6e=Function.prototype,rre=Object.prototype,nre=F6e.toString,M6e=rre.hasOwnProperty,U6e=nre.call(Object),q6e=rre.toString,V6e=L6e(Object.getPrototypeOf,Object);function H6e(e){return!!e&&typeof e=="object"}function j6e(e){if(!H6e(e)||q6e.call(e)!=k6e||B6e(e))return!1;var t=V6e(e);if(t===null)return!0;var r=M6e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&nre.call(r)==U6e}sre.exports=j6e});var are=S((jut,ore)=>{var K6e="[object String]",z6e=Object.prototype,$6e=z6e.toString,G6e=Array.isArray;function W6e(e){return!!e&&typeof e=="object"}function J6e(e){return typeof e=="string"||!G6e(e)&&W6e(e)&&$6e.call(e)==K6e}ore.exports=J6e});var fre=S((Kut,dre)=>{var X6e="Expected a function",cre=1/0,Y6e=17976931348623157e292,lre=NaN,Q6e="[object Symbol]",Z6e=/^\s+|\s+$/g,eVe=/^[-+]0x[0-9a-f]+$/i,tVe=/^0b[01]+$/i,rVe=/^0o[0-7]+$/i,nVe=parseInt,sVe=Object.prototype,iVe=sVe.toString;function oVe(e,t){var r;if(typeof t!="function")throw new TypeError(X6e);return e=dVe(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}function aVe(e){return oVe(2,e)}function ure(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function cVe(e){return!!e&&typeof e=="object"}function lVe(e){return typeof e=="symbol"||cVe(e)&&iVe.call(e)==Q6e}function uVe(e){if(!e)return e===0?e:0;if(e=fVe(e),e===cre||e===-cre){var t=e<0?-1:1;return t*Y6e}return e===e?e:0}function dVe(e){var t=uVe(e),r=t%1;return t===t?r?t-r:t:0}function fVe(e){if(typeof e=="number")return e;if(lVe(e))return lre;if(ure(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ure(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Z6e,"");var r=tVe.test(e);return r||rVe.test(e)?nVe(e.slice(2),r?2:8):eVe.test(e)?lre:+e}dre.exports=aVe});var _re=S((zut,Cre)=>{var hre=D2(),hVe=eL(),pVe=Z2(),pre=Dx(),mVe=$te(),Zx=Wte(),mre=Zte(),aL=tre(),yre=ire(),Zl=are(),gVe=fre(),{KeyObject:yVe,createSecretKey:EVe,createPrivateKey:SVe}=require("crypto"),Ere=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];hVe&&Ere.splice(3,0,"PS256","PS384","PS512");var CVe={expiresIn:{isValid:function(e){return mre(e)||Zl(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return mre(e)||Zl(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return Zl(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:mVe.bind(null,Ere),message:'"algorithm" must be a valid string enum value'},header:{isValid:yre,message:'"header" must be an object'},encoding:{isValid:Zl,message:'"encoding" must be a string'},issuer:{isValid:Zl,message:'"issuer" must be a string'},subject:{isValid:Zl,message:'"subject" must be a string'},jwtid:{isValid:Zl,message:'"jwtid" must be a string'},noTimestamp:{isValid:Zx,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Zl,message:'"keyid" must be a string'},mutatePayload:{isValid:Zx,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Zx,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Zx,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},_Ve={iat:{isValid:aL,message:'"iat" should be a number of seconds'},exp:{isValid:aL,message:'"exp" should be a number of seconds'},nbf:{isValid:aL,message:'"nbf" should be a number of seconds'}};function Sre(e,t,r,n){if(!yre(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(s){let i=e[s];if(!i){if(!t)throw new Error('"'+s+'" is not allowed in "'+n+'"');return}if(!i.isValid(r[s]))throw new Error(i.message)})}function bVe(e){return Sre(CVe,!1,e,"options")}function vVe(e){return Sre(_Ve,!0,e,"payload")}var gre={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},AVe=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Cre.exports=function(e,t,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let s=typeof e=="object"&&!Buffer.isBuffer(e),i=Object.assign({alg:r.algorithm||"HS256",typ:s?"JWT":void 0,kid:r.keyid},r.header);function o(l){if(n)return n(l);throw l}if(!t&&r.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(t!=null&&!(t instanceof yVe))try{t=SVe(t)}catch{try{t=EVe(typeof t=="string"?Buffer.from(t):t)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&t.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(t.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!r.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&t.asymmetricKeyDetails!==void 0&&t.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof e>"u")return o(new Error("payload is required"));if(s){try{vVe(e)}catch(l){return o(l)}r.mutatePayload||(e=Object.assign({},e))}else{let l=AVe.filter(function(d){return typeof r[d]<"u"});if(l.length>0)return o(new Error("invalid "+l.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof r.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof r.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{bVe(r)}catch(l){return o(l)}if(!r.allowInvalidAsymmetricKeyTypes)try{pVe(i.alg,t)}catch(l){return o(l)}let a=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:s&&(e.iat=a),typeof r.notBefore<"u"){try{e.nbf=hre(r.notBefore,a)}catch(l){return o(l)}if(typeof e.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof e=="object"){try{e.exp=hre(r.expiresIn,a)}catch(l){return o(l)}if(typeof e.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(gre).forEach(function(l){let d=gre[l];if(typeof r[l]<"u"){if(typeof e[d]<"u")return o(new Error('Bad "options.'+l+'" option. The payload already has an "'+d+'" property.'));e[d]=r[l]}});let c=r.encoding||"utf8";if(typeof n=="function")n=n&&gVe(n),pre.createSign({header:i,privateKey:t,payload:e,encoding:c}).once("error",n).once("done",function(l){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&l.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));n(null,l)});else{let l=pre.sign({header:i,payload:e,secret:t,encoding:c});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&l.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return l}}});var cL=S(($ut,bre)=>{bre.exports={decode:R2(),verify:qte(),sign:_re(),JsonWebTokenError:m0(),NotBeforeError:N2(),TokenExpiredError:P2()}});var gt=S((Gut,vre)=>{vre.exports={options:{usePureJavaScript:!1}}});var Ire=S((Wut,xre)=>{var lL={};xre.exports=lL;var Are={};lL.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=xVe(e,t);else{var s=0,i=t.length,o=t.charAt(0),a=[0];for(s=0;s<e.length;++s){for(var c=0,l=e[s];c<a.length;++c)l+=a[c]<<8,a[c]=l%i,l=l/i|0;for(;l>0;)a.push(l%i),l=l/i|0}for(s=0;e[s]===0&&s<e.length-1;++s)n+=o;for(s=a.length-1;s>=0;--s)n+=t[a[s]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};lL.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=Are[t];if(!r){r=Are[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var s=t.length,i=t.charAt(0),o=[0],n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var c=0,l=a;c<o.length;++c)l+=o[c]*s,o[c]=l&255,l>>=8;for(;l>0;)o.push(l&255),l>>=8}for(var d=0;e[d]===i&&d<e.length-1;++d)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function xVe(e,t){var r=0,n=t.length,s=t.charAt(0),i=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<i.length;++o)a+=i[o]<<8,i[o]=a%n,a=a/n|0;for(;a>0;)i.push(a%n),a=a/n|0}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=s;for(r=i.length-1;r>=0;--r)c+=t[i[r]];return c}});var Gt=S((Jut,Nre)=>{var wre=gt(),Tre=Ire(),F=Nre.exports=wre.util=wre.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){F.nextTick=process.nextTick,typeof setImmediate=="function"?F.setImmediate=setImmediate:F.setImmediate=F.nextTick;return}if(typeof setImmediate=="function"){F.setImmediate=function(){return setImmediate.apply(void 0,arguments)},F.nextTick=function(a){return setImmediate(a)};return}if(F.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var l=t.slice();t.length=0,l.forEach(function(d){d()})}};var o=a,e="forge.setImmediate",t=[];F.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,s=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(l){l()})}).observe(s,{attributes:!0});var i=F.setImmediate;F.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),i(c)):(t.push(c),t.length===1&&s.setAttribute("a",n=!n))}}F.nextTick=F.setImmediate})();F.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;F.globalScope=(function(){return F.isNodejs?global:typeof self>"u"?window:self})();F.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};F.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};F.isArrayBufferView=function(e){return e&&F.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function v0(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}F.ByteBuffer=uL;function uL(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(F.isArrayBuffer(e)||F.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof uL||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}F.ByteStringBuffer=uL;var IVe=4096;F.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>IVe&&(this.data.substr(0,1),this._constructedStringLength=0)};F.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};F.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};F.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};F.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};F.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};F.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(F.encodeUtf8(e))};F.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};F.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};F.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};F.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};F.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};F.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};F.ByteStringBuffer.prototype.putInt=function(e,t){v0(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};F.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};F.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};F.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};F.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};F.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};F.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};F.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};F.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};F.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};F.ByteStringBuffer.prototype.getInt=function(e){v0(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};F.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};F.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};F.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};F.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};F.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};F.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};F.ByteStringBuffer.prototype.copy=function(){var e=F.createBuffer(this.data);return e.read=this.read,e};F.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};F.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};F.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};F.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};F.ByteStringBuffer.prototype.toString=function(){return F.decodeUtf8(this.bytes())};function wVe(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=F.isArrayBuffer(e),n=F.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}F.DataBuffer=wVe;F.DataBuffer.prototype.length=function(){return this.write-this.read};F.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};F.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};F.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};F.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};F.DataBuffer.prototype.putBytes=function(e,t){if(F.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var s=new Uint8Array(this.data.buffer,this.write);return s.set(r),this.write+=n,this}if(F.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var s=new Uint8Array(this.data.buffer);return s.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof F.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&F.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var s=new Uint8Array(e.data.byteLength,this.write);return s.set(r),this.write+=r.byteLength,this}if(e instanceof F.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var i;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=F.binary.hex.decode(e,i,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),i=new Uint8Array(this.data.buffer,this.write),this.write+=F.binary.base64.decode(e,i,this.write),this;if(t==="utf8"&&(e=F.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=F.binary.raw.decode(i),this;if(t==="utf16")return this.accommodate(e.length*2),i=new Uint16Array(this.data.buffer,this.write),this.write+=F.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};F.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};F.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};F.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};F.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};F.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};F.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};F.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};F.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};F.DataBuffer.prototype.putInt=function(e,t){v0(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};F.DataBuffer.prototype.putSignedInt=function(e,t){return v0(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};F.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};F.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};F.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};F.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};F.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};F.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};F.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};F.DataBuffer.prototype.getInt=function(e){v0(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};F.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};F.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};F.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};F.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};F.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};F.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};F.DataBuffer.prototype.copy=function(){return new F.DataBuffer(this)};F.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};F.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};F.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};F.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};F.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return F.binary.raw.encode(t);if(e==="hex")return F.binary.hex.encode(t);if(e==="base64")return F.binary.base64.encode(t);if(e==="utf8")return F.text.utf8.decode(t);if(e==="utf16")return F.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};F.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=F.encodeUtf8(e)),new F.ByteBuffer(e)};F.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};F.xorBytes=function(e,t,r){for(var n="",s="",i="",o=0,a=0;r>0;--r,++o)s=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=i,i="",a=0),i+=String.fromCharCode(s),++a;return n+=i,n};F.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};F.bytesToHex=function(e){return F.createBuffer(e).toHex()};F.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",tu=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rre="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";F.encode64=function(e,t){for(var r="",n="",s,i,o,a=0;a<e.length;)s=e.charCodeAt(a++),i=e.charCodeAt(a++),o=e.charCodeAt(a++),r+=eu.charAt(s>>2),r+=eu.charAt((s&3)<<4|i>>4),isNaN(i)?r+="==":(r+=eu.charAt((i&15)<<2|o>>6),r+=isNaN(o)?"=":eu.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};F.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,s,i,o=0;o<e.length;)r=tu[e.charCodeAt(o++)-43],n=tu[e.charCodeAt(o++)-43],s=tu[e.charCodeAt(o++)-43],i=tu[e.charCodeAt(o++)-43],t+=String.fromCharCode(r<<2|n>>4),s!==64&&(t+=String.fromCharCode((n&15)<<4|s>>2),i!==64&&(t+=String.fromCharCode((s&3)<<6|i)));return t};F.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};F.decodeUtf8=function(e){return decodeURIComponent(escape(e))};F.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Tre.encode,decode:Tre.decode}};F.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};F.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var s=r,i=0;i<e.length;++i)n[s++]=e.charCodeAt(i);return t?s-r:n};F.binary.hex.encode=F.bytesToHex;F.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var s=0,i=r;for(e.length&1&&(s=1,n[i++]=parseInt(e[0],16));s<e.length;s+=2)n[i++]=parseInt(e.substr(s,2),16);return t?i-r:n};F.binary.base64.encode=function(e,t){for(var r="",n="",s,i,o,a=0;a<e.byteLength;)s=e[a++],i=e[a++],o=e[a++],r+=eu.charAt(s>>2),r+=eu.charAt((s&3)<<4|i>>4),isNaN(i)?r+="==":(r+=eu.charAt((i&15)<<2|o>>6),r+=isNaN(o)?"=":eu.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};F.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var s,i,o,a,c=0,l=r;c<e.length;)s=tu[e.charCodeAt(c++)-43],i=tu[e.charCodeAt(c++)-43],o=tu[e.charCodeAt(c++)-43],a=tu[e.charCodeAt(c++)-43],n[l++]=s<<2|i>>4,o!==64&&(n[l++]=(i&15)<<4|o>>2,a!==64&&(n[l++]=(o&3)<<6|a));return t?l-r:n.subarray(0,l)};F.binary.base58.encode=function(e,t){return F.binary.baseN.encode(e,Rre,t)};F.binary.base58.decode=function(e,t){return F.binary.baseN.decode(e,Rre,t)};F.text={utf8:{},utf16:{}};F.text.utf8.encode=function(e,t,r){e=F.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var s=r,i=0;i<e.length;++i)n[s++]=e.charCodeAt(i);return t?s-r:n};F.text.utf8.decode=function(e){return F.decodeUtf8(String.fromCharCode.apply(null,e))};F.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var s=new Uint16Array(n.buffer);r=r||0;for(var i=r,o=r,a=0;a<e.length;++a)s[o++]=e.charCodeAt(a),i+=2;return t?i-r:n};F.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};F.deflate=function(e,t,r){if(t=F.decode64(e.deflate(F.encode64(t)).rval),r){var n=2,s=t.charCodeAt(1);s&32&&(n=6),t=t.substring(n,t.length-4)}return t};F.inflate=function(e,t,r){var n=e.inflate(F.encode64(t)).rval;return n===null?null:F.decode64(n)};var dL=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=F.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var s=new Error(n.error.message);throw s.id=n.error.id,s.name=n.error.name,s}},fL=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(F.decode64(r))),r},TVe=function(e,t,r,n){var s=fL(e,t);s===null&&(s={}),s[r]=n,dL(e,t,s)},RVe=function(e,t,r){var n=fL(e,t);return n!==null&&(n=r in n?n[r]:null),n},NVe=function(e,t,r){var n=fL(e,t);if(n!==null&&r in n){delete n[r];var s=!0;for(var i in n){s=!1;break}s&&(n=null),dL(e,t,n)}},PVe=function(e,t){dL(e,t,null)},eI=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var s,i=!1,o=null;for(var a in r){s=r[a];try{if(s==="flash"||s==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),i=s==="flash"}(s==="web"||s==="both")&&(t[0]=localStorage,n=e.apply(this,t),i=!0)}catch(c){o=c}if(i)break}if(!i)throw o;return n};F.setItem=function(e,t,r,n,s){eI(TVe,arguments,s)};F.getItem=function(e,t,r,n){return eI(RVe,arguments,n)};F.removeItem=function(e,t,r,n){eI(NVe,arguments,n)};F.clearItems=function(e,t,r){eI(PVe,arguments,r)};F.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};F.format=function(e){for(var t=/%./g,r,n,s=0,i=[],o=0;r=t.exec(e);){n=e.substring(o,t.lastIndex-2),n.length>0&&i.push(n),o=t.lastIndex;var a=r[0][1];switch(a){case"s":case"o":s<arguments.length?i.push(arguments[s+++1]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+a+"?>")}}return i.push(e.substring(o)),i.join("")};F.formatNumber=function(e,t,r,n){var s=e,i=isNaN(t=Math.abs(t))?2:t,o=r===void 0?",":r,a=n===void 0?".":n,c=s<0?"-":"",l=parseInt(s=Math.abs(+s||0).toFixed(i),10)+"",d=l.length>3?l.length%3:0;return c+(d?l.substr(0,d)+a:"")+l.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+a)+(i?o+Math.abs(s-l).toFixed(i).slice(2):"")};F.formatSize=function(e){return e>=1073741824?e=F.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=F.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=F.formatNumber(e/1024,0)+" KiB":e=F.formatNumber(e,0)+" bytes",e};F.bytesFromIP=function(e){return e.indexOf(".")!==-1?F.bytesFromIPv4(e):e.indexOf(":")!==-1?F.bytesFromIPv6(e):null};F.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=F.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};F.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(o){return o.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=F.createBuffer(),s=0;s<8;++s){if(!e[s]||e[s].length===0){n.fillWithByte(0,r),r=0;continue}var i=F.hexToBytes(e[s]);i.length<2&&n.putByte(0),n.putBytes(i)}return n.getBytes()};F.bytesToIP=function(e){return e.length===4?F.bytesToIPv4(e):e.length===16?F.bytesToIPv6(e):null};F.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};F.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,s=0;s<e.length;s+=2){for(var i=F.bytesToHex(e[s]+e[s+1]);i[0]==="0"&&i!=="0";)i=i.substr(1);if(i==="0"){var o=r[r.length-1],a=t.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(i)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};F.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in F&&!e.update)return t(null,F.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return F.cores=navigator.hardwareConcurrency,t(null,F.cores);if(typeof Worker>"u")return F.cores=1,t(null,F.cores);if(typeof Blob>"u")return F.cores=2,t(null,F.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,c){if(a===0){var l=Math.floor(o.reduce(function(d,f){return d+f},0)/o.length);return F.cores=Math.max(1,l),URL.revokeObjectURL(r),t(null,F.cores)}s(c,function(d,f){o.push(i(c,f)),n(o,a-1,c)})}function s(o,a){for(var c=[],l=[],d=0;d<o;++d){var f=new Worker(r);f.addEventListener("message",function(h){if(l.push(h.data),l.length===o){for(var p=0;p<o;++p)c[p].terminate();a(null,l)}}),c.push(f)}for(var d=0;d<o;++d)c[d].postMessage(d)}function i(o,a){for(var c=[],l=0;l<o;++l)for(var d=a[l],f=c[l]=[],h=0;h<o;++h)if(l!==h){var p=a[h];(d.st>p.st&&d.st<p.et||p.st>d.st&&p.st<d.et)&&f.push(h)}return c.reduce(function(m,E){return Math.max(m,E.length)},0)}}});var tI=S((Xut,Pre)=>{var cs=gt();Gt();Pre.exports=cs.cipher=cs.cipher||{};cs.cipher.algorithms=cs.cipher.algorithms||{};cs.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=cs.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new cs.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};cs.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=cs.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new cs.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};cs.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),cs.cipher.algorithms[e]=t};cs.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in cs.cipher.algorithms?cs.cipher.algorithms[e]:null};var hL=cs.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};hL.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=cs.util.createBuffer(),this.output=e.output||cs.util.createBuffer(),this.mode.start(t)};hL.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};hL.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var mL=S((Yut,Ore)=>{var ls=gt();Gt();ls.cipher=ls.cipher||{};var Rt=Ore.exports=ls.cipher.modes=ls.cipher.modes||{};Rt.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Rt.ecb.prototype.start=function(e){};Rt.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Rt.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Rt.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Rt.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Rt.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Rt.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=rI(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Rt.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};Rt.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Rt.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Rt.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Rt.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=ls.util.createBuffer(),this._partialBytes=0};Rt.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=rI(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Rt.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var s=0;s<this._ints;++s)this._inBlock[s]=e.getInt32()^this._outBlock[s],t.putInt32(this._inBlock[s]);return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialBlock[s]=e.getInt32()^this._outBlock[s],this._partialOutput.putInt32(this._partialBlock[s]);if(i>0)e.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._partialBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Rt.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var s=0;s<this._ints;++s)this._inBlock[s]=e.getInt32(),t.putInt32(this._inBlock[s]^this._outBlock[s]);return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialBlock[s]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[s]^this._outBlock[s]);if(i>0)e.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._partialBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Rt.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ls.util.createBuffer(),this._partialBytes=0};Rt.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=rI(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Rt.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var s=0;s<this._ints;++s)t.putInt32(e.getInt32()^this._outBlock[s]),this._inBlock[s]=this._outBlock[s];return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(i>0)e.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._outBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Rt.ofb.prototype.decrypt=Rt.ofb.prototype.encrypt;Rt.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ls.util.createBuffer(),this._partialBytes=0};Rt.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=rI(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Rt.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var s=0;s<this._ints;++s)t.putInt32(e.getInt32()^this._outBlock[s]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}nI(this._inBlock)};Rt.ctr.prototype.decrypt=Rt.ctr.prototype.encrypt;Rt.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=ls.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Rt.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=ls.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=ls.util.createBuffer(e.additionalData):r=ls.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=ls.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(pL(n*8)))}this._inBlock=this._j0.slice(0),nI(this._inBlock),this._partialBytes=0,r=ls.util.createBuffer(r),this._aDataLength=pL(r.length()*8);var s=r.length()%this.blockSize;for(s&&r.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Rt.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var s=0;s<this._ints;++s)t.putInt32(this._outBlock[s]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(i<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var s=0;s<this._ints;++s)this._outBlock[s]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),nI(this._inBlock)};Rt.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),nI(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var s=0;s<this._ints;++s)t.putInt32(this._outBlock[s]^this._hashBlock[s]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Rt.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=ls.util.createBuffer();var n=this._aDataLength.concat(pL(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var s=[];this.cipher.encrypt(this._j0,s);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^s[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Rt.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),s=0;s<128;++s){var i=e[s/32|0]&1<<31-s%32;i&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Rt.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};Rt.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,s=e[n]>>>(7-r%8)*4&15,i=this._m[r][s];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t};Rt.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};Rt.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,s=16*r,i=new Array(s),o=0;o<s;++o){var a=[0,0,0,0],c=o/n|0,l=(n-1-o%n)*t;a[c]=1<<t-1<<l,i[o]=this.generateSubHashTable(this.multiply(a,e),t)}return i};Rt.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,s=new Array(r);s[n]=e.slice(0);for(var i=n>>>1;i>0;)this.pow(s[2*i],s[i]=[]),i>>=1;for(i=2;i<n;){for(var o=1;o<i;++o){var a=s[i],c=s[o];s[i+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}i*=2}for(s[0]=[0,0,0,0],i=n+1;i<r;++i){var l=s[i^n];s[i]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]]}return s};function rI(e,t){if(typeof e=="string"&&(e=ls.util.createBuffer(e)),ls.util.isArray(e)&&e.length>4){var r=e;e=ls.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!ls.util.isArray(e)){for(var s=[],i=t/4,n=0;n<i;++n)s.push(e.getInt32());e=s}return e}function nI(e){e[e.length-1]=e[e.length-1]+1&4294967295}function pL(e){return[e/4294967296|0,e&4294967295]}});var ru=S((Qut,Lre)=>{var kr=gt();tI();mL();Gt();Lre.exports=kr.aes=kr.aes||{};kr.aes.startEncrypting=function(e,t,r,n){var s=sI({key:e,output:r,decrypt:!1,mode:n});return s.start(t),s};kr.aes.createEncryptionCipher=function(e,t){return sI({key:e,output:null,decrypt:!1,mode:t})};kr.aes.startDecrypting=function(e,t,r,n){var s=sI({key:e,output:r,decrypt:!0,mode:n});return s.start(t),s};kr.aes.createDecryptionCipher=function(e,t){return sI({key:e,output:null,decrypt:!0,mode:t})};kr.aes.Algorithm=function(e,t){EL||kre();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,s){return yL(r._w,n,s,!1)},decrypt:function(n,s){return yL(r._w,n,s,!0)}}}),r._init=!1};kr.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=kr.util.createBuffer(t);else if(kr.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=kr.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!kr.util.isArray(t)){r=t,t=[];var s=r.length();if(s===16||s===24||s===32){s=s>>>2;for(var n=0;n<s;++n)t.push(r.getInt32())}}if(!kr.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var i=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(i)!==-1;this._w=Bre(t,e.decrypt&&!o),this._init=!0}};kr.aes._expandKey=function(e,t){return EL||kre(),Bre(e,t)};kr.aes._updateBlock=yL;Wp("AES-ECB",kr.cipher.modes.ecb);Wp("AES-CBC",kr.cipher.modes.cbc);Wp("AES-CFB",kr.cipher.modes.cfb);Wp("AES-OFB",kr.cipher.modes.ofb);Wp("AES-CTR",kr.cipher.modes.ctr);Wp("AES-GCM",kr.cipher.modes.gcm);function Wp(e,t){var r=function(){return new kr.aes.Algorithm(e,t)};kr.cipher.registerAlgorithm(e,r)}var EL=!1,Gp=4,oi,gL,Dre,rf,ea;function kre(){EL=!0,Dre=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;oi=new Array(256),gL=new Array(256),rf=new Array(4),ea=new Array(4);for(var t=0;t<4;++t)rf[t]=new Array(256),ea[t]=new Array(256);for(var r=0,n=0,s,i,o,a,c,l,d,t=0;t<256;++t){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,oi[r]=a,gL[a]=r,c=e[a],s=e[r],i=e[s],o=e[i],l=c<<24^a<<16^a<<8^(a^c),d=(s^i^o)<<24^(r^o)<<16^(r^i^o)<<8^(r^s^o);for(var f=0;f<4;++f)rf[f][r]=l,ea[f][a]=d,l=l<<24|l>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=s^e[e[e[s^o]]],n^=e[e[n]])}}function Bre(e,t){for(var r=e.slice(0),n,s=1,i=r.length,o=i+6+1,a=Gp*o,c=i;c<a;++c)n=r[c-1],c%i===0?(n=oi[n>>>16&255]<<24^oi[n>>>8&255]<<16^oi[n&255]<<8^oi[n>>>24]^Dre[s]<<24,s++):i>6&&c%i===4&&(n=oi[n>>>24]<<24^oi[n>>>16&255]<<16^oi[n>>>8&255]<<8^oi[n&255]),r[c]=r[c-i]^n;if(t){var l,d=ea[0],f=ea[1],h=ea[2],p=ea[3],m=r.slice(0);a=r.length;for(var c=0,E=a-Gp;c<a;c+=Gp,E-=Gp)if(c===0||c===a-Gp)m[c]=r[E],m[c+1]=r[E+3],m[c+2]=r[E+2],m[c+3]=r[E+1];else for(var b=0;b<Gp;++b)l=r[E+b],m[c+(3&-b)]=d[oi[l>>>24]]^f[oi[l>>>16&255]]^h[oi[l>>>8&255]]^p[oi[l&255]];r=m}return r}function yL(e,t,r,n){var s=e.length/4-1,i,o,a,c,l;n?(i=ea[0],o=ea[1],a=ea[2],c=ea[3],l=gL):(i=rf[0],o=rf[1],a=rf[2],c=rf[3],l=oi);var d,f,h,p,m,E,b;d=t[0]^e[0],f=t[n?3:1]^e[1],h=t[2]^e[2],p=t[n?1:3]^e[3];for(var A=3,R=1;R<s;++R)m=i[d>>>24]^o[f>>>16&255]^a[h>>>8&255]^c[p&255]^e[++A],E=i[f>>>24]^o[h>>>16&255]^a[p>>>8&255]^c[d&255]^e[++A],b=i[h>>>24]^o[p>>>16&255]^a[d>>>8&255]^c[f&255]^e[++A],p=i[p>>>24]^o[d>>>16&255]^a[f>>>8&255]^c[h&255]^e[++A],d=m,f=E,h=b;r[0]=l[d>>>24]<<24^l[f>>>16&255]<<16^l[h>>>8&255]<<8^l[p&255]^e[++A],r[n?3:1]=l[f>>>24]<<24^l[h>>>16&255]<<16^l[p>>>8&255]<<8^l[d&255]^e[++A],r[2]=l[h>>>24]<<24^l[p>>>16&255]<<16^l[d>>>8&255]<<8^l[f&255]^e[++A],r[n?1:3]=l[p>>>24]<<24^l[d>>>16&255]<<16^l[f>>>8&255]<<8^l[h&255]^e[++A]}function sI(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=kr.cipher.createDecipher(r,e.key):n=kr.cipher.createCipher(r,e.key);var s=n.start;return n.start=function(i,o){var a=null;o instanceof kr.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=i,s.call(n,o)},n}});var nu=S((Zut,Fre)=>{var A0=gt();A0.pki=A0.pki||{};var SL=Fre.exports=A0.pki.oids=A0.oids=A0.oids||{};function fe(e,t){SL[e]=t,SL[t]=e}function nr(e,t){SL[e]=t}fe("1.2.840.113549.1.1.1","rsaEncryption");fe("1.2.840.113549.1.1.4","md5WithRSAEncryption");fe("1.2.840.113549.1.1.5","sha1WithRSAEncryption");fe("1.2.840.113549.1.1.7","RSAES-OAEP");fe("1.2.840.113549.1.1.8","mgf1");fe("1.2.840.113549.1.1.9","pSpecified");fe("1.2.840.113549.1.1.10","RSASSA-PSS");fe("1.2.840.113549.1.1.11","sha256WithRSAEncryption");fe("1.2.840.113549.1.1.12","sha384WithRSAEncryption");fe("1.2.840.113549.1.1.13","sha512WithRSAEncryption");fe("1.3.101.112","EdDSA25519");fe("1.2.840.10040.4.3","dsa-with-sha1");fe("1.3.14.3.2.7","desCBC");fe("1.3.14.3.2.26","sha1");fe("1.3.14.3.2.29","sha1WithRSASignature");fe("2.16.840.1.101.3.4.2.1","sha256");fe("2.16.840.1.101.3.4.2.2","sha384");fe("2.16.840.1.101.3.4.2.3","sha512");fe("2.16.840.1.101.3.4.2.4","sha224");fe("2.16.840.1.101.3.4.2.5","sha512-224");fe("2.16.840.1.101.3.4.2.6","sha512-256");fe("1.2.840.113549.2.2","md2");fe("1.2.840.113549.2.5","md5");fe("1.2.840.113549.1.7.1","data");fe("1.2.840.113549.1.7.2","signedData");fe("1.2.840.113549.1.7.3","envelopedData");fe("1.2.840.113549.1.7.4","signedAndEnvelopedData");fe("1.2.840.113549.1.7.5","digestedData");fe("1.2.840.113549.1.7.6","encryptedData");fe("1.2.840.113549.1.9.1","emailAddress");fe("1.2.840.113549.1.9.2","unstructuredName");fe("1.2.840.113549.1.9.3","contentType");fe("1.2.840.113549.1.9.4","messageDigest");fe("1.2.840.113549.1.9.5","signingTime");fe("1.2.840.113549.1.9.6","counterSignature");fe("1.2.840.113549.1.9.7","challengePassword");fe("1.2.840.113549.1.9.8","unstructuredAddress");fe("1.2.840.113549.1.9.14","extensionRequest");fe("1.2.840.113549.1.9.20","friendlyName");fe("1.2.840.113549.1.9.21","localKeyId");fe("1.2.840.113549.1.9.22.1","x509Certificate");fe("1.2.840.113549.1.12.10.1.1","keyBag");fe("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");fe("1.2.840.113549.1.12.10.1.3","certBag");fe("1.2.840.113549.1.12.10.1.4","crlBag");fe("1.2.840.113549.1.12.10.1.5","secretBag");fe("1.2.840.113549.1.12.10.1.6","safeContentsBag");fe("1.2.840.113549.1.5.13","pkcs5PBES2");fe("1.2.840.113549.1.5.12","pkcs5PBKDF2");fe("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");fe("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");fe("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");fe("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");fe("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");fe("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");fe("1.2.840.113549.2.7","hmacWithSHA1");fe("1.2.840.113549.2.8","hmacWithSHA224");fe("1.2.840.113549.2.9","hmacWithSHA256");fe("1.2.840.113549.2.10","hmacWithSHA384");fe("1.2.840.113549.2.11","hmacWithSHA512");fe("1.2.840.113549.3.7","des-EDE3-CBC");fe("2.16.840.1.101.3.4.1.2","aes128-CBC");fe("2.16.840.1.101.3.4.1.22","aes192-CBC");fe("2.16.840.1.101.3.4.1.42","aes256-CBC");fe("2.5.4.3","commonName");fe("2.5.4.4","surname");fe("2.5.4.5","serialNumber");fe("2.5.4.6","countryName");fe("2.5.4.7","localityName");fe("2.5.4.8","stateOrProvinceName");fe("2.5.4.9","streetAddress");fe("2.5.4.10","organizationName");fe("2.5.4.11","organizationalUnitName");fe("2.5.4.12","title");fe("2.5.4.13","description");fe("2.5.4.15","businessCategory");fe("2.5.4.17","postalCode");fe("2.5.4.42","givenName");fe("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");fe("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");fe("2.16.840.1.113730.1.1","nsCertType");fe("2.16.840.1.113730.1.13","nsComment");nr("2.5.29.1","authorityKeyIdentifier");nr("2.5.29.2","keyAttributes");nr("2.5.29.3","certificatePolicies");nr("2.5.29.4","keyUsageRestriction");nr("2.5.29.5","policyMapping");nr("2.5.29.6","subtreesConstraint");nr("2.5.29.7","subjectAltName");nr("2.5.29.8","issuerAltName");nr("2.5.29.9","subjectDirectoryAttributes");nr("2.5.29.10","basicConstraints");nr("2.5.29.11","nameConstraints");nr("2.5.29.12","policyConstraints");nr("2.5.29.13","basicConstraints");fe("2.5.29.14","subjectKeyIdentifier");fe("2.5.29.15","keyUsage");nr("2.5.29.16","privateKeyUsagePeriod");fe("2.5.29.17","subjectAltName");fe("2.5.29.18","issuerAltName");fe("2.5.29.19","basicConstraints");nr("2.5.29.20","cRLNumber");nr("2.5.29.21","cRLReason");nr("2.5.29.22","expirationDate");nr("2.5.29.23","instructionCode");nr("2.5.29.24","invalidityDate");nr("2.5.29.25","cRLDistributionPoints");nr("2.5.29.26","issuingDistributionPoint");nr("2.5.29.27","deltaCRLIndicator");nr("2.5.29.28","issuingDistributionPoint");nr("2.5.29.29","certificateIssuer");nr("2.5.29.30","nameConstraints");fe("2.5.29.31","cRLDistributionPoints");fe("2.5.29.32","certificatePolicies");nr("2.5.29.33","policyMappings");nr("2.5.29.34","policyConstraints");fe("2.5.29.35","authorityKeyIdentifier");nr("2.5.29.36","policyConstraints");fe("2.5.29.37","extKeyUsage");nr("2.5.29.46","freshestCRL");nr("2.5.29.54","inhibitAnyPolicy");fe("1.3.6.1.4.1.11129.2.4.2","timestampList");fe("1.3.6.1.5.5.7.1.1","authorityInfoAccess");fe("1.3.6.1.5.5.7.3.1","serverAuth");fe("1.3.6.1.5.5.7.3.2","clientAuth");fe("1.3.6.1.5.5.7.3.3","codeSigning");fe("1.3.6.1.5.5.7.3.4","emailProtection");fe("1.3.6.1.5.5.7.3.8","timeStamping")});var ta=S((edt,Ure)=>{var jr=gt();Gt();nu();var be=Ure.exports=jr.asn1=jr.asn1||{};be.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};be.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};be.create=function(e,t,r,n,s){if(jr.util.isArray(n)){for(var i=[],o=0;o<n.length;++o)n[o]!==void 0&&i.push(n[o]);n=i}var a={tagClass:e,type:t,constructed:r,composed:r||jr.util.isArray(n),value:n};return s&&"bitStringContents"in s&&(a.bitStringContents=s.bitStringContents,a.original=be.copy(a)),a};be.copy=function(e,t){var r;if(jr.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(be.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:be.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};be.equals=function(e,t,r){if(jr.util.isArray(e)){if(!jr.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!be.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var s=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&be.equals(e.value,t.value);return r&&r.includeBitStringContents&&(s=s&&e.bitStringContents===t.bitStringContents),s};be.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function x0(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var OVe=function(e,t){var r=e.getByte();if(t--,r!==128){var n,s=r&128;if(!s)n=r;else{var i=r&127;x0(e,t,i),n=e.getInt(i<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};be.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=jr.util.createBuffer(e));var r=e.length(),n=iI(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=e.length(),s}return n};function iI(e,t,r,n){var s;x0(e,t,2);var i=e.getByte();t--;var o=i&192,a=i&31;s=e.length();var c=OVe(e,t);if(t-=s-e.length(),c!==void 0&&c>t){if(n.strict){var l=new Error("Too few bytes to read ASN.1 value.");throw l.available=e.length(),l.remaining=t,l.requested=c,l}c=t}var d,f,h=(i&32)===32;if(h)if(d=[],c===void 0)for(;;){if(x0(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}s=e.length(),d.push(iI(e,t,r+1,n)),t-=s-e.length()}else for(;c>0;)s=e.length(),d.push(iI(e,c,r+1,n)),t-=s-e.length(),c-=s-e.length();if(d===void 0&&o===be.Class.UNIVERSAL&&a===be.Type.BITSTRING&&(f=e.bytes(c)),d===void 0&&n.decodeBitStrings&&o===be.Class.UNIVERSAL&&a===be.Type.BITSTRING&&c>1){var p=e.read,m=t,E=0;if(a===be.Type.BITSTRING&&(x0(e,t,1),E=e.getByte(),t--),E===0)try{s=e.length();var b={strict:!0,decodeBitStrings:!0},A=iI(e,t,r+1,b),R=s-e.length();t-=R,a==be.Type.BITSTRING&&R++;var D=A.tagClass;R===c&&(D===be.Class.UNIVERSAL||D===be.Class.CONTEXT_SPECIFIC)&&(d=[A])}catch{}d===void 0&&(e.read=p,t=m)}if(d===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(a===be.Type.BMPSTRING)for(d="";c>0;c-=2)x0(e,t,2),d+=String.fromCharCode(e.getInt16()),t-=2;else d=e.getBytes(c),t-=c}var K=f===void 0?null:{bitStringContents:f};return be.create(o,a,h,d,K)}be.toDer=function(e){var t=jr.util.createBuffer(),r=e.tagClass|e.type,n=jr.util.createBuffer(),s=!1;if("bitStringContents"in e&&(s=!0,e.original&&(s=be.equals(e,e.original))),s)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var i=0;i<e.value.length;++i)e.value[i]!==void 0&&n.putBuffer(be.toDer(e.value[i]))}else if(e.type===be.Type.BMPSTRING)for(var i=0;i<e.value.length;++i)n.putInt16(e.value.charCodeAt(i));else e.type===be.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)===0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);t.putByte(a.length|128);for(var i=a.length-1;i>=0;--i)t.putByte(a.charCodeAt(i))}return t.putBuffer(n),t};be.oidToDer=function(e){var t=e.split("."),r=jr.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,s,i,o,a=2;a<t.length;++a){n=!0,s=[],i=parseInt(t[a],10);do o=i&127,i=i>>>7,n||(o|=128),s.push(o),n=!1;while(i>0);for(var c=s.length-1;c>=0;--c)r.putByte(s[c])}return r};be.derToOid=function(e){var t;typeof e=="string"&&(e=jr.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};be.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,s=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),l=10;c!=="+"&&c!=="-"&&(a=parseInt(e.substr(10,2),10),l+=2)}if(t.setUTCFullYear(r,n,s),t.setUTCHours(i,o,a,0),l&&(c=e.charAt(l),c==="+"||c==="-")){var d=parseInt(e.substr(l+1,2),10),f=parseInt(e.substr(l+4,2),10),h=d*60+f;h*=6e4,c==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};be.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,s=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,l=0,d=!1;e.charAt(e.length-1)==="Z"&&(d=!0);var f=e.length-5,h=e.charAt(f);if(h==="+"||h==="-"){var p=parseInt(e.substr(f+1,2),10),m=parseInt(e.substr(f+4,2),10);l=p*60+m,l*=6e4,h==="+"&&(l*=-1),d=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),d?(t.setUTCFullYear(r,n,s),t.setUTCHours(i,o,a,c),t.setTime(+t+l)):(t.setFullYear(r,n,s),t.setHours(i,o,a,c)),t};be.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};be.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};be.integerToDer=function(e){var t=jr.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};be.derToInteger=function(e){typeof e=="string"&&(e=jr.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};be.validate=function(e,t,r,n){var s=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(s=!0,t.value&&jr.util.isArray(t.value))for(var i=0,o=0;s&&o<t.value.length;++o)s=t.value[o].optional||!1,e.value[i]&&(s=be.validate(e.value[i],t.value[o],r,n),s?++i:t.value[o].optional&&(s=!0)),!s&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(s&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var a;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return s};var Mre=/[^\\u0000-\\u00ff]/;be.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var s="",i=0;i<t*r;++i)s+=" ";switch(n+=s+"Tag: ",e.tagClass){case be.Class.UNIVERSAL:n+="Universal:";break;case be.Class.APPLICATION:n+="Application:";break;case be.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case be.Class.PRIVATE:n+="Private:";break}if(e.tagClass===be.Class.UNIVERSAL)switch(n+=e.type,e.type){case be.Type.NONE:n+=" (None)";break;case be.Type.BOOLEAN:n+=" (Boolean)";break;case be.Type.INTEGER:n+=" (Integer)";break;case be.Type.BITSTRING:n+=" (Bit string)";break;case be.Type.OCTETSTRING:n+=" (Octet string)";break;case be.Type.NULL:n+=" (Null)";break;case be.Type.OID:n+=" (Object Identifier)";break;case be.Type.ODESC:n+=" (Object Descriptor)";break;case be.Type.EXTERNAL:n+=" (External or Instance of)";break;case be.Type.REAL:n+=" (Real)";break;case be.Type.ENUMERATED:n+=" (Enumerated)";break;case be.Type.EMBEDDED:n+=" (Embedded PDV)";break;case be.Type.UTF8:n+=" (UTF8)";break;case be.Type.ROID:n+=" (Relative Object Identifier)";break;case be.Type.SEQUENCE:n+=" (Sequence)";break;case be.Type.SET:n+=" (Set)";break;case be.Type.PRINTABLESTRING:n+=" (Printable String)";break;case be.Type.IA5String:n+=" (IA5String (ASCII))";break;case be.Type.UTCTIME:n+=" (UTC time)";break;case be.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case be.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=s+"Constructed: "+e.constructed+`
`,e.composed){for(var o=0,a="",i=0;i<e.value.length;++i)e.value[i]!==void 0&&(o+=1,a+=be.prettyPrint(e.value[i],t+1,r),i+1<e.value.length&&(a+=","));n+=s+"Sub values: "+o+a}else{if(n+=s+"Value: ",e.type===be.Type.OID){var c=be.derToOid(e.value);n+=c,jr.pki&&jr.pki.oids&&c in jr.pki.oids&&(n+=" ("+jr.pki.oids[c]+") ")}if(e.type===be.Type.INTEGER)try{n+=be.derToInteger(e.value)}catch{n+="0x"+jr.util.bytesToHex(e.value)}else if(e.type===be.Type.BITSTRING){if(e.value.length>1?n+="0x"+jr.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var l=e.value.charCodeAt(0);l==1?n+=" (1 unused bit shown)":l>1&&(n+=" ("+l+" unused bits shown)")}}else if(e.type===be.Type.OCTETSTRING)Mre.test(e.value)||(n+="("+e.value+") "),n+="0x"+jr.util.bytesToHex(e.value);else if(e.type===be.Type.UTF8)try{n+=jr.util.decodeUtf8(e.value)}catch(d){if(d.message==="URI malformed")n+="0x"+jr.util.bytesToHex(e.value)+" (malformed UTF8)";else throw d}else e.type===be.Type.PRINTABLESTRING||e.type===be.Type.IA5String?n+=e.value:Mre.test(e.value)?n+="0x"+jr.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var ja=S((tdt,qre)=>{var oI=gt();qre.exports=oI.md=oI.md||{};oI.md.algorithms=oI.md.algorithms||{}});var Jp=S((rdt,Vre)=>{var Vc=gt();ja();Gt();var DVe=Vre.exports=Vc.hmac=Vc.hmac||{};DVe.create=function(){var e=null,t=null,r=null,n=null,s={};return s.start=function(i,o){if(i!==null)if(typeof i=="string")if(i=i.toLowerCase(),i in Vc.md.algorithms)t=Vc.md.algorithms[i].create();else throw new Error('Unknown hash algorithm "'+i+'"');else t=i;if(o===null)o=e;else{if(typeof o=="string")o=Vc.util.createBuffer(o);else if(Vc.util.isArray(o)){var a=o;o=Vc.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var l=o.length();l>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=Vc.util.createBuffer(),n=Vc.util.createBuffer(),l=o.length();for(var c=0;c<l;++c){var a=o.at(c);r.putByte(54^a),n.putByte(92^a)}if(l<t.blockLength)for(var a=t.blockLength-l,c=0;c<a;++c)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},s.update=function(i){t.update(i)},s.getMac=function(){var i=t.digest().bytes();return t.start(),t.update(n),t.update(i),t.digest()},s.digest=s.getMac,s}});var cI=S((ndt,zre)=>{var Ka=gt();ja();Gt();var jre=zre.exports=Ka.md5=Ka.md5||{};Ka.md.md5=Ka.md.algorithms.md5=jre;jre.create=function(){Kre||kVe();var e=null,t=Ka.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var s=n.messageLengthSize/4,i=0;i<s;++i)n.fullMessageLength.push(0);return t=Ka.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(s,i){i==="utf8"&&(s=Ka.util.encodeUtf8(s));var o=s.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(s),Hre(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var s=Ka.util.createBuffer();s.putBytes(t.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=i&n.blockLength-1;s.putBytes(CL.substr(0,n.blockLength-o));for(var a,c=0,l=n.fullMessageLength.length-1;l>=0;--l)a=n.fullMessageLength[l]*8+c,c=a/4294967296>>>0,s.putInt32Le(a>>>0);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};Hre(d,r,s);var f=Ka.util.createBuffer();return f.putInt32Le(d.h0),f.putInt32Le(d.h1),f.putInt32Le(d.h2),f.putInt32Le(d.h3),f},n};var CL=null,aI=null,I0=null,Xp=null,Kre=!1;function kVe(){CL="\x80",CL+=Ka.util.fillString("\0",64),aI=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],I0=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Xp=new Array(64);for(var e=0;e<64;++e)Xp[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);Kre=!0}function Hre(e,t,r){for(var n,s,i,o,a,c,l,d,f=r.length();f>=64;){for(s=e.h0,i=e.h1,o=e.h2,a=e.h3,d=0;d<16;++d)t[d]=r.getInt32Le(),c=a^i&(o^a),n=s+c+Xp[d]+t[d],l=I0[d],s=a,a=o,o=i,i+=n<<l|n>>>32-l;for(;d<32;++d)c=o^a&(i^o),n=s+c+Xp[d]+t[aI[d]],l=I0[d],s=a,a=o,o=i,i+=n<<l|n>>>32-l;for(;d<48;++d)c=i^o^a,n=s+c+Xp[d]+t[aI[d]],l=I0[d],s=a,a=o,o=i,i+=n<<l|n>>>32-l;for(;d<64;++d)c=o^(i|~a),n=s+c+Xp[d]+t[aI[d]],l=I0[d],s=a,a=o,o=i,i+=n<<l|n>>>32-l;e.h0=e.h0+s|0,e.h1=e.h1+i|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,f-=64}}});var nf=S((sdt,Gre)=>{var uI=gt();Gt();var $re=Gre.exports=uI.pem=uI.pem||{};$re.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=lI(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=lI(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=lI(n)),e.headers)for(var s=0;s<e.headers.length;++s)r+=lI(e.headers[s]);return e.procType&&(r+=`\r
`),r+=uI.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};$re.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/,i;i=r.exec(e),!!i;){var o=i[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:uI.util.decode64(i[3])};if(t.push(a),!!i[2]){for(var c=i[2].split(s),l=0;i&&l<c.length;){for(var d=c[l].replace(/\s+$/,""),f=l+1;f<c.length;++f){var h=c[f];if(!/\s/.test(h[0]))break;d+=h,l=f}if(i=d.match(n),i){for(var p={name:i[1],values:[]},m=i[2].split(","),E=0;E<m.length;++E)p.values.push(BVe(m[E]));if(a.procType)if(!a.contentDomain&&p.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++l}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function lI(e){for(var t=e.name+": ",r=[],n=function(c,l){return" "+l},s=0;s<e.values.length;++s)r.push(e.values[s].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var i=0,o=-1,s=0;s<t.length;++s,++i)if(i>65&&o!==-1){var a=t[o];a===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+a+t.substr(o+1),i=s-o-1,o=-1,++s}else(t[s]===" "||t[s]==="	"||t[s]===",")&&(o=s);return t}function BVe(e){return e.replace(/^\s+/,"")}});var w0=S((idt,Jre)=>{var Xr=gt();tI();mL();Gt();Jre.exports=Xr.des=Xr.des||{};Xr.des.startEncrypting=function(e,t,r,n){var s=dI({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return s.start(t),s};Xr.des.createEncryptionCipher=function(e,t){return dI({key:e,output:null,decrypt:!1,mode:t})};Xr.des.startDecrypting=function(e,t,r,n){var s=dI({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return s.start(t),s};Xr.des.createDecryptionCipher=function(e,t){return dI({key:e,output:null,decrypt:!0,mode:t})};Xr.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,s){return Wre(r._keys,n,s,!1)},decrypt:function(n,s){return Wre(r._keys,n,s,!0)}}}),r._init=!1};Xr.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=Xr.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=KVe(t),this._init=!0}};za("DES-ECB",Xr.cipher.modes.ecb);za("DES-CBC",Xr.cipher.modes.cbc);za("DES-CFB",Xr.cipher.modes.cfb);za("DES-OFB",Xr.cipher.modes.ofb);za("DES-CTR",Xr.cipher.modes.ctr);za("3DES-ECB",Xr.cipher.modes.ecb);za("3DES-CBC",Xr.cipher.modes.cbc);za("3DES-CFB",Xr.cipher.modes.cfb);za("3DES-OFB",Xr.cipher.modes.ofb);za("3DES-CTR",Xr.cipher.modes.ctr);function za(e,t){var r=function(){return new Xr.des.Algorithm(e,t)};Xr.cipher.registerAlgorithm(e,r)}var LVe=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],FVe=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],MVe=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],UVe=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],qVe=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],VVe=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],HVe=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],jVe=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function KVe(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],E=e.length()>8?3:1,b=[],A=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],R=0,D,K=0;K<E;K++){var z=e.getInt32(),G=e.getInt32();D=(z>>>4^G)&252645135,G^=D,z^=D<<4,D=(G>>>-16^z)&65535,z^=D,G^=D<<-16,D=(z>>>2^G)&858993459,G^=D,z^=D<<2,D=(G>>>-16^z)&65535,z^=D,G^=D<<-16,D=(z>>>1^G)&1431655765,G^=D,z^=D<<1,D=(G>>>8^z)&16711935,z^=D,G^=D<<8,D=(z>>>1^G)&1431655765,G^=D,z^=D<<1,D=z<<8|G>>>20&240,z=G<<24|G<<8&16711680|G>>>8&65280|G>>>24&240,G=D;for(var ye=0;ye<A.length;++ye){A[ye]?(z=z<<2|z>>>26,G=G<<2|G>>>26):(z=z<<1|z>>>27,G=G<<1|G>>>27),z&=-15,G&=-15;var he=t[z>>>28]|r[z>>>24&15]|n[z>>>20&15]|s[z>>>16&15]|i[z>>>12&15]|o[z>>>8&15]|a[z>>>4&15],xe=c[G>>>28]|l[G>>>24&15]|d[G>>>20&15]|f[G>>>16&15]|h[G>>>12&15]|p[G>>>8&15]|m[G>>>4&15];D=(xe>>>16^he)&65535,b[R++]=he^D,b[R++]=xe^D<<16}}return b}function Wre(e,t,r,n){var s=e.length===32?3:9,i;s===3?i=n?[30,-2,-2]:[0,32,2]:i=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=t[0],c=t[1];o=(a>>>4^c)&252645135,c^=o,a^=o<<4,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var l=0;l<s;l+=3){for(var d=i[l+1],f=i[l+2],h=i[l];h!=d;h+=f){var p=c^e[h],m=(c>>>4|c<<28)^e[h+1];o=a,a=c,c=o^(FVe[p>>>24&63]|UVe[p>>>16&63]|VVe[p>>>8&63]|jVe[p&63]|LVe[m>>>24&63]|MVe[m>>>16&63]|qVe[m>>>8&63]|HVe[m&63])}o=a,a=c,c=o}a=a>>>1|a<<31,c=c>>>1|c<<31,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(a>>>4^c)&252645135,c^=o,a^=o<<4,r[0]=a,r[1]=c}function dI(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=Xr.cipher.createDecipher(r,e.key):n=Xr.cipher.createCipher(r,e.key);var s=n.start;return n.start=function(i,o){var a=null;o instanceof Xr.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=i,s.call(n,o)},n}});var fI=S((odt,Xre)=>{var ai=gt();Jp();ja();Gt();var zVe=ai.pkcs5=ai.pkcs5||{},Hc;ai.util.isNodejs&&!ai.options.usePureJavaScript&&(Hc=require("crypto"));Xre.exports=ai.pbkdf2=zVe.pbkdf2=function(e,t,r,n,s,i){if(typeof s=="function"&&(i=s,s=null),ai.util.isNodejs&&!ai.options.usePureJavaScript&&Hc.pbkdf2&&(s===null||typeof s!="object")&&(Hc.pbkdf2Sync.length>4||!s||s==="sha1"))return typeof s!="string"&&(s="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),i?Hc.pbkdf2Sync.length===4?Hc.pbkdf2(e,t,r,n,function(D,K){if(D)return i(D);i(null,K.toString("binary"))}):Hc.pbkdf2(e,t,r,n,s,function(D,K){if(D)return i(D);i(null,K.toString("binary"))}):Hc.pbkdf2Sync.length===4?Hc.pbkdf2Sync(e,t,r,n).toString("binary"):Hc.pbkdf2Sync(e,t,r,n,s).toString("binary");if((typeof s>"u"||s===null)&&(s="sha1"),typeof s=="string"){if(!(s in ai.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=ai.md[s].create()}var o=s.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(i)return i(a);throw a}var c=Math.ceil(n/o),l=n-(c-1)*o,d=ai.hmac.create();d.start(s,e);var f="",h,p,m;if(!i){for(var E=1;E<=c;++E){d.start(null,null),d.update(t),d.update(ai.util.int32ToBytes(E)),h=m=d.digest().getBytes();for(var b=2;b<=r;++b)d.start(null,null),d.update(m),p=d.digest().getBytes(),h=ai.util.xorBytes(h,p,o),m=p;f+=E<c?h:h.substr(0,l)}return f}var E=1,b;function A(){if(E>c)return i(null,f);d.start(null,null),d.update(t),d.update(ai.util.int32ToBytes(E)),h=m=d.digest().getBytes(),b=2,R()}function R(){if(b<=r)return d.start(null,null),d.update(m),p=d.digest().getBytes(),h=ai.util.xorBytes(h,p,o),m=p,++b,ai.util.setImmediate(R);f+=E<c?h:h.substr(0,l),++E,A()}A()}});var bL=S((adt,tne)=>{var $a=gt();ja();Gt();var Qre=tne.exports=$a.sha256=$a.sha256||{};$a.md.sha256=$a.md.algorithms.sha256=Qre;Qre.create=function(){Zre||$Ve();var e=null,t=$a.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var s=n.messageLengthSize/4,i=0;i<s;++i)n.fullMessageLength.push(0);return t=$a.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(s,i){i==="utf8"&&(s=$a.util.encodeUtf8(s));var o=s.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(s),Yre(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var s=$a.util.createBuffer();s.putBytes(t.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=i&n.blockLength-1;s.putBytes(_L.substr(0,n.blockLength-o));for(var a,c,l=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)a=n.fullMessageLength[d+1]*8,c=a/4294967296>>>0,l+=c,s.putInt32(l>>>0),l=a>>>0;s.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};Yre(f,r,s);var h=$a.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},n};var _L=null,Zre=!1,ene=null;function $Ve(){_L="\x80",_L+=$a.util.fillString("\0",64),ene=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Zre=!0}function Yre(e,t,r){for(var n,s,i,o,a,c,l,d,f,h,p,m,E,b,A,R=r.length();R>=64;){for(l=0;l<16;++l)t[l]=r.getInt32();for(;l<64;++l)n=t[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,s=t[l-15],s=(s>>>7|s<<25)^(s>>>18|s<<14)^s>>>3,t[l]=n+t[l-7]+s+t[l-16]|0;for(d=e.h0,f=e.h1,h=e.h2,p=e.h3,m=e.h4,E=e.h5,b=e.h6,A=e.h7,l=0;l<64;++l)o=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=b^m&(E^b),i=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&f|h&(d^f),n=A+o+a+ene[l]+t[l],s=i+c,A=b,b=E,E=m,m=p+n>>>0,p=h,h=f,f=d,d=n+s>>>0;e.h0=e.h0+d|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+p|0,e.h4=e.h4+m|0,e.h5=e.h5+E|0,e.h6=e.h6+b|0,e.h7=e.h7+A|0,R-=64}}});var vL=S((cdt,rne)=>{var Ga=gt();Gt();var hI=null;Ga.util.isNodejs&&!Ga.options.usePureJavaScript&&!process.versions["node-webkit"]&&(hI=require("crypto"));var GVe=rne.exports=Ga.prng=Ga.prng||{};GVe.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),s=0;s<32;++s)n[s]=r.create();t.pools=n,t.pool=0,t.generate=function(l,d){if(!d)return t.generateSync(l);var f=t.plugin.cipher,h=t.plugin.increment,p=t.plugin.formatKey,m=t.plugin.formatSeed,E=Ga.util.createBuffer();t.key=null,b();function b(A){if(A)return d(A);if(E.length()>=l)return d(null,E.getBytes(l));if(t.generated>1048575&&(t.key=null),t.key===null)return Ga.util.nextTick(function(){i(b)});var R=f(t.key,t.seed);t.generated+=R.length,E.putBytes(R),t.key=p(f(t.key,h(t.seed))),t.seed=m(f(t.key,t.seed)),Ga.util.setImmediate(b)}},t.generateSync=function(l){var d=t.plugin.cipher,f=t.plugin.increment,h=t.plugin.formatKey,p=t.plugin.formatSeed;t.key=null;for(var m=Ga.util.createBuffer();m.length()<l;){t.generated>1048575&&(t.key=null),t.key===null&&o();var E=d(t.key,t.seed);t.generated+=E.length,m.putBytes(E),t.key=h(d(t.key,f(t.seed))),t.seed=p(d(t.key,t.seed))}return m.getBytes(l)};function i(l){if(t.pools[0].messageLength>=32)return a(),l();var d=32-t.pools[0].messageLength<<5;t.seedFile(d,function(f,h){if(f)return l(f);t.collect(h),a(),l()})}function o(){if(t.pools[0].messageLength>=32)return a();var l=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(l)),a()}function a(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var l=t.plugin.md.create();l.update(t.keyBytes);for(var d=1,f=0;f<32;++f)t.reseeds%d===0&&(l.update(t.pools[f].digest().getBytes()),t.pools[f].start()),d=d<<1;t.keyBytes=l.digest().getBytes(),l.start(),l.update(t.keyBytes);var h=l.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function c(l){var d=null,f=Ga.util.globalScope,h=f.crypto||f.msCrypto;h&&h.getRandomValues&&(d=function(z){return h.getRandomValues(z)});var p=Ga.util.createBuffer();if(d)for(;p.length()<l;){var m=Math.max(1,Math.min(l-p.length(),65536)/4),E=new Uint32Array(Math.floor(m));try{d(E);for(var b=0;b<E.length;++b)p.putInt32(E[b])}catch(z){if(!(typeof QuotaExceededError<"u"&&z instanceof QuotaExceededError))throw z}}if(p.length()<l)for(var A,R,D,K=Math.floor(Math.random()*65536);p.length()<l;){R=16807*(K&65535),A=16807*(K>>16),R+=(A&32767)<<16,R+=A>>15,R=(R&2147483647)+(R>>31),K=R&4294967295;for(var b=0;b<3;++b)D=K>>>(b<<3),D^=Math.floor(Math.random()*256),p.putByte(D&255)}return p.getBytes(l)}return hI?(t.seedFile=function(l,d){hI.randomBytes(l,function(f,h){if(f)return d(f);d(null,h.toString())})},t.seedFileSync=function(l){return hI.randomBytes(l).toString()}):(t.seedFile=function(l,d){try{d(null,c(l))}catch(f){d(f)}},t.seedFileSync=c),t.collect=function(l){for(var d=l.length,f=0;f<d;++f)t.pools[t.pool].update(l.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(l,d){for(var f="",h=0;h<d;h+=8)f+=String.fromCharCode(l>>h&255);t.collect(f)},t.registerWorker=function(l){if(l===self)t.seedFile=function(f,h){function p(m){var E=m.data;E.forge&&E.forge.prng&&(self.removeEventListener("message",p),h(E.forge.prng.err,E.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:f}}})};else{var d=function(f){var h=f.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(p,m){l.postMessage({forge:{prng:{err:p,bytes:m}}})})};l.addEventListener("message",d)}},t}});var bo=S((ldt,AL)=>{var us=gt();ru();bL();vL();Gt();(function(){if(us.random&&us.random.getBytes){AL.exports=us.random;return}(function(e){var t={},r=new Array(4),n=us.util.createBuffer();t.formatKey=function(f){var h=us.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),us.aes._expandKey(f,!1)},t.formatSeed=function(f){var h=us.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),f},t.cipher=function(f,h){return us.aes._updateBlock(f,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return++f[3],f},t.md=us.md.sha256;function s(){var f=us.prng.create(t);return f.getBytes=function(h,p){return f.generate(h,p)},f.getBytesSync=function(h){return f.generate(h)},f}var i=s(),o=null,a=us.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(o=function(f){return c.getRandomValues(f)}),us.options.usePureJavaScript||!us.util.isNodejs&&!o){if(typeof window>"u"||window.document,i.collectInt(+new Date,32),typeof navigator<"u"){var l="";for(var d in navigator)try{typeof navigator[d]=="string"&&(l+=navigator[d])}catch{}i.collect(l),l=null}e&&(e().mousemove(function(f){i.collectInt(f.clientX,16),i.collectInt(f.clientY,16)}),e().keypress(function(f){i.collectInt(f.charCode,8)}))}if(!us.random)us.random=i;else for(var d in i)us.random[d]=i[d];us.random.createInstance=s,AL.exports=us.random})(typeof jQuery<"u"?jQuery:null)})()});var IL=S((udt,ine)=>{var Ii=gt();Gt();var xL=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],nne=[1,2,3,5],WVe=function(e,t){return e<<t&65535|(e&65535)>>16-t},JVe=function(e,t){return(e&65535)>>t|e<<16-t&65535};ine.exports=Ii.rc2=Ii.rc2||{};Ii.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Ii.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),s=t,i=Math.ceil(s/8),o=255>>(s&7),a;for(a=n;a<128;a++)r.putByte(xL[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-i,xL[r.at(128-i)&o]),a=127-i;a>=0;a--)r.setAt(a,xL[r.at(a+1)^r.at(a+i)]);return r};var sne=function(e,t,r){var n=!1,s=null,i=null,o=null,a,c,l,d,f=[];for(e=Ii.rc2.expandKey(e,t),l=0;l<64;l++)f.push(e.getInt16Le());r?(a=function(m){for(l=0;l<4;l++)m[l]+=f[d]+(m[(l+3)%4]&m[(l+2)%4])+(~m[(l+3)%4]&m[(l+1)%4]),m[l]=WVe(m[l],nne[l]),d++},c=function(m){for(l=0;l<4;l++)m[l]+=f[m[(l+3)%4]&63]}):(a=function(m){for(l=3;l>=0;l--)m[l]=JVe(m[l],nne[l]),m[l]-=f[d]+(m[(l+3)%4]&m[(l+2)%4])+(~m[(l+3)%4]&m[(l+1)%4]),d--},c=function(m){for(l=3;l>=0;l--)m[l]-=f[m[(l+3)%4]&63]});var h=function(m){var E=[];for(l=0;l<4;l++){var b=s.getInt16Le();o!==null&&(r?b^=o.getInt16Le():o.putInt16Le(b)),E.push(b&65535)}d=r?0:63;for(var A=0;A<m.length;A++)for(var R=0;R<m[A][0];R++)m[A][1](E);for(l=0;l<4;l++)o!==null&&(r?o.putInt16Le(E[l]):E[l]^=o.getInt16Le()),i.putInt16Le(E[l])},p=null;return p={start:function(m,E){m&&typeof m=="string"&&(m=Ii.util.createBuffer(m)),n=!1,s=Ii.util.createBuffer(),i=E||new Ii.util.createBuffer,o=m,p.output=i},update:function(m){for(n||s.putBuffer(m);s.length()>=8;)h([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(m){var E=!0;if(r)if(m)E=m(8,s,!r);else{var b=s.length()===8?8:8-s.length();s.fillWithByte(b,b)}if(E&&(n=!0,p.update()),!r&&(E=s.length()===0,E))if(m)E=m(8,i,!r);else{var A=i.length(),R=i.at(A-1);R>A?E=!1:i.truncate(R)}return E}},p};Ii.rc2.startEncrypting=function(e,t,r){var n=Ii.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Ii.rc2.createEncryptionCipher=function(e,t){return sne(e,t,!0)};Ii.rc2.startDecrypting=function(e,t,r){var n=Ii.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Ii.rc2.createDecryptionCipher=function(e,t){return sne(e,t,!1)}});var R0=S((ddt,hne)=>{var wL=gt();hne.exports=wL.jsbn=wL.jsbn||{};var jc,XVe=0xdeadbeefcafe,one=(XVe&16777215)==15715070;function oe(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}wL.jsbn.BigInteger=oe;function Wt(){return new oe(null)}function YVe(e,t,r,n,s,i){for(;--i>=0;){var o=t*this.data[e++]+r.data[n]+s;s=Math.floor(o/67108864),r.data[n++]=o&67108863}return s}function QVe(e,t,r,n,s,i){for(var o=t&32767,a=t>>15;--i>=0;){var c=this.data[e]&32767,l=this.data[e++]>>15,d=a*c+l*o;c=o*c+((d&32767)<<15)+r.data[n]+(s&1073741823),s=(c>>>30)+(d>>>15)+a*l+(s>>>30),r.data[n++]=c&1073741823}return s}function ane(e,t,r,n,s,i){for(var o=t&16383,a=t>>14;--i>=0;){var c=this.data[e]&16383,l=this.data[e++]>>14,d=a*c+l*o;c=o*c+((d&16383)<<14)+r.data[n]+s,s=(c>>28)+(d>>14)+a*l,r.data[n++]=c&268435455}return s}typeof navigator>"u"?(oe.prototype.am=ane,jc=28):one&&navigator.appName=="Microsoft Internet Explorer"?(oe.prototype.am=QVe,jc=30):one&&navigator.appName!="Netscape"?(oe.prototype.am=YVe,jc=26):(oe.prototype.am=ane,jc=28);oe.prototype.DB=jc;oe.prototype.DM=(1<<jc)-1;oe.prototype.DV=1<<jc;var TL=52;oe.prototype.FV=Math.pow(2,TL);oe.prototype.F1=TL-jc;oe.prototype.F2=2*jc-TL;var ZVe="0123456789abcdefghijklmnopqrstuvwxyz",pI=new Array,Yp,vo;Yp=48;for(vo=0;vo<=9;++vo)pI[Yp++]=vo;Yp=97;for(vo=10;vo<36;++vo)pI[Yp++]=vo;Yp=65;for(vo=10;vo<36;++vo)pI[Yp++]=vo;function cne(e){return ZVe.charAt(e)}function lne(e,t){var r=pI[e.charCodeAt(t)];return r??-1}function eHe(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function tHe(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function su(e){var t=Wt();return t.fromInt(e),t}function rHe(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,s=!1,i=0;--n>=0;){var o=r==8?e[n]&255:lne(e,n);if(o<0){e.charAt(n)=="-"&&(s=!0);continue}s=!1,i==0?this.data[this.t++]=o:i+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-i)-1)<<i,this.data[this.t++]=o>>this.DB-i):this.data[this.t-1]|=o<<i,i+=r,i>=this.DB&&(i-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,i>0&&(this.data[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),s&&oe.ZERO.subTo(this,this)}function nHe(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function sHe(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,s=!1,i="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(s=!0,i=cne(n));o>=0;)a<t?(n=(this.data[o]&(1<<a)-1)<<t-a,n|=this.data[--o]>>(a+=this.DB-t)):(n=this.data[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(s=!0),s&&(i+=cne(n));return s?i:"0"}function iHe(){var e=Wt();return oe.ZERO.subTo(this,e),e}function oHe(){return this.s<0?this.negate():this}function aHe(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function mI(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function cHe(){return this.t<=0?0:this.DB*(this.t-1)+mI(this.data[this.t-1]^this.s&this.DM)}function lHe(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function uHe(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function dHe(e,t){var r=e%this.DB,n=this.DB-r,s=(1<<n)-1,i=Math.floor(e/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t.data[a+i+1]=this.data[a]>>n|o,o=(this.data[a]&s)<<r;for(a=i-1;a>=0;--a)t.data[a]=0;t.data[i]=o,t.t=this.t+i+1,t.s=this.s,t.clamp()}function fHe(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,s=this.DB-n,i=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&i)<<s,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&i)<<s),t.t=this.t-r,t.clamp()}function hHe(e,t){for(var r=0,n=0,s=Math.min(e.t,this.t);r<s;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function pHe(e,t){var r=this.abs(),n=e.abs(),s=r.t;for(t.t=s+n.t;--s>=0;)t.data[s]=0;for(s=0;s<n.t;++s)t.data[s+r.t]=r.am(0,n.data[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&oe.ZERO.subTo(t,t)}function mHe(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function gHe(e,t,r){var n=e.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Wt());var i=Wt(),o=this.s,a=e.s,c=this.DB-mI(n.data[n.t-1]);c>0?(n.lShiftTo(c,i),s.lShiftTo(c,r)):(n.copyTo(i),s.copyTo(r));var l=i.t,d=i.data[l-1];if(d!=0){var f=d*(1<<this.F1)+(l>1?i.data[l-2]>>this.F2:0),h=this.FV/f,p=(1<<this.F1)/f,m=1<<this.F2,E=r.t,b=E-l,A=t??Wt();for(i.dlShiftTo(b,A),r.compareTo(A)>=0&&(r.data[r.t++]=1,r.subTo(A,r)),oe.ONE.dlShiftTo(l,A),A.subTo(i,i);i.t<l;)i.data[i.t++]=0;for(;--b>=0;){var R=r.data[--E]==d?this.DM:Math.floor(r.data[E]*h+(r.data[E-1]+m)*p);if((r.data[E]+=i.am(0,R,r,b,0,l))<R)for(i.dlShiftTo(b,A),r.subTo(A,r);r.data[E]<--R;)r.subTo(A,r)}t!=null&&(r.drShiftTo(l,t),o!=a&&oe.ZERO.subTo(t,t)),r.t=l,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&oe.ZERO.subTo(r,r)}}}function yHe(e){var t=Wt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(oe.ZERO)>0&&e.subTo(t,t),t}function sf(e){this.m=e}function EHe(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function SHe(e){return e}function CHe(e){e.divRemTo(this.m,null,e)}function _He(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bHe(e,t){e.squareTo(t),this.reduce(t)}sf.prototype.convert=EHe;sf.prototype.revert=SHe;sf.prototype.reduce=CHe;sf.prototype.mulTo=_He;sf.prototype.sqrTo=bHe;function vHe(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function of(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function AHe(e){var t=Wt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(oe.ZERO)>0&&this.m.subTo(t,t),t}function xHe(e){var t=Wt();return e.copyTo(t),this.reduce(t),t}function IHe(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function wHe(e,t){e.squareTo(t),this.reduce(t)}function THe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}of.prototype.convert=AHe;of.prototype.revert=xHe;of.prototype.reduce=IHe;of.prototype.mulTo=THe;of.prototype.sqrTo=wHe;function RHe(){return(this.t>0?this.data[0]&1:this.s)==0}function NHe(e,t){if(e>4294967295||e<1)return oe.ONE;var r=Wt(),n=Wt(),s=t.convert(this),i=mI(e)-1;for(s.copyTo(r);--i>=0;)if(t.sqrTo(r,n),(e&1<<i)>0)t.mulTo(n,s,r);else{var o=r;r=n,n=o}return t.revert(r)}function PHe(e,t){var r;return e<256||t.isEven()?r=new sf(t):r=new of(t),this.exp(e,r)}oe.prototype.copyTo=eHe;oe.prototype.fromInt=tHe;oe.prototype.fromString=rHe;oe.prototype.clamp=nHe;oe.prototype.dlShiftTo=lHe;oe.prototype.drShiftTo=uHe;oe.prototype.lShiftTo=dHe;oe.prototype.rShiftTo=fHe;oe.prototype.subTo=hHe;oe.prototype.multiplyTo=pHe;oe.prototype.squareTo=mHe;oe.prototype.divRemTo=gHe;oe.prototype.invDigit=vHe;oe.prototype.isEven=RHe;oe.prototype.exp=NHe;oe.prototype.toString=sHe;oe.prototype.negate=iHe;oe.prototype.abs=oHe;oe.prototype.compareTo=aHe;oe.prototype.bitLength=cHe;oe.prototype.mod=yHe;oe.prototype.modPowInt=PHe;oe.ZERO=su(0);oe.ONE=su(1);function OHe(){var e=Wt();return this.copyTo(e),e}function DHe(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function kHe(){return this.t==0?this.s:this.data[0]<<24>>24}function BHe(){return this.t==0?this.s:this.data[0]<<16>>16}function LHe(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function FHe(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function MHe(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=su(r),s=Wt(),i=Wt(),o="";for(this.divRemTo(n,s,i);s.signum()>0;)o=(r+i.intValue()).toString(e).substr(1)+o,s.divRemTo(n,s,i);return i.intValue().toString(e)+o}function UHe(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),s=!1,i=0,o=0,a=0;a<e.length;++a){var c=lne(e,a);if(c<0){e.charAt(a)=="-"&&this.signum()==0&&(s=!0);continue}o=t*o+c,++i>=r&&(this.dMultiply(n),this.dAddOffset(o,0),i=0,o=0)}i>0&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(o,0)),s&&oe.ZERO.subTo(this,this)}function qHe(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(oe.ONE.shiftLeft(e-1),RL,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(oe.ONE.shiftLeft(e-1),this);else{var n=new Array,s=e&7;n.length=(e>>3)+1,t.nextBytes(n),s>0?n[0]&=(1<<s)-1:n[0]=0,this.fromString(n,256)}}function VHe(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,s=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[s++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),s==0&&(this.s&128)!=(n&128)&&++s,(s>0||n!=this.s)&&(t[s++]=n);return t}function HHe(e){return this.compareTo(e)==0}function jHe(e){return this.compareTo(e)<0?this:e}function KHe(e){return this.compareTo(e)>0?this:e}function zHe(e,t,r){var n,s,i=Math.min(e.t,this.t);for(n=0;n<i;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(s=e.s&this.DM,n=i;n<this.t;++n)r.data[n]=t(this.data[n],s);r.t=this.t}else{for(s=this.s&this.DM,n=i;n<e.t;++n)r.data[n]=t(s,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function $He(e,t){return e&t}function GHe(e){var t=Wt();return this.bitwiseTo(e,$He,t),t}function RL(e,t){return e|t}function WHe(e){var t=Wt();return this.bitwiseTo(e,RL,t),t}function une(e,t){return e^t}function JHe(e){var t=Wt();return this.bitwiseTo(e,une,t),t}function dne(e,t){return e&~t}function XHe(e){var t=Wt();return this.bitwiseTo(e,dne,t),t}function YHe(){for(var e=Wt(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function QHe(e){var t=Wt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function ZHe(e){var t=Wt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function eje(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function tje(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+eje(this.data[e]);return this.s<0?this.t*this.DB:-1}function rje(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function nje(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=rje(this.data[r]^t);return e}function sje(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function ije(e,t){var r=oe.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function oje(e){return this.changeBit(e,RL)}function aje(e){return this.changeBit(e,dne)}function cje(e){return this.changeBit(e,une)}function lje(e,t){for(var r=0,n=0,s=Math.min(e.t,this.t);r<s;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function uje(e){var t=Wt();return this.addTo(e,t),t}function dje(e){var t=Wt();return this.subTo(e,t),t}function fje(e){var t=Wt();return this.multiplyTo(e,t),t}function hje(e){var t=Wt();return this.divRemTo(e,t,null),t}function pje(e){var t=Wt();return this.divRemTo(e,null,t),t}function mje(e){var t=Wt(),r=Wt();return this.divRemTo(e,t,r),new Array(t,r)}function gje(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function yje(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function T0(){}function fne(e){return e}function Eje(e,t,r){e.multiplyTo(t,r)}function Sje(e,t){e.squareTo(t)}T0.prototype.convert=fne;T0.prototype.revert=fne;T0.prototype.mulTo=Eje;T0.prototype.sqrTo=Sje;function Cje(e){return this.exp(e,new T0)}function _je(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var s;for(s=r.t-this.t;n<s;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(s=Math.min(e.t,t);n<s;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function bje(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Qp(e){this.r2=Wt(),this.q3=Wt(),oe.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function vje(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Wt();return e.copyTo(t),this.reduce(t),t}function Aje(e){return e}function xje(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ije(e,t){e.squareTo(t),this.reduce(t)}function wje(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Qp.prototype.convert=vje;Qp.prototype.revert=Aje;Qp.prototype.reduce=xje;Qp.prototype.mulTo=wje;Qp.prototype.sqrTo=Ije;function Tje(e,t){var r=e.bitLength(),n,s=su(1),i;if(r<=0)return s;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?i=new sf(t):t.isEven()?i=new Qp(t):i=new of(t);var o=new Array,a=3,c=n-1,l=(1<<n)-1;if(o[1]=i.convert(this),n>1){var d=Wt();for(i.sqrTo(o[1],d);a<=l;)o[a]=Wt(),i.mulTo(d,o[a-2],o[a]),a+=2}var f=e.t-1,h,p=!0,m=Wt(),E;for(r=mI(e.data[f])-1;f>=0;){for(r>=c?h=e.data[f]>>r-c&l:(h=(e.data[f]&(1<<r+1)-1)<<c-r,f>0&&(h|=e.data[f-1]>>this.DB+r-c)),a=n;(h&1)==0;)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--f),p)o[h].copyTo(s),p=!1;else{for(;a>1;)i.sqrTo(s,m),i.sqrTo(m,s),a-=2;a>0?i.sqrTo(s,m):(E=s,s=m,m=E),i.mulTo(m,o[h],s)}for(;f>=0&&(e.data[f]&1<<r)==0;)i.sqrTo(s,m),E=s,s=m,m=E,--r<0&&(r=this.DB-1,--f)}return i.revert(s)}function Rje(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var s=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(s<i&&(i=s),i>0&&(t.rShiftTo(i,t),r.rShiftTo(i,r));t.signum()>0;)(s=t.getLowestSetBit())>0&&t.rShiftTo(s,t),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r}function Nje(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function Pje(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return oe.ZERO;for(var r=e.clone(),n=this.clone(),s=su(1),i=su(0),o=su(0),a=su(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!s.isEven()||!i.isEven())&&(s.addTo(this,s),i.subTo(e,i)),s.rShiftTo(1,s)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;n.isEven();)n.rShiftTo(1,n),t?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&s.subTo(o,s),i.subTo(a,i)):(n.subTo(r,n),t&&o.subTo(s,o),a.subTo(i,a))}if(n.compareTo(oe.ONE)!=0)return oe.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}var ra=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Oje=(1<<26)/ra[ra.length-1];function Dje(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=ra[ra.length-1]){for(t=0;t<ra.length;++t)if(r.data[0]==ra[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<ra.length;){for(var n=ra[t],s=t+1;s<ra.length&&n<Oje;)n*=ra[s++];for(n=r.modInt(n);t<s;)if(n%ra[t++]==0)return!1}return r.millerRabin(e)}function kje(e){var t=this.subtract(oe.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),s=Bje(),i,o=0;o<e;++o){do i=new oe(this.bitLength(),s);while(i.compareTo(oe.ONE)<=0||i.compareTo(t)>=0);var a=i.modPow(n,this);if(a.compareTo(oe.ONE)!=0&&a.compareTo(t)!=0){for(var c=1;c++<r&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(oe.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}function Bje(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}oe.prototype.chunkSize=LHe;oe.prototype.toRadix=MHe;oe.prototype.fromRadix=UHe;oe.prototype.fromNumber=qHe;oe.prototype.bitwiseTo=zHe;oe.prototype.changeBit=ije;oe.prototype.addTo=lje;oe.prototype.dMultiply=gje;oe.prototype.dAddOffset=yje;oe.prototype.multiplyLowerTo=_je;oe.prototype.multiplyUpperTo=bje;oe.prototype.modInt=Nje;oe.prototype.millerRabin=kje;oe.prototype.clone=OHe;oe.prototype.intValue=DHe;oe.prototype.byteValue=kHe;oe.prototype.shortValue=BHe;oe.prototype.signum=FHe;oe.prototype.toByteArray=VHe;oe.prototype.equals=HHe;oe.prototype.min=jHe;oe.prototype.max=KHe;oe.prototype.and=GHe;oe.prototype.or=WHe;oe.prototype.xor=JHe;oe.prototype.andNot=XHe;oe.prototype.not=YHe;oe.prototype.shiftLeft=QHe;oe.prototype.shiftRight=ZHe;oe.prototype.getLowestSetBit=tje;oe.prototype.bitCount=nje;oe.prototype.testBit=sje;oe.prototype.setBit=oje;oe.prototype.clearBit=aje;oe.prototype.flipBit=cje;oe.prototype.add=uje;oe.prototype.subtract=dje;oe.prototype.multiply=fje;oe.prototype.divide=hje;oe.prototype.remainder=pje;oe.prototype.divideAndRemainder=mje;oe.prototype.modPow=Tje;oe.prototype.modInverse=Pje;oe.prototype.pow=Cje;oe.prototype.gcd=Rje;oe.prototype.isProbablePrime=Dje});var Zp=S((fdt,yne)=>{var Wa=gt();ja();Gt();var mne=yne.exports=Wa.sha1=Wa.sha1||{};Wa.md.sha1=Wa.md.algorithms.sha1=mne;mne.create=function(){gne||Lje();var e=null,t=Wa.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var s=n.messageLengthSize/4,i=0;i<s;++i)n.fullMessageLength.push(0);return t=Wa.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(s,i){i==="utf8"&&(s=Wa.util.encodeUtf8(s));var o=s.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(s),pne(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var s=Wa.util.createBuffer();s.putBytes(t.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=i&n.blockLength-1;s.putBytes(NL.substr(0,n.blockLength-o));for(var a,c,l=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)a=n.fullMessageLength[d+1]*8,c=a/4294967296>>>0,l+=c,s.putInt32(l>>>0),l=a>>>0;s.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};pne(f,r,s);var h=Wa.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},n};var NL=null,gne=!1;function Lje(){NL="\x80",NL+=Wa.util.fillString("\0",64),gne=!0}function pne(e,t,r){for(var n,s,i,o,a,c,l,d,f=r.length();f>=64;){for(s=e.h0,i=e.h1,o=e.h2,a=e.h3,c=e.h4,d=0;d<16;++d)n=r.getInt32(),t[d]=n,l=a^i&(o^a),n=(s<<5|s>>>27)+l+c+1518500249+n,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<20;++d)n=t[d-3]^t[d-8]^t[d-14]^t[d-16],n=n<<1|n>>>31,t[d]=n,l=a^i&(o^a),n=(s<<5|s>>>27)+l+c+1518500249+n,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<32;++d)n=t[d-3]^t[d-8]^t[d-14]^t[d-16],n=n<<1|n>>>31,t[d]=n,l=i^o^a,n=(s<<5|s>>>27)+l+c+1859775393+n,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<40;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,l=i^o^a,n=(s<<5|s>>>27)+l+c+1859775393+n,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<60;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,l=i&o|a&(i^o),n=(s<<5|s>>>27)+l+c+2400959708+n,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<80;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,l=i^o^a,n=(s<<5|s>>>27)+l+c+3395469782+n,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=n;e.h0=e.h0+s|0,e.h1=e.h1+i|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,f-=64}}});var PL=S((hdt,Sne)=>{var Ja=gt();Gt();bo();Zp();var Ene=Sne.exports=Ja.pkcs1=Ja.pkcs1||{};Ene.encode_rsa_oaep=function(e,t,r){var n,s,i,o;typeof r=="string"?(n=r,s=arguments[3]||void 0,i=arguments[4]||void 0):r&&(n=r.label||void 0,s=r.seed||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),i?i.start():i=Ja.md.sha1.create(),o||(o=i);var a=Math.ceil(e.n.bitLength()/8),c=a-2*i.digestLength-2;if(t.length>c){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=t.length,l.maxLength=c,l}n||(n=""),i.update(n,"raw");for(var d=i.digest(),f="",h=c-t.length,p=0;p<h;p++)f+="\0";var m=d.getBytes()+f+""+t;if(!s)s=Ja.random.getBytes(i.digestLength);else if(s.length!==i.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=s.length,l.digestLength=i.digestLength,l}var E=gI(s,a-i.digestLength-1,o),b=Ja.util.xorBytes(m,E,m.length),A=gI(b,i.digestLength,o),R=Ja.util.xorBytes(s,A,s.length);return"\0"+R+b};Ene.decode_rsa_oaep=function(e,t,r){var n,s,i;typeof r=="string"?(n=r,s=arguments[3]||void 0):r&&(n=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(i=r.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var b=new Error("RSAES-OAEP encoded message length is invalid.");throw b.length=t.length,b.expectedLength=o,b}if(s===void 0?s=Ja.md.sha1.create():s.start(),i||(i=s),o<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),s.update(n,"raw");for(var a=s.digest().getBytes(),c=t.charAt(0),l=t.substring(1,s.digestLength+1),d=t.substring(1+s.digestLength),f=gI(d,s.digestLength,i),h=Ja.util.xorBytes(l,f,l.length),p=gI(h,o-s.digestLength-1,i),m=Ja.util.xorBytes(d,p,d.length),E=m.substring(0,s.digestLength),b=c!=="\0",A=0;A<s.digestLength;++A)b|=a.charAt(A)!==E.charAt(A);for(var R=1,D=s.digestLength,K=s.digestLength;K<m.length;K++){var z=m.charCodeAt(K),G=z&1^1,ye=R?65534:0;b|=z&ye,R=R&G,D+=R}if(b||m.charCodeAt(D)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(D+1)};function gI(e,t,r){r||(r=Ja.md.sha1.create());for(var n="",s=Math.ceil(t/r.digestLength),i=0;i<s;++i){var o=String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}});var DL=S((pdt,OL)=>{var iu=gt();Gt();R0();bo();(function(){if(iu.prime){OL.exports=iu.prime;return}var e=OL.exports=iu.prime=iu.prime||{},t=iu.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var s=function(f,h){return f|h};e.generateProbablePrime=function(f,h,p){typeof h=="function"&&(p=h,h={}),h=h||{};var m=h.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var E=h.prng||iu.random,b={nextBytes:function(A){for(var R=E.getBytesSync(A.length),D=0;D<A.length;++D)A[D]=R.charCodeAt(D)}};if(m.name==="PRIMEINC")return i(f,b,m.options,p);throw new Error("Invalid prime generation algorithm: "+m.name)};function i(f,h,p,m){return"workers"in p?c(f,h,p,m):o(f,h,p,m)}function o(f,h,p,m){var E=l(f,h),b=0,A=d(E.bitLength());"millerRabinTests"in p&&(A=p.millerRabinTests);var R=10;"maxBlockTime"in p&&(R=p.maxBlockTime),a(E,f,h,b,A,R,m)}function a(f,h,p,m,E,b,A){var R=+new Date;do{if(f.bitLength()>h&&(f=l(h,p)),f.isProbablePrime(E))return A(null,f);f.dAddOffset(r[m++%8],0)}while(b<0||+new Date-R<b);iu.util.setImmediate(function(){a(f,h,p,m,E,b,A)})}function c(f,h,p,m){if(typeof Worker>"u")return o(f,h,p,m);var E=l(f,h),b=p.workers,A=p.workLoad||100,R=A*30/8,D=p.workerScript||"forge/prime.worker.js";if(b===-1)return iu.util.estimateCores(function(z,G){z&&(G=2),b=G-1,K()});K();function K(){b=Math.max(1,b);for(var z=[],G=0;G<b;++G)z[G]=new Worker(D);for(var ye=b,G=0;G<b;++G)z[G].addEventListener("message",xe);var he=!1;function xe(Me){if(!he){--ye;var Ue=Me.data;if(Ue.found){for(var Ge=0;Ge<z.length;++Ge)z[Ge].terminate();return he=!0,m(null,new t(Ue.prime,16))}E.bitLength()>f&&(E=l(f,h));var zt=E.toString(16);Me.target.postMessage({hex:zt,workLoad:A}),E.dAddOffset(R,0)}}}}function l(f,h){var p=new t(f,h),m=f-1;return p.testBit(m)||p.bitwiseTo(t.ONE.shiftLeft(m),s,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function d(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})()});var N0=S((mdt,Ine)=>{var ze=gt();ta();R0();nu();PL();DL();bo();Gt();typeof Vt>"u"&&(Vt=ze.jsbn.BigInteger);var Vt,kL=ze.util.isNodejs?require("crypto"):null,q=ze.asn1,Ao=ze.util;ze.pki=ze.pki||{};Ine.exports=ze.pki.rsa=ze.rsa=ze.rsa||{};var ot=ze.pki,Fje=[6,4,2,4,2,4,6,2],Mje={name:"PrivateKeyInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Uje={name:"RSAPrivateKey",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},qje={name:"RSAPublicKey",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Vje=ze.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:q.Class.UNIVERSAL,type:q.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Hje={name:"DigestInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:q.Class.UNIVERSAL,type:q.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},jje=function(e){var t;if(e.algorithm in ot.oids)t=ot.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=q.oidToDer(t).getBytes(),s=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[]),i=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[]);i.value.push(q.create(q.Class.UNIVERSAL,q.Type.OID,!1,n)),i.value.push(q.create(q.Class.UNIVERSAL,q.Type.NULL,!1,""));var o=q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,e.digest().getBytes());return s.value.push(i),s.value.push(o),q.toDer(s).getBytes()},Ane=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Vt.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Vt.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new Vt(ze.util.bytesToHex(ze.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Vt.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var s=e.mod(t.p).modPow(t.dP,t.p),i=e.mod(t.q).modPow(t.dQ,t.q);s.compareTo(i)<0;)s=s.add(t.p);var o=s.subtract(i).multiply(t.qInv).mod(t.p).multiply(t.q).add(i);return o=o.multiply(n.modInverse(t.n)).mod(t.n),o};ot.rsa.encrypt=function(e,t,r){var n=r,s,i=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,s=xne(e,t,r)):(s=ze.util.createBuffer(),s.putBytes(e));for(var o=new Vt(s.toHex(),16),a=Ane(o,t,n),c=a.toString(16),l=ze.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)l.putByte(0),--d;return l.putBytes(ze.util.hexToBytes(c)),l.getBytes()};ot.rsa.decrypt=function(e,t,r,n){var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var i=new Error("Encrypted message length is invalid.");throw i.length=e.length,i.expected=s,i}var o=new Vt(ze.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Ane(o,t,r),c=a.toString(16),l=ze.util.createBuffer(),d=s-Math.ceil(c.length/2);d>0;)l.putByte(0),--d;return l.putBytes(ze.util.hexToBytes(c)),n!==!1?yI(l.getBytes(),t,r):l.getBytes()};ot.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||ze.random,s={nextBytes:function(a){for(var c=n.getBytesSync(a.length),l=0;l<a.length;++l)a[l]=c.charCodeAt(l)}},i=r.algorithm||"PRIMEINC",o;if(i==="PRIMEINC")o={algorithm:i,state:0,bits:e,rng:s,eInt:t||65537,e:new Vt(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+i);return o};ot.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Vt(null);r.fromInt(30);for(var n=0,s=function(f,h){return f|h},i=+new Date,o,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,l=c-1;e.pqState===0?(e.num=new Vt(c,e.rng),e.num.testBit(l)||e.num.bitwiseTo(Vt.ONE.shiftLeft(l),s,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(zje(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(Fje[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(Vt.ONE).gcd(e.e).compareTo(Vt.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Vt.ONE),e.q1=e.q.subtract(Vt.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Vt.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var d=e.e.modInverse(e.phi);e.keys={privateKey:ot.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:ot.rsa.setPublicKey(e.n,e.e)}}o=+new Date,a+=o-i,i=o}return e.keys!==null};ot.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!ze.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(Cne("generateKeyPair"))return kL.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,l){if(a)return n(a);n(null,{privateKey:ot.privateKeyFromPem(l),publicKey:ot.publicKeyFromPem(c)})});if(_ne("generateKey")&&_ne("exportKey"))return Ao.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:vne(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Ao.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=ot.privateKeyFromAsn1(q.fromDer(ze.util.createBuffer(a)));n(null,{privateKey:c,publicKey:ot.setRsaPublicKey(c.n,c.e)})}});if(bne("generateKey")&&bne("exportKey")){var s=Ao.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:vne(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);s.oncomplete=function(a){var c=a.target.result,l=Ao.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);l.oncomplete=function(d){var f=d.target.result,h=ot.privateKeyFromAsn1(q.fromDer(ze.util.createBuffer(f)));n(null,{privateKey:h,publicKey:ot.setRsaPublicKey(h.n,h.e)})},l.onerror=function(d){n(d)}},s.onerror=function(a){n(a)};return}}else if(Cne("generateKeyPairSync")){var i=kL.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ot.privateKeyFromPem(i.privateKey),publicKey:ot.publicKeyFromPem(i.publicKey)}}}var o=ot.rsa.createKeyPairGenerationState(e,t,r);if(!n)return ot.rsa.stepKeyPairGenerationState(o,0),o.keys;Kje(o,r,n)};ot.setRsaPublicKey=ot.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,s,i){if(typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSAES-PKCS1-V1_5"),s==="RSAES-PKCS1-V1_5")s={encode:function(a,c,l){return xne(a,c,2).getBytes()}};else if(s==="RSA-OAEP"||s==="RSAES-OAEP")s={encode:function(a,c){return ze.pkcs1.encode_rsa_oaep(c,a,i)}};else if(["RAW","NONE","NULL",null].indexOf(s)!==-1)s={encode:function(a){return a}};else if(typeof s=="string")throw new Error('Unsupported encryption scheme: "'+s+'".');var o=s.encode(n,r,!0);return ot.rsa.encrypt(o,r,!0)},r.verify=function(n,s,i,o){typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),i==="RSASSA-PKCS1-V1_5"?i={verify:function(c,l){l=yI(l,r,!0);var d=q.fromDer(l,{parseAllBytes:o._parseAllDigestBytes}),f={},h=[];if(!q.validate(d,Hje,f,h)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=h,p}var m=q.derToOid(f.algorithmIdentifier);if(!(m===ze.oids.md2||m===ze.oids.md5||m===ze.oids.sha1||m===ze.oids.sha224||m===ze.oids.sha256||m===ze.oids.sha384||m===ze.oids.sha512||m===ze.oids["sha512-224"]||m===ze.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=m,p}if((m===ze.oids.md2||m===ze.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===f.digest}}:(i==="NONE"||i==="NULL"||i===null)&&(i={verify:function(c,l){return l=yI(l,r,!0),c===l}});var a=ot.rsa.decrypt(s,r,!0,!1);return i.verify(n,a,r.n.bitLength())},r};ot.setRsaPrivateKey=ot.rsa.setPrivateKey=function(e,t,r,n,s,i,o,a){var c={n:e,e:t,d:r,p:n,q:s,dP:i,dQ:o,qInv:a};return c.decrypt=function(l,d,f){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var h=ot.rsa.decrypt(l,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:yI};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(p,m){return ze.pkcs1.decode_rsa_oaep(m,p,f)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(h,c,!1)},c.sign=function(l,d){var f=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:jje},f=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return l}},f=1);var h=d.encode(l,c.n.bitLength());return ot.rsa.encrypt(h,c,f)},c};ot.wrapRsaPrivateKey=function(e){return q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,q.integerToDer(0).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(ot.oids.rsaEncryption).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.NULL,!1,"")]),q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(e).getBytes())])};ot.privateKeyFromAsn1=function(e){var t={},r=[];if(q.validate(e,Mje,t,r)&&(e=q.fromDer(ze.util.createBuffer(t.privateKey))),t={},r=[],!q.validate(e,Uje,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var s,i,o,a,c,l,d,f;return s=ze.util.createBuffer(t.privateKeyModulus).toHex(),i=ze.util.createBuffer(t.privateKeyPublicExponent).toHex(),o=ze.util.createBuffer(t.privateKeyPrivateExponent).toHex(),a=ze.util.createBuffer(t.privateKeyPrime1).toHex(),c=ze.util.createBuffer(t.privateKeyPrime2).toHex(),l=ze.util.createBuffer(t.privateKeyExponent1).toHex(),d=ze.util.createBuffer(t.privateKeyExponent2).toHex(),f=ze.util.createBuffer(t.privateKeyCoefficient).toHex(),ot.setRsaPrivateKey(new Vt(s,16),new Vt(i,16),new Vt(o,16),new Vt(a,16),new Vt(c,16),new Vt(l,16),new Vt(d,16),new Vt(f,16))};ot.privateKeyToAsn1=ot.privateKeyToRSAPrivateKey=function(e){return q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,q.integerToDer(0).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.n)),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.e)),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.d)),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.p)),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.q)),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.dP)),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.dQ)),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.qInv))])};ot.publicKeyFromAsn1=function(e){var t={},r=[];if(q.validate(e,Vje,t,r)){var n=q.derToOid(t.publicKeyOid);if(n!==ot.oids.rsaEncryption){var s=new Error("Cannot read public key. Unknown OID.");throw s.oid=n,s}e=t.rsaPublicKey}if(r=[],!q.validate(e,qje,t,r)){var s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw s.errors=r,s}var i=ze.util.createBuffer(t.publicKeyModulus).toHex(),o=ze.util.createBuffer(t.publicKeyExponent).toHex();return ot.setRsaPublicKey(new Vt(i,16),new Vt(o,16))};ot.publicKeyToAsn1=ot.publicKeyToSubjectPublicKeyInfo=function(e){return q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(ot.oids.rsaEncryption).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.NULL,!1,"")]),q.create(q.Class.UNIVERSAL,q.Type.BITSTRING,!1,[ot.publicKeyToRSAPublicKey(e)])])};ot.publicKeyToRSAPublicKey=function(e){return q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.n)),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,Xa(e.e))])};function xne(e,t,r){var n=ze.util.createBuffer(),s=Math.ceil(t.n.bitLength()/8);if(e.length>s-11){var i=new Error("Message is too long for PKCS#1 v1.5 padding.");throw i.length=e.length,i.max=s-11,i}n.putByte(0),n.putByte(r);var o=s-3-e.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<o;++c)n.putByte(a)}else for(;o>0;){for(var l=0,d=ze.random.getBytes(o),c=0;c<o;++c)a=d.charCodeAt(c),a===0?++l:n.putByte(a);o=l}return n.putByte(0),n.putBytes(e),n}function yI(e,t,r,n){var s=Math.ceil(t.n.bitLength()/8),i=ze.util.createBuffer(e),o=i.getByte(),a=i.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=s-3-n;for(var l=0;l<c;++l)if(i.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;i.length()>1;){if(i.getByte()!==255){--i.read;break}++c}else if(a===2)for(c=0;i.length()>1;){if(i.getByte()===0){--i.read;break}++c}var d=i.getByte();if(d!==0||c!==s-3-i.length())throw new Error("Encryption block is invalid.");return i.getBytes()}function Kje(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),s();function s(){i(e.pBits,function(a,c){if(a)return r(a);if(e.p=c,e.q!==null)return o(a,e.q);i(e.qBits,o)})}function i(a,c){ze.prime.generateProbablePrime(a,n,c)}function o(a,c){if(a)return r(a);if(e.q=c,e.p.compareTo(e.q)<0){var l=e.p;e.p=e.q,e.q=l}if(e.p.subtract(Vt.ONE).gcd(e.e).compareTo(Vt.ONE)!==0){e.p=null,s();return}if(e.q.subtract(Vt.ONE).gcd(e.e).compareTo(Vt.ONE)!==0){e.q=null,i(e.qBits,o);return}if(e.p1=e.p.subtract(Vt.ONE),e.q1=e.q.subtract(Vt.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Vt.ONE)!==0){e.p=e.q=null,s();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,i(e.qBits,o);return}var d=e.e.modInverse(e.phi);e.keys={privateKey:ot.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:ot.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Xa(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=ze.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function zje(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Cne(e){return ze.util.isNodejs&&typeof kL[e]=="function"}function _ne(e){return typeof Ao.globalScope<"u"&&typeof Ao.globalScope.crypto=="object"&&typeof Ao.globalScope.crypto.subtle=="object"&&typeof Ao.globalScope.crypto.subtle[e]=="function"}function bne(e){return typeof Ao.globalScope<"u"&&typeof Ao.globalScope.msCrypto=="object"&&typeof Ao.globalScope.msCrypto.subtle=="object"&&typeof Ao.globalScope.msCrypto.subtle[e]=="function"}function vne(e){for(var t=ze.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var BL=S((gdt,Pne)=>{var Pe=gt();ru();ta();w0();ja();nu();fI();nf();bo();IL();N0();Gt();typeof wne>"u"&&(wne=Pe.jsbn.BigInteger);var wne,J=Pe.asn1,dt=Pe.pki=Pe.pki||{};Pne.exports=dt.pbe=Pe.pbe=Pe.pbe||{};var af=dt.oids,$je={name:"EncryptedPrivateKeyInfo",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:J.Class.UNIVERSAL,type:J.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Gje={name:"PBES2Algorithms",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:J.Class.UNIVERSAL,type:J.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:J.Class.UNIVERSAL,type:J.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Wje={name:"pkcs-12PbeParams",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:J.Class.UNIVERSAL,type:J.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"iterations"}]};dt.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Pe.random.getBytesSync(r.saltSize),s=r.count,i=J.integerToDer(s),o,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var l,d,f;switch(r.algorithm){case"aes128":o=16,l=16,d=af["aes128-CBC"],f=Pe.aes.createEncryptionCipher;break;case"aes192":o=24,l=16,d=af["aes192-CBC"],f=Pe.aes.createEncryptionCipher;break;case"aes256":o=32,l=16,d=af["aes256-CBC"],f=Pe.aes.createEncryptionCipher;break;case"des":o=8,l=8,d=af.desCBC,f=Pe.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),m=Nne(p),E=Pe.pkcs5.pbkdf2(t,n,s,o,m),b=Pe.random.getBytesSync(l),A=f(E);A.start(b),A.update(J.toDer(e)),A.finish(),c=A.output.getBytes();var R=Jje(n,i,o,p);a=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(af.pkcs5PBES2).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(af.pkcs5PBKDF2).getBytes()),R]),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(d).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,b)])])])}else if(r.algorithm==="3des"){o=24;var D=new Pe.util.ByteBuffer(n),E=dt.pbe.generatePkcs12Key(t,D,1,s,o),b=dt.pbe.generatePkcs12Key(t,D,2,s,o),A=Pe.des.createEncryptionCipher(E);A.start(b),A.update(J.toDer(e)),A.finish(),c=A.output.getBytes(),a=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(af["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,n),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,i.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var K=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[a,J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,c)]);return K};dt.decryptPrivateKeyInfo=function(e,t){var r=null,n={},s=[];if(!J.validate(e,$je,n,s)){var i=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=s,i}var o=J.derToOid(n.encryptionOid),a=dt.pbe.getCipher(o,n.encryptionParams,t),c=Pe.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=J.fromDer(a.output)),r};dt.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:J.toDer(e).getBytes()};return Pe.pem.encode(r,{maxline:t})};dt.encryptedPrivateKeyFromPem=function(e){var t=Pe.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return J.fromDer(t.body)};dt.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=dt.wrapRsaPrivateKey(dt.privateKeyToAsn1(e));return n=dt.encryptPrivateKeyInfo(n,t,r),dt.encryptedPrivateKeyToPem(n)}var s,i,o,a;switch(r.algorithm){case"aes128":s="AES-128-CBC",o=16,i=Pe.random.getBytesSync(16),a=Pe.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",o=24,i=Pe.random.getBytesSync(16),a=Pe.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",o=32,i=Pe.random.getBytesSync(16),a=Pe.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",o=24,i=Pe.random.getBytesSync(8),a=Pe.des.createEncryptionCipher;break;case"des":s="DES-CBC",o=8,i=Pe.random.getBytesSync(8),a=Pe.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var l=Pe.pbe.opensslDeriveBytes(t,i.substr(0,8),o),d=a(l);d.start(i),d.update(J.toDer(dt.privateKeyToAsn1(e))),d.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:Pe.util.bytesToHex(i).toUpperCase()},body:d.output.getBytes()};return Pe.pem.encode(f)};dt.decryptRsaPrivateKey=function(e,t){var r=null,n=Pe.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var s=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw s.headerType=s,s}if(n.procType&&n.procType.type==="ENCRYPTED"){var i,o;switch(n.dekInfo.algorithm){case"DES-CBC":i=8,o=Pe.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,o=Pe.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,o=Pe.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,o=Pe.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,o=Pe.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,o=function(f){return Pe.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":i=8,o=function(f){return Pe.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":i=16,o=function(f){return Pe.rc2.createDecryptionCipher(f,128)};break;default:var s=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw s.algorithm=n.dekInfo.algorithm,s}var a=Pe.util.hexToBytes(n.dekInfo.parameters),c=Pe.pbe.opensslDeriveBytes(t,a.substr(0,8),i),l=o(c);if(l.start(a),l.update(Pe.util.createBuffer(n.body)),l.finish())r=l.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=dt.decryptPrivateKeyInfo(J.fromDer(r),t):r=J.fromDer(r),r!==null&&(r=dt.privateKeyFromAsn1(r)),r};dt.pbe.generatePkcs12Key=function(e,t,r,n,s,i){var o,a;if(typeof i>"u"||i===null){if(!("sha1"in Pe.md))throw new Error('"sha1" hash algorithm unavailable.');i=Pe.md.sha1.create()}var c=i.digestLength,l=i.blockLength,d=new Pe.util.ByteBuffer,f=new Pe.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)f.putInt16(e.charCodeAt(a));f.putInt16(0)}var h=f.length(),p=t.length(),m=new Pe.util.ByteBuffer;m.fillWithByte(r,l);var E=l*Math.ceil(p/l),b=new Pe.util.ByteBuffer;for(a=0;a<E;a++)b.putByte(t.at(a%p));var A=l*Math.ceil(h/l),R=new Pe.util.ByteBuffer;for(a=0;a<A;a++)R.putByte(f.at(a%h));var D=b;D.putBuffer(R);for(var K=Math.ceil(s/c),z=1;z<=K;z++){var G=new Pe.util.ByteBuffer;G.putBytes(m.bytes()),G.putBytes(D.bytes());for(var ye=0;ye<n;ye++)i.start(),i.update(G.getBytes()),G=i.digest();var he=new Pe.util.ByteBuffer;for(a=0;a<l;a++)he.putByte(G.at(a%c));var xe=Math.ceil(p/l)+Math.ceil(h/l),Me=new Pe.util.ByteBuffer;for(o=0;o<xe;o++){var Ue=new Pe.util.ByteBuffer(D.getBytes(l)),Ge=511;for(a=he.length()-1;a>=0;a--)Ge=Ge>>8,Ge+=he.at(a)+Ue.at(a),Ue.setAt(a,Ge&255);Me.putBuffer(Ue)}D=Me,d.putBuffer(G)}return d.truncate(d.length()-s),d};dt.pbe.getCipher=function(e,t,r){switch(e){case dt.oids.pkcs5PBES2:return dt.pbe.getCipherForPBES2(e,t,r);case dt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case dt.oids["pbewithSHAAnd40BitRC2-CBC"]:return dt.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};dt.pbe.getCipherForPBES2=function(e,t,r){var n={},s=[];if(!J.validate(t,Gje,n,s)){var i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=s,i}if(e=J.derToOid(n.kdfOid),e!==dt.oids.pkcs5PBKDF2){var i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw i.oid=e,i.supportedOids=["pkcs5PBKDF2"],i}if(e=J.derToOid(n.encOid),e!==dt.oids["aes128-CBC"]&&e!==dt.oids["aes192-CBC"]&&e!==dt.oids["aes256-CBC"]&&e!==dt.oids["des-EDE3-CBC"]&&e!==dt.oids.desCBC){var i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw i.oid=e,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i}var o=n.kdfSalt,a=Pe.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,l;switch(dt.oids[e]){case"aes128-CBC":c=16,l=Pe.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,l=Pe.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,l=Pe.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,l=Pe.des.createDecryptionCipher;break;case"desCBC":c=8,l=Pe.des.createDecryptionCipher;break}var d=Rne(n.prfOid),f=Pe.pkcs5.pbkdf2(r,o,a,c,d),h=n.encIv,p=l(f);return p.start(h),p};dt.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},s=[];if(!J.validate(t,Wje,n,s)){var i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=s,i}var o=Pe.util.createBuffer(n.salt),a=Pe.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,l,d;switch(e){case dt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,d=Pe.des.startDecrypting;break;case dt.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,d=function(E,b){var A=Pe.rc2.createDecryptionCipher(E,40);return A.start(b,null),A};break;default:var i=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw i.oid=e,i}var f=Rne(n.prfOid),h=dt.pbe.generatePkcs12Key(r,o,1,a,c,f);f.start();var p=dt.pbe.generatePkcs12Key(r,o,2,a,l,f);return d(h,p)};dt.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in Pe.md))throw new Error('"md5" hash algorithm unavailable.');n=Pe.md.md5.create()}t===null&&(t="");for(var s=[Tne(n,e+t)],i=16,o=1;i<r;++o,i+=16)s.push(Tne(n,s[o-1]+e+t));return s.join("").substr(0,r)};function Tne(e,t){return e.start().update(t).digest().getBytes()}function Rne(e){var t;if(!e)t="hmacWithSHA1";else if(t=dt.oids[J.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Nne(t)}function Nne(e){var t=Pe.md;switch(e){case"hmacWithSHA224":t=Pe.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function Jje(e,t,r,n){var s=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,e),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&s.value.push(J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,Pe.util.hexToBytes(r.toString(16))),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(dt.oids[n]).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,"")])),s}});var LL=S((ydt,kne)=>{var em=gt();ta();Gt();var Ae=em.asn1,tm=kne.exports=em.pkcs7asn1=em.pkcs7asn1||{};em.pkcs7=em.pkcs7||{};em.pkcs7.asn1=tm;var One={name:"ContentInfo",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ae.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};tm.contentInfoValidator=One;var Dne={name:"EncryptedContentInfo",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ae.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ae.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};tm.envelopedDataValidator={name:"EnvelopedData",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Dne)};tm.encryptedDataValidator={name:"EncryptedData",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.INTEGER,constructed:!1,capture:"version"}].concat(Dne)};var Xje={name:"SignerInfo",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ae.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ae.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ae.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};tm.signedDataValidator={name:"SignedData",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},One,{name:"SignedData.Certificates",tagClass:Ae.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ae.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SET,capture:"signerInfos",optional:!0,value:[Xje]}]};tm.recipientInfoValidator={name:"RecipientInfo",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ae.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ae.Class.UNIVERSAL,type:Ae.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var FL=S((Edt,Bne)=>{var cf=gt();Gt();cf.mgf=cf.mgf||{};var Yje=Bne.exports=cf.mgf.mgf1=cf.mgf1=cf.mgf1||{};Yje.create=function(e){var t={generate:function(r,n){for(var s=new cf.util.ByteBuffer,i=Math.ceil(n/e.digestLength),o=0;o<i;o++){var a=new cf.util.ByteBuffer;a.putInt32(o),e.start(),e.update(r+a.getBytes()),s.putBuffer(e.digest())}return s.truncate(s.length()-n),s.getBytes()}};return t}});var Fne=S((Sdt,Lne)=>{var EI=gt();FL();Lne.exports=EI.mgf=EI.mgf||{};EI.mgf.mgf1=EI.mgf1});var SI=S((Cdt,Mne)=>{var lf=gt();bo();Gt();var Qje=Mne.exports=lf.pss=lf.pss||{};Qje.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,s=e.salt||null;typeof s=="string"&&(s=lf.util.createBuffer(s));var i;if("saltLength"in e)i=e.saltLength;else if(s!==null)i=s.length();else throw new Error("Salt length not specified or specific salt not given.");if(s!==null&&s.length()!==i)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||lf.random,a={};return a.encode=function(c,l){var d,f=l-1,h=Math.ceil(f/8),p=c.digest().getBytes();if(h<n+i+2)throw new Error("Message is too long to encrypt.");var m;s===null?m=o.getBytesSync(i):m=s.bytes();var E=new lf.util.ByteBuffer;E.fillWithByte(0,8),E.putBytes(p),E.putBytes(m),t.start(),t.update(E.getBytes());var b=t.digest().getBytes(),A=new lf.util.ByteBuffer;A.fillWithByte(0,h-i-n-2),A.putByte(1),A.putBytes(m);var R=A.getBytes(),D=h-n-1,K=r.generate(b,D),z="";for(d=0;d<D;d++)z+=String.fromCharCode(R.charCodeAt(d)^K.charCodeAt(d));var G=65280>>8*h-f&255;return z=String.fromCharCode(z.charCodeAt(0)&~G)+z.substr(1),z+b+"\xBC"},a.verify=function(c,l,d){var f,h=d-1,p=Math.ceil(h/8);if(l=l.substr(-p),p<n+i+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(l.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=p-n-1,E=l.substr(0,m),b=l.substr(m,n),A=65280>>8*p-h&255;if((E.charCodeAt(0)&A)!==0)throw new Error("Bits beyond keysize not zero as expected.");var R=r.generate(b,m),D="";for(f=0;f<m;f++)D+=String.fromCharCode(E.charCodeAt(f)^R.charCodeAt(f));D=String.fromCharCode(D.charCodeAt(0)&~A)+D.substr(1);var K=p-n-i-2;for(f=0;f<K;f++)if(D.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(D.charCodeAt(K)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var z=D.substr(-i),G=new lf.util.ByteBuffer;G.fillWithByte(0,8),G.putBytes(c),G.putBytes(z),t.start(),t.update(G.getBytes());var ye=t.digest().getBytes();return b===ye},a}});var bI=S((_dt,jne)=>{var $e=gt();ru();ta();w0();ja();Fne();nu();nf();SI();N0();Gt();var C=$e.asn1,me=jne.exports=$e.pki=$e.pki||{},Ht=me.oids,dn={};dn.CN=Ht.commonName;dn.commonName="CN";dn.C=Ht.countryName;dn.countryName="C";dn.L=Ht.localityName;dn.localityName="L";dn.ST=Ht.stateOrProvinceName;dn.stateOrProvinceName="ST";dn.O=Ht.organizationName;dn.organizationName="O";dn.OU=Ht.organizationalUnitName;dn.organizationalUnitName="OU";dn.E=Ht.emailAddress;dn.emailAddress="E";var qne=$e.pki.rsa.publicKeyValidator,Zje={name:"Certificate",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:C.Class.UNIVERSAL,type:C.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:C.Class.UNIVERSAL,type:C.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:C.Class.UNIVERSAL,type:C.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:C.Class.UNIVERSAL,type:C.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},qne,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:C.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:C.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:C.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},e5e={name:"rsapss",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:C.Class.UNIVERSAL,type:C.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:C.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:C.Class.UNIVERSAL,type:C.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:C.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:C.Class.UNIVERSAL,type:C.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:C.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:C.Class.UNIVERSAL,type:C.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},t5e={name:"CertificationRequestInfo",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},qne,{name:"CertificationRequestInfo.attributes",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:C.Class.UNIVERSAL,type:C.Type.SET,constructed:!0}]}]}]},r5e={name:"CertificationRequest",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[t5e,{name:"CertificationRequest.signatureAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};me.RDNAttributesAsArray=function(e,t){for(var r=[],n,s,i,o=0;o<e.value.length;++o){n=e.value[o];for(var a=0;a<n.value.length;++a)i={},s=n.value[a],i.type=C.derToOid(s.value[0].value),i.value=s.value[1].value,i.valueTagClass=s.value[1].type,i.type in Ht&&(i.name=Ht[i.type],i.name in dn&&(i.shortName=dn[i.name])),t&&(t.update(i.type),t.update(i.value)),r.push(i)}return r};me.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],s=C.derToOid(n.value[0].value),i=n.value[1].value,o=0;o<i.length;++o){var a={};if(a.type=s,a.value=i[o].value,a.valueTagClass=i[o].type,a.type in Ht&&(a.name=Ht[a.type],a.name in dn&&(a.shortName=dn[a.name])),a.type===Ht.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(me.certificateExtensionFromAsn1(a.value[c]))}t.push(a)}return t};function ou(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,s=0;r===null&&s<e.attributes.length;++s)n=e.attributes[s],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var CI=function(e,t,r){var n={};if(e!==Ht["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Ht.sha1},mgf:{algorithmOid:Ht.mgf1,hash:{algorithmOid:Ht.sha1}},saltLength:20});var s={},i=[];if(!C.validate(t,e5e,s,i)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=i,o}return s.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=C.derToOid(s.hashOid)),s.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=C.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=C.derToOid(s.maskGenHashOid)),s.saltLength!==void 0&&(n.saltLength=s.saltLength.charCodeAt(0)),n},_I=function(e){switch(Ht[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return $e.md.sha1.create();case"md5WithRSAEncryption":return $e.md.md5.create();case"sha256WithRSAEncryption":return $e.md.sha256.create();case"sha384WithRSAEncryption":return $e.md.sha384.create();case"sha512WithRSAEncryption":return $e.md.sha512.create();case"RSASSA-PSS":return $e.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},Vne=function(e){var t=e.certificate,r;switch(t.signatureOid){case Ht.sha1WithRSAEncryption:case Ht.sha1WithRSASignature:break;case Ht["RSASSA-PSS"]:var n,s;if(n=Ht[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||$e.md[n]===void 0){var i=new Error("Unsupported MGF hash function.");throw i.oid=t.signatureParameters.mgf.hash.algorithmOid,i.name=n,i}if(s=Ht[t.signatureParameters.mgf.algorithmOid],s===void 0||$e.mgf[s]===void 0){var i=new Error("Unsupported MGF function.");throw i.oid=t.signatureParameters.mgf.algorithmOid,i.name=s,i}if(s=$e.mgf[s].create($e.md[n].create()),n=Ht[t.signatureParameters.hash.algorithmOid],n===void 0||$e.md[n]===void 0){var i=new Error("Unsupported RSASSA-PSS hash function.");throw i.oid=t.signatureParameters.hash.algorithmOid,i.name=n,i}r=$e.pss.create($e.md[n].create(),s,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};me.certificateFromPem=function(e,t,r){var n=$e.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=n.type,s}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var i=C.fromDer(n.body,r);return me.certificateFromAsn1(i,t)};me.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:C.toDer(me.certificateToAsn1(e)).getBytes()};return $e.pem.encode(r,{maxline:t})};me.publicKeyFromPem=function(e){var t=$e.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=C.fromDer(t.body);return me.publicKeyFromAsn1(n)};me.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:C.toDer(me.publicKeyToAsn1(e)).getBytes()};return $e.pem.encode(r,{maxline:t})};me.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:C.toDer(me.publicKeyToRSAPublicKey(e)).getBytes()};return $e.pem.encode(r,{maxline:t})};me.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||$e.md.sha1.create(),n=t.type||"RSAPublicKey",s;switch(n){case"RSAPublicKey":s=C.toDer(me.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":s=C.toDer(me.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(s);var i=r.digest();if(t.encoding==="hex"){var o=i.toHex();return t.delimiter?o.match(/.{2}/g).join(t.delimiter):o}else{if(t.encoding==="binary")return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return i};me.certificationRequestFromPem=function(e,t,r){var n=$e.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=n.type,s}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var i=C.fromDer(n.body,r);return me.certificationRequestFromAsn1(i,t)};me.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:C.toDer(me.certificationRequestToAsn1(e)).getBytes()};return $e.pem.encode(r,{maxline:t})};me.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return ou(e.issuer,t)},e.issuer.addField=function(t){xo([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return ou(e.subject,t)},e.subject.addField=function(t){xo([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){xo(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){xo(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)Hne(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,s=0;r===null&&s<e.extensions.length;++s)n=e.extensions[s],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||$e.md.sha1.create();var n=Ht[e.md.algorithm+"WithRSAEncryption"];if(!n){var s=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=me.getTBSCertificate(e);var i=C.toDer(e.tbsCertificate);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,s=e.subject,i=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw i.expectedIssuer=s.attributes,i.actualIssuer=n.attributes,i}var o=t.md;if(o===null){o=_I({signatureOid:t.signatureOid,type:"certificate"});var a=t.tbsCertificate||me.getTBSCertificate(t),c=C.toDer(a);o.update(c.getBytes())}return o!==null&&(r=Vne({certificate:e,md:o,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,s=t.subject;if(n.hash&&s.hash)r=n.hash===s.hash;else if(n.attributes.length===s.attributes.length){r=!0;for(var i,o,a=0;r&&a<n.attributes.length;++a)i=n.attributes[a],o=s.attributes[a],(i.type!==o.type||i.value!==o.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return me.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Ht.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return $e.util.hexToBytes(n.subjectKeyIdentifier)===s}}return!1},e};me.certificateFromAsn1=function(e,t){var r={},n=[];if(!C.validate(e,Zje,r,n)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=n,s}var i=C.derToOid(r.publicKeyOid);if(i!==me.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=me.createCertificate();o.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=$e.util.createBuffer(r.certSerialNumber);o.serialNumber=a.toHex(),o.signatureOid=$e.asn1.derToOid(r.certSignatureOid),o.signatureParameters=CI(o.signatureOid,r.certSignatureParams,!0),o.siginfo.algorithmOid=$e.asn1.derToOid(r.certinfoSignatureOid),o.siginfo.parameters=CI(o.siginfo.algorithmOid,r.certinfoSignatureParams,!1),o.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(C.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(C.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(C.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(C.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=c[0],o.validity.notAfter=c[1],o.tbsCertificate=r.tbsCertificate,t){o.md=_I({signatureOid:o.signatureOid,type:"certificate"});var l=C.toDer(o.tbsCertificate);o.md.update(l.getBytes())}var d=$e.md.sha1.create(),f=C.toDer(r.certIssuer);d.update(f.getBytes()),o.issuer.getField=function(m){return ou(o.issuer,m)},o.issuer.addField=function(m){xo([m]),o.issuer.attributes.push(m)},o.issuer.attributes=me.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(o.issuer.uniqueId=r.certIssuerUniqueId),o.issuer.hash=d.digest().toHex();var h=$e.md.sha1.create(),p=C.toDer(r.certSubject);return h.update(p.getBytes()),o.subject.getField=function(m){return ou(o.subject,m)},o.subject.addField=function(m){xo([m]),o.subject.attributes.push(m)},o.subject.attributes=me.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(o.subject.uniqueId=r.certSubjectUniqueId),o.subject.hash=h.digest().toHex(),r.certExtensions?o.extensions=me.certificateExtensionsFromAsn1(r.certExtensions):o.extensions=[],o.publicKey=me.publicKeyFromAsn1(r.subjectPublicKeyInfo),o};me.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],s=0;s<n.value.length;++s)t.push(me.certificateExtensionFromAsn1(n.value[s]));return t};me.certificateExtensionFromAsn1=function(e){var t={};if(t.id=C.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===C.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Ht){if(t.name=Ht[t.id],t.name==="keyUsage"){var r=C.fromDer(t.value),n=0,s=0;r.value.length>1&&(n=r.value.charCodeAt(1),s=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(s&128)===128}else if(t.name==="basicConstraints"){var r=C.fromDer(t.value);r.value.length>0&&r.value[0].type===C.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var i=null;r.value.length>0&&r.value[0].type===C.Type.INTEGER?i=r.value[0].value:r.value.length>1&&(i=r.value[1].value),i!==null&&(t.pathLenConstraint=C.derToInteger(i))}else if(t.name==="extKeyUsage")for(var r=C.fromDer(t.value),o=0;o<r.value.length;++o){var a=C.derToOid(r.value[o].value);a in Ht?t[Ht[a]]=!0:t[a]=!0}else if(t.name==="nsCertType"){var r=C.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var c,r=C.fromDer(t.value),l=0;l<r.value.length;++l){c=r.value[l];var d={type:c.type,value:c.value};switch(t.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=$e.util.bytesToIP(c.value);break;case 8:d.oid=C.derToOid(c.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var r=C.fromDer(t.value);t.subjectKeyIdentifier=$e.util.bytesToHex(r.value)}}return t};me.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!C.validate(e,r5e,r,n)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=n,s}var i=C.derToOid(r.publicKeyOid);if(i!==me.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=me.createCertificationRequest();if(o.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,o.signatureOid=$e.asn1.derToOid(r.csrSignatureOid),o.signatureParameters=CI(o.signatureOid,r.csrSignatureParams,!0),o.siginfo.algorithmOid=$e.asn1.derToOid(r.csrSignatureOid),o.siginfo.parameters=CI(o.siginfo.algorithmOid,r.csrSignatureParams,!1),o.signature=r.csrSignature,o.certificationRequestInfo=r.certificationRequestInfo,t){o.md=_I({signatureOid:o.signatureOid,type:"certification request"});var a=C.toDer(o.certificationRequestInfo);o.md.update(a.getBytes())}var c=$e.md.sha1.create();return o.subject.getField=function(l){return ou(o.subject,l)},o.subject.addField=function(l){xo([l]),o.subject.attributes.push(l)},o.subject.attributes=me.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),o.subject.hash=c.digest().toHex(),o.publicKey=me.publicKeyFromAsn1(r.subjectPublicKeyInfo),o.getAttribute=function(l){return ou(o,l)},o.addAttribute=function(l){xo([l]),o.attributes.push(l)},o.attributes=me.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),o};me.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return ou(e.subject,t)},e.subject.addField=function(t){xo([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return ou(e,t)},e.addAttribute=function(t){xo([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){xo(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){xo(t),e.attributes=t},e.sign=function(t,r){e.md=r||$e.md.sha1.create();var n=Ht[e.md.algorithm+"WithRSAEncryption"];if(!n){var s=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=me.getCertificationRequestInfo(e);var i=C.toDer(e.certificationRequestInfo);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=_I({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||me.getCertificationRequestInfo(e),s=C.toDer(n);r.update(s.getBytes())}return r!==null&&(t=Vne({certificate:e,md:r,signature:e.signature})),t},e};function rm(e){for(var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),r,n,s=e.attributes,i=0;i<s.length;++i){r=s[i];var o=r.value,a=C.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===C.Type.UTF8&&(o=$e.util.encodeUtf8(o))),n=C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(r.type).getBytes()),C.create(C.Class.UNIVERSAL,a,!1,o)])]),t.value.push(n)}return t}function xo(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name>"u"&&(t.type&&t.type in me.oids?t.name=me.oids[t.type]:t.shortName&&t.shortName in dn&&(t.name=me.oids[dn[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in me.oids)t.type=me.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName>"u"&&t.name&&t.name in dn&&(t.shortName=dn[t.name]),t.type===Ht.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=C.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var s=0;s<t.extensions.length;++s)t.value.push(me.certificateExtensionToAsn1(Hne(t.extensions[s])))}if(typeof t.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function Hne(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in me.oids&&(e.name=me.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in me.oids)e.id=me.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var n=0,s=0,i=0;e.digitalSignature&&(s|=128,n=7),e.nonRepudiation&&(s|=64,n=6),e.keyEncipherment&&(s|=32,n=5),e.dataEncipherment&&(s|=16,n=4),e.keyAgreement&&(s|=8,n=3),e.keyCertSign&&(s|=4,n=2),e.cRLSign&&(s|=2,n=1),e.encipherOnly&&(s|=1,n=0),e.decipherOnly&&(i|=128,n=7);var o=String.fromCharCode(n);i!==0?o+=String.fromCharCode(s)+String.fromCharCode(i):s!==0&&(o+=String.fromCharCode(s)),e.value=C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,o)}else if(e.name==="basicConstraints")e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(C.create(C.Class.UNIVERSAL,C.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in e&&e.value.value.push(C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);var a=e.value.value;for(var c in e)e[c]===!0&&(c in Ht?a.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(Ht[c]).getBytes())):c.indexOf(".")!==-1&&a.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(c).getBytes())))}else if(e.name==="nsCertType"){var n=0,s=0;e.client&&(s|=128,n=7),e.server&&(s|=64,n=6),e.email&&(s|=32,n=5),e.objsign&&(s|=16,n=4),e.reserved&&(s|=8,n=3),e.sslCA&&(s|=4,n=2),e.emailCA&&(s|=2,n=1),e.objCA&&(s|=1,n=0);var o=String.fromCharCode(n);s!==0&&(o+=String.fromCharCode(s)),e.value=C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,o)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);for(var l,d=0;d<e.altNames.length;++d){l=e.altNames[d];var o=l.value;if(l.type===7&&l.ip){if(o=$e.util.bytesFromIP(l.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else l.type===8&&(l.oid?o=C.oidToDer(C.oidToDer(l.oid)):o=C.oidToDer(o));e.value.value.push(C.create(C.Class.CONTEXT_SPECIFIC,l.type,!1,o))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=C.create(C.Class.UNIVERSAL,C.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);var a=e.value.value;if(e.keyIdentifier){var h=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;a.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var p=[C.create(C.Class.CONTEXT_SPECIFIC,4,!0,[rm(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];a.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,p))}if(e.serialNumber){var m=$e.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);a.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(e.name==="cRLDistributionPoints"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);for(var a=e.value.value,E=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),b=C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[]),l,d=0;d<e.altNames.length;++d){l=e.altNames[d];var o=l.value;if(l.type===7&&l.ip){if(o=$e.util.bytesFromIP(l.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else l.type===8&&(l.oid?o=C.oidToDer(C.oidToDer(l.oid)):o=C.oidToDer(o));b.value.push(C.create(C.Class.CONTEXT_SPECIFIC,l.type,!1,o))}E.value.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[b])),a.push(E)}if(typeof e.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function ML(e,t){switch(e){case Ht["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.hash.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.mgf.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.mgf.hash.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(t.saltLength).getBytes())])),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,r);default:return C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")}}function n5e(e){var t=C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var s=r[n],i=s.value,o=C.Type.UTF8;"valueTagClass"in s&&(o=s.valueTagClass),o===C.Type.UTF8&&(i=$e.util.encodeUtf8(i));var a=!1;"valueConstructed"in s&&(a=s.valueConstructed);var c=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(s.type).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,o,a,i)])]);t.value.push(c)}return t}var s5e=new Date("1950-01-01T00:00:00Z"),i5e=new Date("2050-01-01T00:00:00Z");function Une(e){return e>=s5e&&e<i5e?C.create(C.Class.UNIVERSAL,C.Type.UTCTIME,!1,C.dateToUtcTime(e)):C.create(C.Class.UNIVERSAL,C.Type.GENERALIZEDTIME,!1,C.dateToGeneralizedTime(e))}me.getTBSCertificate=function(e){var t=Une(e.validity.notBefore),r=Une(e.validity.notAfter),n=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.version).getBytes())]),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,$e.util.hexToBytes(e.serialNumber)),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.siginfo.algorithmOid).getBytes()),ML(e.siginfo.algorithmOid,e.siginfo.parameters)]),rm(e.issuer),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,r]),rm(e.subject),me.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,[C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!0,[C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(me.certificateExtensionsToAsn1(e.extensions)),n};me.getCertificationRequestInfo=function(e){var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.version).getBytes()),rm(e.subject),me.publicKeyToAsn1(e.publicKey),n5e(e)]);return t};me.distinguishedNameToAsn1=function(e){return rm(e)};me.certificateToAsn1=function(e){var t=e.tbsCertificate||me.getTBSCertificate(e);return C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.signatureOid).getBytes()),ML(e.signatureOid,e.signatureParameters)]),C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,"\0"+e.signature)])};me.certificateExtensionsToAsn1=function(e){var t=C.create(C.Class.CONTEXT_SPECIFIC,3,!0,[]),r=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(me.certificateExtensionToAsn1(e[n]));return t};me.certificateExtensionToAsn1=function(e){var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);t.value.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.id).getBytes())),e.critical&&t.value.push(C.create(C.Class.UNIVERSAL,C.Type.BOOLEAN,!1,"\xFF"));var r=e.value;return typeof e.value!="string"&&(r=C.toDer(r).getBytes()),t.value.push(C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,r)),t};me.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||me.getCertificationRequestInfo(e);return C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.signatureOid).getBytes()),ML(e.signatureOid,e.signatureParameters)]),C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,"\0"+e.signature)])};me.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(o){var a=r(o.issuer);return a},t.addCertificate=function(o){if(typeof o=="string"&&(o=$e.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))if(o.subject.hash in t.certs){var a=t.certs[o.subject.hash];$e.util.isArray(a)||(a=[a]),a.push(o),t.certs[o.subject.hash]=a}else t.certs[o.subject.hash]=o},t.hasCertificate=function(o){typeof o=="string"&&(o=$e.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;$e.util.isArray(a)||(a=[a]);for(var c=C.toDer(me.certificateToAsn1(o)).getBytes(),l=0;l<a.length;++l){var d=C.toDer(me.certificateToAsn1(a[l])).getBytes();if(c===d)return!0}return!1},t.listAllCertificates=function(){var o=[];for(var a in t.certs)if(t.certs.hasOwnProperty(a)){var c=t.certs[a];if(!$e.util.isArray(c))o.push(c);else for(var l=0;l<c.length;++l)o.push(c[l])}return o},t.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=$e.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))return null;var c=r(o.subject);if(!$e.util.isArray(c))return a=t.certs[o.subject.hash],delete t.certs[o.subject.hash],a;for(var l=C.toDer(me.certificateToAsn1(o)).getBytes(),d=0;d<c.length;++d){var f=C.toDer(me.certificateToAsn1(c[d])).getBytes();l===f&&(a=c[d],c.splice(d,1))}return c.length===0&&delete t.certs[o.subject.hash],a};function r(o){return n(o),t.certs[o.hash]||null}function n(o){if(!o.hash){var a=$e.md.sha1.create();o.attributes=me.RDNAttributesAsArray(rm(o),a),o.hash=a.digest().toHex()}}if(e)for(var s=0;s<e.length;++s){var i=e[s];t.addCertificate(i)}return t};me.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};me.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),s=r.validityCheckDate;typeof s>"u"&&(s=new Date);var i=!0,o=null,a=0;do{var c=t.shift(),l=null,d=!1;if(s&&(s<c.validity.notBefore||s>c.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:me.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:s}),o===null){if(l=t[0]||e.getIssuer(c),l===null&&c.isIssuer(c)&&(d=!0,l=c),l){var f=l;$e.util.isArray(f)||(f=[f]);for(var h=!1;!h&&f.length>0;){l=f.shift();try{h=l.verify(c)}catch{}}h||(o={message:"Certificate signature is invalid.",error:me.certificateError.bad_certificate})}o===null&&(!l||d)&&!e.hasCertificate(c)&&(o={message:"Certificate is not trusted.",error:me.certificateError.unknown_ca})}if(o===null&&l&&!c.isIssuer(l)&&(o={message:"Certificate issuer is invalid.",error:me.certificateError.bad_certificate}),o===null)for(var p={keyUsage:!0,basicConstraints:!0},m=0;o===null&&m<c.extensions.length;++m){var E=c.extensions[m];E.critical&&!(E.name in p)&&(o={message:"Certificate has an unsupported critical extension.",error:me.certificateError.unsupported_certificate})}if(o===null&&(!i||t.length===0&&(!l||d))){var b=c.getExtension("basicConstraints"),A=c.getExtension("keyUsage");if(A!==null&&(!A.keyCertSign||b===null)&&(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:me.certificateError.bad_certificate}),o===null&&b!==null&&!b.cA&&(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:me.certificateError.bad_certificate}),o===null&&A!==null&&"pathLenConstraint"in b){var R=a-1;R>b.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:me.certificateError.bad_certificate})}}var D=o===null?!0:o.error,K=r.verify?r.verify(D,a,n):D;if(K===!0)o=null;else throw D===!0&&(o={message:"The application rejected the certificate.",error:me.certificateError.bad_certificate}),(K||K===0)&&(typeof K=="object"&&!$e.util.isArray(K)?(K.message&&(o.message=K.message),K.error&&(o.error=K.error)):typeof K=="string"&&(o.error=K)),o;i=!1,++a}while(t.length>0);return!0}});var qL=S((bdt,zne)=>{var Br=gt();ta();Jp();nu();LL();BL();bo();N0();Zp();Gt();bI();var P=Br.asn1,Nt=Br.pki,O0=zne.exports=Br.pkcs12=Br.pkcs12||{},Kne={name:"ContentInfo",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:P.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},o5e={name:"PFX",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"version"},Kne,{name:"PFX.macData",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:P.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:P.Class.UNIVERSAL,type:P.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:P.Class.UNIVERSAL,type:P.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},a5e={name:"SafeBag",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:P.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:P.Class.UNIVERSAL,type:P.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},c5e={name:"Attribute",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:P.Class.UNIVERSAL,type:P.Type.SET,constructed:!0,capture:"values"}]},l5e={name:"CertBag",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:P.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:P.Class.UNIVERSAL,type:P.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function P0(e,t,r,n){for(var s=[],i=0;i<e.length;i++)for(var o=0;o<e[i].safeBags.length;o++){var a=e[i].safeBags[o];if(!(n!==void 0&&a.type!==n)){if(t===null){s.push(a);continue}a.attributes[t]!==void 0&&a.attributes[t].indexOf(r)>=0&&s.push(a)}}return s}O0.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},s=[];if(!P.validate(e,o5e,n,s)){var i=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw i.errors=i,i}var o={version:n.version.charCodeAt(0),safeContents:[],getBags:function(b){var A={},R;return"localKeyId"in b?R=b.localKeyId:"localKeyIdHex"in b&&(R=Br.util.hexToBytes(b.localKeyIdHex)),R===void 0&&!("friendlyName"in b)&&"bagType"in b&&(A[b.bagType]=P0(o.safeContents,null,null,b.bagType)),R!==void 0&&(A.localKeyId=P0(o.safeContents,"localKeyId",R,b.bagType)),"friendlyName"in b&&(A.friendlyName=P0(o.safeContents,"friendlyName",b.friendlyName,b.bagType)),A},getBagsByFriendlyName:function(b,A){return P0(o.safeContents,"friendlyName",b,A)},getBagsByLocalKeyId:function(b,A){return P0(o.safeContents,"localKeyId",b,A)}};if(n.version.charCodeAt(0)!==3){var i=new Error("PKCS#12 PFX of version other than 3 not supported.");throw i.version=n.version.charCodeAt(0),i}if(P.derToOid(n.contentType)!==Nt.oids.data){var i=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw i.oid=P.derToOid(n.contentType),i}var a=n.content.value[0];if(a.tagClass!==P.Class.UNIVERSAL||a.type!==P.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=UL(a),n.mac){var c=null,l=0,d=P.derToOid(n.macAlgorithm);switch(d){case Nt.oids.sha1:c=Br.md.sha1.create(),l=20;break;case Nt.oids.sha256:c=Br.md.sha256.create(),l=32;break;case Nt.oids.sha384:c=Br.md.sha384.create(),l=48;break;case Nt.oids.sha512:c=Br.md.sha512.create(),l=64;break;case Nt.oids.md5:c=Br.md.md5.create(),l=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var f=new Br.util.ByteBuffer(n.macSalt),h="macIterations"in n?parseInt(Br.util.bytesToHex(n.macIterations),16):1,p=O0.generateKey(r,f,3,h,l,c),m=Br.hmac.create();m.start(c,p),m.update(a.value);var E=m.getMac();if(E.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return u5e(o,a.value,t,r),o};function UL(e){if(e.composed||e.constructed){for(var t=Br.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function u5e(e,t,r,n){if(t=P.fromDer(t,r),t.tagClass!==P.Class.UNIVERSAL||t.type!==P.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var s=0;s<t.value.length;s++){var i=t.value[s],o={},a=[];if(!P.validate(i,Kne,o,a)){var c=new Error("Cannot read ContentInfo.");throw c.errors=a,c}var l={encrypted:!1},d=null,f=o.content.value[0];switch(P.derToOid(o.contentType)){case Nt.oids.data:if(f.tagClass!==P.Class.UNIVERSAL||f.type!==P.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=UL(f).value;break;case Nt.oids.encryptedData:d=d5e(f,n),l.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=P.derToOid(o.contentType),c}l.safeBags=f5e(d,r,n),e.safeContents.push(l)}}function d5e(e,t){var r={},n=[];if(!P.validate(e,Br.pkcs7.asn1.encryptedDataValidator,r,n)){var s=new Error("Cannot read EncryptedContentInfo.");throw s.errors=n,s}var i=P.derToOid(r.contentType);if(i!==Nt.oids.data){var s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw s.oid=i,s}i=P.derToOid(r.encAlgorithm);var o=Nt.pbe.getCipher(i,r.encParameter,t),a=UL(r.encryptedContentAsn1),c=Br.util.createBuffer(a.value);if(o.update(c),!o.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return o.output.getBytes()}function f5e(e,t,r){if(!t&&e.length===0)return[];if(e=P.fromDer(e,t),e.tagClass!==P.Class.UNIVERSAL||e.type!==P.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],s=0;s<e.value.length;s++){var i=e.value[s],o={},a=[];if(!P.validate(i,a5e,o,a)){var c=new Error("Cannot read SafeBag.");throw c.errors=a,c}var l={type:P.derToOid(o.bagId),attributes:h5e(o.bagAttributes)};n.push(l);var d,f,h=o.bagValue.value[0];switch(l.type){case Nt.oids.pkcs8ShroudedKeyBag:if(h=Nt.decryptPrivateKeyInfo(h,r),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Nt.oids.keyBag:try{l.key=Nt.privateKeyFromAsn1(h)}catch{l.key=null,l.asn1=h}continue;case Nt.oids.certBag:d=l5e,f=function(){if(P.derToOid(o.certId)!==Nt.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=P.derToOid(o.certId),m}var E=P.fromDer(o.cert,t);try{l.cert=Nt.certificateFromAsn1(E,!0)}catch{l.cert=null,l.asn1=E}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=l.type,c}if(d!==void 0&&!P.validate(h,d,o,a)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=a,c}f()}return n}function h5e(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},s=[];if(!P.validate(e[r],c5e,n,s)){var i=new Error("Cannot read PKCS#12 BagAttribute.");throw i.errors=s,i}var o=P.derToOid(n.oid);if(Nt.oids[o]!==void 0){t[Nt.oids[o]]=[];for(var a=0;a<n.values.length;++a)t[Nt.oids[o]].push(n.values[a].value)}}return t}O0.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var s=n.localKeyId,i;if(s!==null)s=Br.util.hexToBytes(s);else if(n.generateLocalKeyId)if(t){var o=Br.util.isArray(t)?t[0]:t;typeof o=="string"&&(o=Nt.certificateFromPem(o));var a=Br.md.sha1.create();a.update(P.toDer(Nt.certificateToAsn1(o)).getBytes()),s=a.digest().getBytes()}else s=Br.random.getBytes(20);var c=[];s!==null&&c.push(P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.localKeyId).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.SET,!0,[P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,s)])])),"friendlyName"in n&&c.push(P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.friendlyName).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.SET,!0,[P.create(P.Class.UNIVERSAL,P.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(i=P.create(P.Class.UNIVERSAL,P.Type.SET,!0,c));var l=[],d=[];t!==null&&(Br.util.isArray(t)?d=t:d=[t]);for(var f=[],h=0;h<d.length;++h){t=d[h],typeof t=="string"&&(t=Nt.certificateFromPem(t));var p=h===0?i:void 0,m=Nt.certificateToAsn1(t),E=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.certBag).getBytes()),P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.x509Certificate).getBytes()),P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,P.toDer(m).getBytes())])])]),p]);f.push(E)}if(f.length>0){var b=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,f),A=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.data).getBytes()),P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,P.toDer(b).getBytes())])]);l.push(A)}var R=null;if(e!==null){var D=Nt.wrapRsaPrivateKey(Nt.privateKeyToAsn1(e));r===null?R=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.keyBag).getBytes()),P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[D]),i]):R=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.pkcs8ShroudedKeyBag).getBytes()),P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[Nt.encryptPrivateKeyInfo(D,r,n)]),i]);var K=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[R]),z=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.data).getBytes()),P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,P.toDer(K).getBytes())])]);l.push(z)}var G=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,l),ye;if(n.useMac){var a=Br.md.sha1.create(),he=new Br.util.ByteBuffer(Br.random.getBytes(n.saltSize)),xe=n.count,e=O0.generateKey(r,he,3,xe,20),Me=Br.hmac.create();Me.start(a,e),Me.update(P.toDer(G).getBytes());var Ue=Me.getMac();ye=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.sha1).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")]),P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,Ue.getBytes())]),P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,he.getBytes()),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(xe).getBytes())])}return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(3).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Nt.oids.data).getBytes()),P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,P.toDer(G).getBytes())])]),ye])};O0.generateKey=Br.pbe.generatePkcs12Key});var HL=S((vdt,$ne)=>{var au=gt();ta();nu();BL();nf();fI();qL();SI();N0();Gt();bI();var VL=au.asn1,nm=$ne.exports=au.pki=au.pki||{};nm.pemToDer=function(e){var t=au.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return au.util.createBuffer(t.body)};nm.privateKeyFromPem=function(e){var t=au.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=VL.fromDer(t.body);return nm.privateKeyFromAsn1(n)};nm.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:VL.toDer(nm.privateKeyToAsn1(e)).getBytes()};return au.pem.encode(r,{maxline:t})};nm.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:VL.toDer(e).getBytes()};return au.pem.encode(r,{maxline:t})}});var WL=S((Adt,ese)=>{var ae=gt();ta();Jp();cI();nf();HL();bo();Zp();Gt();var II=function(e,t,r,n){var s=ae.util.createBuffer(),i=e.length>>1,o=i+(e.length&1),a=e.substr(0,o),c=e.substr(i,o),l=ae.util.createBuffer(),d=ae.hmac.create();r=t+r;var f=Math.ceil(n/16),h=Math.ceil(n/20);d.start("MD5",a);var p=ae.util.createBuffer();l.putBytes(r);for(var m=0;m<f;++m)d.start(null,null),d.update(l.getBytes()),l.putBuffer(d.digest()),d.start(null,null),d.update(l.bytes()+r),p.putBuffer(d.digest());d.start("SHA1",c);var E=ae.util.createBuffer();l.clear(),l.putBytes(r);for(var m=0;m<h;++m)d.start(null,null),d.update(l.getBytes()),l.putBuffer(d.digest()),d.start(null,null),d.update(l.bytes()+r),E.putBuffer(d.digest());return s.putBytes(ae.util.xorBytes(p.getBytes(),E.getBytes(),n)),s},p5e=function(e,t,r){var n=ae.hmac.create();n.start("SHA1",e);var s=ae.util.createBuffer();return s.putInt32(t[0]),s.putInt32(t[1]),s.putByte(r.type),s.putByte(r.version.major),s.putByte(r.version.minor),s.putInt16(r.length),s.putBytes(r.fragment.bytes()),n.update(s.getBytes()),n.digest().getBytes()},m5e=function(e,t,r){var n=!1;try{var s=e.deflate(t.fragment.getBytes());t.fragment=ae.util.createBuffer(s),t.length=s.length,n=!0}catch{}return n},g5e=function(e,t,r){var n=!1;try{var s=e.inflate(t.fragment.getBytes());t.fragment=ae.util.createBuffer(s),t.length=s.length,n=!0}catch{}return n},Ki=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return ae.util.createBuffer(e.getBytes(r))},Io=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},v={};v.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};v.SupportedVersions=[v.Versions.TLS_1_1,v.Versions.TLS_1_0];v.Version=v.SupportedVersions[0];v.MaxFragment=15360;v.ConnectionEnd={server:0,client:1};v.PRFAlgorithm={tls_prf_sha256:0};v.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};v.CipherType={stream:0,block:1,aead:2};v.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};v.CompressionMethod={none:0,deflate:1};v.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};v.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};v.Alert={};v.Alert.Level={warning:1,fatal:2};v.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};v.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};v.CipherSuites={};v.getCipherSuite=function(e){var t=null;for(var r in v.CipherSuites){var n=v.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};v.handleUnexpected=function(e,t){var r=!e.open&&e.entity===v.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.unexpected_message}})};v.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(v.queue(e,v.createAlert(e,{level:v.Alert.Level.warning,description:v.Alert.Description.no_renegotiation})),v.flush(e)),e.process()};v.parseHelloMessage=function(e,t,r){var n=null,s=e.entity===v.ConnectionEnd.client;if(r<38)e.error(e,{message:s?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});else{var i=t.fragment,o=i.length();if(n={version:{major:i.getByte(),minor:i.getByte()},random:ae.util.createBuffer(i.getBytes(32)),session_id:Ki(i,1),extensions:[]},s?(n.cipher_suite=i.getBytes(2),n.compression_method=i.getByte()):(n.cipher_suites=Ki(i,2),n.compression_methods=Ki(i,1)),o=r-(o-i.length()),o>0){for(var a=Ki(i,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:Ki(a,2)});if(!s)for(var c=0;c<n.extensions.length;++c){var l=n.extensions[c];if(l.type[0]===0&&l.type[1]===0)for(var d=Ki(l.data,2);d.length()>0;){var f=d.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(Ki(d,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.protocol_version}});if(s)e.session.cipherSuite=v.getCipherSuite(n.cipher_suite);else for(var h=ae.util.createBuffer(n.cipher_suites.bytes());h.length()>0&&(e.session.cipherSuite=v.getCipherSuite(h.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.handshake_failure},cipherSuite:ae.util.bytesToHex(n.cipher_suite)});s?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=v.CompressionMethod.none}return n};v.createSecurityParameters=function(e,t){var r=e.entity===v.ConnectionEnd.client,n=t.random.bytes(),s=r?e.session.sp.client_random:n,i=r?n:v.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:v.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:s,server_random:i}};v.handleServerHello=function(e,t,r){var n=v.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.protocol_version}});e.session.version=e.version;var s=n.session_id.bytes();s.length>0&&s===e.session.id?(e.expect=Jne,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=E5e,e.session.resuming=!1,v.createSecurityParameters(e,n)),e.session.id=s,e.process()}};v.handleClientHello=function(e,t,r){var n=v.parseHelloMessage(e,t,r);if(!e.fail){var s=n.session_id.bytes(),i=null;if(e.sessionCache&&(i=e.sessionCache.getSession(s),i===null?s="":(i.version.major!==n.version.major||i.version.minor>n.version.minor)&&(i=null,s="")),s.length===0&&(s=ae.random.getBytes(32)),e.session.id=s,e.session.clientHelloVersion=n.version,e.session.sp={},i)e.version=e.session.version=i.version,e.session.sp=i.sp;else{for(var o,a=1;a<v.SupportedVersions.length&&(o=v.SupportedVersions[a],!(o.minor<=n.version.minor));++a);e.version={major:o.major,minor:o.minor},e.session.version=e.version}i!==null?(e.expect=$L,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?x5e:zL,e.session.resuming=!1,v.createSecurityParameters(e,n)),e.open=!0,v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createServerHello(e)})),e.session.resuming?(v.queue(e,v.createRecord(e,{type:v.ContentType.change_cipher_spec,data:v.createChangeCipherSpec()})),e.state.pending=v.createConnectionState(e),e.state.current.write=e.state.pending.write,v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createFinished(e)}))):(v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createCertificate(e)})),e.fail||(v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createServerKeyExchange(e)})),e.verifyClient!==!1&&v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createCertificateRequest(e)})),v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createServerHelloDone(e)})))),v.flush(e),e.process()}};v.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});var n=t.fragment,s={certificate_list:Ki(n,3)},i,o,a=[];try{for(;s.certificate_list.length()>0;)i=Ki(s.certificate_list,3),o=ae.asn1.fromDer(i),i=ae.pki.certificateFromAsn1(o,!0),a.push(i)}catch(l){return e.error(e,{message:"Could not parse certificate list.",cause:l,send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.bad_certificate}})}var c=e.entity===v.ConnectionEnd.client;(c||e.verifyClient===!0)&&a.length===0?e.error(e,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}}):a.length===0?e.expect=c?Gne:zL:(c?e.session.serverCertificate=a[0]:e.session.clientCertificate=a[0],v.verifyCertificateChain(e,a)&&(e.expect=c?Gne:zL)),e.process()};v.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.unsupported_certificate}});e.expect=S5e,e.process()};v.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.unsupported_certificate}});var n=t.fragment,s={enc_pre_master_secret:Ki(n,2).getBytes()},i=null;if(e.getPrivateKey)try{i=e.getPrivateKey(e,e.session.serverCertificate),i=ae.pki.privateKeyFromPem(i)}catch(c){e.error(e,{message:"Could not get private key.",cause:c,send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}})}if(i===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}});try{var o=e.session.sp;o.pre_master_secret=i.decrypt(s.enc_pre_master_secret);var a=e.session.clientHelloVersion;if(a.major!==o.pre_master_secret.charCodeAt(0)||a.minor!==o.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{o.pre_master_secret=ae.random.getBytes(48)}e.expect=$L,e.session.clientCertificate!==null&&(e.expect=I5e),e.process()};v.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});var n=t.fragment,s={certificate_types:Ki(n,1),certificate_authorities:Ki(n,2)};e.session.certificateRequest=s,e.expect=C5e,e.process()};v.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var s=n.bytes();n.read+=4;var i={signature:Ki(n,2).getBytes()},o=ae.util.createBuffer();o.putBuffer(e.session.md5.digest()),o.putBuffer(e.session.sha1.digest()),o=o.getBytes();try{var a=e.session.clientCertificate;if(!a.publicKey.verify(o,i.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(s),e.session.sha1.update(s)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.handshake_failure}})}e.expect=$L,e.process()};v.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.insufficient_security}},s=0,i=e.verify(e,n.alert.description,s,[]);if(i!==!0)return(i||i===0)&&(typeof i=="object"&&!ae.util.isArray(i)?(i.message&&(n.message=i.message),i.alert&&(n.alert.description=i.alert)):typeof i=="number"&&(n.alert.description=i)),e.error(e,n)}e.session.certificateRequest!==null&&(t=v.createRecord(e,{type:v.ContentType.handshake,data:v.createCertificate(e)}),v.queue(e,t)),t=v.createRecord(e,{type:v.ContentType.handshake,data:v.createClientKeyExchange(e)}),v.queue(e,t),e.expect=v5e;var o=function(a,c){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&v.queue(a,v.createRecord(a,{type:v.ContentType.handshake,data:v.createCertificateVerify(a,c)})),v.queue(a,v.createRecord(a,{type:v.ContentType.change_cipher_spec,data:v.createChangeCipherSpec()})),a.state.pending=v.createConnectionState(a),a.state.current.write=a.state.pending.write,v.queue(a,v.createRecord(a,{type:v.ContentType.handshake,data:v.createFinished(a)})),a.expect=Jne,v.flush(a),a.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return o(e,null);v.getClientSignature(e,o)};v.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});var r=e.entity===v.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=v.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?_5e:w5e,e.process()};v.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var s=n.bytes();n.read+=4;var i=t.fragment.getBytes();n=ae.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var o=e.entity===v.ConnectionEnd.client,a=o?"server finished":"client finished",c=e.session.sp,l=12,d=II;if(n=d(c.master_secret,a,n.getBytes(),l),n.getBytes()!==i)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.decrypt_error}});e.session.md5.update(s),e.session.sha1.update(s),(e.session.resuming&&o||!e.session.resuming&&!o)&&(v.queue(e,v.createRecord(e,{type:v.ContentType.change_cipher_spec,data:v.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createFinished(e)}))),e.expect=o?b5e:T5e,e.handshaking=!1,++e.handshakes,e.peerCertificate=o?e.session.serverCertificate:e.session.clientCertificate,v.flush(e),e.isConnected=!0,e.connected(e),e.process()};v.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},s;switch(n.description){case v.Alert.Description.close_notify:s="Connection closed.";break;case v.Alert.Description.unexpected_message:s="Unexpected message.";break;case v.Alert.Description.bad_record_mac:s="Bad record MAC.";break;case v.Alert.Description.decryption_failed:s="Decryption failed.";break;case v.Alert.Description.record_overflow:s="Record overflow.";break;case v.Alert.Description.decompression_failure:s="Decompression failed.";break;case v.Alert.Description.handshake_failure:s="Handshake failure.";break;case v.Alert.Description.bad_certificate:s="Bad certificate.";break;case v.Alert.Description.unsupported_certificate:s="Unsupported certificate.";break;case v.Alert.Description.certificate_revoked:s="Certificate revoked.";break;case v.Alert.Description.certificate_expired:s="Certificate expired.";break;case v.Alert.Description.certificate_unknown:s="Certificate unknown.";break;case v.Alert.Description.illegal_parameter:s="Illegal parameter.";break;case v.Alert.Description.unknown_ca:s="Unknown certificate authority.";break;case v.Alert.Description.access_denied:s="Access denied.";break;case v.Alert.Description.decode_error:s="Decode error.";break;case v.Alert.Description.decrypt_error:s="Decrypt error.";break;case v.Alert.Description.export_restriction:s="Export restriction.";break;case v.Alert.Description.protocol_version:s="Unsupported protocol version.";break;case v.Alert.Description.insufficient_security:s="Insufficient security.";break;case v.Alert.Description.internal_error:s="Internal error.";break;case v.Alert.Description.user_canceled:s="User canceled.";break;case v.Alert.Description.no_renegotiation:s="Renegotiation not supported.";break;default:s="Unknown error.";break}if(n.description===v.Alert.Description.close_notify)return e.close();e.error(e,{message:s,send:!1,origin:e.entity===v.ConnectionEnd.client?"server":"client",alert:n}),e.process()};v.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),s=r.getInt24();if(s>r.length())return e.fragmented=t,t.fragment=ae.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var i=r.bytes(s+4);r.read+=4,n in xI[e.entity][e.expect]?(e.entity===v.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ae.md.md5.create(),sha1:ae.md.sha1.create()}),n!==v.HandshakeType.hello_request&&n!==v.HandshakeType.certificate_verify&&n!==v.HandshakeType.finished&&(e.session.md5.update(i),e.session.sha1.update(i)),xI[e.entity][e.expect][n](e,t,s)):v.handleUnexpected(e,t)};v.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};v.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),s=r.getInt16(),i=r.getBytes(s);if(n===v.HeartbeatMessageType.heartbeat_request){if(e.handshaking||s>i.length)return e.process();v.queue(e,v.createRecord(e,{type:v.ContentType.heartbeat,data:v.createHeartbeat(v.HeartbeatMessageType.heartbeat_response,i)})),v.flush(e)}else if(n===v.HeartbeatMessageType.heartbeat_response){if(i!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,ae.util.createBuffer(i))}e.process()};var y5e=0,E5e=1,Gne=2,S5e=3,C5e=4,Jne=5,_5e=6,b5e=7,v5e=8,A5e=0,x5e=1,zL=2,I5e=3,$L=4,w5e=5,T5e=6,_=v.handleUnexpected,Xne=v.handleChangeCipherSpec,vs=v.handleAlert,ci=v.handleHandshake,Yne=v.handleApplicationData,As=v.handleHeartbeat,GL=[];GL[v.ConnectionEnd.client]=[[_,vs,ci,_,As],[_,vs,ci,_,As],[_,vs,ci,_,As],[_,vs,ci,_,As],[_,vs,ci,_,As],[Xne,vs,_,_,As],[_,vs,ci,_,As],[_,vs,ci,Yne,As],[_,vs,ci,_,As]];GL[v.ConnectionEnd.server]=[[_,vs,ci,_,As],[_,vs,ci,_,As],[_,vs,ci,_,As],[_,vs,ci,_,As],[Xne,vs,_,_,As],[_,vs,ci,_,As],[_,vs,ci,Yne,As],[_,vs,ci,_,As]];var cu=v.handleHelloRequest,R5e=v.handleServerHello,Qne=v.handleCertificate,Wne=v.handleServerKeyExchange,jL=v.handleCertificateRequest,vI=v.handleServerHelloDone,Zne=v.handleFinished,xI=[];xI[v.ConnectionEnd.client]=[[_,_,R5e,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[cu,_,_,_,_,_,_,_,_,_,_,Qne,Wne,jL,vI,_,_,_,_,_,_],[cu,_,_,_,_,_,_,_,_,_,_,_,Wne,jL,vI,_,_,_,_,_,_],[cu,_,_,_,_,_,_,_,_,_,_,_,_,jL,vI,_,_,_,_,_,_],[cu,_,_,_,_,_,_,_,_,_,_,_,_,_,vI,_,_,_,_,_,_],[cu,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[cu,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,Zne],[cu,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[cu,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_]];var N5e=v.handleClientHello,P5e=v.handleClientKeyExchange,O5e=v.handleCertificateVerify;xI[v.ConnectionEnd.server]=[[_,N5e,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,Qne,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,P5e,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,O5e,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,Zne],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_]];v.generateKeys=function(e,t){var r=II,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var s=2*t.mac_key_length+2*t.enc_key_length,i=e.version.major===v.Versions.TLS_1_0.major&&e.version.minor===v.Versions.TLS_1_0.minor;i&&(s+=2*t.fixed_iv_length);var o=r(t.master_secret,"key expansion",n,s),a={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return i&&(a.client_write_IV=o.getBytes(t.fixed_iv_length),a.server_write_IV=o.getBytes(t.fixed_iv_length)),a};v.createConnectionState=function(e){var t=e.entity===v.ConnectionEnd.client,r=function(){var i={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(o){return!0},compressionState:null,compressFunction:function(o){return!0},updateSequenceNumber:function(){i.sequenceNumber[1]===4294967295?(i.sequenceNumber[1]=0,++i.sequenceNumber[0]):++i.sequenceNumber[1]}};return i},n={read:r(),write:r()};if(n.read.update=function(i,o){return n.read.cipherFunction(o,n.read)?n.read.compressFunction(i,o,n.read)||i.error(i,{message:"Could not decompress record.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.decompression_failure}}):i.error(i,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.bad_record_mac}}),!i.fail},n.write.update=function(i,o){return n.write.compressFunction(i,o,n.write)?n.write.cipherFunction(o,n.write)||i.error(i,{message:"Could not encrypt record.",send:!1,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}}):i.error(i,{message:"Could not compress record.",send:!1,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}}),!i.fail},e.session){var s=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(s),s.keys=v.generateKeys(e,s),n.read.macKey=t?s.keys.server_write_MAC_key:s.keys.client_write_MAC_key,n.write.macKey=t?s.keys.client_write_MAC_key:s.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,s),s.compression_algorithm){case v.CompressionMethod.none:break;case v.CompressionMethod.deflate:n.read.compressFunction=g5e,n.write.compressFunction=m5e;break;default:throw new Error("Unsupported compression algorithm.")}}return n};v.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=ae.util.createBuffer();return r.putInt32(t),r.putBytes(ae.random.getBytes(28)),r};v.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};v.createAlert=function(e,t){var r=ae.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),v.createRecord(e,{type:v.ContentType.alert,data:r})};v.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=ae.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var s=t.length(),i=ae.util.createBuffer();i.putByte(v.CompressionMethod.none);var o=i.length(),a=ae.util.createBuffer();if(e.virtualHost){var c=ae.util.createBuffer();c.putByte(0),c.putByte(0);var l=ae.util.createBuffer();l.putByte(0),Io(l,2,ae.util.createBuffer(e.virtualHost));var d=ae.util.createBuffer();Io(d,2,l),Io(c,2,d),a.putBuffer(c)}var f=a.length();f>0&&(f+=2);var h=e.session.id,p=h.length+1+2+4+28+2+s+1+o+f,m=ae.util.createBuffer();return m.putByte(v.HandshakeType.client_hello),m.putInt24(p),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),Io(m,1,ae.util.createBuffer(h)),Io(m,2,t),Io(m,1,i),f>0&&Io(m,2,a),m};v.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=ae.util.createBuffer();return n.putByte(v.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),Io(n,1,ae.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};v.createCertificate=function(e){var t=e.entity===v.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var s=ae.util.createBuffer();if(r!==null)try{ae.util.isArray(r)||(r=[r]);for(var i=null,o=0;o<r.length;++o){var a=ae.pem.decode(r[o])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=a.type,c}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=ae.util.createBuffer(a.body);i===null&&(i=ae.asn1.fromDer(l.bytes(),!1));var d=ae.util.createBuffer();Io(d,3,l),s.putBuffer(d)}r=ae.pki.certificateFromAsn1(i),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(p){return e.error(e,{message:"Could not send certificate list.",cause:p,send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.bad_certificate}})}var f=3+s.length(),h=ae.util.createBuffer();return h.putByte(v.HandshakeType.certificate),h.putInt24(f),Io(h,3,s),h};v.createClientKeyExchange=function(e){var t=ae.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(ae.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var s=t.length+2,i=ae.util.createBuffer();return i.putByte(v.HandshakeType.client_key_exchange),i.putInt24(s),i.putInt16(t.length),i.putBytes(t),i};v.createServerKeyExchange=function(e){var t=0,r=ae.util.createBuffer();return t>0&&(r.putByte(v.HandshakeType.server_key_exchange),r.putInt24(t)),r};v.getClientSignature=function(e,t){var r=ae.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,s,i){var o=null;if(n.getPrivateKey)try{o=n.getPrivateKey(n,n.session.clientCertificate),o=ae.pki.privateKeyFromPem(o)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}})}o===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}}):s=o.sign(s,null),i(n,s)},e.getSignature(e,r,t)};v.createCertificateVerify=function(e,t){var r=t.length+2,n=ae.util.createBuffer();return n.putByte(v.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};v.createCertificateRequest=function(e){var t=ae.util.createBuffer();t.putByte(1);var r=ae.util.createBuffer();for(var n in e.caStore.certs){var s=e.caStore.certs[n],i=ae.pki.distinguishedNameToAsn1(s.subject),o=ae.asn1.toDer(i);r.putInt16(o.length()),r.putBuffer(o)}var a=1+t.length()+2+r.length(),c=ae.util.createBuffer();return c.putByte(v.HandshakeType.certificate_request),c.putInt24(a),Io(c,1,t),Io(c,2,r),c};v.createServerHelloDone=function(e){var t=ae.util.createBuffer();return t.putByte(v.HandshakeType.server_hello_done),t.putInt24(0),t};v.createChangeCipherSpec=function(){var e=ae.util.createBuffer();return e.putByte(1),e};v.createFinished=function(e){var t=ae.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===v.ConnectionEnd.client,n=e.session.sp,s=12,i=II,o=r?"client finished":"server finished";t=i(n.master_secret,o,t.getBytes(),s);var a=ae.util.createBuffer();return a.putByte(v.HandshakeType.finished),a.putInt24(t.length()),a.putBuffer(t),a};v.createHeartbeat=function(e,t,r){typeof r>"u"&&(r=t.length);var n=ae.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var s=n.length(),i=Math.max(16,s-r-3);return n.putBytes(ae.random.getBytes(i)),n};v.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===v.ContentType.handshake||t.type===v.ContentType.alert||t.type===v.ContentType.change_cipher_spec))){if(t.type===v.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=v.MaxFragment)n=[t];else{n=[];for(var s=t.fragment.bytes();s.length>v.MaxFragment;)n.push(v.createRecord(e,{type:t.type,data:ae.util.createBuffer(s.slice(0,v.MaxFragment))})),s=s.slice(v.MaxFragment);s.length>0&&n.push(v.createRecord(e,{type:t.type,data:ae.util.createBuffer(s)}))}for(var i=0;i<n.length&&!e.fail;++i){var o=n[i],a=e.state.current.write;a.update(e,o)&&e.records.push(o)}}};v.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var KL=function(e){switch(e){case!0:return!0;case ae.pki.certificateError.bad_certificate:return v.Alert.Description.bad_certificate;case ae.pki.certificateError.unsupported_certificate:return v.Alert.Description.unsupported_certificate;case ae.pki.certificateError.certificate_revoked:return v.Alert.Description.certificate_revoked;case ae.pki.certificateError.certificate_expired:return v.Alert.Description.certificate_expired;case ae.pki.certificateError.certificate_unknown:return v.Alert.Description.certificate_unknown;case ae.pki.certificateError.unknown_ca:return v.Alert.Description.unknown_ca;default:return v.Alert.Description.bad_certificate}},D5e=function(e){switch(e){case!0:return!0;case v.Alert.Description.bad_certificate:return ae.pki.certificateError.bad_certificate;case v.Alert.Description.unsupported_certificate:return ae.pki.certificateError.unsupported_certificate;case v.Alert.Description.certificate_revoked:return ae.pki.certificateError.certificate_revoked;case v.Alert.Description.certificate_expired:return ae.pki.certificateError.certificate_expired;case v.Alert.Description.certificate_unknown:return ae.pki.certificateError.certificate_unknown;case v.Alert.Description.unknown_ca:return ae.pki.certificateError.unknown_ca;default:return ae.pki.certificateError.bad_certificate}};v.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(i,o,a){var c=KL(i),l=e.verify(e,i,o,a);if(l!==!0){if(typeof l=="object"&&!ae.util.isArray(l)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:v.Alert.Level.fatal,description:v.Alert.Description.bad_certificate},l.message&&(d.message=l.message),l.alert&&(d.alert.description=l.alert),d}l!==i&&(l=D5e(l))}return l},ae.pki.verifyCertificateChain(e.caStore,t,r)}catch(i){var s=i;(typeof s!="object"||ae.util.isArray(s))&&(s={send:!0,alert:{level:v.Alert.Level.fatal,description:KL(i)}}),"send"in s||(s.send=!0),"alert"in s||(s.alert={level:v.Alert.Level.fatal,description:KL(s.error)}),e.error(e,s)}return!e.fail};v.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(s){var i=null,o=null;if(s?o=ae.util.bytesToHex(s):r.order.length>0&&(o=r.order[0]),o!==null&&o in r.cache){i=r.cache[o],delete r.cache[o];for(var a in r.order)if(r.order[a]===o){r.order.splice(a,1);break}}return i},r.setSession=function(s,i){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}var o=ae.util.bytesToHex(s);r.order.push(o),r.cache[o]=i}}return r};v.createConnection=function(e){var t=null;e.caStore?ae.util.isArray(e.caStore)?t=ae.pki.createCaStore(e.caStore):t=e.caStore:t=ae.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in v.CipherSuites)r.push(v.CipherSuites[n])}var s=e.server?v.ConnectionEnd.server:v.ConnectionEnd.client,i=e.sessionCache?v.createSessionCache(e.sessionCache):null,o={version:{major:v.Version.major,minor:v.Version.minor},entity:s,sessionId:e.sessionId,caStore:t,sessionCache:i,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(d,f,h,p){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:ae.util.createBuffer(),tlsData:ae.util.createBuffer(),data:ae.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(d,f){f.origin=f.origin||(d.entity===v.ConnectionEnd.client?"client":"server"),f.send&&(v.queue(d,v.createAlert(d,f.alert)),v.flush(d));var h=f.fatal!==!1;h&&(d.fail=!0),e.error(d,f),h&&d.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};o.reset=function(d){o.version={major:v.Version.major,minor:v.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=o.entity===v.ConnectionEnd.client?y5e:A5e,o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(d||typeof d>"u"),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=v.createConnectionState(o)},o.reset();var a=function(d,f){var h=f.type-v.ContentType.change_cipher_spec,p=GL[d.entity][d.expect];h in p?p[h](d,f):v.handleUnexpected(d,f)},c=function(d){var f=0,h=d.input,p=h.length();if(p<5)f=5-p;else{d.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:ae.util.createBuffer(),ready:!1};var m=d.record.version.major===d.version.major;m&&d.session&&d.session.version&&(m=d.record.version.minor===d.version.minor),m||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.protocol_version}})}return f},l=function(d){var f=0,h=d.input,p=h.length();if(p<d.record.length)f=d.record.length-p;else{d.record.fragment.putBytes(h.getBytes(d.record.length)),h.compact();var m=d.state.current.read;m.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.unexpected_message}})),d.record.ready=!0)}return f};return o.handshake=function(d){if(o.entity!==v.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&o.handshakes===0&&(o.fail=!1),o.handshaking=!0,d=d||"";var f=null;d.length>0&&(o.sessionCache&&(f=o.sessionCache.getSession(d)),f===null&&(d="")),d.length===0&&o.sessionCache&&(f=o.sessionCache.getSession(),f!==null&&(d=f.id)),o.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ae.md.md5.create(),sha1:ae.md.sha1.create()},f&&(o.version=f.version,o.session.sp=f.sp),o.session.sp.client_random=v.createRandom().getBytes(),o.open=!0,v.queue(o,v.createRecord(o,{type:v.ContentType.handshake,data:v.createClientHello(o)})),v.flush(o)}},o.process=function(d){var f=0;return d&&o.input.putBytes(d),o.fail||(o.record!==null&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),o.record===null&&(f=c(o)),!o.fail&&o.record!==null&&!o.record.ready&&(f=l(o)),!o.fail&&o.record!==null&&o.record.ready&&a(o,o.record)),f},o.prepare=function(d){return v.queue(o,v.createRecord(o,{type:v.ContentType.application_data,data:ae.util.createBuffer(d)})),v.flush(o)},o.prepareHeartbeatRequest=function(d,f){return d instanceof ae.util.ByteBuffer&&(d=d.bytes()),typeof f>"u"&&(f=d.length),o.expectedHeartbeatPayload=d,v.queue(o,v.createRecord(o,{type:v.ContentType.heartbeat,data:v.createHeartbeat(v.HeartbeatMessageType.heartbeat_request,d,f)})),v.flush(o)},o.close=function(d){if(!o.fail&&o.sessionCache&&o.session){var f={id:o.session.id,version:o.session.version,sp:o.session.sp};f.sp.keys=null,o.sessionCache.setSession(f.id,f)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,v.queue(o,v.createAlert(o,{level:v.Alert.Level.warning,description:v.Alert.Description.close_notify})),v.flush(o)),o.closed(o)),o.reset(d)},o};ese.exports=ae.tls=ae.tls||{};for(AI in v)typeof v[AI]!="function"&&(ae.tls[AI]=v[AI]);var AI;ae.tls.prf_tls1=II;ae.tls.hmac_sha1=p5e;ae.tls.createSessionCache=v.createSessionCache;ae.tls.createConnection=v.createConnection});var nse=S((xdt,rse)=>{var lu=gt();ru();WL();var wo=rse.exports=lu.tls;wo.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=wo.BulkCipherAlgorithm.aes,e.cipher_type=wo.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=wo.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:tse};wo.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=wo.BulkCipherAlgorithm.aes,e.cipher_type=wo.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=wo.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:tse};function tse(e,t,r){var n=t.entity===lu.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:lu.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:lu.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=F5e,e.write.cipherFunction=k5e,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=wo.hmac_sha1}function k5e(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var s;e.version.minor===wo.Versions.TLS_1_0.minor?s=t.cipherState.init?null:t.cipherState.iv:s=lu.random.getBytesSync(16),t.cipherState.init=!0;var i=t.cipherState.cipher;return i.start({iv:s}),e.version.minor>=wo.Versions.TLS_1_1.minor&&i.output.putBytes(s),i.update(e.fragment),i.finish(B5e)&&(e.fragment=i.output,e.length=e.fragment.length(),r=!0),r}function B5e(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function L5e(e,t,r){var n=!0;if(r){for(var s=t.length(),i=t.last(),o=s-1-i;o<s-1;++o)n=n&&t.at(o)==i;n&&t.truncate(i+1)}return n}function F5e(e,t){var r=!1,n;e.version.minor===wo.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var s=t.cipherState.cipher;s.start({iv:n}),s.update(e.fragment),r=s.finish(L5e);var i=t.macLength,o=lu.random.getBytesSync(i),a=s.output.length();a>=i?(e.fragment=s.output.getBytes(a-i),o=s.output.getBytes(i)):e.fragment=s.output.getBytes(),e.fragment=lu.util.createBuffer(e.fragment),e.length=e.fragment.length();var c=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=M5e(t.macKey,o,c)&&r,r}function M5e(e,t,r){var n=lu.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var YL=S((Idt,ase)=>{var Kr=gt();ja();Gt();var D0=ase.exports=Kr.sha512=Kr.sha512||{};Kr.md.sha512=Kr.md.algorithms.sha512=D0;var ise=Kr.sha384=Kr.sha512.sha384=Kr.sha512.sha384||{};ise.create=function(){return D0.create("SHA-384")};Kr.md.sha384=Kr.md.algorithms.sha384=ise;Kr.sha512.sha256=Kr.sha512.sha256||{create:function(){return D0.create("SHA-512/256")}};Kr.md["sha512/256"]=Kr.md.algorithms["sha512/256"]=Kr.sha512.sha256;Kr.sha512.sha224=Kr.sha512.sha224||{create:function(){return D0.create("SHA-512/224")}};Kr.md["sha512/224"]=Kr.md.algorithms["sha512/224"]=Kr.sha512.sha224;D0.create=function(e){if(ose||U5e(),typeof e>"u"&&(e="SHA-512"),!(e in uf))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=uf[e],r=null,n=Kr.util.createBuffer(),s=new Array(80),i=0;i<80;++i)s[i]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,l=0;l<c;++l)a.fullMessageLength.push(0);n=Kr.util.createBuffer(),r=new Array(t.length);for(var l=0;l<t.length;++l)r[l]=t[l].slice(0);return a},a.start(),a.update=function(c,l){l==="utf8"&&(c=Kr.util.encodeUtf8(c));var d=c.length;a.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var f=a.fullMessageLength.length-1;f>=0;--f)a.fullMessageLength[f]+=d[1],d[1]=d[0]+(a.fullMessageLength[f]/4294967296>>>0),a.fullMessageLength[f]=a.fullMessageLength[f]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(c),sse(r,s,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=Kr.util.createBuffer();c.putBytes(n.bytes());var l=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,d=l&a.blockLength-1;c.putBytes(JL.substr(0,a.blockLength-d));for(var f,h,p=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)f=a.fullMessageLength[m+1]*8,h=f/4294967296>>>0,p+=h,c.putInt32(p>>>0),p=f>>>0;c.putInt32(p);for(var E=new Array(r.length),m=0;m<r.length;++m)E[m]=r[m].slice(0);sse(E,s,c);var b=Kr.util.createBuffer(),A;e==="SHA-512"?A=E.length:e==="SHA-384"?A=E.length-2:A=E.length-4;for(var m=0;m<A;++m)b.putInt32(E[m][0]),(m!==A-1||e!=="SHA-512/224")&&b.putInt32(E[m][1]);return b},a};var JL=null,ose=!1,XL=null,uf=null;function U5e(){JL="\x80",JL+=Kr.util.fillString("\0",128),XL=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],uf={},uf["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],uf["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],uf["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],uf["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],ose=!0}function sse(e,t,r){for(var n,s,i,o,a,c,l,d,f,h,p,m,E,b,A,R,D,K,z,G,ye,he,xe,Me,Ue,Ge,zt,gr,Ot,Dt,Be,fi,hi,sr,Tr,qr=r.length();qr>=128;){for(Ot=0;Ot<16;++Ot)t[Ot][0]=r.getInt32()>>>0,t[Ot][1]=r.getInt32()>>>0;for(;Ot<80;++Ot)fi=t[Ot-2],Dt=fi[0],Be=fi[1],n=((Dt>>>19|Be<<13)^(Be>>>29|Dt<<3)^Dt>>>6)>>>0,s=((Dt<<13|Be>>>19)^(Be<<3|Dt>>>29)^(Dt<<26|Be>>>6))>>>0,sr=t[Ot-15],Dt=sr[0],Be=sr[1],i=((Dt>>>1|Be<<31)^(Dt>>>8|Be<<24)^Dt>>>7)>>>0,o=((Dt<<31|Be>>>1)^(Dt<<24|Be>>>8)^(Dt<<25|Be>>>7))>>>0,hi=t[Ot-7],Tr=t[Ot-16],Be=s+hi[1]+o+Tr[1],t[Ot][0]=n+hi[0]+i+Tr[0]+(Be/4294967296>>>0)>>>0,t[Ot][1]=Be>>>0;for(E=e[0][0],b=e[0][1],A=e[1][0],R=e[1][1],D=e[2][0],K=e[2][1],z=e[3][0],G=e[3][1],ye=e[4][0],he=e[4][1],xe=e[5][0],Me=e[5][1],Ue=e[6][0],Ge=e[6][1],zt=e[7][0],gr=e[7][1],Ot=0;Ot<80;++Ot)l=((ye>>>14|he<<18)^(ye>>>18|he<<14)^(he>>>9|ye<<23))>>>0,d=((ye<<18|he>>>14)^(ye<<14|he>>>18)^(he<<23|ye>>>9))>>>0,f=(Ue^ye&(xe^Ue))>>>0,h=(Ge^he&(Me^Ge))>>>0,a=((E>>>28|b<<4)^(b>>>2|E<<30)^(b>>>7|E<<25))>>>0,c=((E<<4|b>>>28)^(b<<30|E>>>2)^(b<<25|E>>>7))>>>0,p=(E&A|D&(E^A))>>>0,m=(b&R|K&(b^R))>>>0,Be=gr+d+h+XL[Ot][1]+t[Ot][1],n=zt+l+f+XL[Ot][0]+t[Ot][0]+(Be/4294967296>>>0)>>>0,s=Be>>>0,Be=c+m,i=a+p+(Be/4294967296>>>0)>>>0,o=Be>>>0,zt=Ue,gr=Ge,Ue=xe,Ge=Me,xe=ye,Me=he,Be=G+s,ye=z+n+(Be/4294967296>>>0)>>>0,he=Be>>>0,z=D,G=K,D=A,K=R,A=E,R=b,Be=s+o,E=n+i+(Be/4294967296>>>0)>>>0,b=Be>>>0;Be=e[0][1]+b,e[0][0]=e[0][0]+E+(Be/4294967296>>>0)>>>0,e[0][1]=Be>>>0,Be=e[1][1]+R,e[1][0]=e[1][0]+A+(Be/4294967296>>>0)>>>0,e[1][1]=Be>>>0,Be=e[2][1]+K,e[2][0]=e[2][0]+D+(Be/4294967296>>>0)>>>0,e[2][1]=Be>>>0,Be=e[3][1]+G,e[3][0]=e[3][0]+z+(Be/4294967296>>>0)>>>0,e[3][1]=Be>>>0,Be=e[4][1]+he,e[4][0]=e[4][0]+ye+(Be/4294967296>>>0)>>>0,e[4][1]=Be>>>0,Be=e[5][1]+Me,e[5][0]=e[5][0]+xe+(Be/4294967296>>>0)>>>0,e[5][1]=Be>>>0,Be=e[6][1]+Ge,e[6][0]=e[6][0]+Ue+(Be/4294967296>>>0)>>>0,e[6][1]=Be>>>0,Be=e[7][1]+gr,e[7][0]=e[7][0]+zt+(Be/4294967296>>>0)>>>0,e[7][1]=Be>>>0,qr-=128}}});var cse=S(QL=>{var q5e=gt();ta();var ds=q5e.asn1;QL.privateKeyValidator={name:"PrivateKeyInfo",tagClass:ds.Class.UNIVERSAL,type:ds.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ds.Class.UNIVERSAL,type:ds.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ds.Class.UNIVERSAL,type:ds.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ds.Class.UNIVERSAL,type:ds.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ds.Class.UNIVERSAL,type:ds.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};QL.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ds.Class.UNIVERSAL,type:ds.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ds.Class.UNIVERSAL,type:ds.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ds.Class.UNIVERSAL,type:ds.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:ds.Class.UNIVERSAL,type:ds.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var _se=S((Tdt,Cse)=>{var xs=gt();R0();bo();YL();Gt();var pse=cse(),V5e=pse.publicKeyValidator,H5e=pse.privateKeyValidator;typeof lse>"u"&&(lse=xs.jsbn.BigInteger);var lse,t3=xs.util.ByteBuffer,wi=typeof Buffer>"u"?Uint8Array:Buffer;xs.pki=xs.pki||{};Cse.exports=xs.pki.ed25519=xs.ed25519=xs.ed25519||{};var Pt=xs.ed25519;Pt.constants={};Pt.constants.PUBLIC_KEY_BYTE_LENGTH=32;Pt.constants.PRIVATE_KEY_BYTE_LENGTH=64;Pt.constants.SEED_BYTE_LENGTH=32;Pt.constants.SIGN_BYTE_LENGTH=64;Pt.constants.HASH_BYTE_LENGTH=64;Pt.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=xs.random.getBytesSync(Pt.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==Pt.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Pt.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Kc({message:t,encoding:"binary"});for(var r=new wi(Pt.constants.PUBLIC_KEY_BYTE_LENGTH),n=new wi(Pt.constants.PRIVATE_KEY_BYTE_LENGTH),s=0;s<32;++s)n[s]=t[s];return $5e(r,n),{publicKey:r,privateKey:n}};Pt.privateKeyFromAsn1=function(e){var t={},r=[],n=xs.asn1.validate(e,H5e,t,r);if(!n){var s=new Error("Invalid Key.");throw s.errors=r,s}var i=xs.asn1.derToOid(t.privateKeyOid),o=xs.oids.EdDSA25519;if(i!==o)throw new Error('Invalid OID "'+i+'"; OID must be "'+o+'".');var a=t.privateKey,c=Kc({message:xs.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:c}};Pt.publicKeyFromAsn1=function(e){var t={},r=[],n=xs.asn1.validate(e,V5e,t,r);if(!n){var s=new Error("Invalid Key.");throw s.errors=r,s}var i=xs.asn1.derToOid(t.publicKeyOid),o=xs.oids.EdDSA25519;if(i!==o)throw new Error('Invalid OID "'+i+'"; OID must be "'+o+'".');var a=t.ed25519PublicKey;if(a.length!==Pt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Kc({message:a,encoding:"binary"})};Pt.publicKeyFromPrivateKey=function(e){e=e||{};var t=Kc({message:e.privateKey,encoding:"binary"});if(t.length!==Pt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Pt.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new wi(Pt.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};Pt.sign=function(e){e=e||{};var t=Kc(e),r=Kc({message:e.privateKey,encoding:"binary"});if(r.length===Pt.constants.SEED_BYTE_LENGTH){var n=Pt.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Pt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Pt.constants.SEED_BYTE_LENGTH+" or "+Pt.constants.PRIVATE_KEY_BYTE_LENGTH);var s=new wi(Pt.constants.SIGN_BYTE_LENGTH+t.length);G5e(s,t,t.length,r);for(var i=new wi(Pt.constants.SIGN_BYTE_LENGTH),o=0;o<i.length;++o)i[o]=s[o];return i};Pt.verify=function(e){e=e||{};var t=Kc(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Kc({message:e.signature,encoding:"binary"});if(r.length!==Pt.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Pt.constants.SIGN_BYTE_LENGTH);var n=Kc({message:e.publicKey,encoding:"binary"});if(n.length!==Pt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Pt.constants.PUBLIC_KEY_BYTE_LENGTH);var s=new wi(Pt.constants.SIGN_BYTE_LENGTH+t.length),i=new wi(Pt.constants.SIGN_BYTE_LENGTH+t.length),o;for(o=0;o<Pt.constants.SIGN_BYTE_LENGTH;++o)s[o]=r[o];for(o=0;o<t.length;++o)s[o+Pt.constants.SIGN_BYTE_LENGTH]=t[o];return W5e(i,s,s.length,n)>=0};function Kc(e){var t=e.message;if(t instanceof Uint8Array||t instanceof wi)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,r);t=new t3(t,r)}else if(!(t instanceof t3))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new wi(t.length()),s=0;s<n.length;++s)n[s]=t.at(s);return n}var r3=Je(),wI=Je([1]),j5e=Je([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),K5e=Je([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),use=Je([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),dse=Je([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),ZL=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),z5e=Je([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function k0(e,t){var r=xs.md.sha512.create(),n=new t3(e);r.update(n.getBytes(t),"binary");var s=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(s,"binary");for(var i=new wi(Pt.constants.HASH_BYTE_LENGTH),o=0;o<64;++o)i[o]=s.charCodeAt(o);return i}function $5e(e,t){var r=[Je(),Je(),Je(),Je()],n,s=k0(t,32);for(s[0]&=248,s[31]&=127,s[31]|=64,o3(r,s),i3(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function G5e(e,t,r,n){var s,i,o=new Float64Array(64),a=[Je(),Je(),Je(),Je()],c=k0(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var l=r+64;for(s=0;s<r;++s)e[64+s]=t[s];for(s=0;s<32;++s)e[32+s]=c[32+s];var d=k0(e.subarray(32),r+32);for(n3(d),o3(a,d),i3(e,a),s=32;s<64;++s)e[s]=n[s];var f=k0(e,r+64);for(n3(f),s=32;s<64;++s)o[s]=0;for(s=0;s<32;++s)o[s]=d[s];for(s=0;s<32;++s)for(i=0;i<32;i++)o[s+i]+=f[s]*c[i];return mse(e.subarray(32),o),l}function W5e(e,t,r,n){var s,i,o=new wi(32),a=[Je(),Je(),Je(),Je()],c=[Je(),Je(),Je(),Je()];if(i=-1,r<64||J5e(c,n))return-1;for(s=0;s<r;++s)e[s]=t[s];for(s=0;s<32;++s)e[s+32]=n[s];var l=k0(e,r);if(n3(l),Ese(a,c,l),o3(c,t.subarray(32)),s3(a,c),i3(o,a),r-=64,gse(t,0,o,0)){for(s=0;s<r;++s)e[s]=0;return-1}for(s=0;s<r;++s)e[s]=t[s+64];return i=r,i}function mse(e,t){var r,n,s,i;for(n=63;n>=32;--n){for(r=0,s=n-32,i=n-12;s<i;++s)t[s]+=r-16*t[n]*ZL[s-(n-32)],r=t[s]+128>>8,t[s]-=r*256;t[s]+=r,t[n]=0}for(r=0,s=0;s<32;++s)t[s]+=r-(t[31]>>4)*ZL[s],r=t[s]>>8,t[s]&=255;for(s=0;s<32;++s)t[s]-=r*ZL[s];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function n3(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;mse(e,t)}function s3(e,t){var r=Je(),n=Je(),s=Je(),i=Je(),o=Je(),a=Je(),c=Je(),l=Je(),d=Je();im(r,e[1],e[0]),im(d,t[1],t[0]),wr(r,r,d),sm(n,e[0],e[1]),sm(d,t[0],t[1]),wr(n,n,d),wr(s,e[3],t[3]),wr(s,s,K5e),wr(i,e[2],t[2]),sm(i,i,i),im(o,n,r),im(a,i,s),sm(c,i,s),sm(l,n,r),wr(e[0],o,a),wr(e[1],l,c),wr(e[2],c,a),wr(e[3],o,l)}function fse(e,t,r){for(var n=0;n<4;++n)Sse(e[n],t[n],r)}function i3(e,t){var r=Je(),n=Je(),s=Je();Z5e(s,t[2]),wr(r,t[0],s),wr(n,t[1],s),TI(e,n),e[31]^=yse(r)<<7}function TI(e,t){var r,n,s,i=Je(),o=Je();for(r=0;r<16;++r)o[r]=t[r];for(e3(o),e3(o),e3(o),n=0;n<2;++n){for(i[0]=o[0]-65517,r=1;r<15;++r)i[r]=o[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=o[15]-32767-(i[14]>>16&1),s=i[15]>>16&1,i[14]&=65535,Sse(o,i,1-s)}for(r=0;r<16;r++)e[2*r]=o[r]&255,e[2*r+1]=o[r]>>8}function J5e(e,t){var r=Je(),n=Je(),s=Je(),i=Je(),o=Je(),a=Je(),c=Je();return uu(e[2],wI),X5e(e[1],t),df(s,e[1]),wr(i,s,j5e),im(s,s,e[2]),sm(i,e[2],i),df(o,i),df(a,o),wr(c,a,o),wr(r,c,s),wr(r,r,i),Y5e(r,r),wr(r,r,s),wr(r,r,i),wr(r,r,i),wr(e[0],r,i),df(n,e[0]),wr(n,n,i),hse(n,s)&&wr(e[0],e[0],z5e),df(n,e[0]),wr(n,n,i),hse(n,s)?-1:(yse(e[0])===t[31]>>7&&im(e[0],r3,e[0]),wr(e[3],e[0],e[1]),0)}function X5e(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function Y5e(e,t){var r=Je(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)df(r,r),n!==1&&wr(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function hse(e,t){var r=new wi(32),n=new wi(32);return TI(r,e),TI(n,t),gse(r,0,n,0)}function gse(e,t,r,n){return Q5e(e,t,r,n,32)}function Q5e(e,t,r,n,s){var i,o=0;for(i=0;i<s;++i)o|=e[t+i]^r[n+i];return(1&o-1>>>8)-1}function yse(e){var t=new wi(32);return TI(t,e),t[0]&1}function Ese(e,t,r){var n,s;for(uu(e[0],r3),uu(e[1],wI),uu(e[2],wI),uu(e[3],r3),s=255;s>=0;--s)n=r[s/8|0]>>(s&7)&1,fse(e,t,n),s3(t,e),s3(e,e),fse(e,t,n)}function o3(e,t){var r=[Je(),Je(),Je(),Je()];uu(r[0],use),uu(r[1],dse),uu(r[2],wI),wr(r[3],use,dse),Ese(e,r,t)}function uu(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function Z5e(e,t){var r=Je(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)df(r,r),n!==2&&n!==4&&wr(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function e3(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function Sse(e,t,r){for(var n,s=~(r-1),i=0;i<16;++i)n=s&(e[i]^t[i]),e[i]^=n,t[i]^=n}function Je(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function sm(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function im(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function df(e,t){wr(e,t,t)}function wr(e,t,r){var n,s,i=0,o=0,a=0,c=0,l=0,d=0,f=0,h=0,p=0,m=0,E=0,b=0,A=0,R=0,D=0,K=0,z=0,G=0,ye=0,he=0,xe=0,Me=0,Ue=0,Ge=0,zt=0,gr=0,Ot=0,Dt=0,Be=0,fi=0,hi=0,sr=r[0],Tr=r[1],qr=r[2],It=r[3],ir=r[4],fr=r[5],An=r[6],Kn=r[7],zn=r[8],$n=r[9],Gn=r[10],Wn=r[11],zr=r[12],xn=r[13],Jn=r[14],On=r[15];n=t[0],i+=n*sr,o+=n*Tr,a+=n*qr,c+=n*It,l+=n*ir,d+=n*fr,f+=n*An,h+=n*Kn,p+=n*zn,m+=n*$n,E+=n*Gn,b+=n*Wn,A+=n*zr,R+=n*xn,D+=n*Jn,K+=n*On,n=t[1],o+=n*sr,a+=n*Tr,c+=n*qr,l+=n*It,d+=n*ir,f+=n*fr,h+=n*An,p+=n*Kn,m+=n*zn,E+=n*$n,b+=n*Gn,A+=n*Wn,R+=n*zr,D+=n*xn,K+=n*Jn,z+=n*On,n=t[2],a+=n*sr,c+=n*Tr,l+=n*qr,d+=n*It,f+=n*ir,h+=n*fr,p+=n*An,m+=n*Kn,E+=n*zn,b+=n*$n,A+=n*Gn,R+=n*Wn,D+=n*zr,K+=n*xn,z+=n*Jn,G+=n*On,n=t[3],c+=n*sr,l+=n*Tr,d+=n*qr,f+=n*It,h+=n*ir,p+=n*fr,m+=n*An,E+=n*Kn,b+=n*zn,A+=n*$n,R+=n*Gn,D+=n*Wn,K+=n*zr,z+=n*xn,G+=n*Jn,ye+=n*On,n=t[4],l+=n*sr,d+=n*Tr,f+=n*qr,h+=n*It,p+=n*ir,m+=n*fr,E+=n*An,b+=n*Kn,A+=n*zn,R+=n*$n,D+=n*Gn,K+=n*Wn,z+=n*zr,G+=n*xn,ye+=n*Jn,he+=n*On,n=t[5],d+=n*sr,f+=n*Tr,h+=n*qr,p+=n*It,m+=n*ir,E+=n*fr,b+=n*An,A+=n*Kn,R+=n*zn,D+=n*$n,K+=n*Gn,z+=n*Wn,G+=n*zr,ye+=n*xn,he+=n*Jn,xe+=n*On,n=t[6],f+=n*sr,h+=n*Tr,p+=n*qr,m+=n*It,E+=n*ir,b+=n*fr,A+=n*An,R+=n*Kn,D+=n*zn,K+=n*$n,z+=n*Gn,G+=n*Wn,ye+=n*zr,he+=n*xn,xe+=n*Jn,Me+=n*On,n=t[7],h+=n*sr,p+=n*Tr,m+=n*qr,E+=n*It,b+=n*ir,A+=n*fr,R+=n*An,D+=n*Kn,K+=n*zn,z+=n*$n,G+=n*Gn,ye+=n*Wn,he+=n*zr,xe+=n*xn,Me+=n*Jn,Ue+=n*On,n=t[8],p+=n*sr,m+=n*Tr,E+=n*qr,b+=n*It,A+=n*ir,R+=n*fr,D+=n*An,K+=n*Kn,z+=n*zn,G+=n*$n,ye+=n*Gn,he+=n*Wn,xe+=n*zr,Me+=n*xn,Ue+=n*Jn,Ge+=n*On,n=t[9],m+=n*sr,E+=n*Tr,b+=n*qr,A+=n*It,R+=n*ir,D+=n*fr,K+=n*An,z+=n*Kn,G+=n*zn,ye+=n*$n,he+=n*Gn,xe+=n*Wn,Me+=n*zr,Ue+=n*xn,Ge+=n*Jn,zt+=n*On,n=t[10],E+=n*sr,b+=n*Tr,A+=n*qr,R+=n*It,D+=n*ir,K+=n*fr,z+=n*An,G+=n*Kn,ye+=n*zn,he+=n*$n,xe+=n*Gn,Me+=n*Wn,Ue+=n*zr,Ge+=n*xn,zt+=n*Jn,gr+=n*On,n=t[11],b+=n*sr,A+=n*Tr,R+=n*qr,D+=n*It,K+=n*ir,z+=n*fr,G+=n*An,ye+=n*Kn,he+=n*zn,xe+=n*$n,Me+=n*Gn,Ue+=n*Wn,Ge+=n*zr,zt+=n*xn,gr+=n*Jn,Ot+=n*On,n=t[12],A+=n*sr,R+=n*Tr,D+=n*qr,K+=n*It,z+=n*ir,G+=n*fr,ye+=n*An,he+=n*Kn,xe+=n*zn,Me+=n*$n,Ue+=n*Gn,Ge+=n*Wn,zt+=n*zr,gr+=n*xn,Ot+=n*Jn,Dt+=n*On,n=t[13],R+=n*sr,D+=n*Tr,K+=n*qr,z+=n*It,G+=n*ir,ye+=n*fr,he+=n*An,xe+=n*Kn,Me+=n*zn,Ue+=n*$n,Ge+=n*Gn,zt+=n*Wn,gr+=n*zr,Ot+=n*xn,Dt+=n*Jn,Be+=n*On,n=t[14],D+=n*sr,K+=n*Tr,z+=n*qr,G+=n*It,ye+=n*ir,he+=n*fr,xe+=n*An,Me+=n*Kn,Ue+=n*zn,Ge+=n*$n,zt+=n*Gn,gr+=n*Wn,Ot+=n*zr,Dt+=n*xn,Be+=n*Jn,fi+=n*On,n=t[15],K+=n*sr,z+=n*Tr,G+=n*qr,ye+=n*It,he+=n*ir,xe+=n*fr,Me+=n*An,Ue+=n*Kn,Ge+=n*zn,zt+=n*$n,gr+=n*Gn,Ot+=n*Wn,Dt+=n*zr,Be+=n*xn,fi+=n*Jn,hi+=n*On,i+=38*z,o+=38*G,a+=38*ye,c+=38*he,l+=38*xe,d+=38*Me,f+=38*Ue,h+=38*Ge,p+=38*zt,m+=38*gr,E+=38*Ot,b+=38*Dt,A+=38*Be,R+=38*fi,D+=38*hi,s=1,n=i+s+65535,s=Math.floor(n/65536),i=n-s*65536,n=o+s+65535,s=Math.floor(n/65536),o=n-s*65536,n=a+s+65535,s=Math.floor(n/65536),a=n-s*65536,n=c+s+65535,s=Math.floor(n/65536),c=n-s*65536,n=l+s+65535,s=Math.floor(n/65536),l=n-s*65536,n=d+s+65535,s=Math.floor(n/65536),d=n-s*65536,n=f+s+65535,s=Math.floor(n/65536),f=n-s*65536,n=h+s+65535,s=Math.floor(n/65536),h=n-s*65536,n=p+s+65535,s=Math.floor(n/65536),p=n-s*65536,n=m+s+65535,s=Math.floor(n/65536),m=n-s*65536,n=E+s+65535,s=Math.floor(n/65536),E=n-s*65536,n=b+s+65535,s=Math.floor(n/65536),b=n-s*65536,n=A+s+65535,s=Math.floor(n/65536),A=n-s*65536,n=R+s+65535,s=Math.floor(n/65536),R=n-s*65536,n=D+s+65535,s=Math.floor(n/65536),D=n-s*65536,n=K+s+65535,s=Math.floor(n/65536),K=n-s*65536,i+=s-1+37*(s-1),s=1,n=i+s+65535,s=Math.floor(n/65536),i=n-s*65536,n=o+s+65535,s=Math.floor(n/65536),o=n-s*65536,n=a+s+65535,s=Math.floor(n/65536),a=n-s*65536,n=c+s+65535,s=Math.floor(n/65536),c=n-s*65536,n=l+s+65535,s=Math.floor(n/65536),l=n-s*65536,n=d+s+65535,s=Math.floor(n/65536),d=n-s*65536,n=f+s+65535,s=Math.floor(n/65536),f=n-s*65536,n=h+s+65535,s=Math.floor(n/65536),h=n-s*65536,n=p+s+65535,s=Math.floor(n/65536),p=n-s*65536,n=m+s+65535,s=Math.floor(n/65536),m=n-s*65536,n=E+s+65535,s=Math.floor(n/65536),E=n-s*65536,n=b+s+65535,s=Math.floor(n/65536),b=n-s*65536,n=A+s+65535,s=Math.floor(n/65536),A=n-s*65536,n=R+s+65535,s=Math.floor(n/65536),R=n-s*65536,n=D+s+65535,s=Math.floor(n/65536),D=n-s*65536,n=K+s+65535,s=Math.floor(n/65536),K=n-s*65536,i+=s-1+37*(s-1),e[0]=i,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=d,e[6]=f,e[7]=h,e[8]=p,e[9]=m,e[10]=E,e[11]=b,e[12]=A,e[13]=R,e[14]=D,e[15]=K}});var xse=S((Rdt,Ase)=>{var zi=gt();Gt();bo();R0();Ase.exports=zi.kem=zi.kem||{};var bse=zi.jsbn.BigInteger;zi.kem.rsa={};zi.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||zi.random,n={};return n.encrypt=function(s,i){var o=Math.ceil(s.n.bitLength()/8),a;do a=new bse(zi.util.bytesToHex(r.getBytesSync(o)),16).mod(s.n);while(a.compareTo(bse.ONE)<=0);a=zi.util.hexToBytes(a.toString(16));var c=o-a.length;c>0&&(a=zi.util.fillString("\0",c)+a);var l=s.encrypt(a,"NONE"),d=e.generate(a,i);return{encapsulation:l,key:d}},n.decrypt=function(s,i,o){var a=s.decrypt(i,"NONE");return e.generate(a,o)},n};zi.kem.kdf1=function(e,t){vse(this,e,0,t||e.digestLength)};zi.kem.kdf2=function(e,t){vse(this,e,1,t||e.digestLength)};function vse(e,t,r,n){e.generate=function(s,i){for(var o=new zi.util.ByteBuffer,a=Math.ceil(i/n)+r,c=new zi.util.ByteBuffer,l=r;l<a;++l){c.putInt32(l),t.start(),t.update(s+c.getBytes());var d=t.digest();o.putBytes(d.getBytes(n))}return o.truncate(o.length()-i),o.getBytes()}}});var Rse=S((Ndt,Tse)=>{var Bt=gt();Gt();Tse.exports=Bt.log=Bt.log||{};Bt.log.levels=["none","error","warning","info","debug","verbose","max"];var RI={},l3=[],L0=null;Bt.log.LEVEL_LOCKED=2;Bt.log.NO_LEVEL_CHECK=4;Bt.log.INTERPOLATE=8;for(Ya=0;Ya<Bt.log.levels.length;++Ya)a3=Bt.log.levels[Ya],RI[a3]={index:Ya,name:a3.toUpperCase()};var a3,Ya;Bt.log.logMessage=function(e){for(var t=RI[e.level].index,r=0;r<l3.length;++r){var n=l3[r];if(n.flags&Bt.log.NO_LEVEL_CHECK)n.f(e);else{var s=RI[n.level].index;t<=s&&n.f(n,e)}}};Bt.log.prepareStandard=function(e){"standard"in e||(e.standard=RI[e.level].name+" ["+e.category+"] "+e.message)};Bt.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=Bt.util.format.apply(this,t)}};Bt.log.prepareStandardFull=function(e){"standardFull"in e||(Bt.log.prepareStandard(e),e.standardFull=e.standard)};for(c3=["error","warning","info","debug","verbose"],Ya=0;Ya<c3.length;++Ya)(function(t){Bt.log[t]=function(r,n){var s=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:t,category:r,message:n,arguments:s};Bt.log.logMessage(i)}})(c3[Ya]);var c3,Ya;Bt.log.makeLogger=function(e){var t={flags:0,f:e};return Bt.log.setLevel(t,"none"),t};Bt.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&Bt.log.LEVEL_LOCKED))for(var n=0;n<Bt.log.levels.length;++n){var s=Bt.log.levels[n];if(t==s){e.level=t,r=!0;break}}return r};Bt.log.lock=function(e,t){typeof t>"u"||t?e.flags|=Bt.log.LEVEL_LOCKED:e.flags&=~Bt.log.LEVEL_LOCKED};Bt.log.addLogger=function(e){l3.push(e)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Ise={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},F0=function(e,t){Bt.log.prepareStandard(t);var r=Ise[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)},om=Bt.log.makeLogger(F0)):(F0=function(t,r){Bt.log.prepareStandardFull(r),console.log(r.standardFull)},om=Bt.log.makeLogger(F0)),Bt.log.setLevel(om,"debug"),Bt.log.addLogger(om),L0=om):console={log:function(){}};var om,Ise,F0;L0!==null&&typeof window<"u"&&window.location&&(B0=new URL(window.location.href).searchParams,B0.has("console.level")&&Bt.log.setLevel(L0,B0.get("console.level").slice(-1)[0]),B0.has("console.lock")&&(wse=B0.get("console.lock").slice(-1)[0],wse=="true"&&Bt.log.lock(L0)));var B0,wse;Bt.log.consoleLogger=L0});var Pse=S((Pdt,Nse)=>{Nse.exports=ja();cI();Zp();bL();YL()});var kse=S((Odt,Dse)=>{var Se=gt();ru();ta();w0();nu();nf();LL();bo();Gt();bI();var k=Se.asn1,li=Dse.exports=Se.pkcs7=Se.pkcs7||{};li.messageFromPem=function(e){var t=Se.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=k.fromDer(t.body);return li.messageFromAsn1(n)};li.messageToPem=function(e,t){var r={type:"PKCS7",body:k.toDer(e.toAsn1()).getBytes()};return Se.pem.encode(r,{maxline:t})};li.messageFromAsn1=function(e){var t={},r=[];if(!k.validate(e,li.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var s=k.derToOid(t.contentType),i;switch(s){case Se.pki.oids.envelopedData:i=li.createEnvelopedData();break;case Se.pki.oids.encryptedData:i=li.createEncryptedData();break;case Se.pki.oids.signedData:i=li.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return i.fromAsn1(t.content.value[0]),i};li.createSignedData=function(){var e=null;return e={type:Se.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(d3(e,n,li.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var s=e.rawCapture.certificates.value,i=0;i<s.length;++i)e.certificates.push(Se.pki.certificateFromAsn1(s[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],s=0;s<e.certificates.length;++s)n.push(Se.pki.certificateToAsn1(e.certificates[s]));var i=[],o=k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(e.version).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&o.value[0].value.push(k.create(k.Class.CONTEXT_SPECIFIC,0,!0,n)),i.length>0&&o.value[0].value.push(k.create(k.Class.CONTEXT_SPECIFIC,1,!0,i)),o.value[0].value.push(k.create(k.Class.UNIVERSAL,k.Type.SET,!0,e.signerInfos)),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.type).getBytes()),o])},addSigner:function(n){var s=n.issuer,i=n.serialNumber;if(n.certificate){var o=n.certificate;typeof o=="string"&&(o=Se.pki.certificateFromPem(o)),s=o.issuer.attributes,i=o.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Se.pki.privateKeyFromPem(a));var c=n.digestAlgorithm||Se.pki.oids.sha1;switch(c){case Se.pki.oids.sha1:case Se.pki.oids.sha256:case Se.pki.oids.sha384:case Se.pki.oids.sha512:case Se.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var l=n.authenticatedAttributes||[];if(l.length>0){for(var d=!1,f=!1,h=0;h<l.length;++h){var p=l[h];if(!d&&p.type===Se.pki.oids.contentType){if(d=!0,f)break;continue}if(!f&&p.type===Se.pki.oids.messageDigest){if(f=!0,d)break;continue}}if(!d||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:a,version:1,issuer:s,serialNumber:i,digestAlgorithm:c,signatureAlgorithm:Se.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(Se.pki.oids.data).getBytes())]),"content"in e)){var s;e.content instanceof Se.util.ByteBuffer?s=e.content.bytes():typeof e.content=="string"&&(s=Se.util.encodeUtf8(e.content)),n.detached?e.detachedContent=k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,s):e.contentInfo.value.push(k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,s)]))}if(e.signers.length!==0){var i=t();r(i)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Se.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},s=0;s<e.signers.length;++s){var i=e.signers[s],o=i.digestAlgorithm;o in n||(n[o]=Se.md[Se.pki.oids[o]].create()),i.authenticatedAttributes.length===0?i.md=n[o]:i.md=Se.md[Se.pki.oids[o]].create()}e.digestAlgorithmIdentifiers=[];for(var o in n)e.digestAlgorithmIdentifiers.push(k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(o).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")]));return n}function r(n){var s;if(e.detachedContent?s=e.detachedContent:(s=e.contentInfo.value[1],s=s.value[0]),!s)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=k.derToOid(e.contentInfo.value[0].value),o=k.toDer(s);o.getByte(),k.getBerValueLength(o),o=o.getBytes();for(var a in n)n[a].start().update(o);for(var c=new Date,l=0;l<e.signers.length;++l){var d=e.signers[l];if(d.authenticatedAttributes.length===0){if(i!==Se.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=k.create(k.Class.UNIVERSAL,k.Type.SET,!0,[]),h=0;h<d.authenticatedAttributes.length;++h){var p=d.authenticatedAttributes[h];p.type===Se.pki.oids.messageDigest?p.value=n[d.digestAlgorithm].digest():p.type===Se.pki.oids.signingTime&&(p.value||(p.value=c)),f.value.push(u3(p)),d.authenticatedAttributesAsn1.value.push(u3(p))}o=k.toDer(f).getBytes(),d.md.start().update(o)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=i8e(e.signers)}};li.createEncryptedData=function(){var e=null;return e={type:Se.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Se.pki.oids["aes256-CBC"]},fromAsn1:function(t){d3(e,t,li.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),Ose(e)}},e};li.createEnvelopedData=function(){var e=null;return e={type:Se.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Se.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=d3(e,t,li.asn1.envelopedDataValidator);e.recipients=r8e(r.recipientInfos.value)},toAsn1:function(){return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.type).getBytes()),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(e.version).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SET,!0,n8e(e.recipients)),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,o8e(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var s=e.recipients[n],i=s.issuer;if(s.serialNumber===t.serialNumber&&i.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(i[a].type!==r[a].type||i[a].value!==r[a].value){o=!1;break}if(o)return s}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case Se.pki.oids.rsaEncryption:case Se.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=Se.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}Ose(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Se.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,s,i;switch(r){case Se.pki.oids["aes128-CBC"]:n=16,s=16,i=Se.aes.createEncryptionCipher;break;case Se.pki.oids["aes192-CBC"]:n=24,s=16,i=Se.aes.createEncryptionCipher;break;case Se.pki.oids["aes256-CBC"]:n=32,s=16,i=Se.aes.createEncryptionCipher;break;case Se.pki.oids["des-EDE3-CBC"]:n=24,s=8,i=Se.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=Se.util.createBuffer(Se.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=Se.util.createBuffer(Se.random.getBytes(s));var o=i(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var a=0;a<e.recipients.length;++a){var c=e.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Se.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e};function e8e(e){var t={},r=[];if(!k.validate(e,li.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:Se.pki.RDNAttributesAsArray(t.issuer),serialNumber:Se.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:k.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function t8e(e){return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(e.version).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[Se.pki.distinguishedNameToAsn1({attributes:e.issuer}),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Se.util.hexToBytes(e.serialNumber))]),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.encryptedContent.algorithm).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")]),k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function r8e(e){for(var t=[],r=0;r<e.length;++r)t.push(e8e(e[r]));return t}function n8e(e){for(var t=[],r=0;r<e.length;++r)t.push(t8e(e[r]));return t}function s8e(e){var t=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(e.version).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[Se.pki.distinguishedNameToAsn1({attributes:e.issuer}),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Se.util.hexToBytes(e.serialNumber))]),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.digestAlgorithm).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.signatureAlgorithm).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")])),t.value.push(k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=k.create(k.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var s=e.unauthenticatedAttributes[n];r.values.push(u3(s))}t.value.push(r)}return t}function i8e(e){for(var t=[],r=0;r<e.length;++r)t.push(s8e(e[r]));return t}function u3(e){var t;if(e.type===Se.pki.oids.contentType)t=k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.value).getBytes());else if(e.type===Se.pki.oids.messageDigest)t=k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Se.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),s=e.value;if(typeof s=="string"){var i=Date.parse(s);isNaN(i)?s.length===13?s=k.utcTimeToDate(s):s=k.generalizedTimeToDate(s):s=new Date(i)}s>=r&&s<n?t=k.create(k.Class.UNIVERSAL,k.Type.UTCTIME,!1,k.dateToUtcTime(s)):t=k.create(k.Class.UNIVERSAL,k.Type.GENERALIZEDTIME,!1,k.dateToGeneralizedTime(s))}return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.type).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SET,!0,[t])])}function o8e(e){return[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(Se.pki.oids.data).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.algorithm).getBytes()),e.parameter?k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,e.content.getBytes())])]}function d3(e,t,r){var n={},s=[];if(!k.validate(t,r,n,s)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw i.errors=i,i}var o=k.derToOid(n.contentType);if(o!==Se.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(Se.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==k.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[c].value}else a=n.encryptedContent;e.encryptedContent={algorithm:k.derToOid(n.encAlgorithm),parameter:Se.util.createBuffer(n.encParameter.value),content:Se.util.createBuffer(a)}}if(n.content){var a="";if(Se.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==k.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[c].value}else a=n.content;e.content=Se.util.createBuffer(a)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function Ose(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Se.pki.oids["aes128-CBC"]:case Se.pki.oids["aes192-CBC"]:case Se.pki.oids["aes256-CBC"]:t=Se.aes.createDecryptionCipher(e.encryptedContent.key);break;case Se.pki.oids.desCBC:case Se.pki.oids["des-EDE3-CBC"]:t=Se.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var Lse=S((Ddt,Bse)=>{var Nn=gt();ru();Jp();cI();Zp();Gt();var PI=Bse.exports=Nn.ssh=Nn.ssh||{};PI.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",s=t===""?"none":"aes256-cbc",i="PuTTY-User-Key-File-2: "+n+`\r
`;i+="Encryption: "+s+`\r
`,i+="Comment: "+r+`\r
`;var o=Nn.util.createBuffer();am(o,n),Qa(o,e.e),Qa(o,e.n);var a=Nn.util.encode64(o.bytes(),64),c=Math.floor(a.length/66)+1;i+="Public-Lines: "+c+`\r
`,i+=a;var l=Nn.util.createBuffer();Qa(l,e.d),Qa(l,e.p),Qa(l,e.q),Qa(l,e.qInv);var d;if(!t)d=Nn.util.encode64(l.bytes(),64);else{var f=l.length()+16-1;f-=f%16;var h=NI(l.bytes());h.truncate(h.length()-f+l.length()),l.putBuffer(h);var p=Nn.util.createBuffer();p.putBuffer(NI("\0\0\0\0",t)),p.putBuffer(NI("\0\0\0",t));var m=Nn.aes.createEncryptionCipher(p.truncate(8),"CBC");m.start(Nn.util.createBuffer().fillWithByte(0,16)),m.update(l.copy()),m.finish();var E=m.output;E.truncate(16),d=Nn.util.encode64(E.bytes(),64)}c=Math.floor(d.length/66)+1,i+=`\r
Private-Lines: `+c+`\r
`,i+=d;var b=NI("putty-private-key-file-mac-key",t),A=Nn.util.createBuffer();am(A,n),am(A,s),am(A,r),A.putInt32(o.length()),A.putBuffer(o),A.putInt32(l.length()),A.putBuffer(l);var R=Nn.hmac.create();return R.start("sha1",b),R.update(A.bytes()),i+=`\r
Private-MAC: `+R.digest().toHex()+`\r
`,i};PI.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=Nn.util.createBuffer();return am(n,r),Qa(n,e.e),Qa(n,e.n),r+" "+Nn.util.encode64(n.bytes())+" "+t};PI.privateKeyToOpenSSH=function(e,t){return t?Nn.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Nn.pki.privateKeyToPem(e)};PI.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||Nn.md.md5.create(),n="ssh-rsa",s=Nn.util.createBuffer();am(s,n),Qa(s,e.e),Qa(s,e.n),r.start(),r.update(s.getBytes());var i=r.digest();if(t.encoding==="hex"){var o=i.toHex();return t.delimiter?o.match(/.{2}/g).join(t.delimiter):o}else{if(t.encoding==="binary")return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return i};function Qa(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=Nn.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function am(e,t){e.putInt32(t.length),e.putString(t)}function NI(){for(var e=Nn.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var Mse=S((kdt,Fse)=>{Fse.exports=gt();ru();nse();ta();tI();w0();_se();Jp();xse();Rse();Pse();FL();fI();nf();PL();qL();kse();HL();DL();vL();SI();bo();IL();Lse();WL();Gt()});var cm=S(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.getApplicationDefault=Ti.isApplicationDefault=Ti.ImpersonatedServiceAccountCredential=Ti.RefreshTokenCredential=Ti.ComputeEngineCredential=Ti.ServiceAccountCredential=void 0;var BI=require("fs"),a8e=require("os"),Hse=require("path"),Lt=as(),ff=d0(),To=Vn(),c8e="https://accounts.google.com/o/oauth2/token",l8e="accounts.google.com",u8e="/o/oauth2/token",d8e="metadata.google.internal",f8e="/computeMetadata/v1/instance/service-accounts/default/token",h8e="/computeMetadata/v1/instance/service-accounts/default/identity",p8e="/computeMetadata/v1/project/project-id",m8e="/computeMetadata/v1/instance/service-accounts/default/email",Use=(()=>{let e=a8e.platform();return e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win"?process.env.APPDATA:process.env.HOME&&Hse.resolve(process.env.HOME,".config")})(),g8e="gcloud/application_default_credentials.json",qse=Use&&Hse.resolve(Use,g8e),jse="www.googleapis.com",Kse="/oauth2/v4/token",y8e=3600,E8e="RS256",M0=class{constructor(t,r,n=!1){this.httpAgent=r,this.implicit=n;let s=typeof t=="string"?OI.fromPath(t):new OI(t);this.projectId=s.projectId,this.privateKey=s.privateKey,this.clientEmail=s.clientEmail,this.httpClient=new ff.HttpClient}getAccessToken(){let r="grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion="+this.createAuthJwt_(),n={method:"POST",url:`https://${l8e}${u8e}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:r,httpAgent:this.httpAgent};return LI(this.httpClient,n)}createAuthJwt_(){let t={scope:["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/firebase.database","https://www.googleapis.com/auth/firebase.messaging","https://www.googleapis.com/auth/identitytoolkit","https://www.googleapis.com/auth/userinfo.email"].join(" ")};return cL().sign(t,this.privateKey,{audience:c8e,expiresIn:y8e,issuer:this.clientEmail,algorithm:E8e})}};Ti.ServiceAccountCredential=M0;var OI=class e{static fromPath(t){try{return new e(JSON.parse(BI.readFileSync(t,"utf8")))}catch(r){throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse service account json file: "+r)}}constructor(t){if(!To.isNonNullObject(t))throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Service account must be an object.");na(this,t,"projectId","project_id"),na(this,t,"privateKey","private_key"),na(this,t,"clientEmail","client_email");let r;if(To.isNonEmptyString(this.projectId)?To.isNonEmptyString(this.privateKey)?To.isNonEmptyString(this.clientEmail)||(r='Service account object must contain a string "client_email" property.'):r='Service account object must contain a string "private_key" property.':r='Service account object must contain a string "project_id" property.',typeof r<"u")throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,r);let n=Mse();try{n.pki.privateKeyFromPem(this.privateKey)}catch(s){throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse private key: "+s)}}},U0=class{constructor(t){this.httpClient=new ff.HttpClient,this.httpAgent=t}getAccessToken(){let t=this.buildRequest(f8e);return LI(this.httpClient,t)}getIDToken(t){let r=this.buildRequest(`${h8e}?audience=${t}`);return _8e(this.httpClient,r)}getProjectId(){if(this.projectId)return Promise.resolve(this.projectId);let t=this.buildRequest(p8e);return this.httpClient.send(t).then(r=>(this.projectId=r.text,this.projectId)).catch(r=>{let n=r instanceof ff.RequestResponseError?f3(r.response):r.message;throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,`Failed to determine project ID: ${n}`)})}getServiceAccountEmail(){if(this.accountId)return Promise.resolve(this.accountId);let t=this.buildRequest(m8e);return this.httpClient.send(t).then(r=>(this.accountId=r.text,this.accountId)).catch(r=>{let n=r instanceof ff.RequestResponseError?f3(r.response):r.message;throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,`Failed to determine service account email: ${n}`)})}buildRequest(t){return{method:"GET",url:`http://${d8e}${t}`,headers:{"Metadata-Flavor":"Google"},httpAgent:this.httpAgent}}};Ti.ComputeEngineCredential=U0;var q0=class{constructor(t,r,n=!1){this.httpAgent=r,this.implicit=n,this.refreshToken=typeof t=="string"?DI.fromPath(t):new DI(t),this.httpClient=new ff.HttpClient}getAccessToken(){let t="client_id="+this.refreshToken.clientId+"&client_secret="+this.refreshToken.clientSecret+"&refresh_token="+this.refreshToken.refreshToken+"&grant_type=refresh_token",r={method:"POST",url:`https://${jse}${Kse}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,httpAgent:this.httpAgent};return LI(this.httpClient,r)}};Ti.RefreshTokenCredential=q0;var DI=class e{static fromPath(t){try{return new e(JSON.parse(BI.readFileSync(t,"utf8")))}catch(r){throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse refresh token file: "+r)}}constructor(t){na(this,t,"clientId","client_id"),na(this,t,"clientSecret","client_secret"),na(this,t,"refreshToken","refresh_token"),na(this,t,"type","type");let r;if(To.isNonEmptyString(this.clientId)?To.isNonEmptyString(this.clientSecret)?To.isNonEmptyString(this.refreshToken)?To.isNonEmptyString(this.type)||(r='Refresh token must contain a "type" property.'):r='Refresh token must contain a "refresh_token" property.':r='Refresh token must contain a "client_secret" property.':r='Refresh token must contain a "client_id" property.',typeof r<"u")throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,r)}},V0=class{constructor(t,r,n=!1){this.httpAgent=r,this.implicit=n,this.impersonatedServiceAccount=typeof t=="string"?kI.fromPath(t):new kI(t),this.httpClient=new ff.HttpClient}getAccessToken(){let t="client_id="+this.impersonatedServiceAccount.clientId+"&client_secret="+this.impersonatedServiceAccount.clientSecret+"&refresh_token="+this.impersonatedServiceAccount.refreshToken+"&grant_type=refresh_token",r={method:"POST",url:`https://${jse}${Kse}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,httpAgent:this.httpAgent};return LI(this.httpClient,r)}};Ti.ImpersonatedServiceAccountCredential=V0;var kI=class e{static fromPath(t){try{return new e(JSON.parse(BI.readFileSync(t,"utf8")))}catch(r){throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse impersonated service account file: "+r)}}constructor(t){let r=t.source_credentials;r&&(na(this,r,"clientId","client_id"),na(this,r,"clientSecret","client_secret"),na(this,r,"refreshToken","refresh_token"),na(this,r,"type","type"));let n;if(To.isNonEmptyString(this.clientId)?To.isNonEmptyString(this.clientSecret)?To.isNonEmptyString(this.refreshToken)?To.isNonEmptyString(this.type)||(n='Impersonated Service Account must contain a "source_credentials.type" property.'):n='Impersonated Service Account must contain a "source_credentials.refresh_token" property.':n='Impersonated Service Account must contain a "source_credentials.client_secret" property.':n='Impersonated Service Account must contain a "source_credentials.client_id" property.',typeof n<"u")throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,n)}};function S8e(e){return e instanceof U0||e instanceof M0&&e.implicit||e instanceof q0&&e.implicit||e instanceof V0&&e.implicit}Ti.isApplicationDefault=S8e;function C8e(e){if(process.env.GOOGLE_APPLICATION_CREDENTIALS)return Vse(process.env.GOOGLE_APPLICATION_CREDENTIALS,e,!1);if(qse){let t=Vse(qse,e,!0);if(t)return t}return new U0(e)}Ti.getApplicationDefault=C8e;function na(e,t,r,n){let s=t[r]||t[n];typeof s<"u"&&(e[r]=s)}function LI(e,t){return e.send(t).then(r=>{let n=r.data;if(!n.access_token||!n.expires_in)throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,`Unexpected response while fetching access token: ${JSON.stringify(n)}`);return n}).catch(r=>{throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,zse(r))})}function _8e(e,t){return e.send(t).then(r=>{if(!r.text)throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Unexpected response while fetching id token: response.text is undefined");return r.text}).catch(r=>{throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,zse(r))})}function zse(e){return`Error fetching access token: ${e instanceof ff.RequestResponseError?f3(e.response):e.message}`}function f3(e){if(e.isJson()&&e.data.error){let t=e.data,r=t.error;return t.error_description&&(r+=" ("+t.error_description+")"),r}return e.text||"Missing error payload"}function Vse(e,t,r){let n=b8e(e,r);if(typeof n!="object"||n===null){if(r)return null;throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse contents of the credentials file as an object")}if(n.type==="service_account")return new M0(n,t,!0);if(n.type==="authorized_user")return new q0(n,t,!0);if(n.type==="impersonated_service_account")return new V0(n,t,!0);throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Invalid contents in the credentials file")}function b8e(e,t){let r;try{r=BI.readFileSync(e,"utf8")}catch(n){if(t)return null;throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,`Failed to read credentials from file ${e}: `+n)}try{return JSON.parse(r)}catch(n){throw new Lt.FirebaseAppError(Lt.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse contents of the credentials file as an object: "+n)}}});var $se=S((Ldt,v8e)=>{v8e.exports={name:"firebase-admin",version:"12.7.0",description:"Firebase admin SDK for Node.js",author:"Firebase <firebase-support@google.com> (https://firebase.google.com/)",license:"Apache-2.0",homepage:"https://firebase.google.com/",engines:{node:">=14"},scripts:{build:"gulp build","build:tests":"gulp compile_test",prepare:"npm run build && npm run esm-wrap",lint:"run-p lint:src lint:test",test:"run-s lint test:unit",integration:"run-s build test:integration","test:unit":"mocha test/unit/*.spec.ts --require ts-node/register","test:integration":"mocha test/integration/*.ts --slow 5000 --timeout 20000 --require ts-node/register","test:coverage":"nyc npm run test:unit","lint:src":"eslint src/ --ext .ts","lint:test":"eslint test/ --ext .ts",apidocs:"run-s api-extractor:local api-documenter","api-extractor":"node generate-reports.js","api-extractor:local":"npm run build && node generate-reports.js --local","esm-wrap":"node generate-esm-wrapper.js","api-documenter":"run-s api-documenter:markdown api-documenter:toc api-documenter:post","api-documenter:markdown":"api-documenter-fire markdown --input temp --output docgen/markdown -s --project admin","api-documenter:toc":"api-documenter-fire toc --input temp --output docgen/markdown -p /docs/reference/admin/node -s","api-documenter:post":"node docgen/post-process.js"},nyc:{extension:[".ts"],include:["src"],exclude:["**/*.d.ts"],all:!0},keywords:["admin","database","Firebase","realtime","authentication"],repository:{type:"git",url:"https://github.com/firebase/firebase-admin-node"},main:"lib/index.js",files:["lib/","LICENSE","README.md","package.json"],types:"./lib/index.d.ts",typesVersions:{"*":{app:["lib/app"],"app-check":["lib/app-check"],auth:["lib/auth"],eventarc:["lib/eventarc"],extensions:["lib/extensions"],database:["lib/database"],"data-connect":["lib/data-connect"],firestore:["lib/firestore"],functions:["lib/functions"],installations:["lib/installations"],"instance-id":["lib/instance-id"],"machine-learning":["lib/machine-learning"],messaging:["lib/messaging"],"project-management":["lib/project-management"],"remote-config":["lib/remote-config"],"security-rules":["lib/security-rules"],storage:["lib/storage"]}},exports:{".":"./lib/index.js","./app":{types:"./lib/app/index.d.ts",require:"./lib/app/index.js",import:"./lib/esm/app/index.js"},"./app-check":{types:"./lib/app-check/index.d.ts",require:"./lib/app-check/index.js",import:"./lib/esm/app-check/index.js"},"./auth":{types:"./lib/auth/index.d.ts",require:"./lib/auth/index.js",import:"./lib/esm/auth/index.js"},"./database":{types:"./lib/database/index.d.ts",require:"./lib/database/index.js",import:"./lib/esm/database/index.js"},"./data-connect":{types:"./lib/data-connect/index.d.ts",require:"./lib/data-connect/index.js",import:"./lib/esm/data-connect/index.js"},"./eventarc":{types:"./lib/eventarc/index.d.ts",require:"./lib/eventarc/index.js",import:"./lib/esm/eventarc/index.js"},"./extensions":{types:"./lib/extensions/index.d.ts",require:"./lib/extensions/index.js",import:"./lib/esm/extensions/index.js"},"./firestore":{types:"./lib/firestore/index.d.ts",require:"./lib/firestore/index.js",import:"./lib/esm/firestore/index.js"},"./functions":{types:"./lib/functions/index.d.ts",require:"./lib/functions/index.js",import:"./lib/esm/functions/index.js"},"./installations":{types:"./lib/installations/index.d.ts",require:"./lib/installations/index.js",import:"./lib/esm/installations/index.js"},"./instance-id":{types:"./lib/instance-id/index.d.ts",require:"./lib/instance-id/index.js",import:"./lib/esm/instance-id/index.js"},"./machine-learning":{types:"./lib/machine-learning/index.d.ts",require:"./lib/machine-learning/index.js",import:"./lib/esm/machine-learning/index.js"},"./messaging":{types:"./lib/messaging/index.d.ts",require:"./lib/messaging/index.js",import:"./lib/esm/messaging/index.js"},"./project-management":{types:"./lib/project-management/index.d.ts",require:"./lib/project-management/index.js",import:"./lib/esm/project-management/index.js"},"./remote-config":{types:"./lib/remote-config/index.d.ts",require:"./lib/remote-config/index.js",import:"./lib/esm/remote-config/index.js"},"./security-rules":{types:"./lib/security-rules/index.d.ts",require:"./lib/security-rules/index.js",import:"./lib/esm/security-rules/index.js"},"./storage":{types:"./lib/storage/index.d.ts",require:"./lib/storage/index.js",import:"./lib/esm/storage/index.js"}},dependencies:{"@fastify/busboy":"^3.0.0","@firebase/database-compat":"1.0.8","@firebase/database-types":"1.0.5","@types/node":"^22.0.1","farmhash-modern":"^1.1.0",jsonwebtoken:"^9.0.0","jwks-rsa":"^3.1.0","node-forge":"^1.3.1",uuid:"^10.0.0"},optionalDependencies:{"@google-cloud/firestore":"^7.7.0","@google-cloud/storage":"^7.7.0"},devDependencies:{"@firebase/api-documenter":"^0.4.0","@firebase/app-compat":"^0.2.1","@firebase/auth-compat":"^0.4.1","@firebase/auth-types":"^0.12.0","@microsoft/api-extractor":"^7.11.2","@types/bcrypt":"^5.0.0","@types/chai":"^4.0.0","@types/chai-as-promised":"^7.1.0","@types/firebase-token-generator":"^2.0.28","@types/jsonwebtoken":"8.5.1","@types/lodash":"^4.14.104","@types/minimist":"^1.2.2","@types/mocha":"^10.0.0","@types/nock":"^11.1.0","@types/request":"^2.47.0","@types/request-promise":"^4.1.41","@types/sinon":"^17.0.2","@types/sinon-chai":"^3.0.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^5.62.0","@typescript-eslint/parser":"^5.62.0",bcrypt:"^5.0.0",chai:"^4.2.0","chai-as-promised":"^7.0.0","chai-exclude":"^2.1.0",chalk:"^4.1.1","child-process-promise":"^2.2.1",del:"^6.0.0",eslint:"^8.12.0","firebase-token-generator":"^2.0.0",gulp:"^5.0.0","gulp-filter":"^7.0.0","gulp-header":"^2.0.9","gulp-typescript":"^5.0.1","http-message-parser":"^0.0.34",lodash:"^4.17.15",minimist:"^1.2.6",mocha:"^10.0.0",mz:"^2.7.0",nock:"^13.0.0","npm-run-all":"^4.1.5",nyc:"^17.0.0",request:"^2.75.0","request-promise":"^4.1.1","run-sequence":"^2.2.1",sinon:"^18.0.0","sinon-chai":"^3.0.0","ts-node":"^10.2.0",typescript:"5.1.6",yargs:"^17.0.1"}}});var du=S(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.parseResourceName=Lr.transformMillisecondsToSecondsString=Lr.generateUpdateMask=Lr.formatString=Lr.toWebSafeBase64=Lr.findServiceAccountEmail=Lr.getExplicitServiceAccountEmail=Lr.findProjectId=Lr.getExplicitProjectId=Lr.addReadonlyGetter=Lr.renameProperties=Lr.getSdkVersion=void 0;var MI=cm(),FI=Vn(),h3;function A8e(){if(!h3){let{version:e}=$se();h3=e}return h3}Lr.getSdkVersion=A8e;function x8e(e,t){Object.keys(t).forEach(r=>{if(r in e){let n=t[r];e[n]=e[r],delete e[r]}})}Lr.renameProperties=x8e;function I8e(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,enumerable:!0})}Lr.addReadonlyGetter=I8e;function Gse(e){let t=e.options;if(FI.isNonEmptyString(t.projectId))return t.projectId;let r=e.options.credential;if(r instanceof MI.ServiceAccountCredential)return r.projectId;let n=process.env.GOOGLE_CLOUD_PROJECT||process.env.GCLOUD_PROJECT;return FI.isNonEmptyString(n)?n:null}Lr.getExplicitProjectId=Gse;function w8e(e){let t=Gse(e);if(t)return Promise.resolve(t);let r=e.options.credential;return r instanceof MI.ComputeEngineCredential?r.getProjectId():Promise.resolve(null)}Lr.findProjectId=w8e;function Wse(e){let t=e.options;if(FI.isNonEmptyString(t.serviceAccountId))return t.serviceAccountId;let r=e.options.credential;return r instanceof MI.ServiceAccountCredential?r.clientEmail:null}Lr.getExplicitServiceAccountEmail=Wse;function T8e(e){let t=Wse(e);if(t)return Promise.resolve(t);let r=e.options.credential;return r instanceof MI.ComputeEngineCredential?r.getServiceAccountEmail():Promise.resolve(null)}Lr.findServiceAccountEmail=T8e;function R8e(e){return e.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")}Lr.toWebSafeBase64=R8e;function N8e(e,t){let r=e;return Object.keys(t||{}).forEach(n=>{r=r.replace(new RegExp("{"+n+"}","g"),t[n])}),r}Lr.formatString=N8e;function Jse(e,t=[],r=""){let n=[];if(!FI.isNonNullObject(e))return n;for(let s in e)if(typeof e[s]<"u"){let i=r?`${r}.${s}`:s;if(t.indexOf(i)!==-1)n.push(s);else{let o=Jse(e[s],t,i);o.length>0?o.forEach(a=>{n.push(`${s}.${a}`)}):n.push(s)}}return n}Lr.generateUpdateMask=Jse;function P8e(e){let t,r=Math.floor(e/1e3),n=Math.floor((e-r*1e3)*1e6);if(n>0){let s=n.toString();for(;s.length<9;)s="0"+s;t=`${r}.${s}s`}else t=`${r}s`;return t}Lr.transformMillisecondsToSecondsString=P8e;function O8e(e,t){if(!e.includes("/"))return{resourceId:e};let n=new RegExp(`^(projects/([^/]+)/)?locations/([^/]+)/${t}/([^/]+)$`).exec(e);if(n===null)throw new Error("Invalid resource name format.");let s=n[2],i=n[3],o=n[4];return{projectId:s,locationId:i,resourceId:o}}Lr.parseResourceName=O8e});var Qse=S(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});lm.FirebaseApp=lm.FirebaseAppInternals=void 0;var D8e=cm(),Yse=Vn(),Xse=qa(),Za=as(),k8e=300*1e3,UI=class{constructor(t){this.credential_=t,this.tokenListeners_=[],this.isRefreshing=!1}getToken(t=!1){return(t||this.shouldRefresh())&&(this.promiseToCachedToken_=this.refreshToken()),this.promiseToCachedToken_}getCachedToken(){return this.cachedToken_||null}refreshToken(){return this.isRefreshing=!0,Promise.resolve(this.credential_.getAccessToken()).then(t=>{if(!Yse.isNonNullObject(t)||typeof t.expires_in!="number"||typeof t.access_token!="string")throw new Za.FirebaseAppError(Za.AppErrorCodes.INVALID_CREDENTIAL,`Invalid access token generated: "${JSON.stringify(t)}". Valid access tokens must be an object with the "expires_in" (number) and "access_token" (string) properties.`);let r={accessToken:t.access_token,expirationTime:Date.now()+t.expires_in*1e3};return(!this.cachedToken_||this.cachedToken_.accessToken!==r.accessToken||this.cachedToken_.expirationTime!==r.expirationTime)&&(this.cachedToken_=r,this.tokenListeners_.forEach(n=>{n(r.accessToken)})),r}).catch(t=>{let r=typeof t=="string"?t:t.message;throw r=`Credential implementation provided to initializeApp() via the "credential" property failed to fetch a valid Google OAuth2 access token with the following error: "${r}".`,r.indexOf("invalid_grant")!==-1&&(r+=" There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk."),new Za.FirebaseAppError(Za.AppErrorCodes.INVALID_CREDENTIAL,r)}).finally(()=>{this.isRefreshing=!1})}shouldRefresh(){return(!this.cachedToken_||this.cachedToken_.expirationTime-Date.now()<=k8e)&&!this.isRefreshing}addAuthTokenListener(t){this.tokenListeners_.push(t),this.cachedToken_&&t(this.cachedToken_.accessToken)}removeAuthTokenListener(t){this.tokenListeners_=this.tokenListeners_.filter(r=>r!==t)}};lm.FirebaseAppInternals=UI;var p3=class{constructor(t,r,n){if(this.appStore=n,this.services_={},this.isDeleted_=!1,this.name_=r,this.options_=(0,Xse.deepCopy)(t),!Yse.isNonNullObject(this.options_))throw new Za.FirebaseAppError(Za.AppErrorCodes.INVALID_APP_OPTIONS,`Invalid Firebase app options passed as the first argument to initializeApp() for the app named "${this.name_}". Options must be a non-null object.`);"credential"in this.options_||(this.options_.credential=(0,D8e.getApplicationDefault)(this.options_.httpAgent));let i=this.options_.credential;if(typeof i!="object"||i===null||typeof i.getAccessToken!="function")throw new Za.FirebaseAppError(Za.AppErrorCodes.INVALID_APP_OPTIONS,`Invalid Firebase app options passed as the first argument to initializeApp() for the app named "${this.name_}". The "credential" property must be an object which implements the Credential interface.`);this.INTERNAL=new UI(i)}get name(){return this.checkDestroyed_(),this.name_}get options(){return this.checkDestroyed_(),(0,Xse.deepCopy)(this.options_)}getOrInitService(t,r){return this.ensureService_(t,()=>r(this))}delete(){return this.checkDestroyed_(),this.appStore?.removeApp(this.name),Promise.all(Object.keys(this.services_).map(t=>{let r=this.services_[t];return B8e(r)?r.delete():Promise.resolve()})).then(()=>{this.services_={},this.isDeleted_=!0})}ensureService_(t,r){return this.checkDestroyed_(),t in this.services_||(this.services_[t]=r()),this.services_[t]}checkDestroyed_(){if(this.isDeleted_)throw new Za.FirebaseAppError(Za.AppErrorCodes.APP_DELETED,`Firebase app named "${this.name_}" has already been deleted.`)}};lm.FirebaseApp=p3;function B8e(e){return typeof e.delete=="function"}});var eie=S(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.FIREBASE_CONFIG_VAR=bn.deleteApp=bn.getApps=bn.getApp=bn.initializeApp=bn.defaultAppStore=bn.AppStore=void 0;var L8e=require("fs"),F8e=Vn(),Ri=as(),M8e=cm(),U8e=Qse(),um="[DEFAULT]",qI=class{constructor(){this.appStore=new Map}initializeApp(t,r=um){if(typeof t>"u"&&(t=j8e(),t.credential=(0,M8e.getApplicationDefault)()),typeof r!="string"||r==="")throw new Ri.FirebaseAppError(Ri.AppErrorCodes.INVALID_APP_NAME,`Invalid Firebase app name "${r}" provided. App name must be a non-empty string.`);if(this.appStore.has(r))throw r===um?new Ri.FirebaseAppError(Ri.AppErrorCodes.DUPLICATE_APP,"The default Firebase app already exists. This means you called initializeApp() more than once without providing an app name as the second argument. In most cases you only need to call initializeApp() once. But if you do want to initialize multiple apps, pass a second argument to initializeApp() to give each app a unique name."):new Ri.FirebaseAppError(Ri.AppErrorCodes.DUPLICATE_APP,`Firebase app named "${r}" already exists. This means you called initializeApp() more than once with the same app name as the second argument. Make sure you provide a unique name every time you call initializeApp().`);let n=new U8e.FirebaseApp(t,r,this);return this.appStore.set(n.name,n),n}getApp(t=um){if(typeof t!="string"||t==="")throw new Ri.FirebaseAppError(Ri.AppErrorCodes.INVALID_APP_NAME,`Invalid Firebase app name "${t}" provided. App name must be a non-empty string.`);if(!this.appStore.has(t)){let r=t===um?"The default Firebase app does not exist. ":`Firebase app named "${t}" does not exist. `;throw r+="Make sure you call initializeApp() before using any of the Firebase services.",new Ri.FirebaseAppError(Ri.AppErrorCodes.NO_APP,r)}return this.appStore.get(t)}getApps(){return Array.from(this.appStore.values())}deleteApp(t){if(typeof t!="object"||t===null||!("options"in t))throw new Ri.FirebaseAppError(Ri.AppErrorCodes.INVALID_ARGUMENT,"Invalid app argument.");return Zse(t.name).delete()}clearAllApps(){let t=[];return this.getApps().forEach(r=>{t.push(this.deleteApp(r))}),Promise.all(t).then()}removeApp(t){this.appStore.delete(t)}};bn.AppStore=qI;bn.defaultAppStore=new qI;function q8e(e,t=um){return bn.defaultAppStore.initializeApp(e,t)}bn.initializeApp=q8e;function Zse(e=um){return bn.defaultAppStore.getApp(e)}bn.getApp=Zse;function V8e(){return bn.defaultAppStore.getApps()}bn.getApps=V8e;function H8e(e){return bn.defaultAppStore.deleteApp(e)}bn.deleteApp=H8e;bn.FIREBASE_CONFIG_VAR="FIREBASE_CONFIG";function j8e(){let e=process.env[bn.FIREBASE_CONFIG_VAR];if(!F8e.isNonEmptyString(e))return{};try{let t=e.startsWith("{")?e:L8e.readFileSync(e,"utf8");return JSON.parse(t)}catch(t){throw new Ri.FirebaseAppError(Ri.AppErrorCodes.INVALID_APP_OPTIONS,"Failed to parse app options file: "+t)}}});var tie=S(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.clearGlobalAppDefaultCred=ec.refreshToken=ec.cert=ec.applicationDefault=void 0;var y3=cm(),VI,m3={},g3={};function K8e(e){return typeof VI>"u"&&(VI=(0,y3.getApplicationDefault)(e)),VI}ec.applicationDefault=K8e;function z8e(e,t){let r=JSON.stringify(e);return r in m3||(m3[r]=new y3.ServiceAccountCredential(e,t)),m3[r]}ec.cert=z8e;function $8e(e,t){let r=JSON.stringify(e);return r in g3||(g3[r]=new y3.RefreshTokenCredential(e,t)),g3[r]}ec.refreshToken=$8e;function G8e(){VI=void 0}ec.clearGlobalAppDefaultCred=G8e});var S3=S(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.SDK_VERSION=fn.AppErrorCodes=fn.FirebaseAppError=fn.refreshToken=fn.cert=fn.applicationDefault=fn.deleteApp=fn.getApps=fn.getApp=fn.initializeApp=void 0;var W8e=du(),HI=eie();Object.defineProperty(fn,"initializeApp",{enumerable:!0,get:function(){return HI.initializeApp}});Object.defineProperty(fn,"getApp",{enumerable:!0,get:function(){return HI.getApp}});Object.defineProperty(fn,"getApps",{enumerable:!0,get:function(){return HI.getApps}});Object.defineProperty(fn,"deleteApp",{enumerable:!0,get:function(){return HI.deleteApp}});var E3=tie();Object.defineProperty(fn,"applicationDefault",{enumerable:!0,get:function(){return E3.applicationDefault}});Object.defineProperty(fn,"cert",{enumerable:!0,get:function(){return E3.cert}});Object.defineProperty(fn,"refreshToken",{enumerable:!0,get:function(){return E3.refreshToken}});var rie=as();Object.defineProperty(fn,"FirebaseAppError",{enumerable:!0,get:function(){return rie.FirebaseAppError}});Object.defineProperty(fn,"AppErrorCodes",{enumerable:!0,get:function(){return rie.AppErrorCodes}});fn.SDK_VERSION=(0,W8e.getSdkVersion)()});var iie=S(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.UserImportBuilder=dm.convertMultiFactorInfoToServerFormat=void 0;var jI=qa(),H0=du(),ui=Vn(),yt=as();function sie(e){let t;if(typeof e.enrollmentTime<"u")if(ui.isUTCDateString(e.enrollmentTime))t=new Date(e.enrollmentTime).toISOString();else throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_ENROLLMENT_TIME,`The second factor "enrollmentTime" for "${e.uid}" must be a valid UTC date string.`);if(J8e(e)){let r={mfaEnrollmentId:e.uid,displayName:e.displayName,phoneInfo:e.phoneNumber,enrolledAt:t};for(let n in r)typeof r[n]>"u"&&delete r[n];return r}else throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.UNSUPPORTED_SECOND_FACTOR,`Unsupported second factor "${JSON.stringify(e)}" provided.`)}dm.convertMultiFactorInfoToServerFormat=sie;function J8e(e){return e.factorId==="phone"}function fu(e,t){return typeof e[t]<"u"&&e[t]!==null?parseInt(e[t].toString(),10):NaN}function X8e(e,t){let r={localId:e.uid,email:e.email,emailVerified:e.emailVerified,displayName:e.displayName,disabled:e.disabled,photoUrl:e.photoURL,phoneNumber:e.phoneNumber,providerUserInfo:[],mfaInfo:[],tenantId:e.tenantId,customAttributes:e.customClaims&&JSON.stringify(e.customClaims)};if(typeof e.passwordHash<"u"){if(!ui.isBuffer(e.passwordHash))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_PASSWORD_HASH);r.passwordHash=H0.toWebSafeBase64(e.passwordHash)}if(typeof e.passwordSalt<"u"){if(!ui.isBuffer(e.passwordSalt))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_PASSWORD_SALT);r.salt=H0.toWebSafeBase64(e.passwordSalt)}ui.isNonNullObject(e.metadata)&&(ui.isNonEmptyString(e.metadata.creationTime)&&(r.createdAt=new Date(e.metadata.creationTime).getTime()),ui.isNonEmptyString(e.metadata.lastSignInTime)&&(r.lastLoginAt=new Date(e.metadata.lastSignInTime).getTime())),ui.isArray(e.providerData)&&e.providerData.forEach(s=>{r.providerUserInfo.push({providerId:s.providerId,rawId:s.uid,email:s.email,displayName:s.displayName,photoUrl:s.photoURL})}),ui.isNonNullObject(e.multiFactor)&&ui.isNonEmptyArray(e.multiFactor.enrolledFactors)&&e.multiFactor.enrolledFactors.forEach(s=>{r.mfaInfo.push(sie(s))});let n;for(n in r)typeof r[n]>"u"&&delete r[n];return r.providerUserInfo.length===0&&delete r.providerUserInfo,r.mfaInfo.length===0&&delete r.mfaInfo,typeof t=="function"&&t(r),r}var C3=class{constructor(t,r,n){this.requiresHashOptions=!1,this.validatedUsers=[],this.userImportResultErrors=[],this.indexMap={},this.validatedUsers=this.populateUsers(t,n),this.validatedOptions=this.populateOptions(r,this.requiresHashOptions)}buildRequest(){let t=this.validatedUsers.map(r=>(0,jI.deepCopy)(r));return(0,jI.deepExtend)({users:t},(0,jI.deepCopy)(this.validatedOptions))}buildResponse(t){let r={successCount:this.validatedUsers.length,failureCount:this.userImportResultErrors.length,errors:(0,jI.deepCopy)(this.userImportResultErrors)};return r.failureCount+=t.length,r.successCount-=t.length,t.forEach(n=>{r.errors.push({index:this.indexMap[n.index],error:new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_USER_IMPORT,n.message)})}),r.errors.sort((n,s)=>n.index-s.index),r}populateOptions(t,r){let n;if(!r)return{};if(!ui.isNonNullObject(t))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_ARGUMENT,'"UserImportOptions" are required when importing users with passwords.');if(!ui.isNonNullObject(t.hash))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.MISSING_HASH_ALGORITHM,'"hash.algorithm" is missing from the provided "UserImportOptions".');if(typeof t.hash.algorithm>"u"||!ui.isNonEmptyString(t.hash.algorithm))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_ALGORITHM,'"hash.algorithm" must be a string matching the list of supported algorithms.');let s;switch(t.hash.algorithm){case"HMAC_SHA512":case"HMAC_SHA256":case"HMAC_SHA1":case"HMAC_MD5":if(!ui.isBuffer(t.hash.key))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_KEY,`A non-empty "hash.key" byte buffer must be provided for hash algorithm ${t.hash.algorithm}.`);n={hashAlgorithm:t.hash.algorithm,signerKey:H0.toWebSafeBase64(t.hash.key)};break;case"MD5":case"SHA1":case"SHA256":case"SHA512":{s=fu(t.hash,"rounds");let i=t.hash.algorithm==="MD5"?0:1;if(isNaN(s)||s<i||s>8192)throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between ${i} and 8192 must be provided for hash algorithm ${t.hash.algorithm}.`);n={hashAlgorithm:t.hash.algorithm,rounds:s};break}case"PBKDF_SHA1":case"PBKDF2_SHA256":if(s=fu(t.hash,"rounds"),isNaN(s)||s<0||s>12e4)throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between 0 and 120000 must be provided for hash algorithm ${t.hash.algorithm}.`);n={hashAlgorithm:t.hash.algorithm,rounds:s};break;case"SCRYPT":{if(!ui.isBuffer(t.hash.key))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_KEY,`A "hash.key" byte buffer must be provided for hash algorithm ${t.hash.algorithm}.`);if(s=fu(t.hash,"rounds"),isNaN(s)||s<=0||s>8)throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between 1 and 8 must be provided for hash algorithm ${t.hash.algorithm}.`);let i=fu(t.hash,"memoryCost");if(isNaN(i)||i<=0||i>14)throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_MEMORY_COST,`A valid "hash.memoryCost" number between 1 and 14 must be provided for hash algorithm ${t.hash.algorithm}.`);if(typeof t.hash.saltSeparator<"u"&&!ui.isBuffer(t.hash.saltSeparator))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_SALT_SEPARATOR,'"hash.saltSeparator" must be a byte buffer.');n={hashAlgorithm:t.hash.algorithm,signerKey:H0.toWebSafeBase64(t.hash.key),rounds:s,memoryCost:i,saltSeparator:H0.toWebSafeBase64(t.hash.saltSeparator||Buffer.from(""))};break}case"BCRYPT":n={hashAlgorithm:t.hash.algorithm};break;case"STANDARD_SCRYPT":{let i=fu(t.hash,"memoryCost");if(isNaN(i))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_MEMORY_COST,`A valid "hash.memoryCost" number must be provided for hash algorithm ${t.hash.algorithm}.`);let o=fu(t.hash,"parallelization");if(isNaN(o))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_PARALLELIZATION,`A valid "hash.parallelization" number must be provided for hash algorithm ${t.hash.algorithm}.`);let a=fu(t.hash,"blockSize");if(isNaN(a))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_BLOCK_SIZE,`A valid "hash.blockSize" number must be provided for hash algorithm ${t.hash.algorithm}.`);let c=fu(t.hash,"derivedKeyLength");if(isNaN(c))throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_DERIVED_KEY_LENGTH,`A valid "hash.derivedKeyLength" number must be provided for hash algorithm ${t.hash.algorithm}.`);n={hashAlgorithm:t.hash.algorithm,cpuMemCost:i,parallelization:o,blockSize:a,dkLen:c};break}default:throw new yt.FirebaseAuthError(yt.AuthClientErrorCode.INVALID_HASH_ALGORITHM,`Unsupported hash algorithm provider "${t.hash.algorithm}".`)}return n}populateUsers(t,r){let n=[];return t.forEach((s,i)=>{try{let o=X8e(s,r);typeof o.passwordHash<"u"&&(this.requiresHashOptions=!0),n.push(o),this.indexMap[n.length-1]=i}catch(o){this.userImportResultErrors.push({index:i,error:o})}}),n}};dm.UserImportBuilder=C3});var oie=S(KI=>{"use strict";Object.defineProperty(KI,"__esModule",{value:!0});KI.ActionCodeSettingsBuilder=void 0;var tc=Vn(),Fr=as(),_3=class{constructor(t){if(!tc.isNonNullObject(t))throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings" must be a non-null object.');if(typeof t.url>"u")throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.MISSING_CONTINUE_URI);if(!tc.isURL(t.url))throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_CONTINUE_URI);if(this.continueUrl=t.url,typeof t.handleCodeInApp<"u"&&!tc.isBoolean(t.handleCodeInApp))throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.handleCodeInApp" must be a boolean.');if(this.canHandleCodeInApp=t.handleCodeInApp||!1,typeof t.dynamicLinkDomain<"u"&&!tc.isNonEmptyString(t.dynamicLinkDomain))throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_DYNAMIC_LINK_DOMAIN);if(this.dynamicLinkDomain=t.dynamicLinkDomain,typeof t.iOS<"u"){if(tc.isNonNullObject(t.iOS)){if(typeof t.iOS.bundleId>"u")throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.MISSING_IOS_BUNDLE_ID);if(!tc.isNonEmptyString(t.iOS.bundleId))throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.iOS.bundleId" must be a valid non-empty string.')}else throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.iOS" must be a valid non-null object.');this.ibi=t.iOS.bundleId}if(typeof t.android<"u"){if(tc.isNonNullObject(t.android)){if(typeof t.android.packageName>"u")throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.MISSING_ANDROID_PACKAGE_NAME);if(tc.isNonEmptyString(t.android.packageName)){if(typeof t.android.minimumVersion<"u"&&!tc.isNonEmptyString(t.android.minimumVersion))throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.minimumVersion" must be a valid non-empty string.');if(typeof t.android.installApp<"u"&&!tc.isBoolean(t.android.installApp))throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.installApp" must be a valid boolean.')}else throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.packageName" must be a valid non-empty string.')}else throw new Fr.FirebaseAuthError(Fr.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android" must be a valid non-null object.');this.apn=t.android.packageName,this.amv=t.android.minimumVersion,this.installApp=t.android.installApp||!1}}buildRequest(){let t={continueUrl:this.continueUrl,canHandleCodeInApp:this.canHandleCodeInApp,dynamicLinkDomain:this.dynamicLinkDomain,androidPackageName:this.apn,androidMinimumVersion:this.amv,androidInstallApp:this.installApp,iOSBundleId:this.ibi};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(typeof t[r]>"u"||t[r]===null)&&delete t[r];return t}};KI.ActionCodeSettingsBuilder=_3});var j0=S(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.EmailPrivacyAuthConfig=sn.PasswordPolicyAuthConfig=sn.RecaptchaAuthConfig=sn.SmsRegionsAuthConfig=sn.OIDCConfig=sn.SAMLConfig=sn.EmailSignInConfig=sn.validateTestPhoneNumbers=sn.MultiFactorAuthConfig=sn.MAXIMUM_TEST_PHONE_NUMBERS=void 0;var Fe=Vn(),b3=qa(),B=as();sn.MAXIMUM_TEST_PHONE_NUMBERS=10;var zI={phone:"PHONE_SMS"},aie=Object.keys(zI).reduce((e,t)=>(e[zI[t]]=t,e),{}),v3=class e{static buildServerRequest(t){let r={};return e.validate(t),Object.prototype.hasOwnProperty.call(t,"state")&&(r.state=t.state),Object.prototype.hasOwnProperty.call(t,"factorIds")&&((t.factorIds||[]).forEach(n=>{typeof r.enabledProviders>"u"&&(r.enabledProviders=[]),r.enabledProviders.push(zI[n])}),t.factorIds&&t.factorIds.length===0&&(r.enabledProviders=[])),Object.prototype.hasOwnProperty.call(t,"providerConfigs")&&(r.providerConfigs=t.providerConfigs),r}static validate(t){let r={state:!0,factorIds:!0,providerConfigs:!0};if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig" must be a non-null object.');for(let n in t)if(!(n in r))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid MultiFactorConfig parameter.`);if(typeof t.state<"u"&&t.state!=="ENABLED"&&t.state!=="DISABLED")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.state" must be either "ENABLED" or "DISABLED".');if(typeof t.factorIds<"u"){if(!Fe.isArray(t.factorIds))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.factorIds" must be an array of valid "AuthFactorTypes".');t.factorIds.forEach(n=>{if(typeof zI[n]>"u")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid "AuthFactorType".`)})}if(typeof t.providerConfigs<"u"){if(!Fe.isArray(t.providerConfigs))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs" must be an array of valid "MultiFactorProviderConfig."');t.providerConfigs.forEach(n=>{if(typeof n>"u"||!Fe.isObject(n))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid "MultiFactorProviderConfig" type.`);let s={state:!0,totpProviderConfig:!0};for(let a in n)if(!(a in s))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${a}" is not a valid ProviderConfig parameter.`);if(typeof n.state>"u"||n.state!=="ENABLED"&&n.state!=="DISABLED")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs.state" must be either "ENABLED" or "DISABLED".');if(typeof n.totpProviderConfig>"u")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs.totpProviderConfig" must be defined.');let i={adjacentIntervals:!0};for(let a in n.totpProviderConfig)if(!(a in i))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${a}" is not a valid TotpProviderConfig parameter.`);let o=n.totpProviderConfig.adjacentIntervals;if(typeof o<"u"&&(!Number.isInteger(o)||o<0||o>10))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"MultiFactorConfig.providerConfigs.totpProviderConfig.adjacentIntervals" must be a valid number between 0 and 10 (both inclusive).')})}}constructor(t){if(typeof t.state>"u")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor configuration response");this.state=t.state,this.factorIds=[],(t.enabledProviders||[]).forEach(r=>{typeof aie[r]<"u"&&this.factorIds.push(aie[r])}),this.providerConfigs=[],(t.providerConfigs||[]).forEach(r=>{if(typeof r<"u"){if(typeof r.state>"u"||typeof r.totpProviderConfig>"u"||typeof r.totpProviderConfig.adjacentIntervals<"u"&&typeof r.totpProviderConfig.adjacentIntervals!="number")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor configuration response");this.providerConfigs.push(r)}})}toJSON(){return{state:this.state,factorIds:this.factorIds,providerConfigs:this.providerConfigs}}};sn.MultiFactorAuthConfig=v3;function Y8e(e){if(!Fe.isObject(e))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"testPhoneNumbers" must be a map of phone number / code pairs.');if(Object.keys(e).length>sn.MAXIMUM_TEST_PHONE_NUMBERS)throw new B.FirebaseAuthError(B.AuthClientErrorCode.MAXIMUM_TEST_PHONE_NUMBER_EXCEEDED);for(let t in e){if(!Fe.isPhoneNumber(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_TESTING_PHONE_NUMBER,`"${t}" is not a valid E.164 standard compliant phone number.`);if(!Fe.isString(e[t])||!/^[\d]{6}$/.test(e[t]))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_TESTING_PHONE_NUMBER,`"${e[t]}" is not a valid 6 digit code string.`)}}sn.validateTestPhoneNumbers=Y8e;var A3=class e{static buildServerRequest(t){let r={};return e.validate(t),Object.prototype.hasOwnProperty.call(t,"enabled")&&(r.allowPasswordSignup=t.enabled),Object.prototype.hasOwnProperty.call(t,"passwordRequired")&&(r.enableEmailLinkSignin=!t.passwordRequired),r}static validate(t){let r={enabled:!0,passwordRequired:!0};if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig" must be a non-null object.');for(let n in t)if(!(n in r))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,`"${n}" is not a valid EmailSignInConfig parameter.`);if(typeof t.enabled<"u"&&!Fe.isBoolean(t.enabled))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig.enabled" must be a boolean.');if(typeof t.passwordRequired<"u"&&!Fe.isBoolean(t.passwordRequired))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig.passwordRequired" must be a boolean.')}constructor(t){if(typeof t.allowPasswordSignup>"u")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid email sign-in configuration response");this.enabled=t.allowPasswordSignup,this.passwordRequired=!t.enableEmailLinkSignin}toJSON(){return{enabled:this.enabled,passwordRequired:this.passwordRequired}}};sn.EmailSignInConfig=A3;var x3=class e{static buildServerRequest(t,r=!1){if(!(Fe.isNonNullObject(t)&&(t.providerId||r)))return null;let s={};if(e.validate(t,r),s.enabled=t.enabled,s.displayName=t.displayName,(t.idpEntityId||t.ssoURL||t.x509Certificates)&&(s.idpConfig={idpEntityId:t.idpEntityId,ssoUrl:t.ssoURL,signRequest:t.enableRequestSigning,idpCertificates:typeof t.x509Certificates>"u"?void 0:[]},t.x509Certificates))for(let i of t.x509Certificates||[])s.idpConfig.idpCertificates.push({x509Certificate:i});return(t.callbackURL||t.rpEntityId)&&(s.spConfig={spEntityId:t.rpEntityId,callbackUri:t.callbackURL}),s}static getProviderIdFromResourceName(t){let r=t.match(/\/inboundSamlConfigs\/(saml\..*)$/);return!r||r.length<2?null:r[1]}static isProviderId(t){return Fe.isNonEmptyString(t)&&t.indexOf("saml.")===0}static validate(t,r=!1){let n={enabled:!0,displayName:!0,providerId:!0,idpEntityId:!0,ssoURL:!0,x509Certificates:!0,rpEntityId:!0,callbackURL:!0,enableRequestSigning:!0};if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig" must be a valid non-null object.');for(let s in t)if(!(s in n))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${s}" is not a valid SAML config parameter.`);if(Fe.isNonEmptyString(t.providerId)){if(t.providerId.indexOf("saml.")!==0)throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_PROVIDER_ID,'"SAMLAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "saml.".')}else if(!r)throw new B.FirebaseAuthError(t.providerId?B.AuthClientErrorCode.INVALID_PROVIDER_ID:B.AuthClientErrorCode.MISSING_PROVIDER_ID,'"SAMLAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "saml.".');if(!(r&&typeof t.idpEntityId>"u")&&!Fe.isNonEmptyString(t.idpEntityId))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.idpEntityId" must be a valid non-empty string.');if(!(r&&typeof t.ssoURL>"u")&&!Fe.isURL(t.ssoURL))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.ssoURL" must be a valid URL string.');if(!(r&&typeof t.rpEntityId>"u")&&!Fe.isNonEmptyString(t.rpEntityId))throw new B.FirebaseAuthError(t.rpEntityId?B.AuthClientErrorCode.INVALID_CONFIG:B.AuthClientErrorCode.MISSING_SAML_RELYING_PARTY_CONFIG,'"SAMLAuthProviderConfig.rpEntityId" must be a valid non-empty string.');if(!(r&&typeof t.callbackURL>"u")&&!Fe.isURL(t.callbackURL))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.callbackURL" must be a valid URL string.');if(!(r&&typeof t.x509Certificates>"u")&&!Fe.isArray(t.x509Certificates))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.x509Certificates" must be a valid array of X509 certificate strings.');if((t.x509Certificates||[]).forEach(s=>{if(!Fe.isNonEmptyString(s))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.x509Certificates" must be a valid array of X509 certificate strings.')}),typeof t.enableRequestSigning<"u"&&!Fe.isBoolean(t.enableRequestSigning))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.enableRequestSigning" must be a boolean.');if(typeof t.enabled<"u"&&!Fe.isBoolean(t.enabled))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.enabled" must be a boolean.');if(typeof t.displayName<"u"&&!Fe.isString(t.displayName))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.displayName" must be a valid string.')}constructor(t){if(!t||!t.idpConfig||!t.idpConfig.idpEntityId||!t.idpConfig.ssoUrl||!t.spConfig||!t.spConfig.spEntityId||!t.name||!(Fe.isString(t.name)&&e.getProviderIdFromResourceName(t.name)))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");let r=e.getProviderIdFromResourceName(t.name);if(!r)throw new B.FirebaseAuthError(B.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");this.providerId=r,this.rpEntityId=t.spConfig.spEntityId,this.callbackURL=t.spConfig.callbackUri,this.idpEntityId=t.idpConfig.idpEntityId,this.ssoURL=t.idpConfig.ssoUrl,this.enableRequestSigning=!!t.idpConfig.signRequest;let n=[];for(let s of t.idpConfig.idpCertificates||[])s.x509Certificate&&n.push(s.x509Certificate);this.x509Certificates=n,this.enabled=!!t.enabled,this.displayName=t.displayName}toJSON(){return{enabled:this.enabled,displayName:this.displayName,providerId:this.providerId,idpEntityId:this.idpEntityId,ssoURL:this.ssoURL,x509Certificates:(0,b3.deepCopy)(this.x509Certificates),rpEntityId:this.rpEntityId,callbackURL:this.callbackURL,enableRequestSigning:this.enableRequestSigning}}};sn.SAMLConfig=x3;var I3=class e{static buildServerRequest(t,r=!1){if(!(Fe.isNonNullObject(t)&&(t.providerId||r)))return null;let s={};return e.validate(t,r),s.enabled=t.enabled,s.displayName=t.displayName,s.issuer=t.issuer,s.clientId=t.clientId,typeof t.clientSecret<"u"&&(s.clientSecret=t.clientSecret),typeof t.responseType<"u"&&(s.responseType=t.responseType),s}static getProviderIdFromResourceName(t){let r=t.match(/\/oauthIdpConfigs\/(oidc\..*)$/);return!r||r.length<2?null:r[1]}static isProviderId(t){return Fe.isNonEmptyString(t)&&t.indexOf("oidc.")===0}static validate(t,r=!1){let n={enabled:!0,displayName:!0,providerId:!0,clientId:!0,issuer:!0,clientSecret:!0,responseType:!0},s={idToken:!0,code:!0};if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig" must be a valid non-null object.');for(let i in t)if(!(i in n))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${i}" is not a valid OIDC config parameter.`);if(Fe.isNonEmptyString(t.providerId)){if(t.providerId.indexOf("oidc.")!==0)throw new B.FirebaseAuthError(t.providerId?B.AuthClientErrorCode.INVALID_PROVIDER_ID:B.AuthClientErrorCode.MISSING_PROVIDER_ID,'"OIDCAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "oidc.".')}else if(!r)throw new B.FirebaseAuthError(t.providerId?B.AuthClientErrorCode.INVALID_PROVIDER_ID:B.AuthClientErrorCode.MISSING_PROVIDER_ID,'"OIDCAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "oidc.".');if(!(r&&typeof t.clientId>"u")&&!Fe.isNonEmptyString(t.clientId))throw new B.FirebaseAuthError(t.clientId?B.AuthClientErrorCode.INVALID_OAUTH_CLIENT_ID:B.AuthClientErrorCode.MISSING_OAUTH_CLIENT_ID,'"OIDCAuthProviderConfig.clientId" must be a valid non-empty string.');if(!(r&&typeof t.issuer>"u")&&!Fe.isURL(t.issuer))throw new B.FirebaseAuthError(t.issuer?B.AuthClientErrorCode.INVALID_CONFIG:B.AuthClientErrorCode.MISSING_ISSUER,'"OIDCAuthProviderConfig.issuer" must be a valid URL string.');if(typeof t.enabled<"u"&&!Fe.isBoolean(t.enabled))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.enabled" must be a boolean.');if(typeof t.displayName<"u"&&!Fe.isString(t.displayName))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.displayName" must be a valid string.');if(typeof t.clientSecret<"u"&&!Fe.isNonEmptyString(t.clientSecret))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.clientSecret" must be a valid string.');if(Fe.isNonNullObject(t.responseType)&&typeof t.responseType<"u"){Object.keys(t.responseType).forEach(l=>{if(!(l in s))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${l}" is not a valid OAuthResponseType parameter.`)});let i=t.responseType.idToken;if(typeof i<"u"&&!Fe.isBoolean(i))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"OIDCAuthProviderConfig.responseType.idToken" must be a boolean.');let o=t.responseType.code;if(typeof o<"u"){if(!Fe.isBoolean(o))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"OIDCAuthProviderConfig.responseType.code" must be a boolean.');if(o&&typeof t.clientSecret>"u")throw new B.FirebaseAuthError(B.AuthClientErrorCode.MISSING_OAUTH_CLIENT_SECRET,"The OAuth configuration client secret is required to enable OIDC code flow.")}let a=Object.keys(t.responseType).length,c=Object.values(t.responseType).filter(Boolean).length;if(a>1&&c!==1)throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_OAUTH_RESPONSETYPE,"Only exactly one OAuth responseType should be set to true.")}}constructor(t){if(!t||!t.issuer||!t.clientId||!t.name||!(Fe.isString(t.name)&&e.getProviderIdFromResourceName(t.name)))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid OIDC configuration response");let r=e.getProviderIdFromResourceName(t.name);if(!r)throw new B.FirebaseAuthError(B.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");this.providerId=r,this.clientId=t.clientId,this.issuer=t.issuer,this.enabled=!!t.enabled,this.displayName=t.displayName,typeof t.clientSecret<"u"&&(this.clientSecret=t.clientSecret),typeof t.responseType<"u"&&(this.responseType=t.responseType)}toJSON(){return{enabled:this.enabled,displayName:this.displayName,providerId:this.providerId,issuer:this.issuer,clientId:this.clientId,clientSecret:(0,b3.deepCopy)(this.clientSecret),responseType:(0,b3.deepCopy)(this.responseType)}}};sn.OIDCConfig=I3;var w3=class{static validate(t){if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig" must be a non-null object.');let r={allowlistOnly:!0,allowByDefault:!0};for(let n in t)if(!(n in r))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid SmsRegionConfig parameter.`);if(typeof t.allowByDefault<"u"&&typeof t.allowlistOnly<"u")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'SmsRegionConfig cannot have both "allowByDefault" and "allowlistOnly" parameters.');if(typeof t.allowByDefault<"u"){let n={disallowedRegions:!0};for(let s in t.allowByDefault)if(!(s in n))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${s}" is not a valid SmsRegionConfig.allowByDefault parameter.`);if(typeof t.allowByDefault.disallowedRegions<"u"&&!Fe.isArray(t.allowByDefault.disallowedRegions))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig.allowByDefault.disallowedRegions" must be a valid string array.')}if(typeof t.allowlistOnly<"u"){let n={allowedRegions:!0};for(let s in t.allowlistOnly)if(!(s in n))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${s}" is not a valid SmsRegionConfig.allowlistOnly parameter.`);if(typeof t.allowlistOnly.allowedRegions<"u"&&!Fe.isArray(t.allowlistOnly.allowedRegions))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig.allowlistOnly.allowedRegions" must be a valid string array.')}}};sn.SmsRegionsAuthConfig=w3;var T3=class e{constructor(t){let r=Object.fromEntries(Object.entries(t).filter(([,n])=>n!==void 0));r.tollFraudManagedRules!==void 0&&(this.smsTollFraudManagedRules=r.tollFraudManagedRules,delete r.tollFraudManagedRules),Object.assign(this,r)}static buildServerRequest(t){e.validate(t);let r={};return typeof t.emailPasswordEnforcementState<"u"&&(r.emailPasswordEnforcementState=t.emailPasswordEnforcementState),typeof t.phoneEnforcementState<"u"&&(r.phoneEnforcementState=t.phoneEnforcementState),typeof t.managedRules<"u"&&(r.managedRules=t.managedRules),typeof t.recaptchaKeys<"u"&&(r.recaptchaKeys=t.recaptchaKeys),typeof t.useAccountDefender<"u"&&(r.useAccountDefender=t.useAccountDefender),typeof t.useSmsBotScore<"u"&&(r.useSmsBotScore=t.useSmsBotScore),typeof t.useSmsTollFraudProtection<"u"&&(r.useSmsTollFraudProtection=t.useSmsTollFraudProtection),typeof t.smsTollFraudManagedRules<"u"&&(r.tollFraudManagedRules=t.smsTollFraudManagedRules),r}static validate(t){let r={emailPasswordEnforcementState:!0,phoneEnforcementState:!0,managedRules:!0,recaptchaKeys:!0,useAccountDefender:!0,useSmsBotScore:!0,useSmsTollFraudProtection:!0,smsTollFraudManagedRules:!0};if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig" must be a non-null object.');for(let n in t)if(!(n in r))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid RecaptchaConfig parameter.`);if(typeof t.emailPasswordEnforcementState<"u"){if(!Fe.isNonEmptyString(t.emailPasswordEnforcementState))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"RecaptchaConfig.emailPasswordEnforcementState" must be a valid non-empty string.');if(t.emailPasswordEnforcementState!=="OFF"&&t.emailPasswordEnforcementState!=="AUDIT"&&t.emailPasswordEnforcementState!=="ENFORCE")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.emailPasswordEnforcementState" must be either "OFF", "AUDIT" or "ENFORCE".')}if(typeof t.phoneEnforcementState<"u"){if(!Fe.isNonEmptyString(t.phoneEnforcementState))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_ARGUMENT,'"RecaptchaConfig.phoneEnforcementState" must be a valid non-empty string.');if(t.phoneEnforcementState!=="OFF"&&t.phoneEnforcementState!=="AUDIT"&&t.phoneEnforcementState!=="ENFORCE")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.phoneEnforcementState" must be either "OFF", "AUDIT" or "ENFORCE".')}if(typeof t.managedRules<"u"){if(!Fe.isArray(t.managedRules))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.managedRules" must be an array of valid "RecaptchaManagedRule".');t.managedRules.forEach(n=>{e.validateManagedRule(n)})}if(typeof t.useAccountDefender<"u"&&!Fe.isBoolean(t.useAccountDefender))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useAccountDefender" must be a boolean value".');if(typeof t.useSmsBotScore<"u"&&!Fe.isBoolean(t.useSmsBotScore))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useSmsBotScore" must be a boolean value".');if(typeof t.useSmsTollFraudProtection<"u"&&!Fe.isBoolean(t.useSmsTollFraudProtection))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useSmsTollFraudProtection" must be a boolean value".');if(typeof t.smsTollFraudManagedRules<"u"){if(!Fe.isArray(t.smsTollFraudManagedRules))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.smsTollFraudManagedRules" must be an array of valid "RecaptchaTollFraudManagedRule".');t.smsTollFraudManagedRules.forEach(n=>{e.validateTollFraudManagedRule(n)})}}static validateManagedRule(t){let r={endScore:!0,action:!0};if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaManagedRule" must be a non-null object.');for(let n in t)if(!(n in r))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid RecaptchaManagedRule parameter.`);if(typeof t.action<"u"&&t.action!=="BLOCK")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaManagedRule.action" must be "BLOCK".')}static validateTollFraudManagedRule(t){let r={startScore:!0,action:!0};if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaTollFraudManagedRule" must be a non-null object.');for(let n in t)if(!(n in r))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid RecaptchaTollFraudManagedRule parameter.`);if(typeof t.action<"u"&&t.action!=="BLOCK")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaTollFraudManagedRule.action" must be "BLOCK".')}};sn.RecaptchaAuthConfig=T3;var R3=class e{static buildServerRequest(t){let r={};e.validate(t),Object.prototype.hasOwnProperty.call(t,"enforcementState")&&(r.passwordPolicyEnforcementState=t.enforcementState),r.forceUpgradeOnSignin=!1,Object.prototype.hasOwnProperty.call(t,"forceUpgradeOnSignin")&&(r.forceUpgradeOnSignin=t.forceUpgradeOnSignin);let n={containsUppercaseCharacter:!1,containsLowercaseCharacter:!1,containsNonAlphanumericCharacter:!1,containsNumericCharacter:!1,minPasswordLength:6,maxPasswordLength:4096};return r.passwordPolicyVersions=[],Object.prototype.hasOwnProperty.call(t,"constraints")&&t&&(t.constraints?.requireUppercase!==void 0&&(n.containsUppercaseCharacter=t.constraints.requireUppercase),t.constraints?.requireLowercase!==void 0&&(n.containsLowercaseCharacter=t.constraints.requireLowercase),t.constraints?.requireNonAlphanumeric!==void 0&&(n.containsNonAlphanumericCharacter=t.constraints.requireNonAlphanumeric),t.constraints?.requireNumeric!==void 0&&(n.containsNumericCharacter=t.constraints.requireNumeric),t.constraints?.minLength!==void 0&&(n.minPasswordLength=t.constraints.minLength),t.constraints?.maxLength!==void 0&&(n.maxPasswordLength=t.constraints.maxLength)),r.passwordPolicyVersions.push({customStrengthOptions:n}),r}static validate(t){let r={enforcementState:!0,forceUpgradeOnSignin:!0,constraints:!0};if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig" must be a non-null object.');for(let n in t)if(!(n in r))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid PasswordPolicyConfig parameter.`);if(typeof t.enforcementState>"u"||!(t.enforcementState==="ENFORCE"||t.enforcementState==="OFF"))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.enforcementState" must be either "ENFORCE" or "OFF".');if(typeof t.forceUpgradeOnSignin<"u"&&!Fe.isBoolean(t.forceUpgradeOnSignin))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.forceUpgradeOnSignin" must be a boolean.');if(typeof t.constraints<"u"){if(t.enforcementState==="ENFORCE"&&!Fe.isNonNullObject(t.constraints))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints" must be a non-empty object.');let n={requireUppercase:!0,requireLowercase:!0,requireNumeric:!0,requireNonAlphanumeric:!0,minLength:!0,maxLength:!0};for(let s in t.constraints)if(!(s in n))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${s}" is not a valid PasswordPolicyConfig.constraints parameter.`);if(typeof t.constraints.requireUppercase<"u"&&!Fe.isBoolean(t.constraints.requireUppercase))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireUppercase" must be a boolean.');if(typeof t.constraints.requireLowercase<"u"&&!Fe.isBoolean(t.constraints.requireLowercase))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireLowercase" must be a boolean.');if(typeof t.constraints.requireNonAlphanumeric<"u"&&!Fe.isBoolean(t.constraints.requireNonAlphanumeric))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireNonAlphanumeric" must be a boolean.');if(typeof t.constraints.requireNumeric<"u"&&!Fe.isBoolean(t.constraints.requireNumeric))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireNumeric" must be a boolean.');if(typeof t.constraints.minLength>"u")t.constraints.minLength=6;else if(Fe.isNumber(t.constraints.minLength)){if(!(t.constraints.minLength>=6&&t.constraints.minLength<=30))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.minLength" must be an integer between 6 and 30, inclusive.')}else throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.minLength" must be a number.');if(typeof t.constraints.maxLength>"u")t.constraints.maxLength=4096;else if(Fe.isNumber(t.constraints.maxLength)){if(!(t.constraints.maxLength>=t.constraints.minLength&&t.constraints.maxLength<=4096))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.maxLength" must be greater than or equal to minLength and at max 4096.')}else throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.maxLength" must be a number.')}else if(t.enforcementState==="ENFORCE")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints" must be defined.')}constructor(t){if(typeof t.passwordPolicyEnforcementState>"u")throw new B.FirebaseAuthError(B.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid password policy configuration response");this.enforcementState=t.passwordPolicyEnforcementState;let r={};typeof t.passwordPolicyVersions<"u"&&(t.passwordPolicyVersions||[]).forEach(n=>{r={requireLowercase:n.customStrengthOptions?.containsLowercaseCharacter,requireUppercase:n.customStrengthOptions?.containsUppercaseCharacter,requireNonAlphanumeric:n.customStrengthOptions?.containsNonAlphanumericCharacter,requireNumeric:n.customStrengthOptions?.containsNumericCharacter,minLength:n.customStrengthOptions?.minPasswordLength,maxLength:n.customStrengthOptions?.maxPasswordLength}}),this.constraints=r,this.forceUpgradeOnSignin=!!t.forceUpgradeOnSignin}};sn.PasswordPolicyAuthConfig=R3;var N3=class{static validate(t){if(!Fe.isNonNullObject(t))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"EmailPrivacyConfig" must be a non-null object.');let r={enableImprovedEmailPrivacy:!0};for(let n in t)if(!(n in r))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,`"${n}" is not a valid "EmailPrivacyConfig" parameter.`);if(typeof t.enableImprovedEmailPrivacy<"u"&&!Fe.isBoolean(t.enableImprovedEmailPrivacy))throw new B.FirebaseAuthError(B.AuthClientErrorCode.INVALID_CONFIG,'"EmailPrivacyConfig.enableImprovedEmailPrivacy" must be a valid boolean value.')}};sn.EmailPrivacyAuthConfig=N3});var GI=S($I=>{"use strict";Object.defineProperty($I,"__esModule",{value:!0});$I.Tenant=void 0;var cie=Vn(),hf=qa(),rc=as(),zs=j0(),P3=class e{static buildServerRequest(t,r){e.validate(t,r);let n={};return typeof t.emailSignInConfig<"u"&&(n=zs.EmailSignInConfig.buildServerRequest(t.emailSignInConfig)),typeof t.displayName<"u"&&(n.displayName=t.displayName),typeof t.anonymousSignInEnabled<"u"&&(n.enableAnonymousUser=t.anonymousSignInEnabled),typeof t.multiFactorConfig<"u"&&(n.mfaConfig=zs.MultiFactorAuthConfig.buildServerRequest(t.multiFactorConfig)),typeof t.testPhoneNumbers<"u"&&(n.testPhoneNumbers=t.testPhoneNumbers??{}),typeof t.smsRegionConfig<"u"&&(n.smsRegionConfig=t.smsRegionConfig),typeof t.recaptchaConfig<"u"&&(n.recaptchaConfig=zs.RecaptchaAuthConfig.buildServerRequest(t.recaptchaConfig)),typeof t.passwordPolicyConfig<"u"&&(n.passwordPolicyConfig=zs.PasswordPolicyAuthConfig.buildServerRequest(t.passwordPolicyConfig)),typeof t.emailPrivacyConfig<"u"&&(n.emailPrivacyConfig=t.emailPrivacyConfig),n}static getTenantIdFromResourceName(t){let r=t.match(/\/tenants\/(.*)$/);return!r||r.length<2?null:r[1]}static validate(t,r){let n={displayName:!0,emailSignInConfig:!0,anonymousSignInEnabled:!0,multiFactorConfig:!0,testPhoneNumbers:!0,smsRegionConfig:!0,recaptchaConfig:!0,passwordPolicyConfig:!0,emailPrivacyConfig:!0},s=r?"CreateTenantRequest":"UpdateTenantRequest";if(!cie.isNonNullObject(t))throw new rc.FirebaseAuthError(rc.AuthClientErrorCode.INVALID_ARGUMENT,`"${s}" must be a valid non-null object.`);for(let i in t)if(!(i in n))throw new rc.FirebaseAuthError(rc.AuthClientErrorCode.INVALID_ARGUMENT,`"${i}" is not a valid ${s} parameter.`);if(typeof t.displayName<"u"&&!cie.isNonEmptyString(t.displayName))throw new rc.FirebaseAuthError(rc.AuthClientErrorCode.INVALID_ARGUMENT,`"${s}.displayName" must be a valid non-empty string.`);if(typeof t.emailSignInConfig<"u"&&zs.EmailSignInConfig.buildServerRequest(t.emailSignInConfig),typeof t.testPhoneNumbers<"u"&&t.testPhoneNumbers!==null)(0,zs.validateTestPhoneNumbers)(t.testPhoneNumbers);else if(t.testPhoneNumbers===null&&r)throw new rc.FirebaseAuthError(rc.AuthClientErrorCode.INVALID_ARGUMENT,`"${s}.testPhoneNumbers" must be a non-null object.`);typeof t.multiFactorConfig<"u"&&zs.MultiFactorAuthConfig.buildServerRequest(t.multiFactorConfig),typeof t.smsRegionConfig<"u"&&zs.SmsRegionsAuthConfig.validate(t.smsRegionConfig),typeof t.recaptchaConfig<"u"&&zs.RecaptchaAuthConfig.buildServerRequest(t.recaptchaConfig),typeof t.passwordPolicyConfig<"u"&&zs.PasswordPolicyAuthConfig.buildServerRequest(t.passwordPolicyConfig),typeof t.emailPrivacyConfig<"u"&&zs.EmailPrivacyAuthConfig.validate(t.emailPrivacyConfig)}constructor(t){let r=e.getTenantIdFromResourceName(t.name);if(!r)throw new rc.FirebaseAuthError(rc.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid tenant response");this.tenantId=r,this.displayName=t.displayName;try{this.emailSignInConfig_=new zs.EmailSignInConfig(t)}catch{this.emailSignInConfig_=new zs.EmailSignInConfig({allowPasswordSignup:!1})}this.anonymousSignInEnabled=!!t.enableAnonymousUser,typeof t.mfaConfig<"u"&&(this.multiFactorConfig_=new zs.MultiFactorAuthConfig(t.mfaConfig)),typeof t.testPhoneNumbers<"u"&&(this.testPhoneNumbers=(0,hf.deepCopy)(t.testPhoneNumbers||{})),typeof t.smsRegionConfig<"u"&&(this.smsRegionConfig=(0,hf.deepCopy)(t.smsRegionConfig)),typeof t.recaptchaConfig<"u"&&(this.recaptchaConfig_=new zs.RecaptchaAuthConfig(t.recaptchaConfig)),typeof t.passwordPolicyConfig<"u"&&(this.passwordPolicyConfig=new zs.PasswordPolicyAuthConfig(t.passwordPolicyConfig)),typeof t.emailPrivacyConfig<"u"&&(this.emailPrivacyConfig=(0,hf.deepCopy)(t.emailPrivacyConfig))}get emailSignInConfig(){return this.emailSignInConfig_}get multiFactorConfig(){return this.multiFactorConfig_}get recaptchaConfig(){return this.recaptchaConfig_}toJSON(){let t={tenantId:this.tenantId,displayName:this.displayName,emailSignInConfig:this.emailSignInConfig_?.toJSON(),multiFactorConfig:this.multiFactorConfig_?.toJSON(),anonymousSignInEnabled:this.anonymousSignInEnabled,testPhoneNumbers:this.testPhoneNumbers,smsRegionConfig:(0,hf.deepCopy)(this.smsRegionConfig),recaptchaConfig:(0,hf.deepCopy)(this.recaptchaConfig),passwordPolicyConfig:(0,hf.deepCopy)(this.passwordPolicyConfig),emailPrivacyConfig:(0,hf.deepCopy)(this.emailPrivacyConfig)};return typeof t.multiFactorConfig>"u"&&delete t.multiFactorConfig,typeof t.testPhoneNumbers>"u"&&delete t.testPhoneNumbers,typeof t.smsRegionConfig>"u"&&delete t.smsRegionConfig,typeof t.recaptchaConfig>"u"&&delete t.recaptchaConfig,typeof t.passwordPolicyConfig>"u"&&delete t.passwordPolicyConfig,typeof t.emailPrivacyConfig>"u"&&delete t.emailPrivacyConfig,t}};$I.Tenant=P3});var O3=S(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.isProviderIdentifier=nc.isPhoneIdentifier=nc.isEmailIdentifier=nc.isUidIdentifier=void 0;function Q8e(e){return e.uid!==void 0}nc.isUidIdentifier=Q8e;function Z8e(e){return e.email!==void 0}nc.isEmailIdentifier=Z8e;function eKe(e){return e.phoneNumber!==void 0}nc.isPhoneIdentifier=eKe;function tKe(e){let t=e;return t.providerId!==void 0&&t.providerUid!==void 0}nc.isProviderIdentifier=tKe});var XI=S(JI=>{"use strict";Object.defineProperty(JI,"__esModule",{value:!0});JI.ProjectConfig=void 0;var rKe=Vn(),WI=as(),ia=j0(),K0=qa(),D3=class e{get multiFactorConfig(){return this.multiFactorConfig_}get recaptchaConfig(){return this.recaptchaConfig_}static validate(t){if(!rKe.isNonNullObject(t))throw new WI.FirebaseAuthError(WI.AuthClientErrorCode.INVALID_ARGUMENT,'"UpdateProjectConfigRequest" must be a valid non-null object.');let r={smsRegionConfig:!0,multiFactorConfig:!0,recaptchaConfig:!0,passwordPolicyConfig:!0,emailPrivacyConfig:!0};for(let n in t)if(!(n in r))throw new WI.FirebaseAuthError(WI.AuthClientErrorCode.INVALID_ARGUMENT,`"${n}" is not a valid UpdateProjectConfigRequest parameter.`);typeof t.smsRegionConfig<"u"&&ia.SmsRegionsAuthConfig.validate(t.smsRegionConfig),typeof t.multiFactorConfig<"u"&&ia.MultiFactorAuthConfig.validate(t.multiFactorConfig),typeof t.recaptchaConfig<"u"&&ia.RecaptchaAuthConfig.validate(t.recaptchaConfig),typeof t.passwordPolicyConfig<"u"&&ia.PasswordPolicyAuthConfig.validate(t.passwordPolicyConfig),typeof t.emailPrivacyConfig<"u"&&ia.EmailPrivacyAuthConfig.validate(t.emailPrivacyConfig)}static buildServerRequest(t){e.validate(t);let r={};return typeof t.smsRegionConfig<"u"&&(r.smsRegionConfig=t.smsRegionConfig),typeof t.multiFactorConfig<"u"&&(r.mfa=ia.MultiFactorAuthConfig.buildServerRequest(t.multiFactorConfig)),typeof t.recaptchaConfig<"u"&&(r.recaptchaConfig=ia.RecaptchaAuthConfig.buildServerRequest(t.recaptchaConfig)),typeof t.passwordPolicyConfig<"u"&&(r.passwordPolicyConfig=ia.PasswordPolicyAuthConfig.buildServerRequest(t.passwordPolicyConfig)),typeof t.emailPrivacyConfig<"u"&&(r.emailPrivacyConfig=t.emailPrivacyConfig),r}constructor(t){typeof t.smsRegionConfig<"u"&&(this.smsRegionConfig=t.smsRegionConfig),typeof t.mfa<"u"&&(this.multiFactorConfig_=new ia.MultiFactorAuthConfig(t.mfa)),typeof t.recaptchaConfig<"u"&&(this.recaptchaConfig_=new ia.RecaptchaAuthConfig(t.recaptchaConfig)),typeof t.passwordPolicyConfig<"u"&&(this.passwordPolicyConfig=new ia.PasswordPolicyAuthConfig(t.passwordPolicyConfig)),typeof t.emailPrivacyConfig<"u"&&(this.emailPrivacyConfig=t.emailPrivacyConfig)}toJSON(){let t={smsRegionConfig:(0,K0.deepCopy)(this.smsRegionConfig),multiFactorConfig:(0,K0.deepCopy)(this.multiFactorConfig),recaptchaConfig:(0,K0.deepCopy)(this.recaptchaConfig),passwordPolicyConfig:(0,K0.deepCopy)(this.passwordPolicyConfig),emailPrivacyConfig:(0,K0.deepCopy)(this.emailPrivacyConfig)};return typeof t.smsRegionConfig>"u"&&delete t.smsRegionConfig,typeof t.multiFactorConfig>"u"&&delete t.multiFactorConfig,typeof t.recaptchaConfig>"u"&&delete t.recaptchaConfig,typeof t.passwordPolicyConfig>"u"&&delete t.passwordPolicyConfig,typeof t.emailPrivacyConfig>"u"&&delete t.emailPrivacyConfig,t}};JI.ProjectConfig=D3});var $0=S(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.useEmulator=Ye.TenantAwareAuthRequestHandler=Ye.AuthRequestHandler=Ye.AbstractAuthRequestHandler=Ye.FIREBASE_AUTH_SIGN_UP_NEW_USER=Ye.FIREBASE_AUTH_SET_ACCOUNT_INFO=Ye.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS=Ye.FIREBASE_AUTH_DELETE_ACCOUNT=Ye.FIREBASE_AUTH_GET_ACCOUNTS_INFO=Ye.FIREBASE_AUTH_GET_ACCOUNT_INFO=Ye.FIREBASE_AUTH_DOWNLOAD_ACCOUNT=Ye.FIREBASE_AUTH_UPLOAD_ACCOUNT=Ye.FIREBASE_AUTH_CREATE_SESSION_COOKIE=Ye.EMAIL_ACTION_REQUEST_TYPES=Ye.RESERVED_CLAIMS=void 0;var ge=Vn(),YI=qa(),T=as(),dr=d0(),Ro=du(),k3=iie(),nKe=oie(),ZI=GI(),QI=O3(),Ni=j0(),sKe=XI(),iKe={"X-Client-Version":`Node/Admin/${Ro.getSdkVersion()}`,"X-Goog-Api-Client":`gl-node/${process.versions.node} fire-admin/${Ro.getSdkVersion()}`},oKe=25e3;Ye.RESERVED_CLAIMS=["acr","amr","at_hash","aud","auth_time","azp","cnf","c_hash","exp","iat","iss","jti","nbf","nonce","sub","firebase"];Ye.EMAIL_ACTION_REQUEST_TYPES=["PASSWORD_RESET","VERIFY_EMAIL","EMAIL_SIGNIN","VERIFY_AND_CHANGE_EMAIL"];var lie=1e3,B3=1e3,uie=1e3,die=100,fie=1e3,aKe=300,cKe=336*60*60,hm=100,pie="https://identitytoolkit.googleapis.com/{version}/projects/{projectId}{api}",mie="http://{host}/identitytoolkit.googleapis.com/{version}/projects/{projectId}{api}",lKe=pie.replace("projects/{projectId}","projects/{projectId}/tenants/{tenantId}"),uKe=mie.replace("projects/{projectId}","projects/{projectId}/tenants/{tenantId}"),L3=1e3,pm;(function(e){e.Create="create",e.Update="update",e.Upload="upload"})(pm||(pm={}));var fm=class{constructor(t,r="v1"){this.app=t,this.version=r,tw()?this.urlFormat=Ro.formatString(mie,{host:V3()}):this.urlFormat=pie}getUrl(t,r){return this.getProjectId().then(n=>{let s={version:this.version,projectId:n,api:t||""},i=Ro.formatString(this.urlFormat,s);return Ro.formatString(i,r||{})})}getProjectId(){return this.projectId?Promise.resolve(this.projectId):Ro.findProjectId(this.app).then(t=>{if(!ge.isNonEmptyString(t))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_CREDENTIAL,"Failed to determine project ID for Auth. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectId=t,t})}},ew=class extends fm{constructor(t,r,n){super(t,r),this.app=t,this.version=r,this.tenantId=n,tw()?this.urlFormat=Ro.formatString(uKe,{host:V3()}):this.urlFormat=lKe}getUrl(t,r){return super.getUrl(t,r).then(n=>Ro.formatString(n,{tenantId:this.tenantId}))}},F3=class extends dr.AuthorizedHttpClient{getToken(){return tw()?Promise.resolve("owner"):super.getToken()}};function dKe(e){let t={mfaEnrollmentId:!0,displayName:!0,phoneInfo:!0,enrolledAt:!0};for(let n in e)n in t||delete e[n];let r=e.mfaEnrollmentId||e.phoneInfo||JSON.stringify(e);if(typeof e.mfaEnrollmentId<"u"&&!ge.isNonEmptyString(e.mfaEnrollmentId))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID,'The second factor "uid" must be a valid non-empty string.');if(typeof e.displayName<"u"&&!ge.isString(e.displayName))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_DISPLAY_NAME,`The second factor "displayName" for "${r}" must be a valid string.`);if(typeof e.enrolledAt<"u"&&!ge.isISODateString(e.enrolledAt))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ENROLLMENT_TIME,`The second factor "enrollmentTime" for "${r}" must be a valid UTC date string.`);if(typeof e.phoneInfo<"u"){if(!ge.isPhoneNumber(e.phoneInfo))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PHONE_NUMBER,`The second factor "phoneNumber" for "${r}" must be a non-empty E.164 standard compliant identifier string.`)}else throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ENROLLED_FACTORS,"MFAInfo object provided is invalid.")}function hie(e){let t={rawId:!0,providerId:!0,email:!0,displayName:!0,photoUrl:!0};for(let r in e)r in t||delete e[r];if(!ge.isNonEmptyString(e.providerId))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID);if(typeof e.displayName<"u"&&typeof e.displayName!="string")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_DISPLAY_NAME,`The provider "displayName" for "${e.providerId}" must be a valid string.`);if(!ge.isNonEmptyString(e.rawId))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID,`The provider "uid" for "${e.providerId}" must be a valid non-empty string.`);if(typeof e.email<"u"&&!ge.isEmail(e.email))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_EMAIL,`The provider "email" for "${e.providerId}" must be a valid email string.`);if(typeof e.photoUrl<"u"&&!ge.isURL(e.photoUrl))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PHOTO_URL,`The provider "photoURL" for "${e.providerId}" must be a valid URL string.`)}function q3(e,t){let r=t===pm.Upload,n={displayName:!0,localId:!0,email:!0,password:!0,rawPassword:!0,emailVerified:!0,photoUrl:!0,disabled:!0,disableUser:!0,deleteAttribute:!0,deleteProvider:!0,sanityCheck:!0,phoneNumber:!0,customAttributes:!0,validSince:!0,linkProviderUserInfo:!r,tenantId:r,passwordHash:r,salt:r,createdAt:r,lastLoginAt:r,providerUserInfo:r,mfaInfo:r,mfa:!r};for(let i in e)i in n||delete e[i];if(typeof e.tenantId<"u"&&!ge.isNonEmptyString(e.tenantId))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_TENANT_ID);if(typeof e.displayName<"u"&&!ge.isString(e.displayName))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_DISPLAY_NAME);if((typeof e.localId<"u"||r)&&!ge.isUid(e.localId))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID);if(typeof e.email<"u"&&!ge.isEmail(e.email))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_EMAIL);if(typeof e.phoneNumber<"u"&&!ge.isPhoneNumber(e.phoneNumber))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PHONE_NUMBER);if(typeof e.password<"u"&&!ge.isPassword(e.password))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PASSWORD);if(typeof e.rawPassword<"u"&&!ge.isPassword(e.rawPassword))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PASSWORD);if(typeof e.emailVerified<"u"&&typeof e.emailVerified!="boolean")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_EMAIL_VERIFIED);if(typeof e.photoUrl<"u"&&!ge.isURL(e.photoUrl))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PHOTO_URL);if(typeof e.disabled<"u"&&typeof e.disabled!="boolean")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_DISABLED_FIELD);if(typeof e.validSince<"u"&&!ge.isNumber(e.validSince))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_TOKENS_VALID_AFTER_TIME);if(typeof e.createdAt<"u"&&!ge.isNumber(e.createdAt))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_CREATION_TIME);if(typeof e.lastLoginAt<"u"&&!ge.isNumber(e.lastLoginAt))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_LAST_SIGN_IN_TIME);if(typeof e.disableUser<"u"&&typeof e.disableUser!="boolean")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_DISABLED_FIELD);if(typeof e.customAttributes<"u"){let i;try{i=JSON.parse(e.customAttributes)}catch(a){throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_CLAIMS,a.message)}let o=[];if(Ye.RESERVED_CLAIMS.forEach(a=>{Object.prototype.hasOwnProperty.call(i,a)&&o.push(a)}),o.length>0)throw new T.FirebaseAuthError(T.AuthClientErrorCode.FORBIDDEN_CLAIM,o.length>1?`Developer claims "${o.join('", "')}" are reserved and cannot be specified.`:`Developer claim "${o[0]}" is reserved and cannot be specified.`);if(e.customAttributes.length>lie)throw new T.FirebaseAuthError(T.AuthClientErrorCode.CLAIMS_TOO_LARGE,`Developer claims payload should not exceed ${lie} characters.`)}if(typeof e.passwordHash<"u"&&!ge.isString(e.passwordHash))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PASSWORD_HASH);if(typeof e.salt<"u"&&!ge.isString(e.salt))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PASSWORD_SALT);if(typeof e.providerUserInfo<"u"&&!ge.isArray(e.providerUserInfo))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_DATA);ge.isArray(e.providerUserInfo)&&e.providerUserInfo.forEach(i=>{hie(i)}),typeof e.linkProviderUserInfo<"u"&&hie(e.linkProviderUserInfo);let s=null;if(e.mfaInfo?s=e.mfaInfo:e.mfa&&e.mfa.enrollments&&(s=e.mfa.enrollments),s){if(!ge.isArray(s))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ENROLLED_FACTORS);s.forEach(i=>{dKe(i)})}}Ye.FIREBASE_AUTH_CREATE_SESSION_COOKIE=new dr.ApiSettings(":createSessionCookie","POST").setRequestValidator(e=>{if(!ge.isNonEmptyString(e.idToken))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ID_TOKEN);if(!ge.isNumber(e.validDuration)||e.validDuration<aKe||e.validDuration>cKe)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)}).setResponseValidator(e=>{if(!ge.isNonEmptyString(e.sessionCookie))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR)});Ye.FIREBASE_AUTH_UPLOAD_ACCOUNT=new dr.ApiSettings("/accounts:batchCreate","POST");Ye.FIREBASE_AUTH_DOWNLOAD_ACCOUNT=new dr.ApiSettings("/accounts:batchGet","GET").setRequestValidator(e=>{if(typeof e.nextPageToken<"u"&&!ge.isNonEmptyString(e.nextPageToken))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!ge.isNumber(e.maxResults)||e.maxResults<=0||e.maxResults>B3)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${B3}.`)});Ye.FIREBASE_AUTH_GET_ACCOUNT_INFO=new dr.ApiSettings("/accounts:lookup","POST").setRequestValidator(e=>{if(!e.localId&&!e.email&&!e.phoneNumber&&!e.federatedUserId)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")}).setResponseValidator(e=>{if(!e.users||!e.users.length)throw new T.FirebaseAuthError(T.AuthClientErrorCode.USER_NOT_FOUND)});Ye.FIREBASE_AUTH_GET_ACCOUNTS_INFO=new dr.ApiSettings("/accounts:lookup","POST").setRequestValidator(e=>{if(!e.localId&&!e.email&&!e.phoneNumber&&!e.federatedUserId)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")});Ye.FIREBASE_AUTH_DELETE_ACCOUNT=new dr.ApiSettings("/accounts:delete","POST").setRequestValidator(e=>{if(!e.localId)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")});Ye.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS=new dr.ApiSettings("/accounts:batchDelete","POST").setRequestValidator(e=>{if(!e.localIds)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifiers");if(typeof e.force>"u"||e.force!==!0)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing force=true field")}).setResponseValidator(e=>{(e.errors||[]).forEach(r=>{if(typeof r.index>"u")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server BatchDeleteAccountResponse is missing an errors.index field");if(!r.localId)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server BatchDeleteAccountResponse is missing an errors.localId field")})});Ye.FIREBASE_AUTH_SET_ACCOUNT_INFO=new dr.ApiSettings("/accounts:update","POST").setRequestValidator(e=>{if(typeof e.localId>"u")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier");if(typeof e.tenantId<"u")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,'"tenantId" is an invalid "UpdateRequest" property.');q3(e,pm.Update)}).setResponseValidator(e=>{if(!e.localId)throw new T.FirebaseAuthError(T.AuthClientErrorCode.USER_NOT_FOUND)});Ye.FIREBASE_AUTH_SIGN_UP_NEW_USER=new dr.ApiSettings("/accounts","POST").setRequestValidator(e=>{if(typeof e.customAttributes<"u")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,'"customAttributes" cannot be set when creating a new user.');if(typeof e.validSince<"u")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,'"validSince" cannot be set when creating a new user.');if(typeof e.tenantId<"u")throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,'"tenantId" is an invalid "CreateRequest" property.');q3(e,pm.Create)}).setResponseValidator(e=>{if(!e.localId)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new user")});var fKe=new dr.ApiSettings("/accounts:sendOobCode","POST").setRequestValidator(e=>{if(!ge.isEmail(e.email))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_EMAIL);if(typeof e.newEmail<"u"&&!ge.isEmail(e.newEmail))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_NEW_EMAIL);if(Ye.EMAIL_ACTION_REQUEST_TYPES.indexOf(e.requestType)===-1)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,`"${e.requestType}" is not a supported email action request type.`)}).setResponseValidator(e=>{if(!e.oobLink)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create the email action link")}),hKe=new dr.ApiSettings("/oauthIdpConfigs/{providerId}","GET").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get OIDC configuration")}),pKe=new dr.ApiSettings("/oauthIdpConfigs/{providerId}","DELETE"),mKe=new dr.ApiSettings("/oauthIdpConfigs?oauthIdpConfigId={providerId}","POST").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new OIDC configuration")}),gKe=new dr.ApiSettings("/oauthIdpConfigs/{providerId}?updateMask={updateMask}","PATCH").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update OIDC configuration")}),yKe=new dr.ApiSettings("/oauthIdpConfigs","GET").setRequestValidator(e=>{if(typeof e.pageToken<"u"&&!ge.isNonEmptyString(e.pageToken))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!ge.isNumber(e.pageSize)||e.pageSize<=0||e.pageSize>hm)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${hm}.`)}),EKe=new dr.ApiSettings("/inboundSamlConfigs/{providerId}","GET").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get SAML configuration")}),SKe=new dr.ApiSettings("/inboundSamlConfigs/{providerId}","DELETE"),CKe=new dr.ApiSettings("/inboundSamlConfigs?inboundSamlConfigId={providerId}","POST").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new SAML configuration")}),_Ke=new dr.ApiSettings("/inboundSamlConfigs/{providerId}?updateMask={updateMask}","PATCH").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update SAML configuration")}),bKe=new dr.ApiSettings("/inboundSamlConfigs","GET").setRequestValidator(e=>{if(typeof e.pageToken<"u"&&!ge.isNonEmptyString(e.pageToken))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!ge.isNumber(e.pageSize)||e.pageSize<=0||e.pageSize>hm)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${hm}.`)}),z0=class e{static getErrorCode(t){return ge.isNonNullObject(t)&&t.error&&t.error.message||null}static addUidToRequest(t,r){if(!ge.isUid(t.uid))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID);return r.localId?r.localId.push(t.uid):r.localId=[t.uid],r}static addEmailToRequest(t,r){if(!ge.isEmail(t.email))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_EMAIL);return r.email?r.email.push(t.email):r.email=[t.email],r}static addPhoneToRequest(t,r){if(!ge.isPhoneNumber(t.phoneNumber))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PHONE_NUMBER);return r.phoneNumber?r.phoneNumber.push(t.phoneNumber):r.phoneNumber=[t.phoneNumber],r}static addProviderToRequest(t,r){if(!ge.isNonEmptyString(t.providerId))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID);if(!ge.isNonEmptyString(t.providerUid))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_UID);let n={providerId:t.providerId,rawId:t.providerUid};return r.federatedUserId?r.federatedUserId.push(n):r.federatedUserId=[n],r}constructor(t){if(this.app=t,typeof t!="object"||t===null||!("options"in t))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"First argument passed to admin.auth() must be a valid Firebase app instance.");this.httpClient=new F3(t)}createSessionCookie(t,r){let n={idToken:t,validDuration:Math.floor(r/1e3)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_CREATE_SESSION_COOKIE,n).then(s=>s.sessionCookie)}getAccountInfoByUid(t){if(!ge.isUid(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID));let r={localId:[t]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_GET_ACCOUNT_INFO,r)}getAccountInfoByEmail(t){if(!ge.isEmail(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_EMAIL));let r={email:[t]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_GET_ACCOUNT_INFO,r)}getAccountInfoByPhoneNumber(t){if(!ge.isPhoneNumber(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PHONE_NUMBER));let r={phoneNumber:[t]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_GET_ACCOUNT_INFO,r)}getAccountInfoByFederatedUid(t,r){if(!ge.isNonEmptyString(t)||!ge.isNonEmptyString(r))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID);let n={federatedUserId:[{providerId:t,rawId:r}]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_GET_ACCOUNT_INFO,n)}getAccountInfoByIdentifiers(t){if(t.length===0)return Promise.resolve({users:[]});if(t.length>die)throw new T.FirebaseAuthError(T.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,"`identifiers` parameter must have <= "+die+" entries.");let r={};for(let n of t)if((0,QI.isUidIdentifier)(n))r=e.addUidToRequest(n,r);else if((0,QI.isEmailIdentifier)(n))r=e.addEmailToRequest(n,r);else if((0,QI.isPhoneIdentifier)(n))r=e.addPhoneToRequest(n,r);else if((0,QI.isProviderIdentifier)(n))r=e.addProviderToRequest(n,r);else throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"Unrecognized identifier: "+n);return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_GET_ACCOUNTS_INFO,r)}downloadAccount(t=B3,r){let n={maxResults:t,nextPageToken:r};return typeof n.nextPageToken>"u"&&delete n.nextPageToken,this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_DOWNLOAD_ACCOUNT,n).then(s=>(s.users||(s.users=[]),s))}uploadAccount(t,r){let n=new k3.UserImportBuilder(t,r,i=>{q3(i,pm.Upload)}),s=n.buildRequest();if(ge.isArray(t)&&t.length>uie)throw new T.FirebaseAuthError(T.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,`A maximum of ${uie} users can be imported at once.`);return!s.users||s.users.length===0?Promise.resolve(n.buildResponse([])):this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_UPLOAD_ACCOUNT,s).then(i=>{let o=i.error||[];return n.buildResponse(o)})}deleteAccount(t){if(!ge.isUid(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID));let r={localId:t};return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_DELETE_ACCOUNT,r)}deleteAccounts(t,r){if(t.length===0)return Promise.resolve({});if(t.length>fie)throw new T.FirebaseAuthError(T.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,"`uids` parameter must have <= "+fie+" entries.");let n={localIds:[],force:r};return t.forEach(s=>{if(!ge.isUid(s))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID);n.localIds.push(s)}),this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS,n)}setCustomUserClaims(t,r){if(ge.isUid(t)){if(!ge.isObject(r))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"CustomUserClaims argument must be an object or null."))}else return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID));r===null&&(r={});let n={localId:t,customAttributes:JSON.stringify(r)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_SET_ACCOUNT_INFO,n).then(s=>s.localId)}updateExistingAccount(t,r){if(ge.isUid(t))if(ge.isNonNullObject(r)){if(ge.isNonNullObject(r.providerToLink)){if(!ge.isNonEmptyString(r.providerToLink.providerId))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"providerToLink.providerId of properties argument must be a non-empty string.");if(!ge.isNonEmptyString(r.providerToLink.uid))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"providerToLink.uid of properties argument must be a non-empty string.")}else if(typeof r.providersToUnlink<"u"){if(!ge.isArray(r.providersToUnlink))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"providersToUnlink of properties argument must be an array of strings.");r.providersToUnlink.forEach(i=>{if(!ge.isNonEmptyString(i))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"providersToUnlink of properties argument must be an array of strings.")})}}else return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"Properties argument must be a non-null object."));else return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID));let n=(0,YI.deepCopy)(r);n.localId=t;let s={displayName:"DISPLAY_NAME",photoURL:"PHOTO_URL"};n.deleteAttribute=[];for(let i in s)n[i]===null&&(n.deleteAttribute.push(s[i]),delete n[i]);if(n.deleteAttribute.length===0&&delete n.deleteAttribute,n.phoneNumber===null&&(n.deleteProvider?n.deleteProvider.push("phone"):n.deleteProvider=["phone"],delete n.phoneNumber),typeof n.providerToLink<"u"&&(n.linkProviderUserInfo=(0,YI.deepCopy)(n.providerToLink),delete n.providerToLink,n.linkProviderUserInfo.rawId=n.linkProviderUserInfo.uid,delete n.linkProviderUserInfo.uid),typeof n.providersToUnlink<"u"&&(ge.isArray(n.deleteProvider)||(n.deleteProvider=[]),n.deleteProvider=n.deleteProvider.concat(n.providersToUnlink),delete n.providersToUnlink),typeof n.photoURL<"u"&&(n.photoUrl=n.photoURL,delete n.photoURL),typeof n.disabled<"u"&&(n.disableUser=n.disabled,delete n.disabled),ge.isNonNullObject(n.multiFactor)){if(n.multiFactor.enrolledFactors===null)n.mfa={};else if(ge.isArray(n.multiFactor.enrolledFactors)){n.mfa={enrollments:[]};try{n.multiFactor.enrolledFactors.forEach(i=>{n.mfa.enrollments.push((0,k3.convertMultiFactorInfoToServerFormat)(i))})}catch(i){return Promise.reject(i)}n.mfa.enrollments.length===0&&delete n.mfa.enrollments}delete n.multiFactor}return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_SET_ACCOUNT_INFO,n).then(i=>i.localId)}revokeRefreshTokens(t){if(!ge.isUid(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_UID));let r={localId:t,validSince:Math.floor(new Date().getTime()/1e3)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_SET_ACCOUNT_INFO,r).then(n=>n.localId)}createNewAccount(t){if(!ge.isNonNullObject(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"Properties argument must be a non-null object."));let r=(0,YI.deepCopy)(t);if(typeof r.photoURL<"u"&&(r.photoUrl=r.photoURL,delete r.photoURL),typeof r.uid<"u"&&(r.localId=r.uid,delete r.uid),ge.isNonNullObject(r.multiFactor)){if(ge.isNonEmptyArray(r.multiFactor.enrolledFactors)){let n=[];try{r.multiFactor.enrolledFactors.forEach(s=>{if("enrollmentTime"in s)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,'"enrollmentTime" is not supported when adding second factors via "createUser()"');if("uid"in s)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,'"uid" is not supported when adding second factors via "createUser()"');n.push((0,k3.convertMultiFactorInfoToServerFormat)(s))})}catch(s){return Promise.reject(s)}r.mfaInfo=n}delete r.multiFactor}return this.invokeRequestHandler(this.getAuthUrlBuilder(),Ye.FIREBASE_AUTH_SIGN_UP_NEW_USER,r).then(n=>n.localId)}getEmailActionLink(t,r,n,s){let i={requestType:t,email:r,returnOobLink:!0,...typeof s<"u"&&{newEmail:s}};if(typeof n>"u"&&t==="EMAIL_SIGNIN")return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"`actionCodeSettings` is required when `requestType` === 'EMAIL_SIGNIN'"));if(typeof n<"u"||t==="EMAIL_SIGNIN")try{let o=new nKe.ActionCodeSettingsBuilder(n);i=(0,YI.deepExtend)(i,o.buildRequest())}catch(o){return Promise.reject(o)}return t==="VERIFY_AND_CHANGE_EMAIL"&&typeof s>"u"?Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,"`newEmail` is required when `requestType` === 'VERIFY_AND_CHANGE_EMAIL'")):this.invokeRequestHandler(this.getAuthUrlBuilder(),fKe,i).then(o=>o.oobLink)}getOAuthIdpConfig(t){return Ni.OIDCConfig.isProviderId(t)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),hKe,{},{providerId:t}):Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID))}listOAuthIdpConfigs(t=hm,r){let n={pageSize:t};return typeof r<"u"&&(n.pageToken=r),this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),yKe,n).then(s=>(s.oauthIdpConfigs||(s.oauthIdpConfigs=[],delete s.nextPageToken),s))}deleteOAuthIdpConfig(t){return Ni.OIDCConfig.isProviderId(t)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),pKe,{},{providerId:t}).then(()=>{}):Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID))}createOAuthIdpConfig(t){let r;try{r=Ni.OIDCConfig.buildServerRequest(t)||{}}catch(s){return Promise.reject(s)}let n=t.providerId;return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),mKe,r,{providerId:n}).then(s=>{if(!Ni.OIDCConfig.getProviderIdFromResourceName(s.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new OIDC provider configuration");return s})}updateOAuthIdpConfig(t,r){if(!Ni.OIDCConfig.isProviderId(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID));let n;try{n=Ni.OIDCConfig.buildServerRequest(r,!0)||{}}catch(i){return Promise.reject(i)}let s=Ro.generateUpdateMask(n);return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),gKe,n,{providerId:t,updateMask:s.join(",")}).then(i=>{if(!Ni.OIDCConfig.getProviderIdFromResourceName(i.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update OIDC provider configuration");return i})}getInboundSamlConfig(t){return Ni.SAMLConfig.isProviderId(t)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),EKe,{},{providerId:t}):Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID))}listInboundSamlConfigs(t=hm,r){let n={pageSize:t};return typeof r<"u"&&(n.pageToken=r),this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),bKe,n).then(s=>(s.inboundSamlConfigs||(s.inboundSamlConfigs=[],delete s.nextPageToken),s))}deleteInboundSamlConfig(t){return Ni.SAMLConfig.isProviderId(t)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),SKe,{},{providerId:t}).then(()=>{}):Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID))}createInboundSamlConfig(t){let r;try{r=Ni.SAMLConfig.buildServerRequest(t)||{}}catch(s){return Promise.reject(s)}let n=t.providerId;return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),CKe,r,{providerId:n}).then(s=>{if(!Ni.SAMLConfig.getProviderIdFromResourceName(s.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new SAML provider configuration");return s})}updateInboundSamlConfig(t,r){if(!Ni.SAMLConfig.isProviderId(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PROVIDER_ID));let n;try{n=Ni.SAMLConfig.buildServerRequest(r,!0)||{}}catch(i){return Promise.reject(i)}let s=Ro.generateUpdateMask(n);return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),_Ke,n,{providerId:t,updateMask:s.join(",")}).then(i=>{if(!Ni.SAMLConfig.getProviderIdFromResourceName(i.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update SAML provider configuration");return i})}invokeRequestHandler(t,r,n,s){return t.getUrl(r.getEndpoint(),s).then(i=>{n&&r.getRequestValidator()(n);let o={method:r.getHttpMethod(),url:i,headers:iKe,data:n,timeout:oKe};return this.httpClient.send(o)}).then(i=>(r.getResponseValidator()(i.data),i.data)).catch(i=>{if(i instanceof dr.RequestResponseError){let o=i.response.data,a=e.getErrorCode(o);throw a?T.FirebaseAuthError.fromServerError(a,void 0,o):new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"Error returned from server: "+o+". Additionally, an internal error occurred while attempting to extract the errorcode from the error.")}throw i})}getAuthUrlBuilder(){return this.authUrlBuilder||(this.authUrlBuilder=this.newAuthUrlBuilder()),this.authUrlBuilder}getProjectConfigUrlBuilder(){return this.projectConfigUrlBuilder||(this.projectConfigUrlBuilder=this.newProjectConfigUrlBuilder()),this.projectConfigUrlBuilder}};Ye.AbstractAuthRequestHandler=z0;var vKe=new dr.ApiSettings("/config","GET").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get project config")}),AKe=new dr.ApiSettings("/config?updateMask={updateMask}","PATCH").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update project config")}),xKe=new dr.ApiSettings("/tenants/{tenantId}","GET").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get tenant")}),IKe=new dr.ApiSettings("/tenants/{tenantId}","DELETE"),wKe=new dr.ApiSettings("/tenants/{tenantId}?updateMask={updateMask}","PATCH").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name)||!ZI.Tenant.getTenantIdFromResourceName(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update tenant")}),TKe=new dr.ApiSettings("/tenants","GET").setRequestValidator(e=>{if(typeof e.pageToken<"u"&&!ge.isNonEmptyString(e.pageToken))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!ge.isNumber(e.pageSize)||e.pageSize<=0||e.pageSize>L3)throw new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive non-zero number that does not exceed the allowed ${L3}.`)}),RKe=new dr.ApiSettings("/tenants","POST").setResponseValidator(e=>{if(!ge.isNonEmptyString(e.name)||!ZI.Tenant.getTenantIdFromResourceName(e.name))throw new T.FirebaseAuthError(T.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new tenant")}),M3=class extends z0{constructor(t){super(t),this.authResourceUrlBuilder=new fm(t,"v2")}newAuthUrlBuilder(){return new fm(this.app,"v1")}newProjectConfigUrlBuilder(){return new fm(this.app,"v2")}getProjectConfig(){return this.invokeRequestHandler(this.authResourceUrlBuilder,vKe,{},{}).then(t=>t)}updateProjectConfig(t){try{let r=sKe.ProjectConfig.buildServerRequest(t),n=Ro.generateUpdateMask(r);return this.invokeRequestHandler(this.authResourceUrlBuilder,AKe,r,{updateMask:n.join(",")}).then(s=>s)}catch(r){return Promise.reject(r)}}getTenant(t){return ge.isNonEmptyString(t)?this.invokeRequestHandler(this.authResourceUrlBuilder,xKe,{},{tenantId:t}).then(r=>r):Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_TENANT_ID))}listTenants(t=L3,r){let n={pageSize:t,pageToken:r};return typeof n.pageToken>"u"&&delete n.pageToken,this.invokeRequestHandler(this.authResourceUrlBuilder,TKe,n).then(s=>(s.tenants||(s.tenants=[],delete s.nextPageToken),s))}deleteTenant(t){return ge.isNonEmptyString(t)?this.invokeRequestHandler(this.authResourceUrlBuilder,IKe,void 0,{tenantId:t}).then(()=>{}):Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_TENANT_ID))}createTenant(t){try{let r=ZI.Tenant.buildServerRequest(t,!0);return this.invokeRequestHandler(this.authResourceUrlBuilder,RKe,r).then(n=>n)}catch(r){return Promise.reject(r)}}updateTenant(t,r){if(!ge.isNonEmptyString(t))return Promise.reject(new T.FirebaseAuthError(T.AuthClientErrorCode.INVALID_TENANT_ID));try{let n=ZI.Tenant.buildServerRequest(r,!1),s=Ro.generateUpdateMask(n,["testPhoneNumbers"]);return this.invokeRequestHandler(this.authResourceUrlBuilder,wKe,n,{tenantId:t,updateMask:s.join(",")}).then(i=>i)}catch(n){return Promise.reject(n)}}};Ye.AuthRequestHandler=M3;var U3=class extends z0{constructor(t,r){super(t),this.tenantId=r}newAuthUrlBuilder(){return new ew(this.app,"v1",this.tenantId)}newProjectConfigUrlBuilder(){return new ew(this.app,"v2",this.tenantId)}uploadAccount(t,r){return t.forEach((n,s)=>{if(ge.isNonEmptyString(n.tenantId)&&n.tenantId!==this.tenantId)throw new T.FirebaseAuthError(T.AuthClientErrorCode.MISMATCHING_TENANT_ID,`UserRecord of index "${s}" has mismatching tenant ID "${n.tenantId}"`)}),super.uploadAccount(t,r)}};Ye.TenantAwareAuthRequestHandler=U3;function V3(){return process.env.FIREBASE_AUTH_EMULATOR_HOST}function tw(){return!!V3()}Ye.useEmulator=tw});var j3=S(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.CryptoSignerErrorCode=No.CryptoSignerError=No.cryptoSignerFromApp=No.IAMSigner=No.ServiceAccountSigner=void 0;var NKe=cm(),H3=d0(),gie=Vn(),yie="RS256",rw=class{constructor(t){if(this.credential=t,this.algorithm=yie,!t)throw new zc({code:$i.INVALID_CREDENTIAL,message:"INTERNAL ASSERT: Must provide a service account credential to initialize ServiceAccountSigner."})}sign(t){let n=require("crypto").createSign("RSA-SHA256");return n.update(t),Promise.resolve(n.sign(this.credential.privateKey))}getAccountId(){return Promise.resolve(this.credential.clientEmail)}};No.ServiceAccountSigner=rw;var nw=class{constructor(t,r){if(this.algorithm=yie,!t)throw new zc({code:$i.INVALID_ARGUMENT,message:"INTERNAL ASSERT: Must provide a HTTP client to initialize IAMSigner."});if(typeof r<"u"&&!gie.isNonEmptyString(r))throw new zc({code:$i.INVALID_ARGUMENT,message:"INTERNAL ASSERT: Service account ID must be undefined or a non-empty string."});this.httpClient=t,this.serviceAccountId=r}sign(t){return this.getAccountId().then(r=>{let n={method:"POST",url:`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`,data:{payload:t.toString("base64")}};return this.httpClient.send(n)}).then(r=>Buffer.from(r.data.signedBlob,"base64")).catch(r=>{throw r instanceof H3.RequestResponseError?new zc({code:$i.SERVER_ERROR,message:r.message,cause:r}):r})}getAccountId(){if(gie.isNonEmptyString(this.serviceAccountId))return Promise.resolve(this.serviceAccountId);let t={method:"GET",url:"http://metadata/computeMetadata/v1/instance/service-accounts/default/email",headers:{"Metadata-Flavor":"Google"}};return new H3.HttpClient().send(t).then(n=>{if(!n.text)throw new zc({code:$i.INTERNAL_ERROR,message:"HTTP Response missing payload"});return this.serviceAccountId=n.text,n.text}).catch(n=>{throw new zc({code:$i.INVALID_CREDENTIAL,message:`Failed to determine service account. Make sure to initialize the SDK with a service account credential. Alternatively specify a service account with iam.serviceAccounts.signBlob permission. Original error: ${n}`})})}};No.IAMSigner=nw;function PKe(e){let t=e.options.credential;return t instanceof NKe.ServiceAccountCredential?new rw(t):new nw(new H3.AuthorizedHttpClient(e),e.options.serviceAccountId)}No.cryptoSignerFromApp=PKe;var zc=class e extends Error{constructor(t){super(t.message),this.errorInfo=t,this.__proto__=e.prototype}get code(){return this.errorInfo.code}get message(){return this.errorInfo.message}get cause(){return this.errorInfo.cause}};No.CryptoSignerError=zc;var $i=class{};No.CryptoSignerErrorCode=$i;$i.INVALID_ARGUMENT="invalid-argument";$i.INTERNAL_ERROR="internal-error";$i.INVALID_CREDENTIAL="invalid-credential";$i.SERVER_ERROR="server-error"});var Sie=S(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.handleCryptoSignerError=oa.FirebaseTokenGenerator=oa.EmulatedSigner=oa.BLACKLISTED_CLAIMS=void 0;var di=as(),sw=j3(),mm=Vn(),OKe=du(),DKe="none",kKe=3600;oa.BLACKLISTED_CLAIMS=["acr","amr","at_hash","aud","auth_time","azp","cnf","c_hash","exp","iat","iss","jti","nbf","nonce"];var BKe="https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit",K3=class{constructor(){this.algorithm=DKe}sign(t){return Promise.resolve(Buffer.from(""))}getAccountId(){return Promise.resolve("firebase-auth-emulator@example.com")}};oa.EmulatedSigner=K3;var z3=class{constructor(t,r){if(this.tenantId=r,!mm.isNonNullObject(t))throw new di.FirebaseAuthError(di.AuthClientErrorCode.INVALID_CREDENTIAL,"INTERNAL ASSERT: Must provide a CryptoSigner to use FirebaseTokenGenerator.");if(typeof this.tenantId<"u"&&!mm.isNonEmptyString(this.tenantId))throw new di.FirebaseAuthError(di.AuthClientErrorCode.INVALID_ARGUMENT,"`tenantId` argument must be a non-empty string.");this.signer=t}createCustomToken(t,r){let n;if(mm.isNonEmptyString(t)?t.length>128?n="`uid` argument must a uid with less than or equal to 128 characters.":this.isDeveloperClaimsValid_(r)||(n="`developerClaims` argument must be a valid, non-null object containing the developer claims."):n="`uid` argument must be a non-empty string uid.",n)throw new di.FirebaseAuthError(di.AuthClientErrorCode.INVALID_ARGUMENT,n);let s={};if(typeof r<"u"){for(let i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(oa.BLACKLISTED_CLAIMS.indexOf(i)!==-1)throw new di.FirebaseAuthError(di.AuthClientErrorCode.INVALID_ARGUMENT,`Developer claim "${i}" is reserved and cannot be specified.`);s[i]=r[i]}}return this.signer.getAccountId().then(i=>{let o={alg:this.signer.algorithm,typ:"JWT"},a=Math.floor(Date.now()/1e3),c={aud:BKe,iat:a,exp:a+kKe,iss:i,sub:i,uid:t};this.tenantId&&(c.tenant_id=this.tenantId),Object.keys(s).length>0&&(c.claims=s);let l=`${this.encodeSegment(o)}.${this.encodeSegment(c)}`,d=this.signer.sign(Buffer.from(l));return Promise.all([l,d])}).then(([i,o])=>`${i}.${this.encodeSegment(o)}`).catch(i=>{throw Eie(i)})}encodeSegment(t){let r=t instanceof Buffer?t:Buffer.from(JSON.stringify(t));return(0,OKe.toWebSafeBase64)(r).replace(/=+$/,"")}isDeveloperClaimsValid_(t){return typeof t>"u"?!0:mm.isNonNullObject(t)}};oa.FirebaseTokenGenerator=z3;function Eie(e){if(!(e instanceof sw.CryptoSignerError))return e;if(e.code===sw.CryptoSignerErrorCode.SERVER_ERROR&&mm.isNonNullObject(e.cause)){let r=e.cause.response.data;if(mm.isNonNullObject(r)&&r.error){let n=r.error.status,i=`${r.error.message}; Please refer to https://firebase.google.com/docs/auth/admin/create-custom-tokens for more details on how to use and troubleshoot this feature.`;return di.FirebaseAuthError.fromServerError(n,i,r)}return new di.FirebaseAuthError(di.AuthClientErrorCode.INTERNAL_ERROR,"Error returned from server: "+r+". Additionally, an internal error occurred while attempting to extract the errorcode from the error.")}return new di.FirebaseAuthError(LKe(e.code),e.message)}oa.handleCryptoSignerError=Eie;function LKe(e){switch(e){case sw.CryptoSignerErrorCode.INVALID_CREDENTIAL:return di.AuthClientErrorCode.INVALID_CREDENTIAL;case sw.CryptoSignerErrorCode.INVALID_ARGUMENT:return di.AuthClientErrorCode.INVALID_ARGUMENT;default:return di.AuthClientErrorCode.INTERNAL_ERROR}}});var $3=S((aft,Cie)=>{function FKe(e){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=s,r.enabled=a,r.humanize=O2(),r.destroy=l,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let f=0;for(let h=0;h<d.length;h++)f=(f<<5)-f+d.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(d){let f,h=null,p,m;function E(...b){if(!E.enabled)return;let A=E,R=Number(new Date),D=R-(f||R);A.diff=D,A.prev=f,A.curr=R,f=R,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let K=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(G,ye)=>{if(G==="%%")return"%";K++;let he=r.formatters[ye];if(typeof he=="function"){let xe=b[K];G=he.call(A,xe),b.splice(K,1),K--}return G}),r.formatArgs.call(A,b),(A.log||r.log).apply(A,b)}return E.namespace=d,E.useColors=r.useColors(),E.color=r.selectColor(d),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(d)),m),set:b=>{h=b}}),typeof r.init=="function"&&r.init(E),E}function n(d,f){let h=r(this.namespace+(typeof f>"u"?":":f)+d);return h.log=this.log,h}function s(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let h of f)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function i(d,f){let h=0,p=0,m=-1,E=0;for(;h<d.length;)if(p<f.length&&(f[p]===d[h]||f[p]==="*"))f[p]==="*"?(m=p,E=h,p++):(h++,p++);else if(m!==-1)p=m+1,E++,h=E;else return!1;for(;p<f.length&&f[p]==="*";)p++;return p===f.length}function o(){let d=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),d}function a(d){for(let f of r.skips)if(i(d,f))return!1;for(let f of r.names)if(i(d,f))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Cie.exports=FKe});var _ie=S((Pi,iw)=>{Pi.formatArgs=UKe;Pi.save=qKe;Pi.load=VKe;Pi.useColors=MKe;Pi.storage=HKe();Pi.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Pi.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function MKe(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function UKe(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+iw.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),e.splice(n,0,t)}Pi.log=console.debug||console.log||(()=>{});function qKe(e){try{e?Pi.storage.setItem("debug",e):Pi.storage.removeItem("debug")}catch{}}function VKe(){let e;try{e=Pi.storage.getItem("debug")||Pi.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function HKe(){try{return localStorage}catch{}}iw.exports=$3()(Pi);var{formatters:jKe}=iw.exports;jKe.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var vie=S((fs,aw)=>{var KKe=require("tty"),ow=require("util");fs.init=YKe;fs.log=WKe;fs.formatArgs=$Ke;fs.save=JKe;fs.load=XKe;fs.useColors=zKe;fs.destroy=ow.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");fs.colors=[6,2,3,4,5,1];try{let e=require("supports-color");e&&(e.stderr||e).level>=2&&(fs.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}fs.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function zKe(){return"colors"in fs.inspectOpts?!!fs.inspectOpts.colors:KKe.isatty(process.stderr.fd)}function $Ke(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${t} \x1B[0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(s+"m+"+aw.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=GKe()+t+" "+e[0]}function GKe(){return fs.inspectOpts.hideDate?"":new Date().toISOString()+" "}function WKe(...e){return process.stderr.write(ow.formatWithOptions(fs.inspectOpts,...e)+`
`)}function JKe(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function XKe(){return process.env.DEBUG}function YKe(e){e.inspectOpts={};let t=Object.keys(fs.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=fs.inspectOpts[t[r]]}aw.exports=$3()(fs);var{formatters:bie}=aw.exports;bie.o=function(e){return this.inspectOpts.colors=this.useColors,ow.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};bie.O=function(e){return this.inspectOpts.colors=this.useColors,ow.inspect(e,this.inspectOpts)}});var cw=S((cft,G3)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?G3.exports=_ie():G3.exports=vie()});var J3=S(W3=>{"use strict";Object.defineProperty(W3,"__esModule",{value:!0});var QKe=require("crypto"),ZKe=(e,t)=>(0,QKe.createHash)(e).update(t).digest();W3.default=ZKe});var hn=S(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.concatKdf=Hn.lengthAndInput=Hn.uint32be=Hn.uint64be=Hn.p2s=Hn.concat=Hn.decoder=Hn.encoder=void 0;var eze=J3();Hn.encoder=new TextEncoder;Hn.decoder=new TextDecoder;var lw=2**32;function Y3(...e){let t=e.reduce((s,{length:i})=>s+i,0),r=new Uint8Array(t),n=0;return e.forEach(s=>{r.set(s,n),n+=s.length}),r}Hn.concat=Y3;function tze(e,t){return Y3(Hn.encoder.encode(e),new Uint8Array([0]),t)}Hn.p2s=tze;function X3(e,t,r){if(t<0||t>=lw)throw new RangeError(`value must be >= 0 and <= ${lw-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],r)}function rze(e){let t=Math.floor(e/lw),r=e%lw,n=new Uint8Array(8);return X3(n,t,0),X3(n,r,4),n}Hn.uint64be=rze;function Q3(e){let t=new Uint8Array(4);return X3(t,e),t}Hn.uint32be=Q3;function nze(e){return Y3(Q3(e.length),e)}Hn.lengthAndInput=nze;async function sze(e,t,r){let n=Math.ceil((t>>3)/32),s=new Uint8Array(n*32);for(let i=0;i<n;i++){let o=new Uint8Array(4+e.length+r.length);o.set(Q3(i+1)),o.set(e,4),o.set(r,4+e.length),s.set(await(0,eze.default)("sha256",o),i*32)}return s.slice(0,t>>3)}Hn.concatKdf=sze});var $s=S(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.decode=aa.encode=aa.encodeBase64=aa.decodeBase64=void 0;var gm=require("buffer"),ize=hn(),Aie;function oze(e){let t=e;return t instanceof Uint8Array&&(t=ize.decoder.decode(t)),t}gm.Buffer.isEncoding("base64url")?aa.encode=Aie=e=>gm.Buffer.from(e).toString("base64url"):aa.encode=Aie=e=>gm.Buffer.from(e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var aze=e=>gm.Buffer.from(e,"base64");aa.decodeBase64=aze;var cze=e=>gm.Buffer.from(e).toString("base64");aa.encodeBase64=cze;var lze=e=>gm.Buffer.from(oze(e),"base64");aa.decode=lze});var tt=S(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.JWSSignatureVerificationFailed=jt.JWKSTimeout=jt.JWKSMultipleMatchingKeys=jt.JWKSNoMatchingKey=jt.JWKSInvalid=jt.JWKInvalid=jt.JWTInvalid=jt.JWSInvalid=jt.JWEInvalid=jt.JWEDecompressionFailed=jt.JWEDecryptionFailed=jt.JOSENotSupported=jt.JOSEAlgNotAllowed=jt.JWTExpired=jt.JWTClaimValidationFailed=jt.JOSEError=void 0;var hs=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}};jt.JOSEError=hs;var Z3=class extends hs{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}};jt.JWTClaimValidationFailed=Z3;var eF=class extends hs{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}};jt.JWTExpired=eF;var tF=class extends hs{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}};jt.JOSEAlgNotAllowed=tF;var rF=class extends hs{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}};jt.JOSENotSupported=rF;var nF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}};jt.JWEDecryptionFailed=nF;var sF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}};jt.JWEDecompressionFailed=sF;var iF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}};jt.JWEInvalid=iF;var oF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}};jt.JWSInvalid=oF;var aF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};jt.JWTInvalid=aF;var cF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}};jt.JWKInvalid=cF;var lF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}};jt.JWKSInvalid=lF;var uF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}};jt.JWKSNoMatchingKey=uF;var dF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}};jt.JWKSMultipleMatchingKeys=dF;var fF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}};jt.JWKSTimeout=fF;var hF=class extends hs{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}};jt.JWSSignatureVerificationFailed=hF});var G0=S(uw=>{"use strict";Object.defineProperty(uw,"__esModule",{value:!0});uw.default=void 0;var uze=require("crypto");Object.defineProperty(uw,"default",{enumerable:!0,get:function(){return uze.randomFillSync}})});var dw=S(W0=>{"use strict";Object.defineProperty(W0,"__esModule",{value:!0});W0.bitLength=void 0;var dze=tt(),fze=G0();function xie(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new dze.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}W0.bitLength=xie;W0.default=e=>(0,fze.default)(new Uint8Array(xie(e)>>3))});var mF=S(pF=>{"use strict";Object.defineProperty(pF,"__esModule",{value:!0});var hze=tt(),pze=dw(),mze=(e,t)=>{if(t.length<<3!==(0,pze.bitLength)(e))throw new hze.JWEInvalid("Invalid Initialization Vector length")};pF.default=mze});var Po=S(gF=>{"use strict";Object.defineProperty(gF,"__esModule",{value:!0});var gze=require("crypto"),Iie=require("util");gF.default=Iie.types.isKeyObject?e=>Iie.types.isKeyObject(e):e=>e!=null&&e instanceof gze.KeyObject});var SF=S(EF=>{"use strict";Object.defineProperty(EF,"__esModule",{value:!0});var yF=tt(),yze=Po(),Eze=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new yF.JOSENotSupported(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let n=t.byteLength<<3;if(n!==r)throw new yF.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${n} bits`);return}if((0,yze.default)(t)&&t.type==="secret"){let n=t.symmetricKeySize<<3;if(n!==r)throw new yF.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${n} bits`);return}throw new TypeError("Invalid Content Encryption Key type")};EF.default=Eze});var wie=S(CF=>{"use strict";Object.defineProperty(CF,"__esModule",{value:!0});var Sze=require("crypto"),Cze=Sze.timingSafeEqual;CF.default=Cze});var bF=S(_F=>{"use strict";Object.defineProperty(_F,"__esModule",{value:!0});var _ze=require("crypto"),Tie=hn();function bze(e,t,r,n,s,i){let o=(0,Tie.concat)(e,t,r,(0,Tie.uint64be)(e.length<<3)),a=(0,_ze.createHmac)(`sha${n}`,s);return a.update(o),a.digest().slice(0,i>>3)}_F.default=bze});var Oo=S(J0=>{"use strict";Object.defineProperty(J0,"__esModule",{value:!0});J0.isCryptoKey=void 0;var vze=require("crypto"),Rie=require("util"),Aze=vze.webcrypto;J0.default=Aze;J0.isCryptoKey=Rie.types.isCryptoKey?e=>Rie.types.isCryptoKey(e):e=>!1});var pu=S(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.checkEncCryptoKey=ym.checkSigCryptoKey=void 0;function Is(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function hu(e,t){return e.name===t}function fw(e){return parseInt(e.name.slice(4),10)}function xze(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Nie(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function Ize(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!hu(e.algorithm,"HMAC"))throw Is("HMAC");let n=parseInt(t.slice(2),10);if(fw(e.algorithm.hash)!==n)throw Is(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!hu(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Is("RSASSA-PKCS1-v1_5");let n=parseInt(t.slice(2),10);if(fw(e.algorithm.hash)!==n)throw Is(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!hu(e.algorithm,"RSA-PSS"))throw Is("RSA-PSS");let n=parseInt(t.slice(2),10);if(fw(e.algorithm.hash)!==n)throw Is(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw Is("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!hu(e.algorithm,"ECDSA"))throw Is("ECDSA");let n=xze(t);if(e.algorithm.namedCurve!==n)throw Is(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Nie(e,r)}ym.checkSigCryptoKey=Ize;function wze(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!hu(e.algorithm,"AES-GCM"))throw Is("AES-GCM");let n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Is(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!hu(e.algorithm,"AES-KW"))throw Is("AES-KW");let n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Is(n,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Is("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!hu(e.algorithm,"PBKDF2"))throw Is("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!hu(e.algorithm,"RSA-OAEP"))throw Is("RSA-OAEP");let n=parseInt(t.slice(9),10)||1;if(fw(e.algorithm.hash)!==n)throw Is(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Nie(e,r)}ym.checkEncCryptoKey=wze});var Do=S(X0=>{"use strict";Object.defineProperty(X0,"__esModule",{value:!0});X0.withAlg=void 0;function Pie(e,t,...r){if(r.length>2){let n=r.pop();e+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}X0.default=(e,...t)=>Pie("Key must be ",e,...t);function Tze(e,t,...r){return Pie(`Key for the ${e} algorithm must be `,t,...r)}X0.withAlg=Tze});var hw=S(AF=>{"use strict";Object.defineProperty(AF,"__esModule",{value:!0});var Rze=require("crypto"),vF;AF.default=e=>(vF||(vF=new Set((0,Rze.getCiphers)())),vF.has(e))});var ko=S(Y0=>{"use strict";Object.defineProperty(Y0,"__esModule",{value:!0});Y0.types=void 0;var pw=Oo(),Nze=Po();Y0.default=e=>(0,Nze.default)(e)||(0,pw.isCryptoKey)(e);var Oie=["KeyObject"];Y0.types=Oie;(globalThis.CryptoKey||!(pw.default===null||pw.default===void 0)&&pw.default.CryptoKey)&&Oie.push("CryptoKey")});var wF=S(IF=>{"use strict";Object.defineProperty(IF,"__esModule",{value:!0});var xF=require("crypto"),Pze=mF(),Oze=SF(),Dze=hn(),Em=tt(),kze=wie(),Bze=bF(),Lze=Oo(),Fze=pu(),Die=Po(),Mze=Do(),kie=hw(),Uze=ko();function qze(e,t,r,n,s,i){let o=parseInt(e.slice(1,4),10);(0,Die.default)(t)&&(t=t.export());let a=t.subarray(o>>3),c=t.subarray(0,o>>3),l=parseInt(e.slice(-3),10),d=`aes-${o}-cbc`;if(!(0,kie.default)(d))throw new Em.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let f=(0,Bze.default)(i,n,r,l,c,o),h;try{h=(0,kze.default)(s,f)}catch{}if(!h)throw new Em.JWEDecryptionFailed;let p;try{let m=(0,xF.createDecipheriv)(d,a,n);p=(0,Dze.concat)(m.update(r),m.final())}catch{}if(!p)throw new Em.JWEDecryptionFailed;return p}function Vze(e,t,r,n,s,i){let a=`aes-${parseInt(e.slice(1,4),10)}-gcm`;if(!(0,kie.default)(a))throw new Em.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);try{let c=(0,xF.createDecipheriv)(a,t,n,{authTagLength:16});c.setAuthTag(s),i.byteLength&&c.setAAD(i,{plaintextLength:r.length});let l=c.update(r);return c.final(),l}catch{throw new Em.JWEDecryptionFailed}}var Hze=(e,t,r,n,s,i)=>{let o;if((0,Lze.isCryptoKey)(t))(0,Fze.checkEncCryptoKey)(t,e,"decrypt"),o=xF.KeyObject.from(t);else if(t instanceof Uint8Array||(0,Die.default)(t))o=t;else throw new TypeError((0,Mze.default)(t,...Uze.types,"Uint8Array"));switch((0,Oze.default)(e,o),(0,Pze.default)(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return qze(e,o,r,n,s,i);case"A128GCM":case"A192GCM":case"A256GCM":return Vze(e,o,r,n,s,i);default:throw new Em.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};IF.default=Hze});var TF=S(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.deflate=Sm.inflate=void 0;var Bie=require("util"),Lie=require("zlib"),jze=tt(),Kze=(0,Bie.promisify)(Lie.inflateRaw),zze=(0,Bie.promisify)(Lie.deflateRaw),$ze=e=>Kze(e,{maxOutputLength:25e4}).catch(()=>{throw new jze.JWEDecompressionFailed});Sm.inflate=$ze;var Gze=e=>zze(e);Sm.deflate=Gze});var Cm=S(RF=>{"use strict";Object.defineProperty(RF,"__esModule",{value:!0});var Wze=(...e)=>{let t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(let n of t){let s=Object.keys(n);if(!r||r.size===0){r=new Set(s);continue}for(let i of s){if(r.has(i))return!1;r.add(i)}}return!0};RF.default=Wze});var Oi=S(NF=>{"use strict";Object.defineProperty(NF,"__esModule",{value:!0});function Jze(e){return typeof e=="object"&&e!==null}function Xze(e){if(!Jze(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}NF.default=Xze});var gw=S(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.unwrap=_m.wrap=void 0;var Fie=require("buffer"),mw=require("crypto"),Mie=tt(),Uie=hn(),Yze=Oo(),Qze=pu(),Zze=Po(),e$e=Do(),qie=hw(),t$e=ko();function Vie(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function Hie(e,t,r){if((0,Zze.default)(e))return e;if(e instanceof Uint8Array)return(0,mw.createSecretKey)(e);if((0,Yze.isCryptoKey)(e))return(0,Qze.checkEncCryptoKey)(e,t,r),mw.KeyObject.from(e);throw new TypeError((0,e$e.default)(e,...t$e.types,"Uint8Array"))}var r$e=(e,t,r)=>{let s=`aes${parseInt(e.slice(1,4),10)}-wrap`;if(!(0,qie.default)(s))throw new Mie.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let i=Hie(t,e,"wrapKey");Vie(i,e);let o=(0,mw.createCipheriv)(s,i,Fie.Buffer.alloc(8,166));return(0,Uie.concat)(o.update(r),o.final())};_m.wrap=r$e;var n$e=(e,t,r)=>{let s=`aes${parseInt(e.slice(1,4),10)}-wrap`;if(!(0,qie.default)(s))throw new Mie.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let i=Hie(t,e,"unwrapKey");Vie(i,e);let o=(0,mw.createDecipheriv)(s,i,Fie.Buffer.alloc(8,166));return(0,Uie.concat)(o.update(r),o.final())};_m.unwrap=n$e});var Q0=S(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.setCurve=ca.weakMap=void 0;var yw=require("buffer"),jie=require("crypto"),Kie=tt(),s$e=Oo(),i$e=Po(),o$e=Do(),a$e=ko(),c$e=yw.Buffer.from([42,134,72,206,61,3,1,7]),l$e=yw.Buffer.from([43,129,4,0,34]),u$e=yw.Buffer.from([43,129,4,0,35]),d$e=yw.Buffer.from([43,129,4,0,10]);ca.weakMap=new WeakMap;var f$e=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new Kie.JOSENotSupported("Unsupported key curve for this operation")}},zie=(e,t)=>{var r;let n;if((0,s$e.isCryptoKey)(e))n=jie.KeyObject.from(e);else if((0,i$e.default)(e))n=e;else throw new TypeError((0,o$e.default)(e,...a$e.types));if(n.type==="secret")throw new TypeError('only "private" or "public" type keys can be used for this operation');switch(n.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${n.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${n.asymmetricKeyType.slice(1)}`;case"ec":{if(ca.weakMap.has(n))return ca.weakMap.get(n);let s=(r=n.asymmetricKeyDetails)===null||r===void 0?void 0:r.namedCurve;if(!s&&n.type==="private")s=zie((0,jie.createPublicKey)(n),!0);else if(!s){let o=n.export({format:"der",type:"spki"}),a=o[1]<128?14:15,c=o[a],l=o.slice(a+1,a+1+c);if(l.equals(c$e))s="prime256v1";else if(l.equals(l$e))s="secp384r1";else if(l.equals(u$e))s="secp521r1";else if(l.equals(d$e))s="secp256k1";else throw new Kie.JOSENotSupported("Unsupported key curve for this operation")}if(t)return s;let i=f$e(s);return ca.weakMap.set(n,i),i}default:throw new TypeError("Invalid asymmetric key type for this operation")}};function h$e(e,t){ca.weakMap.set(e,t)}ca.setCurve=h$e;ca.default=zie});var LF=S(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.ecdhAllowed=mu.generateEpk=mu.deriveKey=void 0;var Z0=require("crypto"),p$e=require("util"),Gie=Q0(),pf=hn(),m$e=tt(),OF=Oo(),$ie=pu(),DF=Po(),kF=Do(),BF=ko(),PF=(0,p$e.promisify)(Z0.generateKeyPair);async function g$e(e,t,r,n,s=new Uint8Array(0),i=new Uint8Array(0)){let o;if((0,OF.isCryptoKey)(e))(0,$ie.checkEncCryptoKey)(e,"ECDH"),o=Z0.KeyObject.from(e);else if((0,DF.default)(e))o=e;else throw new TypeError((0,kF.default)(e,...BF.types));let a;if((0,OF.isCryptoKey)(t))(0,$ie.checkEncCryptoKey)(t,"ECDH","deriveBits"),a=Z0.KeyObject.from(t);else if((0,DF.default)(t))a=t;else throw new TypeError((0,kF.default)(t,...BF.types));let c=(0,pf.concat)((0,pf.lengthAndInput)(pf.encoder.encode(r)),(0,pf.lengthAndInput)(s),(0,pf.lengthAndInput)(i),(0,pf.uint32be)(n)),l=(0,Z0.diffieHellman)({privateKey:a,publicKey:o});return(0,pf.concatKdf)(l,n,c)}mu.deriveKey=g$e;async function y$e(e){let t;if((0,OF.isCryptoKey)(e))t=Z0.KeyObject.from(e);else if((0,DF.default)(e))t=e;else throw new TypeError((0,kF.default)(e,...BF.types));switch(t.asymmetricKeyType){case"x25519":return PF("x25519");case"x448":return PF("x448");case"ec":{let r=(0,Gie.default)(t);return PF("ec",{namedCurve:r})}default:throw new m$e.JOSENotSupported("Invalid or unsupported EPK")}}mu.generateEpk=y$e;var E$e=e=>["P-256","P-384","P-521","X25519","X448"].includes((0,Gie.default)(e));mu.ecdhAllowed=E$e});var Wie=S(FF=>{"use strict";Object.defineProperty(FF,"__esModule",{value:!0});var S$e=tt();function C$e(e){if(!(e instanceof Uint8Array)||e.length<8)throw new S$e.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}FF.default=C$e});var MF=S(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.decrypt=bm.encrypt=void 0;var _$e=require("util"),Jie=require("crypto"),b$e=G0(),Xie=hn(),v$e=$s(),Yie=gw(),Qie=Wie(),A$e=Oo(),x$e=pu(),I$e=Po(),w$e=Do(),T$e=ko(),Zie=(0,_$e.promisify)(Jie.pbkdf2);function eoe(e,t){if((0,I$e.default)(e))return e.export();if(e instanceof Uint8Array)return e;if((0,A$e.isCryptoKey)(e))return(0,x$e.checkEncCryptoKey)(e,t,"deriveBits","deriveKey"),Jie.KeyObject.from(e).export();throw new TypeError((0,w$e.default)(e,...T$e.types,"Uint8Array"))}var R$e=async(e,t,r,n=2048,s=(0,b$e.default)(new Uint8Array(16)))=>{(0,Qie.default)(s);let i=(0,Xie.p2s)(e,s),o=parseInt(e.slice(13,16),10)>>3,a=eoe(t,e),c=await Zie(a,i,n,o,`sha${e.slice(8,11)}`);return{encryptedKey:await(0,Yie.wrap)(e.slice(-6),c,r),p2c:n,p2s:(0,v$e.encode)(s)}};bm.encrypt=R$e;var N$e=async(e,t,r,n,s)=>{(0,Qie.default)(s);let i=(0,Xie.p2s)(e,s),o=parseInt(e.slice(13,16),10)>>3,a=eoe(t,e),c=await Zie(a,i,n,o,`sha${e.slice(8,11)}`);return(0,Yie.unwrap)(e.slice(-6),c,r)};bm.decrypt=N$e});var eE=S(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.setModulusLength=la.weakMap=void 0;la.weakMap=new WeakMap;var Ew=(e,t)=>{let r=e.readUInt8(1);if((r&128)===0)return t===0?r:Ew(e.subarray(2+r),t-1);let n=r&127;r=0;for(let s=0;s<n;s++){r<<=8;let i=e.readUInt8(2+s);r|=i}return t===0?r:Ew(e.subarray(2+r),t-1)},P$e=(e,t)=>{let r=e.readUInt8(1);if((r&128)===0)return Ew(e.subarray(2),t);let n=r&127;return Ew(e.subarray(2+n),t)},O$e=e=>{var t,r;if(la.weakMap.has(e))return la.weakMap.get(e);let n=(r=(t=e.asymmetricKeyDetails)===null||t===void 0?void 0:t.modulusLength)!==null&&r!==void 0?r:P$e(e.export({format:"der",type:"pkcs1"}),e.type==="private"?1:0)-1<<3;return la.weakMap.set(e,n),n},D$e=(e,t)=>{la.weakMap.set(e,t)};la.setModulusLength=D$e;la.default=(e,t)=>{if(O$e(e)<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}});var UF=S(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.decrypt=vm.encrypt=void 0;var tE=require("crypto"),k$e=eE(),B$e=Oo(),L$e=pu(),F$e=Po(),M$e=Do(),U$e=ko(),toe=(e,t)=>{if(e.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,k$e.default)(e,t)},roe=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return tE.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return tE.constants.RSA_PKCS1_PADDING;default:return}},noe=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function soe(e,t,...r){if((0,F$e.default)(e))return e;if((0,B$e.isCryptoKey)(e))return(0,L$e.checkEncCryptoKey)(e,t,...r),tE.KeyObject.from(e);throw new TypeError((0,M$e.default)(e,...U$e.types))}var q$e=(e,t,r)=>{let n=roe(e),s=noe(e),i=soe(t,e,"wrapKey","encrypt");return toe(i,e),(0,tE.publicEncrypt)({key:i,oaepHash:s,padding:n},r)};vm.encrypt=q$e;var V$e=(e,t,r)=>{let n=roe(e),s=noe(e),i=soe(t,e,"unwrapKey","decrypt");return toe(i,e),(0,tE.privateDecrypt)({key:i,oaepHash:s,padding:n},r)};vm.decrypt=V$e});var nE=S(rE=>{"use strict";Object.defineProperty(rE,"__esModule",{value:!0});rE.bitLength=void 0;var H$e=tt(),j$e=G0();function ioe(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new H$e.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}rE.bitLength=ioe;rE.default=e=>(0,j$e.default)(new Uint8Array(ioe(e)>>3))});var Cw=S(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.fromX509=Bo.fromSPKI=Bo.fromPKCS8=Bo.toPKCS8=Bo.toSPKI=void 0;var Sw=require("crypto"),ooe=require("buffer"),K$e=Oo(),z$e=Po(),$$e=Do(),G$e=ko(),aoe=(e,t,r)=>{let n;if((0,K$e.isCryptoKey)(r)){if(!r.extractable)throw new TypeError("CryptoKey is not extractable");n=Sw.KeyObject.from(r)}else if((0,z$e.default)(r))n=r;else throw new TypeError((0,$$e.default)(r,...G$e.types));if(n.type!==e)throw new TypeError(`key is not a ${e} key`);return n.export({format:"pem",type:t})},W$e=e=>aoe("public","spki",e);Bo.toSPKI=W$e;var J$e=e=>aoe("private","pkcs8",e);Bo.toPKCS8=J$e;var X$e=e=>(0,Sw.createPrivateKey)({key:ooe.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"});Bo.fromPKCS8=X$e;var Y$e=e=>(0,Sw.createPublicKey)({key:ooe.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"});Bo.fromSPKI=Y$e;var Q$e=e=>(0,Sw.createPublicKey)({key:e,type:"spki",format:"pem"});Bo.fromX509=Q$e});var coe=S(HF=>{"use strict";Object.defineProperty(HF,"__esModule",{value:!0});var Pn=require("buffer"),Z$e=tt(),eGe=2,tGe=3,rGe=4,nGe=48,qF=Pn.Buffer.from([0]),_w=Pn.Buffer.from([eGe]),sGe=Pn.Buffer.from([tGe]),iGe=Pn.Buffer.from([nGe]),oGe=Pn.Buffer.from([rGe]),gu=e=>{if(e<128)return Pn.Buffer.from([e]);let t=Pn.Buffer.alloc(5);t.writeUInt32BE(e,1);let r=1;for(;t[r]===0;)r++;return t[r-1]=128|5-r,t.slice(r-1)},aGe=new Map([["P-256",Pn.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",Pn.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",Pn.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",Pn.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",Pn.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",Pn.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",Pn.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",Pn.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",Pn.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]),VF=class{constructor(){this.length=0,this.elements=[]}oidFor(t){let r=aGe.get(t);if(!r)throw new Z$e.JOSENotSupported("Invalid or unsupported OID");this.elements.push(r),this.length+=r.length}zero(){this.elements.push(_w,Pn.Buffer.from([1]),qF),this.length+=3}one(){this.elements.push(_w,Pn.Buffer.from([1]),Pn.Buffer.from([1])),this.length+=3}unsignedInteger(t){if(t[0]&128){let r=gu(t.length+1);this.elements.push(_w,r,qF,t),this.length+=2+r.length+t.length}else{let r=0;for(;t[r]===0&&(t[r+1]&128)===0;)r++;let n=gu(t.length-r);this.elements.push(_w,gu(t.length-r),t.slice(r)),this.length+=1+n.length+t.length-r}}octStr(t){let r=gu(t.length);this.elements.push(oGe,gu(t.length),t),this.length+=1+r.length+t.length}bitStr(t){let r=gu(t.length+1);this.elements.push(sGe,gu(t.length+1),qF,t),this.length+=1+r.length+t.length+1}add(t){this.elements.push(t),this.length+=t.length}end(t=iGe){let r=gu(this.length);return Pn.Buffer.concat([t,r,...this.elements],1+r.length+this.length)}};HF.default=VF});var sE=S(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.jwkImport=sc.jwkExport=sc.rsaPssParams=sc.oneShotCallback=void 0;var[yu,bw]=process.versions.node.split(".").map(e=>parseInt(e,10));sc.oneShotCallback=yu>=16||yu===15&&bw>=13;sc.rsaPssParams=!("electron"in process.versions)&&(yu>=17||yu===16&&bw>=9);sc.jwkExport=yu>=16||yu===15&&bw>=9;sc.jwkImport=yu>=16||yu===15&&bw>=12});var uoe=S(jF=>{"use strict";Object.defineProperty(jF,"__esModule",{value:!0});var ps=require("buffer"),$c=require("crypto"),cGe=$s(),lGe=tt(),loe=Q0(),uGe=eE(),ua=coe(),dGe=sE(),fGe=e=>{if(dGe.jwkImport&&e.kty!=="oct")return e.d?(0,$c.createPrivateKey)({format:"jwk",key:e}):(0,$c.createPublicKey)({format:"jwk",key:e});switch(e.kty){case"oct":return(0,$c.createSecretKey)((0,cGe.decode)(e.k));case"RSA":{let t=new ua.default,r=e.d!==void 0,n=ps.Buffer.from(e.n,"base64"),s=ps.Buffer.from(e.e,"base64");r?(t.zero(),t.unsignedInteger(n),t.unsignedInteger(s),t.unsignedInteger(ps.Buffer.from(e.d,"base64")),t.unsignedInteger(ps.Buffer.from(e.p,"base64")),t.unsignedInteger(ps.Buffer.from(e.q,"base64")),t.unsignedInteger(ps.Buffer.from(e.dp,"base64")),t.unsignedInteger(ps.Buffer.from(e.dq,"base64")),t.unsignedInteger(ps.Buffer.from(e.qi,"base64"))):(t.unsignedInteger(n),t.unsignedInteger(s));let o={key:t.end(),format:"der",type:"pkcs1"},a=r?(0,$c.createPrivateKey)(o):(0,$c.createPublicKey)(o);return(0,uGe.setModulusLength)(a,n.length<<3),a}case"EC":{let t=new ua.default,r=e.d!==void 0,n=ps.Buffer.concat([ps.Buffer.alloc(1,4),ps.Buffer.from(e.x,"base64"),ps.Buffer.from(e.y,"base64")]);if(r){t.zero();let a=new ua.default;a.oidFor("ecPublicKey"),a.oidFor(e.crv),t.add(a.end());let c=new ua.default;c.one(),c.octStr(ps.Buffer.from(e.d,"base64"));let l=new ua.default;l.bitStr(n);let d=l.end(ps.Buffer.from([161]));c.add(d);let f=c.end(),h=new ua.default;h.add(f);let p=h.end(ps.Buffer.from([4]));t.add(p);let m=t.end(),E=(0,$c.createPrivateKey)({key:m,format:"der",type:"pkcs8"});return(0,loe.setCurve)(E,e.crv),E}let s=new ua.default;s.oidFor("ecPublicKey"),s.oidFor(e.crv),t.add(s.end()),t.bitStr(n);let i=t.end(),o=(0,$c.createPublicKey)({key:i,format:"der",type:"spki"});return(0,loe.setCurve)(o,e.crv),o}case"OKP":{let t=new ua.default;if(e.d!==void 0){t.zero();let i=new ua.default;i.oidFor(e.crv),t.add(i.end());let o=new ua.default;o.octStr(ps.Buffer.from(e.d,"base64"));let a=o.end(ps.Buffer.from([4]));t.add(a);let c=t.end();return(0,$c.createPrivateKey)({key:c,format:"der",type:"pkcs8"})}let n=new ua.default;n.oidFor(e.crv),t.add(n.end()),t.bitStr(ps.Buffer.from(e.x,"base64"));let s=t.end();return(0,$c.createPublicKey)({key:s,format:"der",type:"spki"})}default:throw new lGe.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}};jF.default=fGe});var iE=S(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.importJWK=ic.importPKCS8=ic.importX509=ic.importSPKI=void 0;var hGe=$s(),KF=Cw(),doe=uoe(),foe=tt(),pGe=Oi();async function mGe(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return(0,KF.fromSPKI)(e,t,r)}ic.importSPKI=mGe;async function gGe(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return(0,KF.fromX509)(e,t,r)}ic.importX509=gGe;async function yGe(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,KF.fromPKCS8)(e,t,r)}ic.importPKCS8=yGe;async function EGe(e,t,r){var n;if(!(0,pGe.default)(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return r??(r=e.ext!==!0),r?(0,doe.default)({...e,alg:t,ext:(n=e.ext)!==null&&n!==void 0?n:!1}):(0,hGe.decode)(e.k);case"RSA":if(e.oth!==void 0)throw new foe.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,doe.default)({...e,alg:t});default:throw new foe.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}ic.importJWK=EGe});var oE=S(zF=>{"use strict";Object.defineProperty(zF,"__esModule",{value:!0});var hoe=Do(),oc=ko(),SGe=(e,t)=>{if(!(t instanceof Uint8Array)){if(!(0,oc.default)(t))throw new TypeError((0,hoe.withAlg)(e,t,...oc.types,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${oc.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},CGe=(e,t,r)=>{if(!(0,oc.default)(t))throw new TypeError((0,hoe.withAlg)(e,t,...oc.types));if(t.type==="secret")throw new TypeError(`${oc.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${oc.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${oc.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${oc.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${oc.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},_Ge=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?SGe(e,t):CGe(e,t,r)};zF.default=_Ge});var JF=S(WF=>{"use strict";Object.defineProperty(WF,"__esModule",{value:!0});var $F=require("crypto"),bGe=mF(),vGe=SF(),AGe=hn(),xGe=bF(),IGe=Oo(),wGe=pu(),poe=Po(),TGe=Do(),GF=tt(),moe=hw(),RGe=ko();function NGe(e,t,r,n,s){let i=parseInt(e.slice(1,4),10);(0,poe.default)(r)&&(r=r.export());let o=r.subarray(i>>3),a=r.subarray(0,i>>3),c=`aes-${i}-cbc`;if(!(0,moe.default)(c))throw new GF.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let l=(0,$F.createCipheriv)(c,o,n),d=(0,AGe.concat)(l.update(t),l.final()),f=parseInt(e.slice(-3),10),h=(0,xGe.default)(s,n,d,f,a,i);return{ciphertext:d,tag:h}}function PGe(e,t,r,n,s){let o=`aes-${parseInt(e.slice(1,4),10)}-gcm`;if(!(0,moe.default)(o))throw new GF.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let a=(0,$F.createCipheriv)(o,r,n,{authTagLength:16});s.byteLength&&a.setAAD(s,{plaintextLength:t.length});let c=a.update(t);a.final();let l=a.getAuthTag();return{ciphertext:c,tag:l}}var OGe=(e,t,r,n,s)=>{let i;if((0,IGe.isCryptoKey)(r))(0,wGe.checkEncCryptoKey)(r,e,"encrypt"),i=$F.KeyObject.from(r);else if(r instanceof Uint8Array||(0,poe.default)(r))i=r;else throw new TypeError((0,TGe.default)(r,...RGe.types,"Uint8Array"));switch((0,vGe.default)(e,i),(0,bGe.default)(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return NGe(e,t,i,n,s);case"A128GCM":case"A192GCM":case"A256GCM":return PGe(e,t,i,n,s);default:throw new GF.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};WF.default=OGe});var XF=S(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.unwrap=Am.wrap=void 0;var DGe=JF(),kGe=wF(),BGe=dw(),goe=$s();async function LGe(e,t,r,n){let s=e.slice(0,7);n||(n=(0,BGe.default)(s));let{ciphertext:i,tag:o}=await(0,DGe.default)(s,r,t,n,new Uint8Array(0));return{encryptedKey:i,iv:(0,goe.encode)(n),tag:(0,goe.encode)(o)}}Am.wrap=LGe;async function FGe(e,t,r,n,s){let i=e.slice(0,7);return(0,kGe.default)(i,t,r,n,s,new Uint8Array(0))}Am.unwrap=FGe});var Soe=S(YF=>{"use strict";Object.defineProperty(YF,"__esModule",{value:!0});var yoe=gw(),Eoe=LF(),MGe=MF(),UGe=UF(),aE=$s(),pn=tt(),qGe=nE(),VGe=iE(),HGe=oE(),jGe=Oi(),KGe=XF();async function zGe(e,t,r,n,s){switch((0,HGe.default)(e,t,"decrypt"),e){case"dir":{if(r!==void 0)throw new pn.JWEInvalid("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(r!==void 0)throw new pn.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!(0,jGe.default)(n.epk))throw new pn.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!Eoe.ecdhAllowed(t))throw new pn.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let i=await(0,VGe.importJWK)(n.epk,e),o,a;if(n.apu!==void 0){if(typeof n.apu!="string")throw new pn.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=(0,aE.decode)(n.apu)}catch{throw new pn.JWEInvalid("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new pn.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=(0,aE.decode)(n.apv)}catch{throw new pn.JWEInvalid("Failed to base64url decode the apv")}}let c=await Eoe.deriveKey(i,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?(0,qGe.bitLength)(n.enc):parseInt(e.slice(-5,-2),10),o,a);if(e==="ECDH-ES")return c;if(r===void 0)throw new pn.JWEInvalid("JWE Encrypted Key missing");return(0,yoe.unwrap)(e.slice(-6),c,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new pn.JWEInvalid("JWE Encrypted Key missing");return(0,UGe.decrypt)(e,t,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new pn.JWEInvalid("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new pn.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let i=s?.maxPBES2Count||1e4;if(n.p2c>i)throw new pn.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new pn.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=(0,aE.decode)(n.p2s)}catch{throw new pn.JWEInvalid("Failed to base64url decode the p2s")}return(0,MGe.decrypt)(e,t,r,n.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new pn.JWEInvalid("JWE Encrypted Key missing");return(0,yoe.unwrap)(e,t,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new pn.JWEInvalid("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new pn.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new pn.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');let i;try{i=(0,aE.decode)(n.iv)}catch{throw new pn.JWEInvalid("Failed to base64url decode the iv")}let o;try{o=(0,aE.decode)(n.tag)}catch{throw new pn.JWEInvalid("Failed to base64url decode the tag")}return(0,KGe.unwrap)(e,t,r,i,o)}default:throw new pn.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}YF.default=zGe});var xm=S(QF=>{"use strict";Object.defineProperty(QF,"__esModule",{value:!0});var $Ge=tt();function GGe(e,t,r,n,s){if(s.crit!==void 0&&n.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(o=>typeof o!="string"||o.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;r!==void 0?i=new Map([...Object.entries(r),...t.entries()]):i=t;for(let o of n.crit){if(!i.has(o))throw new $Ge.JOSENotSupported(`Extension Header Parameter "${o}" is not recognized`);if(s[o]===void 0)throw new e(`Extension Header Parameter "${o}" is missing`);if(i.get(o)&&n[o]===void 0)throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}QF.default=GGe});var eM=S(ZF=>{"use strict";Object.defineProperty(ZF,"__esModule",{value:!0});var WGe=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};ZF.default=WGe});var Aw=S(vw=>{"use strict";Object.defineProperty(vw,"__esModule",{value:!0});vw.flattenedDecrypt=void 0;var Im=$s(),JGe=wF(),XGe=TF(),Mr=tt(),YGe=Cm(),tM=Oi(),QGe=Soe(),cE=hn(),ZGe=nE(),e9e=xm(),Coe=eM();async function t9e(e,t,r){var n;if(!(0,tM.default)(e))throw new Mr.JWEInvalid("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new Mr.JWEInvalid("JOSE Header missing");if(typeof e.iv!="string")throw new Mr.JWEInvalid("JWE Initialization Vector missing or incorrect type");if(typeof e.ciphertext!="string")throw new Mr.JWEInvalid("JWE Ciphertext missing or incorrect type");if(typeof e.tag!="string")throw new Mr.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new Mr.JWEInvalid("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new Mr.JWEInvalid("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new Mr.JWEInvalid("JWE AAD incorrect type");if(e.header!==void 0&&!(0,tM.default)(e.header))throw new Mr.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!(0,tM.default)(e.unprotected))throw new Mr.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let s;if(e.protected)try{let K=(0,Im.decode)(e.protected);s=JSON.parse(cE.decoder.decode(K))}catch{throw new Mr.JWEInvalid("JWE Protected Header is invalid")}if(!(0,YGe.default)(s,e.header,e.unprotected))throw new Mr.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let i={...s,...e.header,...e.unprotected};if((0,e9e.default)(Mr.JWEInvalid,new Map,r?.crit,s,i),i.zip!==void 0){if(!s||!s.zip)throw new Mr.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(i.zip!=="DEF")throw new Mr.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:o,enc:a}=i;if(typeof o!="string"||!o)throw new Mr.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if(typeof a!="string"||!a)throw new Mr.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let c=r&&(0,Coe.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),l=r&&(0,Coe.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(c&&!c.has(o))throw new Mr.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(l&&!l.has(a))throw new Mr.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');let d;if(e.encrypted_key!==void 0)try{d=(0,Im.decode)(e.encrypted_key)}catch{throw new Mr.JWEInvalid("Failed to base64url decode the encrypted_key")}let f=!1;typeof t=="function"&&(t=await t(s,e),f=!0);let h;try{h=await(0,QGe.default)(o,t,d,i,r)}catch(K){if(K instanceof TypeError||K instanceof Mr.JWEInvalid||K instanceof Mr.JOSENotSupported)throw K;h=(0,ZGe.default)(a)}let p,m;try{p=(0,Im.decode)(e.iv)}catch{throw new Mr.JWEInvalid("Failed to base64url decode the iv")}try{m=(0,Im.decode)(e.tag)}catch{throw new Mr.JWEInvalid("Failed to base64url decode the tag")}let E=cE.encoder.encode((n=e.protected)!==null&&n!==void 0?n:""),b;e.aad!==void 0?b=(0,cE.concat)(E,cE.encoder.encode("."),cE.encoder.encode(e.aad)):b=E;let A;try{A=(0,Im.decode)(e.ciphertext)}catch{throw new Mr.JWEInvalid("Failed to base64url decode the ciphertext")}let R=await(0,JGe.default)(a,h,A,p,m,b);i.zip==="DEF"&&(R=await(r?.inflateRaw||XGe.inflate)(R));let D={plaintext:R};if(e.protected!==void 0&&(D.protectedHeader=s),e.aad!==void 0)try{D.additionalAuthenticatedData=(0,Im.decode)(e.aad)}catch{throw new Mr.JWEInvalid("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(D.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(D.unprotectedHeader=e.header),f?{...D,key:t}:D}vw.flattenedDecrypt=t9e});var rM=S(xw=>{"use strict";Object.defineProperty(xw,"__esModule",{value:!0});xw.compactDecrypt=void 0;var r9e=Aw(),_oe=tt(),n9e=hn();async function s9e(e,t,r){if(e instanceof Uint8Array&&(e=n9e.decoder.decode(e)),typeof e!="string")throw new _oe.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:n,1:s,2:i,3:o,4:a,length:c}=e.split(".");if(c!==5)throw new _oe.JWEInvalid("Invalid Compact JWE");let l=await(0,r9e.flattenedDecrypt)({ciphertext:o,iv:i||void 0,protected:n||void 0,tag:a||void 0,encrypted_key:s||void 0},t,r),d={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return typeof t=="function"?{...d,key:l.key}:d}xw.compactDecrypt=s9e});var voe=S(ww=>{"use strict";Object.defineProperty(ww,"__esModule",{value:!0});ww.generalDecrypt=void 0;var i9e=Aw(),Iw=tt(),boe=Oi();async function o9e(e,t,r){if(!(0,boe.default)(e))throw new Iw.JWEInvalid("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(boe.default))throw new Iw.JWEInvalid("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new Iw.JWEInvalid("JWE Recipients has no members");for(let n of e.recipients)try{return await(0,i9e.flattenedDecrypt)({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new Iw.JWEDecryptionFailed}ww.generalDecrypt=o9e});var Aoe=S(sM=>{"use strict";Object.defineProperty(sM,"__esModule",{value:!0});var a9e=2,c9e=48,nM=class{constructor(t){if(t[0]!==c9e)throw new TypeError;if(this.buffer=t,this.offset=1,this.decodeLength()!==t.length-this.offset)throw new TypeError}decodeLength(){let t=this.buffer[this.offset++];if(t&128){let r=t&-129;t=0;for(let n=0;n<r;n++)t=t<<8|this.buffer[this.offset+n];this.offset+=r}return t}unsignedInteger(){if(this.buffer[this.offset++]!==a9e)throw new TypeError;let t=this.decodeLength();this.buffer[this.offset]===0&&(this.offset++,t--);let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}end(){if(this.offset!==this.buffer.length)throw new TypeError}};sM.default=nM});var xoe=S(oM=>{"use strict";Object.defineProperty(oM,"__esModule",{value:!0});var Tw=require("crypto"),ws=$s(),l9e=Aoe(),Rw=tt(),iM=Q0(),u9e=Oo(),d9e=Po(),f9e=Do(),h9e=ko(),p9e=sE(),Nw=e=>{let t;if((0,u9e.isCryptoKey)(e)){if(!e.extractable)throw new TypeError("CryptoKey is not extractable");t=Tw.KeyObject.from(e)}else if((0,d9e.default)(e))t=e;else{if(e instanceof Uint8Array)return{kty:"oct",k:(0,ws.encode)(e)};throw new TypeError((0,f9e.default)(e,...h9e.types,"Uint8Array"))}if(p9e.jwkExport){if(t.type!=="secret"&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new Rw.JOSENotSupported("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})}switch(t.type){case"secret":return{kty:"oct",k:(0,ws.encode)(t.export())};case"private":case"public":switch(t.asymmetricKeyType){case"rsa":{let r=t.export({format:"der",type:"pkcs1"}),n=new l9e.default(r);t.type==="private"&&n.unsignedInteger();let s=(0,ws.encode)(n.unsignedInteger()),i=(0,ws.encode)(n.unsignedInteger()),o;return t.type==="private"&&(o={d:(0,ws.encode)(n.unsignedInteger()),p:(0,ws.encode)(n.unsignedInteger()),q:(0,ws.encode)(n.unsignedInteger()),dp:(0,ws.encode)(n.unsignedInteger()),dq:(0,ws.encode)(n.unsignedInteger()),qi:(0,ws.encode)(n.unsignedInteger())}),n.end(),{kty:"RSA",n:s,e:i,...o}}case"ec":{let r=(0,iM.default)(t),n,s,i;switch(r){case"secp256k1":n=64,s=33,i=-1;break;case"P-256":n=64,s=36,i=-1;break;case"P-384":n=96,s=35,i=-3;break;case"P-521":n=132,s=35,i=-3;break;default:throw new Rw.JOSENotSupported("Unsupported curve")}if(t.type==="public"){let a=t.export({type:"spki",format:"der"});return{kty:"EC",crv:r,x:(0,ws.encode)(a.subarray(-n,-n/2)),y:(0,ws.encode)(a.subarray(-n/2))}}let o=t.export({type:"pkcs8",format:"der"});return o.length<100&&(s+=i),{...Nw((0,Tw.createPublicKey)(t)),d:(0,ws.encode)(o.subarray(s,s+n/2))}}case"ed25519":case"x25519":{let r=(0,iM.default)(t);if(t.type==="public"){let s=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:r,x:(0,ws.encode)(s.subarray(-32))}}let n=t.export({type:"pkcs8",format:"der"});return{...Nw((0,Tw.createPublicKey)(t)),d:(0,ws.encode)(n.subarray(-32))}}case"ed448":case"x448":{let r=(0,iM.default)(t);if(t.type==="public"){let s=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:r,x:(0,ws.encode)(s.subarray(r==="Ed448"?-57:-56))}}let n=t.export({type:"pkcs8",format:"der"});return{...Nw((0,Tw.createPublicKey)(t)),d:(0,ws.encode)(n.subarray(r==="Ed448"?-57:-56))}}default:throw new Rw.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new Rw.JOSENotSupported("Unsupported key type")}};oM.default=Nw});var aM=S(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.exportJWK=Eu.exportPKCS8=Eu.exportSPKI=void 0;var m9e=Cw(),g9e=Cw(),y9e=xoe();async function E9e(e){return(0,m9e.toSPKI)(e)}Eu.exportSPKI=E9e;async function S9e(e){return(0,g9e.toPKCS8)(e)}Eu.exportPKCS8=S9e;async function C9e(e){return(0,y9e.default)(e)}Eu.exportJWK=C9e});var uM=S(lM=>{"use strict";Object.defineProperty(lM,"__esModule",{value:!0});var Ioe=gw(),cM=LF(),_9e=MF(),b9e=UF(),woe=$s(),wm=nE(),Toe=tt(),v9e=aM(),A9e=oE(),x9e=XF();async function I9e(e,t,r,n,s={}){let i,o,a;switch((0,A9e.default)(e,r,"encrypt"),e){case"dir":{a=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!cM.ecdhAllowed(r))throw new Toe.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:l}=s,{epk:d}=s;d||(d=(await cM.generateEpk(r)).privateKey);let{x:f,y:h,crv:p,kty:m}=await(0,v9e.exportJWK)(d),E=await cM.deriveKey(r,d,e==="ECDH-ES"?t:e,e==="ECDH-ES"?(0,wm.bitLength)(t):parseInt(e.slice(-5,-2),10),c,l);if(o={epk:{x:f,crv:p,kty:m}},m==="EC"&&(o.epk.y=h),c&&(o.apu=(0,woe.encode)(c)),l&&(o.apv=(0,woe.encode)(l)),e==="ECDH-ES"){a=E;break}a=n||(0,wm.default)(t);let b=e.slice(-6);i=await(0,Ioe.wrap)(b,E,a);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{a=n||(0,wm.default)(t),i=await(0,b9e.encrypt)(e,r,a);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=n||(0,wm.default)(t);let{p2c:c,p2s:l}=s;({encryptedKey:i,...o}=await(0,_9e.encrypt)(e,r,a,c,l));break}case"A128KW":case"A192KW":case"A256KW":{a=n||(0,wm.default)(t),i=await(0,Ioe.wrap)(e,r,a);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=n||(0,wm.default)(t);let{iv:c}=s;({encryptedKey:i,...o}=await(0,x9e.wrap)(e,r,a,c));break}default:throw new Toe.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:i,parameters:o}}lM.default=I9e});var Pw=S(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.FlattenedEncrypt=gf.unprotected=void 0;var Tm=$s(),Roe=JF(),w9e=TF(),T9e=dw(),R9e=uM(),mf=tt(),N9e=Cm(),Rm=hn(),P9e=xm();gf.unprotected=Symbol();var dM=class{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new mf.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,N9e.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new mf.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,P9e.default)(mf.JWEInvalid,new Map,r?.crit,this._protectedHeader,n),n.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new mf.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(n.zip!=="DEF")throw new mf.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:s,enc:i}=n;if(typeof s!="string"||!s)throw new mf.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof i!="string"||!i)throw new mf.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(s==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(s==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let a;{let m;({cek:a,encryptedKey:o,parameters:m}=await(0,R9e.default)(s,i,t,this._cek,this._keyManagementParameters)),m&&(r&&gf.unprotected in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...m}:this.setUnprotectedHeader(m):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...m}:this.setProtectedHeader(m))}this._iv||(this._iv=(0,T9e.default)(i));let c,l,d;this._protectedHeader?l=Rm.encoder.encode((0,Tm.encode)(JSON.stringify(this._protectedHeader))):l=Rm.encoder.encode(""),this._aad?(d=(0,Tm.encode)(this._aad),c=(0,Rm.concat)(l,Rm.encoder.encode("."),Rm.encoder.encode(d))):c=l;let f,h;if(n.zip==="DEF"){let m=await(r?.deflateRaw||w9e.deflate)(this._plaintext);({ciphertext:f,tag:h}=await(0,Roe.default)(i,m,a,this._iv,c))}else({ciphertext:f,tag:h}=await(0,Roe.default)(i,this._plaintext,a,this._iv,c));let p={ciphertext:(0,Tm.encode)(f),iv:(0,Tm.encode)(this._iv),tag:(0,Tm.encode)(h)};return o&&(p.encrypted_key=(0,Tm.encode)(o)),d&&(p.aad=d),this._protectedHeader&&(p.protected=Rm.decoder.decode(l)),this._sharedUnprotectedHeader&&(p.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(p.header=this._unprotectedHeader),p}};gf.FlattenedEncrypt=dM});var Noe=S(Ow=>{"use strict";Object.defineProperty(Ow,"__esModule",{value:!0});Ow.GeneralEncrypt=void 0;var fM=Pw(),Su=tt(),O9e=nE(),D9e=Cm(),k9e=uM(),B9e=$s(),L9e=xm(),hM=class{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}},pM=class{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){let n=new hM(this,t,{crit:r?.crit});return this._recipients.push(n),n}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(t){var r,n,s;if(!this._recipients.length)throw new Su.JWEInvalid("at least one recipient must be added");if(t={deflateRaw:t?.deflateRaw},this._recipients.length===1){let[c]=this._recipients,l=await new fM.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).encrypt(c.key,{...c.options,...t}),d={ciphertext:l.ciphertext,iv:l.iv,recipients:[{}],tag:l.tag};return l.aad&&(d.aad=l.aad),l.protected&&(d.protected=l.protected),l.unprotected&&(d.unprotected=l.unprotected),l.encrypted_key&&(d.recipients[0].encrypted_key=l.encrypted_key),l.header&&(d.recipients[0].header=l.header),d}let i;for(let c=0;c<this._recipients.length;c++){let l=this._recipients[c];if(!(0,D9e.default)(this._protectedHeader,this._unprotectedHeader,l.unprotectedHeader))throw new Su.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let d={...this._protectedHeader,...this._unprotectedHeader,...l.unprotectedHeader},{alg:f}=d;if(typeof f!="string"||!f)throw new Su.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(f==="dir"||f==="ECDH-ES")throw new Su.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof d.enc!="string"||!d.enc)throw new Su.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!i)i=d.enc;else if(i!==d.enc)throw new Su.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if((0,L9e.default)(Su.JWEInvalid,new Map,l.options.crit,this._protectedHeader,d),d.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new Su.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let o=(0,O9e.default)(i),a={ciphertext:"",iv:"",recipients:[],tag:""};for(let c=0;c<this._recipients.length;c++){let l=this._recipients[c],d={};a.recipients.push(d);let h={...this._protectedHeader,...this._unprotectedHeader,...l.unprotectedHeader}.alg.startsWith("PBES2")?2048+c:void 0;if(c===0){let E=await new fM.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(o).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(l.unprotectedHeader).setKeyManagementParameters({p2c:h}).encrypt(l.key,{...l.options,...t,[fM.unprotected]:!0});a.ciphertext=E.ciphertext,a.iv=E.iv,a.tag=E.tag,E.aad&&(a.aad=E.aad),E.protected&&(a.protected=E.protected),E.unprotected&&(a.unprotected=E.unprotected),d.encrypted_key=E.encrypted_key,E.header&&(d.header=E.header);continue}let{encryptedKey:p,parameters:m}=await(0,k9e.default)(((r=l.unprotectedHeader)===null||r===void 0?void 0:r.alg)||((n=this._protectedHeader)===null||n===void 0?void 0:n.alg)||((s=this._unprotectedHeader)===null||s===void 0?void 0:s.alg),i,l.key,o,{p2c:h});d.encrypted_key=(0,B9e.encode)(p),(l.unprotectedHeader||m)&&(d.header={...l.unprotectedHeader,...m})}return a}};Ow.GeneralEncrypt=pM});var gM=S(mM=>{"use strict";Object.defineProperty(mM,"__esModule",{value:!0});var F9e=tt();function M9e(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new F9e.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}mM.default=M9e});var SM=S(EM=>{"use strict";Object.defineProperty(EM,"__esModule",{value:!0});var Poe=require("crypto"),U9e=Q0(),q9e=tt(),yM=eE(),Nm=sE(),Ooe={padding:Poe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Poe.constants.RSA_PSS_SALTLEN_DIGEST},V9e=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function H9e(e,t){switch(e){case"EdDSA":if(!["ed25519","ed448"].includes(t.asymmetricKeyType))throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return t;case"RS256":case"RS384":case"RS512":if(t.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,yM.default)(t,e),t;case(Nm.rsaPssParams&&"PS256"):case(Nm.rsaPssParams&&"PS384"):case(Nm.rsaPssParams&&"PS512"):if(t.asymmetricKeyType==="rsa-pss"){let{hashAlgorithm:r,mgf1HashAlgorithm:n,saltLength:s}=t.asymmetricKeyDetails,i=parseInt(e.slice(-3),10);if(r!==void 0&&(r!==`sha${i}`||n!==r))throw new TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(s!==void 0&&s>i>>3)throw new TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if(t.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,yM.default)(t,e),{key:t,...Ooe};case(!Nm.rsaPssParams&&"PS256"):case(!Nm.rsaPssParams&&"PS384"):case(!Nm.rsaPssParams&&"PS512"):if(t.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,yM.default)(t,e),{key:t,...Ooe};case"ES256":case"ES256K":case"ES384":case"ES512":{if(t.asymmetricKeyType!=="ec")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=(0,U9e.default)(t),n=V9e.get(e);if(r!==n)throw new TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${r}`);return{dsaEncoding:"ieee-p1363",key:t}}default:throw new q9e.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}EM.default=H9e});var Doe=S(CM=>{"use strict";Object.defineProperty(CM,"__esModule",{value:!0});var j9e=tt();function K9e(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new j9e.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}CM.default=K9e});var vM=S(bM=>{"use strict";Object.defineProperty(bM,"__esModule",{value:!0});var _M=require("crypto"),z9e=Oo(),$9e=pu(),koe=Do(),Boe=ko();function G9e(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError((0,koe.default)(t,...Boe.types));return(0,_M.createSecretKey)(t)}if(t instanceof _M.KeyObject)return t;if((0,z9e.isCryptoKey)(t))return(0,$9e.checkSigCryptoKey)(t,e,r),_M.KeyObject.from(t);throw new TypeError((0,koe.default)(t,...Boe.types,"Uint8Array"))}bM.default=G9e});var IM=S(xM=>{"use strict";Object.defineProperty(xM,"__esModule",{value:!0});var Dw=require("crypto"),W9e=require("util"),J9e=gM(),X9e=Doe(),Y9e=SM(),Q9e=vM(),AM;Dw.sign.length>3?AM=(0,W9e.promisify)(Dw.sign):AM=Dw.sign;var Z9e=async(e,t,r)=>{let n=(0,Q9e.default)(e,t,"sign");if(e.startsWith("HS")){let s=Dw.createHmac((0,X9e.default)(e),n);return s.update(r),s.digest()}return AM((0,J9e.default)(e),r,(0,Y9e.default)(e,n))};xM.default=Z9e});var Loe=S(TM=>{"use strict";Object.defineProperty(TM,"__esModule",{value:!0});var kw=require("crypto"),eWe=require("util"),tWe=gM(),rWe=SM(),nWe=IM(),sWe=vM(),iWe=sE(),wM;kw.verify.length>4&&iWe.oneShotCallback?wM=(0,eWe.promisify)(kw.verify):wM=kw.verify;var oWe=async(e,t,r,n)=>{let s=(0,sWe.default)(e,t,"verify");if(e.startsWith("HS")){let a=await(0,nWe.default)(e,s,n),c=r;try{return kw.timingSafeEqual(c,a)}catch{return!1}}let i=(0,tWe.default)(e),o=(0,rWe.default)(e,s);try{return await wM(i,n,o,r)}catch{return!1}};TM.default=oWe});var Lw=S(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});Bw.flattenedVerify=void 0;var RM=$s(),aWe=Loe(),Ts=tt(),Pm=hn(),cWe=Cm(),Foe=Oi(),lWe=oE(),uWe=xm(),dWe=eM();async function fWe(e,t,r){var n;if(!(0,Foe.default)(e))throw new Ts.JWSInvalid("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new Ts.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new Ts.JWSInvalid("JWS Protected Header incorrect type");if(e.payload===void 0)throw new Ts.JWSInvalid("JWS Payload missing");if(typeof e.signature!="string")throw new Ts.JWSInvalid("JWS Signature missing or incorrect type");if(e.header!==void 0&&!(0,Foe.default)(e.header))throw new Ts.JWSInvalid("JWS Unprotected Header incorrect type");let s={};if(e.protected)try{let b=(0,RM.decode)(e.protected);s=JSON.parse(Pm.decoder.decode(b))}catch{throw new Ts.JWSInvalid("JWS Protected Header is invalid")}if(!(0,cWe.default)(s,e.header))throw new Ts.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let i={...s,...e.header},o=(0,uWe.default)(Ts.JWSInvalid,new Map([["b64",!0]]),r?.crit,s,i),a=!0;if(o.has("b64")&&(a=s.b64,typeof a!="boolean"))throw new Ts.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:c}=i;if(typeof c!="string"||!c)throw new Ts.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let l=r&&(0,dWe.default)("algorithms",r.algorithms);if(l&&!l.has(c))throw new Ts.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(a){if(typeof e.payload!="string")throw new Ts.JWSInvalid("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new Ts.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let d=!1;typeof t=="function"&&(t=await t(s,e),d=!0),(0,lWe.default)(c,t,"verify");let f=(0,Pm.concat)(Pm.encoder.encode((n=e.protected)!==null&&n!==void 0?n:""),Pm.encoder.encode("."),typeof e.payload=="string"?Pm.encoder.encode(e.payload):e.payload),h;try{h=(0,RM.decode)(e.signature)}catch{throw new Ts.JWSInvalid("Failed to base64url decode the signature")}if(!await(0,aWe.default)(c,t,h,f))throw new Ts.JWSSignatureVerificationFailed;let m;if(a)try{m=(0,RM.decode)(e.payload)}catch{throw new Ts.JWSInvalid("Failed to base64url decode the payload")}else typeof e.payload=="string"?m=Pm.encoder.encode(e.payload):m=e.payload;let E={payload:m};return e.protected!==void 0&&(E.protectedHeader=s),e.header!==void 0&&(E.unprotectedHeader=e.header),d?{...E,key:t}:E}Bw.flattenedVerify=fWe});var NM=S(Fw=>{"use strict";Object.defineProperty(Fw,"__esModule",{value:!0});Fw.compactVerify=void 0;var hWe=Lw(),Moe=tt(),pWe=hn();async function mWe(e,t,r){if(e instanceof Uint8Array&&(e=pWe.decoder.decode(e)),typeof e!="string")throw new Moe.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:n,1:s,2:i,length:o}=e.split(".");if(o!==3)throw new Moe.JWSInvalid("Invalid Compact JWS");let a=await(0,hWe.flattenedVerify)({payload:s,protected:n,signature:i},t,r),c={payload:a.payload,protectedHeader:a.protectedHeader};return typeof t=="function"?{...c,key:a.key}:c}Fw.compactVerify=mWe});var qoe=S(Mw=>{"use strict";Object.defineProperty(Mw,"__esModule",{value:!0});Mw.generalVerify=void 0;var gWe=Lw(),PM=tt(),Uoe=Oi();async function yWe(e,t,r){if(!(0,Uoe.default)(e))throw new PM.JWSInvalid("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(Uoe.default))throw new PM.JWSInvalid("JWS Signatures missing or incorrect type");for(let n of e.signatures)try{return await(0,gWe.flattenedVerify)({header:n.header,payload:e.payload,protected:n.protected,signature:n.signature},t,r)}catch{}throw new PM.JWSSignatureVerificationFailed}Mw.generalVerify=yWe});var DM=S(OM=>{"use strict";Object.defineProperty(OM,"__esModule",{value:!0});OM.default=e=>Math.floor(e.getTime()/1e3)});var LM=S(BM=>{"use strict";Object.defineProperty(BM,"__esModule",{value:!0});var Voe=60,Hoe=Voe*60,kM=Hoe*24,EWe=kM*7,SWe=kM*365.25,CWe=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;BM.default=e=>{let t=CWe.exec(e);if(!t)throw new TypeError("Invalid time period format");let r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(r*Voe);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(r*Hoe);case"day":case"days":case"d":return Math.round(r*kM);case"week":case"weeks":case"w":return Math.round(r*EWe);default:return Math.round(r*SWe)}}});var Uw=S(FM=>{"use strict";Object.defineProperty(FM,"__esModule",{value:!0});var Gi=tt(),_We=hn(),bWe=DM(),joe=LM(),vWe=Oi(),Koe=e=>e.toLowerCase().replace(/^application\//,""),AWe=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1;FM.default=(e,t,r={})=>{let{typ:n}=r;if(n&&(typeof e.typ!="string"||Koe(e.typ)!==Koe(n)))throw new Gi.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");let s;try{s=JSON.parse(_We.decoder.decode(t))}catch{}if(!(0,vWe.default)(s))throw new Gi.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:i=[],issuer:o,subject:a,audience:c,maxTokenAge:l}=r;l!==void 0&&i.push("iat"),c!==void 0&&i.push("aud"),a!==void 0&&i.push("sub"),o!==void 0&&i.push("iss");for(let p of new Set(i.reverse()))if(!(p in s))throw new Gi.JWTClaimValidationFailed(`missing required "${p}" claim`,p,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(s.iss))throw new Gi.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(a&&s.sub!==a)throw new Gi.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(c&&!AWe(s.aud,typeof c=="string"?[c]:c))throw new Gi.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");let d;switch(typeof r.clockTolerance){case"string":d=(0,joe.default)(r.clockTolerance);break;case"number":d=r.clockTolerance;break;case"undefined":d=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:f}=r,h=(0,bWe.default)(f||new Date);if((s.iat!==void 0||l)&&typeof s.iat!="number")throw new Gi.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(s.nbf!==void 0){if(typeof s.nbf!="number")throw new Gi.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(s.nbf>h+d)throw new Gi.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(s.exp!==void 0){if(typeof s.exp!="number")throw new Gi.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(s.exp<=h-d)throw new Gi.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(l){let p=h-s.iat,m=typeof l=="number"?l:(0,joe.default)(l);if(p-d>m)throw new Gi.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(p<0-d)throw new Gi.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return s}});var zoe=S(qw=>{"use strict";Object.defineProperty(qw,"__esModule",{value:!0});qw.jwtVerify=void 0;var xWe=NM(),IWe=Uw(),wWe=tt();async function TWe(e,t,r){var n;let s=await(0,xWe.compactVerify)(e,t,r);if(!((n=s.protectedHeader.crit)===null||n===void 0)&&n.includes("b64")&&s.protectedHeader.b64===!1)throw new wWe.JWTInvalid("JWTs MUST NOT use unencoded payload");let o={payload:(0,IWe.default)(s.protectedHeader,s.payload,r),protectedHeader:s.protectedHeader};return typeof t=="function"?{...o,key:s.key}:o}qw.jwtVerify=TWe});var $oe=S(Vw=>{"use strict";Object.defineProperty(Vw,"__esModule",{value:!0});Vw.jwtDecrypt=void 0;var RWe=rM(),NWe=Uw(),MM=tt();async function PWe(e,t,r){let n=await(0,RWe.compactDecrypt)(e,t,r),s=(0,NWe.default)(n.protectedHeader,n.plaintext,r),{protectedHeader:i}=n;if(i.iss!==void 0&&i.iss!==s.iss)throw new MM.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(i.sub!==void 0&&i.sub!==s.sub)throw new MM.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(i.aud!==void 0&&JSON.stringify(i.aud)!==JSON.stringify(s.aud))throw new MM.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let o={payload:s,protectedHeader:i};return typeof t=="function"?{...o,key:n.key}:o}Vw.jwtDecrypt=PWe});var qM=S(Hw=>{"use strict";Object.defineProperty(Hw,"__esModule",{value:!0});Hw.CompactEncrypt=void 0;var OWe=Pw(),UM=class{constructor(t){this._flattened=new OWe.FlattenedEncrypt(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){let n=await this._flattened.encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}};Hw.CompactEncrypt=UM});var Kw=S(jw=>{"use strict";Object.defineProperty(jw,"__esModule",{value:!0});jw.FlattenedSign=void 0;var VM=$s(),DWe=IM(),kWe=Cm(),lE=tt(),yf=hn(),BWe=oE(),LWe=xm(),HM=class{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new lE.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,kWe.default)(this._protectedHeader,this._unprotectedHeader))throw new lE.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader},s=(0,LWe.default)(lE.JWSInvalid,new Map([["b64",!0]]),r?.crit,this._protectedHeader,n),i=!0;if(s.has("b64")&&(i=this._protectedHeader.b64,typeof i!="boolean"))throw new lE.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:o}=n;if(typeof o!="string"||!o)throw new lE.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,BWe.default)(o,t,"sign");let a=this._payload;i&&(a=yf.encoder.encode((0,VM.encode)(a)));let c;this._protectedHeader?c=yf.encoder.encode((0,VM.encode)(JSON.stringify(this._protectedHeader))):c=yf.encoder.encode("");let l=(0,yf.concat)(c,yf.encoder.encode("."),a),d=await(0,DWe.default)(o,t,l),f={signature:(0,VM.encode)(d),payload:""};return i&&(f.payload=yf.decoder.decode(a)),this._unprotectedHeader&&(f.header=this._unprotectedHeader),this._protectedHeader&&(f.protected=yf.decoder.decode(c)),f}};jw.FlattenedSign=HM});var KM=S(zw=>{"use strict";Object.defineProperty(zw,"__esModule",{value:!0});zw.CompactSign=void 0;var FWe=Kw(),jM=class{constructor(t){this._flattened=new FWe.FlattenedSign(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){let n=await this._flattened.sign(t,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}};zw.CompactSign=jM});var Woe=S($w=>{"use strict";Object.defineProperty($w,"__esModule",{value:!0});$w.GeneralSign=void 0;var MWe=Kw(),Goe=tt(),zM=class{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}},$M=class{constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){let n=new zM(this,t,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new Goe.JWSInvalid("at least one signature must be added");let t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){let n=this._signatures[r],s=new MWe.FlattenedSign(this._payload);s.setProtectedHeader(n.protectedHeader),s.setUnprotectedHeader(n.unprotectedHeader);let{payload:i,...o}=await s.sign(n.key,n.options);if(r===0)t.payload=i;else if(t.payload!==i)throw new Goe.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(o)}return t}};$w.GeneralSign=$M});var Ww=S(Gw=>{"use strict";Object.defineProperty(Gw,"__esModule",{value:!0});Gw.ProduceJWT=void 0;var GM=DM(),UWe=Oi(),Joe=LM(),WM=class{constructor(t){if(!(0,UWe.default)(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:(0,GM.default)(new Date)+(0,Joe.default)(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:(0,GM.default)(new Date)+(0,Joe.default)(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:(0,GM.default)(new Date)}:this._payload={...this._payload,iat:t},this}};Gw.ProduceJWT=WM});var Xoe=S(Jw=>{"use strict";Object.defineProperty(Jw,"__esModule",{value:!0});Jw.SignJWT=void 0;var qWe=KM(),VWe=tt(),HWe=hn(),jWe=Ww(),JM=class extends jWe.ProduceJWT{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var n;let s=new qWe.CompactSign(HWe.encoder.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new VWe.JWTInvalid("JWTs MUST NOT use unencoded payload");return s.sign(t,r)}};Jw.SignJWT=JM});var Yoe=S(Xw=>{"use strict";Object.defineProperty(Xw,"__esModule",{value:!0});Xw.EncryptJWT=void 0;var KWe=qM(),zWe=hn(),$We=Ww(),XM=class extends $We.ProduceJWT{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){let n=new KWe.CompactEncrypt(zWe.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(t,r)}};Xw.EncryptJWT=XM});var eae=S(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.calculateJwkThumbprintUri=Om.calculateJwkThumbprint=void 0;var GWe=J3(),WWe=$s(),Qoe=tt(),JWe=hn(),XWe=Oi(),Cu=(e,t)=>{if(typeof e!="string"||!e)throw new Qoe.JWKInvalid(`${t} missing or invalid`)};async function Zoe(e,t){if(!(0,XWe.default)(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":Cu(e.crv,'"crv" (Curve) Parameter'),Cu(e.x,'"x" (X Coordinate) Parameter'),Cu(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":Cu(e.crv,'"crv" (Subtype of Key Pair) Parameter'),Cu(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":Cu(e.e,'"e" (Exponent) Parameter'),Cu(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":Cu(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new Qoe.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let n=JWe.encoder.encode(JSON.stringify(r));return(0,WWe.encode)(await(0,GWe.default)(t,n))}Om.calculateJwkThumbprint=Zoe;async function YWe(e,t){t??(t="sha256");let r=await Zoe(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}Om.calculateJwkThumbprintUri=YWe});var rae=S(Yw=>{"use strict";Object.defineProperty(Yw,"__esModule",{value:!0});Yw.EmbeddedJWK=void 0;var QWe=iE(),ZWe=Oi(),tae=tt();async function e7e(e,t){let r={...e,...t?.header};if(!(0,ZWe.default)(r.jwk))throw new tae.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let n=await(0,QWe.importJWK)({...r.jwk,ext:!0},r.alg,!0);if(n instanceof Uint8Array||n.type!=="public")throw new tae.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}Yw.EmbeddedJWK=e7e});var YM=S(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.createLocalJWKSet=_u.LocalJWKSet=_u.isJWKSLike=void 0;var t7e=iE(),uE=tt(),r7e=Oi();function n7e(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new uE.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function sae(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(s7e)}_u.isJWKSLike=sae;function s7e(e){return(0,r7e.default)(e)}function i7e(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}var Qw=class{constructor(t){if(this._cached=new WeakMap,!sae(t))throw new uE.JWKSInvalid("JSON Web Key Set malformed");this._jwks=i7e(t)}async getKey(t,r){let{alg:n,kid:s}={...t,...r?.header},i=n7e(n),o=this._jwks.keys.filter(l=>{let d=i===l.kty;if(d&&typeof s=="string"&&(d=s===l.kid),d&&typeof l.alg=="string"&&(d=n===l.alg),d&&typeof l.use=="string"&&(d=l.use==="sig"),d&&Array.isArray(l.key_ops)&&(d=l.key_ops.includes("verify")),d&&n==="EdDSA"&&(d=l.crv==="Ed25519"||l.crv==="Ed448"),d)switch(n){case"ES256":d=l.crv==="P-256";break;case"ES256K":d=l.crv==="secp256k1";break;case"ES384":d=l.crv==="P-384";break;case"ES512":d=l.crv==="P-521";break}return d}),{0:a,length:c}=o;if(c===0)throw new uE.JWKSNoMatchingKey;if(c!==1){let l=new uE.JWKSMultipleMatchingKeys,{_cached:d}=this;throw l[Symbol.asyncIterator]=async function*(){for(let f of o)try{yield await nae(d,f,n)}catch{continue}},l}return nae(this._cached,a,n)}};_u.LocalJWKSet=Qw;async function nae(e,t,r){let n=e.get(t)||e.set(t,{}).get(t);if(n[r]===void 0){let s=await(0,t7e.importJWK)({...t,ext:!0},r);if(s instanceof Uint8Array||s.type!=="public")throw new uE.JWKSInvalid("JSON Web Key Set members must be public keys");n[r]=s}return n[r]}function o7e(e){let t=new Qw(e);return async function(r,n){return t.getKey(r,n)}}_u.createLocalJWKSet=o7e});var aae=S(ZM=>{"use strict";Object.defineProperty(ZM,"__esModule",{value:!0});var a7e=require("http"),c7e=require("https"),iae=require("events"),QM=tt(),oae=hn(),l7e=async(e,t,r)=>{let n;switch(e.protocol){case"https:":n=c7e.get;break;case"http:":n=a7e.get;break;default:throw new TypeError("Unsupported URL protocol.")}let{agent:s,headers:i}=r,o=n(e.href,{agent:s,timeout:t,headers:i}),[a]=await Promise.race([(0,iae.once)(o,"response"),(0,iae.once)(o,"timeout")]);if(!a)throw o.destroy(),new QM.JWKSTimeout;if(a.statusCode!==200)throw new QM.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let c=[];for await(let l of a)c.push(l);try{return JSON.parse(oae.decoder.decode((0,oae.concat)(...c)))}catch{throw new QM.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};ZM.default=l7e});var uae=S(Zw=>{"use strict";Object.defineProperty(Zw,"__esModule",{value:!0});Zw.createRemoteJWKSet=void 0;var u7e=aae(),cae=tt(),lae=YM();function d7e(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}var eU=class extends lae.LocalJWKSet{constructor(t,r){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:r?.agent,headers:r?.headers},this._timeoutDuration=typeof r?.timeoutDuration=="number"?r?.timeoutDuration:5e3,this._cooldownDuration=typeof r?.cooldownDuration=="number"?r?.cooldownDuration:3e4,this._cacheMaxAge=typeof r?.cacheMaxAge=="number"?r?.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(t,r)}catch(n){if(n instanceof cae.JWKSNoMatchingKey&&this.coolingDown()===!1)return await this.reload(),super.getKey(t,r);throw n}}async reload(){this._pendingFetch&&d7e()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,u7e.default)(this._url,this._timeoutDuration,this._options).then(t=>{if(!(0,lae.isJWKSLike)(t))throw new cae.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:t.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(t=>{throw this._pendingFetch=void 0,t})),await this._pendingFetch}};function f7e(e,t){let r=new eU(e,t);return async function(n,s){return r.getKey(n,s)}}Zw.createRemoteJWKSet=f7e});var dae=S(tT=>{"use strict";Object.defineProperty(tT,"__esModule",{value:!0});tT.UnsecuredJWT=void 0;var eT=$s(),h7e=hn(),tU=tt(),p7e=Uw(),m7e=Ww(),rU=class extends m7e.ProduceJWT{encode(){let t=eT.encode(JSON.stringify({alg:"none"})),r=eT.encode(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){if(typeof t!="string")throw new tU.JWTInvalid("Unsecured JWT must be a string");let{0:n,1:s,2:i,length:o}=t.split(".");if(o!==3||i!=="")throw new tU.JWTInvalid("Invalid Unsecured JWT");let a;try{if(a=JSON.parse(h7e.decoder.decode(eT.decode(n))),a.alg!=="none")throw new Error}catch{throw new tU.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,p7e.default)(a,eT.decode(s),r),header:a}}};tT.UnsecuredJWT=rU});var rT=S(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.decode=Dm.encode=void 0;var fae=$s();Dm.encode=fae.encode;Dm.decode=fae.decode});var hae=S(nT=>{"use strict";Object.defineProperty(nT,"__esModule",{value:!0});nT.decodeProtectedHeader=void 0;var g7e=rT(),y7e=hn(),E7e=Oi();function S7e(e){let t;if(typeof e=="string"){let r=e.split(".");(r.length===3||r.length===5)&&([t]=r)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;let r=JSON.parse(y7e.decoder.decode((0,g7e.decode)(t)));if(!(0,E7e.default)(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}nT.decodeProtectedHeader=S7e});var pae=S(sT=>{"use strict";Object.defineProperty(sT,"__esModule",{value:!0});sT.decodeJwt=void 0;var C7e=rT(),_7e=hn(),b7e=Oi(),Ef=tt();function v7e(e){if(typeof e!="string")throw new Ef.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:t,length:r}=e.split(".");if(r===5)throw new Ef.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Ef.JWTInvalid("Invalid JWT");if(!t)throw new Ef.JWTInvalid("JWTs must contain a payload");let n;try{n=(0,C7e.decode)(t)}catch{throw new Ef.JWTInvalid("Failed to base64url decode the payload")}let s;try{s=JSON.parse(_7e.decoder.decode(n))}catch{throw new Ef.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,b7e.default)(s))throw new Ef.JWTInvalid("Invalid JWT Claims Set");return s}sT.decodeJwt=v7e});var nU=S(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.generateKeyPair=km.generateSecret=void 0;var gae=require("crypto"),A7e=require("util"),x7e=G0(),mae=eE(),dE=tt(),ac=(0,A7e.promisify)(gae.generateKeyPair);async function I7e(e,t){let r;switch(e){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new dE.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,gae.createSecretKey)((0,x7e.default)(new Uint8Array(r>>3)))}km.generateSecret=I7e;async function w7e(e,t){var r,n;switch(e){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let i=(r=t?.modulusLength)!==null&&r!==void 0?r:2048;if(typeof i!="number"||i<2048)throw new dE.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let o=await ac("rsa",{modulusLength:i,publicExponent:65537});return(0,mae.setModulusLength)(o.privateKey,i),(0,mae.setModulusLength)(o.publicKey,i),o}case"ES256":return ac("ec",{namedCurve:"P-256"});case"ES256K":return ac("ec",{namedCurve:"secp256k1"});case"ES384":return ac("ec",{namedCurve:"P-384"});case"ES512":return ac("ec",{namedCurve:"P-521"});case"EdDSA":switch(t?.crv){case void 0:case"Ed25519":return ac("ed25519");case"Ed448":return ac("ed448");default:throw new dE.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let s=(n=t?.crv)!==null&&n!==void 0?n:"P-256";switch(s){case void 0:case"P-256":case"P-384":case"P-521":return ac("ec",{namedCurve:s});case"X25519":return ac("x25519");case"X448":return ac("x448");default:throw new dE.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new dE.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}km.generateKeyPair=w7e});var yae=S(iT=>{"use strict";Object.defineProperty(iT,"__esModule",{value:!0});iT.generateKeyPair=void 0;var T7e=nU();async function R7e(e,t){return(0,T7e.generateKeyPair)(e,t)}iT.generateKeyPair=R7e});var Eae=S(oT=>{"use strict";Object.defineProperty(oT,"__esModule",{value:!0});oT.generateSecret=void 0;var N7e=nU();async function P7e(e,t){return(0,N7e.generateSecret)(e,t)}oT.generateSecret=P7e});var Sae=S(sU=>{"use strict";Object.defineProperty(sU,"__esModule",{value:!0});sU.default="node:crypto"});var Cae=S(iU=>{"use strict";Object.defineProperty(iU,"__esModule",{value:!0});var O7e=Sae();iU.default=O7e.default});var aU=S(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.cryptoRuntime=ve.base64url=ve.generateSecret=ve.generateKeyPair=ve.errors=ve.decodeJwt=ve.decodeProtectedHeader=ve.importJWK=ve.importX509=ve.importPKCS8=ve.importSPKI=ve.exportJWK=ve.exportSPKI=ve.exportPKCS8=ve.UnsecuredJWT=ve.createRemoteJWKSet=ve.createLocalJWKSet=ve.EmbeddedJWK=ve.calculateJwkThumbprintUri=ve.calculateJwkThumbprint=ve.EncryptJWT=ve.SignJWT=ve.GeneralSign=ve.FlattenedSign=ve.CompactSign=ve.FlattenedEncrypt=ve.CompactEncrypt=ve.jwtDecrypt=ve.jwtVerify=ve.generalVerify=ve.flattenedVerify=ve.compactVerify=ve.GeneralEncrypt=ve.generalDecrypt=ve.flattenedDecrypt=ve.compactDecrypt=void 0;var D7e=rM();Object.defineProperty(ve,"compactDecrypt",{enumerable:!0,get:function(){return D7e.compactDecrypt}});var k7e=Aw();Object.defineProperty(ve,"flattenedDecrypt",{enumerable:!0,get:function(){return k7e.flattenedDecrypt}});var B7e=voe();Object.defineProperty(ve,"generalDecrypt",{enumerable:!0,get:function(){return B7e.generalDecrypt}});var L7e=Noe();Object.defineProperty(ve,"GeneralEncrypt",{enumerable:!0,get:function(){return L7e.GeneralEncrypt}});var F7e=NM();Object.defineProperty(ve,"compactVerify",{enumerable:!0,get:function(){return F7e.compactVerify}});var M7e=Lw();Object.defineProperty(ve,"flattenedVerify",{enumerable:!0,get:function(){return M7e.flattenedVerify}});var U7e=qoe();Object.defineProperty(ve,"generalVerify",{enumerable:!0,get:function(){return U7e.generalVerify}});var q7e=zoe();Object.defineProperty(ve,"jwtVerify",{enumerable:!0,get:function(){return q7e.jwtVerify}});var V7e=$oe();Object.defineProperty(ve,"jwtDecrypt",{enumerable:!0,get:function(){return V7e.jwtDecrypt}});var H7e=qM();Object.defineProperty(ve,"CompactEncrypt",{enumerable:!0,get:function(){return H7e.CompactEncrypt}});var j7e=Pw();Object.defineProperty(ve,"FlattenedEncrypt",{enumerable:!0,get:function(){return j7e.FlattenedEncrypt}});var K7e=KM();Object.defineProperty(ve,"CompactSign",{enumerable:!0,get:function(){return K7e.CompactSign}});var z7e=Kw();Object.defineProperty(ve,"FlattenedSign",{enumerable:!0,get:function(){return z7e.FlattenedSign}});var $7e=Woe();Object.defineProperty(ve,"GeneralSign",{enumerable:!0,get:function(){return $7e.GeneralSign}});var G7e=Xoe();Object.defineProperty(ve,"SignJWT",{enumerable:!0,get:function(){return G7e.SignJWT}});var W7e=Yoe();Object.defineProperty(ve,"EncryptJWT",{enumerable:!0,get:function(){return W7e.EncryptJWT}});var _ae=eae();Object.defineProperty(ve,"calculateJwkThumbprint",{enumerable:!0,get:function(){return _ae.calculateJwkThumbprint}});Object.defineProperty(ve,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return _ae.calculateJwkThumbprintUri}});var J7e=rae();Object.defineProperty(ve,"EmbeddedJWK",{enumerable:!0,get:function(){return J7e.EmbeddedJWK}});var X7e=YM();Object.defineProperty(ve,"createLocalJWKSet",{enumerable:!0,get:function(){return X7e.createLocalJWKSet}});var Y7e=uae();Object.defineProperty(ve,"createRemoteJWKSet",{enumerable:!0,get:function(){return Y7e.createRemoteJWKSet}});var Q7e=dae();Object.defineProperty(ve,"UnsecuredJWT",{enumerable:!0,get:function(){return Q7e.UnsecuredJWT}});var oU=aM();Object.defineProperty(ve,"exportPKCS8",{enumerable:!0,get:function(){return oU.exportPKCS8}});Object.defineProperty(ve,"exportSPKI",{enumerable:!0,get:function(){return oU.exportSPKI}});Object.defineProperty(ve,"exportJWK",{enumerable:!0,get:function(){return oU.exportJWK}});var aT=iE();Object.defineProperty(ve,"importSPKI",{enumerable:!0,get:function(){return aT.importSPKI}});Object.defineProperty(ve,"importPKCS8",{enumerable:!0,get:function(){return aT.importPKCS8}});Object.defineProperty(ve,"importX509",{enumerable:!0,get:function(){return aT.importX509}});Object.defineProperty(ve,"importJWK",{enumerable:!0,get:function(){return aT.importJWK}});var Z7e=hae();Object.defineProperty(ve,"decodeProtectedHeader",{enumerable:!0,get:function(){return Z7e.decodeProtectedHeader}});var eJe=pae();Object.defineProperty(ve,"decodeJwt",{enumerable:!0,get:function(){return eJe.decodeJwt}});ve.errors=tt();var tJe=yae();Object.defineProperty(ve,"generateKeyPair",{enumerable:!0,get:function(){return tJe.generateKeyPair}});var rJe=Eae();Object.defineProperty(ve,"generateSecret",{enumerable:!0,get:function(){return rJe.generateSecret}});ve.base64url=rT();var nJe=Cae();Object.defineProperty(ve,"cryptoRuntime",{enumerable:!0,get:function(){return nJe.default}})});var lT=S((Uht,bae)=>{function cT(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="JwksError",this.message=e}cT.prototype=Object.create(Error.prototype);cT.prototype.constructor=cT;bae.exports=cT});var cU=S((qht,Aae)=>{var vae=aU(),sJe=lT();function iJe(e){if(e.alg)return e.alg;if(e.kty==="RSA")return"RS256";if(e.kty==="EC")switch(e.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-521":return"ES512"}if(e.kty==="OKP")switch(e.crv){case"Ed25519":case"Ed448":return"EdDSA"}throw new sJe("Unsupported JWK")}async function oJe(e){let t=[];e=e.filter(({use:r})=>r==="sig"||r===void 0).filter(({kty:r})=>r==="RSA"||r==="EC"||r==="OKP");for(let r of e)try{let n=await vae.importJWK({...r,ext:!0},iJe(r));if(n.type!=="public")continue;let s;switch(n[Symbol.toStringTag]){case"CryptoKey":{let i=await vae.exportSPKI(n);s=()=>i;break}case"KeyObject":default:s=()=>n.export({format:"pem",type:"spki"})}t.push({get publicKey(){return s()},get rsaPublicKey(){return s()},getPublicKey(){return s()},...typeof r.kid=="string"&&r.kid?{kid:r.kid}:void 0,...typeof r.alg=="string"&&r.alg?{alg:r.alg}:void 0})}catch{continue}return t}Aae.exports={retrieveSigningKeys:oJe}});var Iae=S((Vht,xae)=>{var aJe=require("http"),cJe=require("https"),lJe=require("url");xae.exports.default=e=>e.fetcher?e.fetcher(e.uri):new Promise((t,r)=>{let{hostname:n,path:s,port:i,protocol:o}=lJe.parse(e.uri),a={hostname:n,path:s,port:i,method:"GET",...e.headers&&{headers:{...e.headers}},...e.timeout&&{timeout:e.timeout},...e.agent&&{agent:e.agent}},l=(o==="https:"?cJe:aJe).request(a,d=>{let f="";d.setEncoding("utf8"),d.on("data",h=>{f+=h}),d.on("end",()=>{if(d.statusCode<200||d.statusCode>=300){let h=d.body&&(d.body.message||d.body)||d.statusMessage||`Http Error ${d.statusCode}`;r({errorMsg:h})}else try{t(f&&JSON.parse(f))}catch(h){r(h)}})});l.on("timeout",()=>l.destroy()).on("error",d=>r(d)).end()})});var Tae=S((Hht,wae)=>{"use strict";wae.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Nae=S((jht,Rae)=>{"use strict";Rae.exports=er;er.Node=Sf;er.create=er;function er(e){var t=this;if(t instanceof er||(t=new er),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}er.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};er.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};er.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};er.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)dJe(this,arguments[e]);return this.length};er.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)fJe(this,arguments[e]);return this.length};er.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};er.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};er.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};er.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};er.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};er.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};er.prototype.map=function(e,t){t=t||this;for(var r=new er,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};er.prototype.mapReverse=function(e,t){t=t||this;for(var r=new er,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};er.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)r=e(r,n.value,s),n=n.next;return r};er.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)r=e(r,n.value,s),n=n.prev;return r};er.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};er.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};er.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new er;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(;s!==null&&n<t;n++,s=s.next)r.push(s.value);return r};er.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new er;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,s=this.tail;s!==null&&n>t;n--)s=s.prev;for(;s!==null&&n>e;n--,s=s.prev)r.push(s.value);return r};er.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(var i=[],n=0;s&&n<t;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=uJe(this,s,r[n]);return i};er.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function uJe(e,t,r){var n=t===e.head?new Sf(r,null,t,e):new Sf(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function dJe(e,t){e.tail=new Sf(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function fJe(e,t){e.head=new Sf(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Sf(e,t,r,n){if(!(this instanceof Sf))return new Sf(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Tae()(er)}catch{}});var hU=S((Kht,kae)=>{"use strict";var hJe=Nae(),Cf=Symbol("max"),Wc=Symbol("length"),Bm=Symbol("lengthCalculator"),hE=Symbol("allowStale"),_f=Symbol("maxAge"),Gc=Symbol("dispose"),Pae=Symbol("noDisposeOnSet"),ms=Symbol("lruList"),da=Symbol("cache"),Dae=Symbol("updateAgeOnGet"),lU=()=>1,dU=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[Cf]=t.max||1/0,n=t.length||lU;if(this[Bm]=typeof n!="function"?lU:n,this[hE]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[_f]=t.maxAge||0,this[Gc]=t.dispose,this[Pae]=t.noDisposeOnSet||!1,this[Dae]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Cf]=t||1/0,fE(this)}get max(){return this[Cf]}set allowStale(t){this[hE]=!!t}get allowStale(){return this[hE]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[_f]=t,fE(this)}get maxAge(){return this[_f]}set lengthCalculator(t){typeof t!="function"&&(t=lU),t!==this[Bm]&&(this[Bm]=t,this[Wc]=0,this[ms].forEach(r=>{r.length=this[Bm](r.value,r.key),this[Wc]+=r.length})),fE(this)}get lengthCalculator(){return this[Bm]}get length(){return this[Wc]}get itemCount(){return this[ms].length}rforEach(t,r){r=r||this;for(let n=this[ms].tail;n!==null;){let s=n.prev;Oae(this,t,n,r),n=s}}forEach(t,r){r=r||this;for(let n=this[ms].head;n!==null;){let s=n.next;Oae(this,t,n,r),n=s}}keys(){return this[ms].toArray().map(t=>t.key)}values(){return this[ms].toArray().map(t=>t.value)}reset(){this[Gc]&&this[ms]&&this[ms].length&&this[ms].forEach(t=>this[Gc](t.key,t.value)),this[da]=new Map,this[ms]=new hJe,this[Wc]=0}dump(){return this[ms].map(t=>uT(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ms]}set(t,r,n){if(n=n||this[_f],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[Bm](r,t);if(this[da].has(t)){if(i>this[Cf])return Lm(this,this[da].get(t)),!1;let c=this[da].get(t).value;return this[Gc]&&(this[Pae]||this[Gc](t,c.value)),c.now=s,c.maxAge=n,c.value=r,this[Wc]+=i-c.length,c.length=i,this.get(t),fE(this),!0}let o=new fU(t,r,i,s,n);return o.length>this[Cf]?(this[Gc]&&this[Gc](t,r),!1):(this[Wc]+=o.length,this[ms].unshift(o),this[da].set(t,this[ms].head),fE(this),!0)}has(t){if(!this[da].has(t))return!1;let r=this[da].get(t).value;return!uT(this,r)}get(t){return uU(this,t,!0)}peek(t){return uU(this,t,!1)}pop(){let t=this[ms].tail;return t?(Lm(this,t),t.value):null}del(t){Lm(this,this[da].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let s=t[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-r;o>0&&this.set(s.k,s.v,o)}}}prune(){this[da].forEach((t,r)=>uU(this,r,!1))}},uU=(e,t,r)=>{let n=e[da].get(t);if(n){let s=n.value;if(uT(e,s)){if(Lm(e,n),!e[hE])return}else r&&(e[Dae]&&(n.value.now=Date.now()),e[ms].unshiftNode(n));return s.value}},uT=(e,t)=>{if(!t||!t.maxAge&&!e[_f])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[_f]&&r>e[_f]},fE=e=>{if(e[Wc]>e[Cf])for(let t=e[ms].tail;e[Wc]>e[Cf]&&t!==null;){let r=t.prev;Lm(e,t),t=r}},Lm=(e,t)=>{if(t){let r=t.value;e[Gc]&&e[Gc](r.key,r.value),e[Wc]-=r.length,e[da].delete(r.key),e[ms].removeNode(t)}},fU=class{constructor(t,r,n,s,i){this.key=t,this.value=r,this.length=n,this.now=s,this.maxAge=i||0}},Oae=(e,t,r,n)=>{let s=r.value;uT(e,s)&&(Lm(e,r),e[hE]||(s=void 0)),s&&t.call(n,s.value,s.key,e)};kae.exports=dU});var TU=S((pE,Fm)=>{var pJe=200,$ae="__lodash_hash_undefined__",Gae=9007199254740991,_U="[object Arguments]",mJe="[object Array]",Wae="[object Boolean]",Jae="[object Date]",gJe="[object Error]",bU="[object Function]",Xae="[object GeneratorFunction]",dT="[object Map]",Yae="[object Number]",vU="[object Object]",Bae="[object Promise]",Qae="[object RegExp]",fT="[object Set]",Zae="[object String]",ece="[object Symbol]",mU="[object WeakMap]",tce="[object ArrayBuffer]",hT="[object DataView]",rce="[object Float32Array]",nce="[object Float64Array]",sce="[object Int8Array]",ice="[object Int16Array]",oce="[object Int32Array]",ace="[object Uint8Array]",cce="[object Uint8ClampedArray]",lce="[object Uint16Array]",uce="[object Uint32Array]",yJe=/[\\^$.*+?()[\]{}|]/g,EJe=/\w*$/,SJe=/^\[object .+?Constructor\]$/,CJe=/^(?:0|[1-9]\d*)$/,Ur={};Ur[_U]=Ur[mJe]=Ur[tce]=Ur[hT]=Ur[Wae]=Ur[Jae]=Ur[rce]=Ur[nce]=Ur[sce]=Ur[ice]=Ur[oce]=Ur[dT]=Ur[Yae]=Ur[vU]=Ur[Qae]=Ur[fT]=Ur[Zae]=Ur[ece]=Ur[ace]=Ur[cce]=Ur[lce]=Ur[uce]=!0;Ur[gJe]=Ur[bU]=Ur[mU]=!1;var _Je=typeof global=="object"&&global&&global.Object===Object&&global,bJe=typeof self=="object"&&self&&self.Object===Object&&self,Jc=_Je||bJe||Function("return this")(),dce=typeof pE=="object"&&pE&&!pE.nodeType&&pE,Lae=dce&&typeof Fm=="object"&&Fm&&!Fm.nodeType&&Fm,vJe=Lae&&Lae.exports===dce;function AJe(e,t){return e.set(t[0],t[1]),e}function xJe(e,t){return e.add(t),e}function IJe(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function wJe(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}function fce(e,t,r,n){var s=-1,i=e?e.length:0;for(n&&i&&(r=e[++s]);++s<i;)r=t(r,e[s],s,e);return r}function TJe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function RJe(e,t){return e?.[t]}function hce(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function Fae(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}function AU(e,t){return function(r){return e(t(r))}}function Mae(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var NJe=Array.prototype,PJe=Function.prototype,pT=Object.prototype,pU=Jc["__core-js_shared__"],Uae=(function(){var e=/[^.]+$/.exec(pU&&pU.keys&&pU.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),pce=PJe.toString,bu=pT.hasOwnProperty,mT=pT.toString,OJe=RegExp("^"+pce.call(bu).replace(yJe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qae=vJe?Jc.Buffer:void 0,Vae=Jc.Symbol,Hae=Jc.Uint8Array,DJe=AU(Object.getPrototypeOf,Object),kJe=Object.create,BJe=pT.propertyIsEnumerable,LJe=NJe.splice,jae=Object.getOwnPropertySymbols,FJe=qae?qae.isBuffer:void 0,MJe=AU(Object.keys,Object),gU=qm(Jc,"DataView"),mE=qm(Jc,"Map"),yU=qm(Jc,"Promise"),EU=qm(Jc,"Set"),SU=qm(Jc,"WeakMap"),gE=qm(Object,"create"),UJe=Af(gU),qJe=Af(mE),VJe=Af(yU),HJe=Af(EU),jJe=Af(SU),Kae=Vae?Vae.prototype:void 0,zae=Kae?Kae.valueOf:void 0;function vf(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function KJe(){this.__data__=gE?gE(null):{}}function zJe(e){return this.has(e)&&delete this.__data__[e]}function $Je(e){var t=this.__data__;if(gE){var r=t[e];return r===$ae?void 0:r}return bu.call(t,e)?t[e]:void 0}function GJe(e){var t=this.__data__;return gE?t[e]!==void 0:bu.call(t,e)}function WJe(e,t){var r=this.__data__;return r[e]=gE&&t===void 0?$ae:t,this}vf.prototype.clear=KJe;vf.prototype.delete=zJe;vf.prototype.get=$Je;vf.prototype.has=GJe;vf.prototype.set=WJe;function Xc(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function JJe(){this.__data__=[]}function XJe(e){var t=this.__data__,r=gT(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():LJe.call(t,r,1),!0}function YJe(e){var t=this.__data__,r=gT(t,e);return r<0?void 0:t[r][1]}function QJe(e){return gT(this.__data__,e)>-1}function ZJe(e,t){var r=this.__data__,n=gT(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}Xc.prototype.clear=JJe;Xc.prototype.delete=XJe;Xc.prototype.get=YJe;Xc.prototype.has=QJe;Xc.prototype.set=ZJe;function Mm(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function eXe(){this.__data__={hash:new vf,map:new(mE||Xc),string:new vf}}function tXe(e){return yT(this,e).delete(e)}function rXe(e){return yT(this,e).get(e)}function nXe(e){return yT(this,e).has(e)}function sXe(e,t){return yT(this,e).set(e,t),this}Mm.prototype.clear=eXe;Mm.prototype.delete=tXe;Mm.prototype.get=rXe;Mm.prototype.has=nXe;Mm.prototype.set=sXe;function Um(e){this.__data__=new Xc(e)}function iXe(){this.__data__=new Xc}function oXe(e){return this.__data__.delete(e)}function aXe(e){return this.__data__.get(e)}function cXe(e){return this.__data__.has(e)}function lXe(e,t){var r=this.__data__;if(r instanceof Xc){var n=r.__data__;if(!mE||n.length<pJe-1)return n.push([e,t]),this;r=this.__data__=new Mm(n)}return r.set(e,t),this}Um.prototype.clear=iXe;Um.prototype.delete=oXe;Um.prototype.get=aXe;Um.prototype.has=cXe;Um.prototype.set=lXe;function uXe(e,t){var r=IU(e)||kXe(e)?TJe(e.length,String):[],n=r.length,s=!!n;for(var i in e)(t||bu.call(e,i))&&!(s&&(i=="length"||NXe(i,n)))&&r.push(i);return r}function mce(e,t,r){var n=e[t];(!(bu.call(e,t)&&Sce(n,r))||r===void 0&&!(t in e))&&(e[t]=r)}function gT(e,t){for(var r=e.length;r--;)if(Sce(e[r][0],t))return r;return-1}function dXe(e,t){return e&&gce(t,wU(t),e)}function CU(e,t,r,n,s,i,o){var a;if(n&&(a=i?n(e,s,i,o):n(e)),a!==void 0)return a;if(!ET(e))return e;var c=IU(e);if(c){if(a=wXe(e),!t)return AXe(e,a)}else{var l=bf(e),d=l==bU||l==Xae;if(LXe(e))return yXe(e,t);if(l==vU||l==_U||d&&!i){if(hce(e))return i?e:{};if(a=TXe(d?{}:e),!t)return xXe(e,dXe(a,e))}else{if(!Ur[l])return i?e:{};a=RXe(e,l,CU,t)}}o||(o=new Um);var f=o.get(e);if(f)return f;if(o.set(e,a),!c)var h=r?IXe(e):wU(e);return IJe(h||e,function(p,m){h&&(m=p,p=e[m]),mce(a,m,CU(p,t,r,n,m,e,o))}),a}function fXe(e){return ET(e)?kJe(e):{}}function hXe(e,t,r){var n=t(e);return IU(e)?n:wJe(n,r(e))}function pXe(e){return mT.call(e)}function mXe(e){if(!ET(e)||OXe(e))return!1;var t=_ce(e)||hce(e)?OJe:SJe;return t.test(Af(e))}function gXe(e){if(!Ece(e))return MJe(e);var t=[];for(var r in Object(e))bu.call(e,r)&&r!="constructor"&&t.push(r);return t}function yXe(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function xU(e){var t=new e.constructor(e.byteLength);return new Hae(t).set(new Hae(e)),t}function EXe(e,t){var r=t?xU(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function SXe(e,t,r){var n=t?r(Fae(e),!0):Fae(e);return fce(n,AJe,new e.constructor)}function CXe(e){var t=new e.constructor(e.source,EJe.exec(e));return t.lastIndex=e.lastIndex,t}function _Xe(e,t,r){var n=t?r(Mae(e),!0):Mae(e);return fce(n,xJe,new e.constructor)}function bXe(e){return zae?Object(zae.call(e)):{}}function vXe(e,t){var r=t?xU(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function AXe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function gce(e,t,r,n){r||(r={});for(var s=-1,i=t.length;++s<i;){var o=t[s],a=n?n(r[o],e[o],o,r,e):void 0;mce(r,o,a===void 0?e[o]:a)}return r}function xXe(e,t){return gce(e,yce(e),t)}function IXe(e){return hXe(e,wU,yce)}function yT(e,t){var r=e.__data__;return PXe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function qm(e,t){var r=RJe(e,t);return mXe(r)?r:void 0}var yce=jae?AU(jae,Object):UXe,bf=pXe;(gU&&bf(new gU(new ArrayBuffer(1)))!=hT||mE&&bf(new mE)!=dT||yU&&bf(yU.resolve())!=Bae||EU&&bf(new EU)!=fT||SU&&bf(new SU)!=mU)&&(bf=function(e){var t=mT.call(e),r=t==vU?e.constructor:void 0,n=r?Af(r):void 0;if(n)switch(n){case UJe:return hT;case qJe:return dT;case VJe:return Bae;case HJe:return fT;case jJe:return mU}return t});function wXe(e){var t=e.length,r=e.constructor(t);return t&&typeof e[0]=="string"&&bu.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function TXe(e){return typeof e.constructor=="function"&&!Ece(e)?fXe(DJe(e)):{}}function RXe(e,t,r,n){var s=e.constructor;switch(t){case tce:return xU(e);case Wae:case Jae:return new s(+e);case hT:return EXe(e,n);case rce:case nce:case sce:case ice:case oce:case ace:case cce:case lce:case uce:return vXe(e,n);case dT:return SXe(e,n,r);case Yae:case Zae:return new s(e);case Qae:return CXe(e);case fT:return _Xe(e,n,r);case ece:return bXe(e)}}function NXe(e,t){return t=t??Gae,!!t&&(typeof e=="number"||CJe.test(e))&&e>-1&&e%1==0&&e<t}function PXe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function OXe(e){return!!Uae&&Uae in e}function Ece(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||pT;return e===r}function Af(e){if(e!=null){try{return pce.call(e)}catch{}try{return e+""}catch{}}return""}function DXe(e){return CU(e,!0,!0)}function Sce(e,t){return e===t||e!==e&&t!==t}function kXe(e){return BXe(e)&&bu.call(e,"callee")&&(!BJe.call(e,"callee")||mT.call(e)==_U)}var IU=Array.isArray;function Cce(e){return e!=null&&FXe(e.length)&&!_ce(e)}function BXe(e){return MXe(e)&&Cce(e)}var LXe=FJe||qXe;function _ce(e){var t=ET(e)?mT.call(e):"";return t==bU||t==Xae}function FXe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Gae}function ET(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function MXe(e){return!!e&&typeof e=="object"}function wU(e){return Cce(e)?uXe(e):gXe(e)}function UXe(){return[]}function qXe(){return!1}Fm.exports=DXe});var RU=S(ST=>{"use strict";Object.defineProperty(ST,"__esModule",{value:!0});ST.deepFreeze=void 0;function bce(e){return e&&(Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){e.hasOwnProperty(t)&&e[t]!==null&&(typeof e[t]=="object"||typeof e[t]=="function")&&e[t].constructor!==Buffer&&!Object.isFrozen(e[t])&&bce(e[t])})),e}ST.deepFreeze=bce});var Ice=S(lc=>{"use strict";var VXe=lc&&lc.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},cc=lc&&lc.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(VXe(arguments[t]));return e},xce=lc&&lc.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lc,"__esModule",{value:!0});lc.syncMemoizer=void 0;var HXe=xce(hU()),jXe=require("events"),vce=xce(TU()),Ace=RU();function KXe(e){var t=new HXe.default(e),r=e.load,n=e.hash,s=e.bypass,i=e.itemMaxAge,o=e.freeze,a=e.clone,c=new jXe.EventEmitter,l=Object.assign({del:d,reset:function(){return t.reset()},keys:t.keys.bind(t),on:c.on.bind(c),once:c.once.bind(c)},e);if(e.disable)return Object.assign(r,l);function d(){var E=n.apply(void 0,cc(arguments));t.del(E)}function f(E){for(var b=[],A=1;A<arguments.length;A++)b[A-1]=arguments[A];c.emit.apply(c,cc([E],b))}function h(E){return E&&E.then&&typeof E.then=="function"}function p(E){var b=E;return a&&(h(b)?b=b.then(vce.default):b=vce.default(b)),o&&(h(b)?b=b.then(Ace.deepFreeze):Ace.deepFreeze(b)),b}var m=function(){for(var E=[],b=0;b<arguments.length;b++)E[b]=arguments[b];if(s&&s.apply(void 0,cc(E)))return f.apply(void 0,cc(["miss"],E)),r.apply(void 0,cc(E));var A=n.apply(void 0,cc(E)),R=t.get(A);if(R)return f.apply(void 0,cc(["hit"],E)),p(R);f.apply(void 0,cc(["miss"],E));var D=r.apply(void 0,cc(E));return i?t.set(A,D,i.apply(void 0,cc(E.concat([D])))):t.set(A,D),p(D)};return Object.assign(m,l)}lc.syncMemoizer=KXe});var Rce=S(Lo=>{"use strict";var zXe=Lo&&Lo.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Di=Lo&&Lo.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zXe(arguments[t]));return e},$Xe=Lo&&Lo.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wce=Lo&&Lo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.asyncMemoizer=void 0;var GXe=wce(hU()),WXe=require("events"),JXe=wce(TU()),XXe=RU(),YXe=Ice();function Tce(e){var t=new GXe.default(e),r=e.load,n=e.hash,s=e.bypass,i=e.itemMaxAge,o=e.freeze,a=e.clone,c=e.queueMaxAge||1e3,l=new Map,d=new WXe.EventEmitter,f=Object.assign({del:h,reset:function(){return t.reset()},keys:t.keys.bind(t),on:d.on.bind(d),once:d.once.bind(d)},e);if(e.disable)return Object.assign(r,f);function h(){for(var A=[],R=0;R<arguments.length;R++)A[R]=arguments[R];var D=n.apply(void 0,Di(A));t.del(D)}function p(A,R,D){o&&D.forEach(XXe.deepFreeze),i?t.set(A,D,i.apply(void 0,Di(R.concat(D)))):t.set(A,D)}function m(A,R){var D,K;try{for(var z=$Xe(A),G=z.next();!G.done;G=z.next()){var ye=G.value;a?setImmediate.apply(void 0,Di([ye],R.map(JXe.default))):setImmediate.apply(void 0,Di([ye],R))}}catch(he){D={error:he}}finally{try{G&&!G.done&&(K=z.return)&&K.call(z)}finally{if(D)throw D.error}}}function E(A){for(var R=[],D=1;D<arguments.length;D++)R[D-1]=arguments[D];d.emit.apply(d,Di([A],R))}function b(){for(var A=[],R=0;R<arguments.length;R++)A[R]=arguments[R];var D=A.slice(0,-1),K=A.slice(-1).pop(),z;if(s&&s.apply(void 0,Di(D)))return E.apply(void 0,Di(["miss"],D)),r.apply(void 0,Di(A));D.length===0&&!n?z="_":z=n.apply(void 0,Di(D));var G=t.get(z);if(G)return E.apply(void 0,Di(["hit"],D)),m([K],[null].concat(G));var ye=l.get(z);if(ye&&ye.expiresAt>Date.now()){ye.queue.push(K),E.apply(void 0,Di(["queue"],D));return}E.apply(void 0,Di(["miss"],D));var he=Date.now(),xe=[K];l.set(z,{queue:xe,expiresAt:he+c});var Me=function(){for(var Ue=[],Ge=0;Ge<arguments.length;Ge++)Ue[Ge]=arguments[Ge];var zt=Ue[0];zt||p(z,D,Ue.slice(1)),l.delete(z),E.apply(void 0,Di(["loaded",Date.now()-he],D)),m(xe,Ue)};r.apply(void 0,Di(D,[Me]))}return Object.assign(b,f)}Lo.asyncMemoizer=Tce;Tce.sync=YXe.syncMemoizer});var Pce=S((Wht,Nce)=>{"use strict";var QXe=Rce();Nce.exports=QXe.asyncMemoizer});var Dce=S((Jht,Oce)=>{var ZXe=cw()("jwks"),eYe=Pce(),{promisify:tYe,callbackify:rYe}=require("util");function nYe(e,{cacheMaxEntries:t=5,cacheMaxAge:r=6e5}){return ZXe(`Configured caching of signing keys. Max: ${t} / Age: ${r}`),tYe(eYe({hash:n=>n,load:rYe(e.getSigningKey.bind(e)),maxAge:r,max:t}))}Oce.exports.default=nYe});var NU=S((Xht,Bce)=>{var kce=function(e,t,r,n){if(this.bucketSize=e,this.tokensPerInterval=t,typeof r=="string")switch(r){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+r)}else this.interval=r;this.parentBucket=n,this.content=0,this.lastDrip=+new Date};kce.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(e,t){var r=this;if(!this.bucketSize)return process.nextTick(t.bind(null,null,e,Number.POSITIVE_INFINITY)),!0;if(e>this.bucketSize)return process.nextTick(t.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null)),!1;if(this.drip(),e>this.content)return n();if(this.parentBucket)return this.parentBucket.removeTokens(e,function(s,i){if(s)return t(s,null);if(e>r.content)return n();r.content-=e,t(null,Math.min(i,r.content))});return this.content-=e,process.nextTick(t.bind(null,null,this.content)),!0;function n(){var s=Math.ceil((e-r.content)*(r.interval/r.tokensPerInterval));return setTimeout(function(){r.removeTokens(e,t)},s),!1}},tryRemoveTokens:function(e){return this.bucketSize?e>this.bucketSize||(this.drip(),e>this.content)||this.parentBucket&&!this.parentBucket.tryRemoveTokens(e)?!1:(this.content-=e,!0):!0},drip:function(){if(!this.tokensPerInterval){this.content=this.bucketSize;return}var e=+new Date,t=Math.max(e-this.lastDrip,0);this.lastDrip=e;var r=t*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+r,this.bucketSize)}};Bce.exports=kce});var Fce=S((Yht,Lce)=>{var sYe=function(){if(typeof process<"u"&&process.hrtime){var e=process.hrtime(),t=e[0],r=e[1];return t*1e3+Math.floor(r/1e6)}return new Date().getTime()};Lce.exports=sYe});var qce=S((Qht,Uce)=>{var iYe=NU(),PU=Fce(),Mce=function(e,t,r){this.tokenBucket=new iYe(e,e,t,null),this.tokenBucket.content=e,this.curIntervalStart=PU(),this.tokensThisInterval=0,this.fireImmediately=r};Mce.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(e,t){if(e>this.tokenBucket.bucketSize)return process.nextTick(t.bind(null,"Requested tokens "+e+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var r=this,n=PU();if((n<this.curIntervalStart||n-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=n,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)process.nextTick(t.bind(null,null,-1));else{var s=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-n);setTimeout(function(){r.tokenBucket.removeTokens(e,i)},s)}return!1}return this.tokenBucket.removeTokens(e,i);function i(o,a){if(o)return t(o,null);r.tokensThisInterval+=e,t(null,a)}},tryRemoveTokens:function(e){if(e>this.tokenBucket.bucketSize)return!1;var t=PU();if((t<this.curIntervalStart||t-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=t,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var r=this.tokenBucket.tryRemoveTokens(e);return r&&(this.tokensThisInterval+=e),r},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}};Uce.exports=Mce});var Vce=S(OU=>{OU.RateLimiter=qce();OU.TokenBucket=NU()});var DU=S((ept,Hce)=>{function CT(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="JwksRateLimitError",this.message=e}CT.prototype=Object.create(Error.prototype);CT.prototype.constructor=CT;Hce.exports=CT});var Kce=S((tpt,jce)=>{var kU=cw()("jwks"),{RateLimiter:oYe}=Vce(),aYe=DU();function cYe(e,{jwksRequestsPerMinute:t=10}){let r=e.getSigningKey.bind(e),n=new oYe(t,"minute",!0);return kU(`Configured rate limiting to JWKS endpoint at ${t}/minute`),async s=>await new Promise((i,o)=>{n.removeTokens(1,async(a,c)=>{if(a&&o(a),kU("Requests to the JWKS endpoint available for the next minute:",c),c<0)kU("Too many requests to the JWKS endpoint"),o(new aYe("Too many requests to the JWKS endpoint"));else try{let l=await r(s);i(l)}catch(l){o(l)}})})}jce.exports.default=cYe});var $ce=S((rpt,zce)=>{var lYe=cU().retrieveSigningKeys;function uYe(e,{getKeysInterceptor:t}){let r=e.getSigningKey.bind(e);return async n=>{let s=await t(),i;if(s&&s.length&&(i=await lYe(s)),i&&i.length){let o=i.find(a=>!n||a.kid===n);if(o)return o}return r(n)}}zce.exports.default=uYe});var Wce=S((npt,Gce)=>{var{callbackify:dYe}=require("util"),fYe=e=>{let t=e.getSigningKey.bind(e);return(r,n)=>n?dYe(t)(r,n):t(r)};Gce.exports.default=fYe});var Xce=S((spt,Jce)=>{Jce.exports={request:Iae().default,cacheSigningKey:Dce().default,rateLimitSigningKey:Kce().default,getKeysInterceptor:$ce().default,callbackSupport:Wce().default}});var BU=S((ipt,Yce)=>{function _T(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="SigningKeyNotFoundError",this.message=e}_T.prototype=Object.create(Error.prototype);_T.prototype.constructor=_T;Yce.exports=_T});var Vm=S((opt,Zce)=>{var xf=cw()("jwks"),{retrieveSigningKeys:hYe}=cU(),{request:pYe,cacheSigningKey:mYe,rateLimitSigningKey:gYe,getKeysInterceptor:yYe,callbackSupport:EYe}=Xce(),LU=lT(),Qce=BU(),FU=class{constructor(t){this.options={rateLimit:!1,cache:!0,timeout:3e4,...t},this.options.getKeysInterceptor&&(this.getSigningKey=yYe(this,t)),this.options.rateLimit&&(this.getSigningKey=gYe(this,t)),this.options.cache&&(this.getSigningKey=mYe(this,t)),this.getSigningKey=EYe(this,t)}async getKeys(){xf(`Fetching keys from '${this.options.jwksUri}'`);try{let t=await pYe({uri:this.options.jwksUri,headers:this.options.requestHeaders,agent:this.options.requestAgent,timeout:this.options.timeout,fetcher:this.options.fetcher});return xf("Keys:",t.keys),t.keys}catch(t){let{errorMsg:r}=t;throw xf("Failure:",r||t),r?new LU(r):t}}async getSigningKeys(){let t=await this.getKeys();if(!t||!t.length)throw new LU("The JWKS endpoint did not contain any keys");let r=await hYe(t);if(!r.length)throw new LU("The JWKS endpoint did not contain any signing keys");return xf("Signing Keys:",r),r}async getSigningKey(t){xf(`Fetching signing key for '${t}'`);let r=await this.getSigningKeys(),n=t!=null;if(!n&&r.length>1)throw xf("No KID specified and JWKS endpoint returned more than 1 key"),new Qce("No KID specified and JWKS endpoint returned more than 1 key");let s=r.find(i=>!n||i.kid===t);if(s)return s;throw xf(`Unable to find a signing key that matches '${t}'`),new Qce(`Unable to find a signing key that matches '${t}'`)}};Zce.exports={JwksClient:FU}});var tle=S((apt,ele)=>{function bT(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="ArgumentError",this.message=e}bT.prototype=Object.create(Error.prototype);bT.prototype.constructor=bT;ele.exports=bT});var Hm=S((cpt,rle)=>{rle.exports={ArgumentError:tle(),JwksError:lT(),JwksRateLimitError:DU(),SigningKeyNotFoundError:BU()}});var yE=S((lpt,nle)=>{var SYe=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES256K","ES384","ES512","EdDSA"];nle.exports=SYe});var sle=S((upt,vT)=>{var{ArgumentError:CYe}=Hm(),{JwksClient:_Ye}=Vm(),bYe=yE(),vYe=(e,t)=>{if(e&&e.name==="SigningKeyNotFoundError"||e)return t(e,null,null)};vT.exports.hapiJwt2KeyAsync=e=>{let t=vT.exports.hapiJwt2Key(e);return function(r){return new Promise((n,s)=>{t(r,(o,a)=>{!a||o?s(o):n({key:a})})})}};vT.exports.hapiJwt2Key=function(e){if(e==null)throw new CYe("An options object must be provided when initializing hapiJwt2Key");let t=new _Ye(e),r=e.handleSigningKeyError||vYe;return function(s,i){if(!s||!s.header)return i(new Error("Cannot find a signing certificate if there is no header"),null,null);if(!bYe.includes(s.header.alg))return i(new Error("Unsupported algorithm "+s.header.alg+" supplied."),null,null);t.getSigningKey(s.header.kid).then(o=>i(null,o.publicKey||o.rsaPublicKey,o)).catch(o=>r(o,a=>i(a,null,null)))}}});var ole=S((dpt,ile)=>{var{ArgumentError:AYe}=Hm(),{JwksClient:xYe}=Vm(),IYe=yE(),wYe=(e,t)=>{if(e&&e.name==="SigningKeyNotFoundError")return t(null);if(e)return t(e)};ile.exports.expressJwtSecret=function(e){if(e==null)throw new AYe("An options object must be provided when initializing expressJwtSecret");let t=new xYe(e),r=e.handleSigningKeyError||wYe,n=async(s,i)=>{if(!i)return;let o=i.header;if(!(!o||!IYe.includes(o.alg)))try{let a=await t.getSigningKey(o.kid);return a.publicKey||a.rsaPublicKey}catch(a){return new Promise((c,l)=>{r(a,d=>{if(!d)return c();l(d)})})}};return function(i,o,a,c){if(arguments.length===4){n(i,{header:o}).then(l=>{setImmediate(c,null,l)}).catch(l=>{setImmediate(c,l)});return}return n(i,arguments[1])}}});var cle=S((fpt,ale)=>{var{ArgumentError:TYe}=Hm(),{JwksClient:RYe}=Vm(),NYe=yE();ale.exports.koaJwtSecret=function(e={}){if(!e.jwksUri)throw new TYe("No JWKS provided. Please provide a jwksUri");let t=new RYe(e);return function({alg:n,kid:s}={}){return new Promise((i,o)=>{if(!NYe.includes(n))return o(new Error("Missing / invalid token algorithm"));t.getSigningKey(s).then(a=>{i(a.publicKey||a.rsaPublicKey)}).catch(a=>e.handleSigningKeyError?e.handleSigningKeyError(a).then(o):o(a))})}}});var fle=S((hpt,dle)=>{var lle=aU(),{ArgumentError:ule}=Hm(),{JwksClient:PYe}=Vm(),OYe=yE(),DYe=(e,t)=>{if(e&&e.name==="SigningKeyNotFoundError")return t(null);if(e)return t(e)};dle.exports.passportJwtSecret=function(e){if(e==null)throw new ule("An options object must be provided when initializing passportJwtSecret");if(!e.jwksUri)throw new ule("No JWKS provided. Please provide a jwksUri");let t=new PYe(e),r=e.handleSigningKeyError||DYe;return function(s,i,o){let a;try{a={payload:lle.decodeJwt(i),header:lle.decodeProtectedHeader(i)}}catch{a=null}if(!a||!OYe.includes(a.header.alg))return o(null,null);t.getSigningKey(a.header.kid).then(c=>{o(null,c.publicKey||c.rsaPublicKey)}).catch(c=>{r(c,l=>o(l,null))})}}});var ple=S((ppt,Fo)=>{var{JwksClient:hle}=Vm(),AT=Hm(),{hapiJwt2Key:kYe,hapiJwt2KeyAsync:BYe}=sle(),{expressJwtSecret:LYe}=ole(),{koaJwtSecret:FYe}=cle(),{passportJwtSecret:MYe}=fle();Fo.exports=e=>new hle(e);Fo.exports.JwksClient=hle;Fo.exports.ArgumentError=AT.ArgumentError;Fo.exports.JwksError=AT.JwksError;Fo.exports.JwksRateLimitError=AT.JwksRateLimitError;Fo.exports.SigningKeyNotFoundError=AT.SigningKeyNotFoundError;Fo.exports.expressJwtSecret=LYe;Fo.exports.hapiJwt2Key=kYe;Fo.exports.hapiJwt2KeyAsync=BYe;Fo.exports.koaJwtSecret=FYe;Fo.exports.passportJwtSecret=MYe});var Sle=S(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.JwtErrorCode=vn.JwtError=vn.decodeJwt=vn.verifyJwtSignature=vn.EmulatorSignatureVerifier=vn.PublicKeySignatureVerifier=vn.UrlKeyFetcher=vn.JwksFetcher=vn.ALGORITHM_RS256=void 0;var jm=Vn(),gle=cL(),UYe=ple(),MU=d0();vn.ALGORITHM_RS256="RS256";var mle="error in secret or public key callback: ",yle="no-matching-kid-error",Ele="no-kid-in-header-error",qYe=3600,xT=class{constructor(t,r){if(this.publicKeysExpireAt=0,!jm.isURL(t))throw new Error("The provided JWKS URL is not a valid URL.");this.client=UYe({jwksUri:t,cache:!1,requestAgent:r})}fetchPublicKeys(){return this.shouldRefresh()?this.refresh():Promise.resolve(this.publicKeys)}shouldRefresh(){return!this.publicKeys||this.publicKeysExpireAt<=Date.now()}refresh(){return this.client.getSigningKeys().then(t=>{this.publicKeysExpireAt=0;let r=t.reduce((n,s)=>(n[s.kid]=s.getPublicKey(),n),{});return this.publicKeysExpireAt=Date.now()+qYe*6*1e3,this.publicKeys=r,r}).catch(t=>{throw new Error(`Error fetching Json Web Keys: ${t.message}`)})}};vn.JwksFetcher=xT;var IT=class{constructor(t,r){if(this.clientCertUrl=t,this.httpAgent=r,this.publicKeysExpireAt=0,!jm.isURL(t))throw new Error("The provided public client certificate URL is not a valid URL.")}fetchPublicKeys(){return this.shouldRefresh()?this.refresh():Promise.resolve(this.publicKeys)}shouldRefresh(){return!this.publicKeys||this.publicKeysExpireAt<=Date.now()}refresh(){let t=new MU.HttpClient,r={method:"GET",url:this.clientCertUrl,httpAgent:this.httpAgent};return t.send(r).then(n=>{if(!n.isJson()||n.data.error)throw new MU.RequestResponseError(n);return this.publicKeysExpireAt=0,Object.prototype.hasOwnProperty.call(n.headers,"cache-control")&&n.headers["cache-control"].split(",").forEach(o=>{let a=o.trim().split("=");if(a[0]==="max-age"){let c=+a[1];this.publicKeysExpireAt=Date.now()+c*1e3}}),this.publicKeys=n.data,n.data}).catch(n=>{if(n instanceof MU.RequestResponseError){let s="Error fetching public keys for Google certs: ",i=n.response;throw i.isJson()&&i.data.error?(s+=`${i.data.error}`,i.data.error_description&&(s+=" ("+i.data.error_description+")")):s+=`${i.text}`,new Error(s)}throw n})}};vn.UrlKeyFetcher=IT;var UU=class e{constructor(t){if(this.keyFetcher=t,!jm.isNonNullObject(t))throw new Error("The provided key fetcher is not an object or null.")}static withCertificateUrl(t,r){return new e(new IT(t,r))}static withJwksUrl(t,r){return new e(new xT(t,r))}verify(t){return jm.isString(t)?wT(t,VYe(this.keyFetcher),{algorithms:[vn.ALGORITHM_RS256]}).catch(r=>{if(r.code===ki.NO_KID_IN_HEADER)return this.verifyWithoutKid(t);throw r}):Promise.reject(new fa(ki.INVALID_ARGUMENT,"The provided token must be a string."))}verifyWithoutKid(t){return this.keyFetcher.fetchPublicKeys().then(r=>this.verifyWithAllKeys(t,r))}verifyWithAllKeys(t,r){let n=[];return Object.values(r).forEach(s=>{let i=wT(t,s).then(()=>!0).catch(o=>{if(o.code===ki.TOKEN_EXPIRED)throw o;return!1});n.push(i)}),Promise.all(n).then(s=>{if(s.every(i=>i===!1))throw new fa(ki.INVALID_SIGNATURE,"Invalid token signature.")})}};vn.PublicKeySignatureVerifier=UU;var qU=class{verify(t){return wT(t,void 0,{algorithms:["none"]})}};vn.EmulatorSignatureVerifier=qU;function VYe(e){return(t,r)=>{t.kid||r(new Error(Ele));let n=t.kid||"";e.fetchPublicKeys().then(s=>{Object.prototype.hasOwnProperty.call(s,n)?r(null,s[n]):r(new Error(yle))}).catch(s=>{r(s)})}}function wT(e,t,r){return jm.isString(e)?new Promise((n,s)=>{gle.verify(e,t,r,i=>{if(!i)return n();if(i.name==="TokenExpiredError")return s(new fa(ki.TOKEN_EXPIRED,"The provided token has expired. Get a fresh token from your client app and try again."));if(i.name==="JsonWebTokenError"&&i.message&&i.message.includes(mle)){let o=i.message.split(mle).pop()||"Error fetching public keys.",a=ki.KEY_FETCH_ERROR;return o===yle?a=ki.NO_MATCHING_KID:o===Ele&&(a=ki.NO_KID_IN_HEADER),s(new fa(a,o))}return s(new fa(ki.INVALID_SIGNATURE,i.message))})}):Promise.reject(new fa(ki.INVALID_ARGUMENT,"The provided token must be a string."))}vn.verifyJwtSignature=wT;function HYe(e){if(!jm.isString(e))return Promise.reject(new fa(ki.INVALID_ARGUMENT,"The provided token must be a string."));let t=gle.decode(e,{complete:!0});if(!t)return Promise.reject(new fa(ki.INVALID_ARGUMENT,"Decoding token failed."));let r=t?.header,n=t?.payload;return Promise.resolve({header:r,payload:n})}vn.decodeJwt=HYe;var fa=class e extends Error{constructor(t,r){super(r),this.code=t,this.message=r,this.__proto__=e.prototype}};vn.JwtError=fa;var ki;(function(e){e.INVALID_ARGUMENT="invalid-argument",e.INVALID_CREDENTIAL="invalid-credential",e.TOKEN_EXPIRED="token-expired",e.INVALID_SIGNATURE="invalid-token",e.NO_MATCHING_KID="no-matching-kid-error",e.NO_KID_IN_HEADER="no-kid-error",e.KEY_FETCH_ERROR="key-fetch-error"})(ki||(vn.JwtErrorCode=ki={}))});var _le=S(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.createSessionCookieVerifier=jn.createAuthBlockingTokenVerifier=jn.createIdTokenVerifier=jn.FirebaseTokenVerifier=jn.SESSION_COOKIE_INFO=jn.AUTH_BLOCKING_TOKEN_INFO=jn.ID_TOKEN_INFO=void 0;var xt=as(),jYe=du(),ha=Vn(),Yc=Sle(),KYe="https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit",Cle="https://www.googleapis.com/robot/v1/metadata/x509/securetoken@system.gserviceaccount.com",zYe="https://www.googleapis.com/identitytoolkit/v3/relyingparty/publicKeys",$Ye=new Yc.EmulatorSignatureVerifier;jn.ID_TOKEN_INFO={url:"https://firebase.google.com/docs/auth/admin/verify-id-tokens",verifyApiName:"verifyIdToken()",jwtName:"Firebase ID token",shortName:"ID token",expiredErrorCode:xt.AuthClientErrorCode.ID_TOKEN_EXPIRED};jn.AUTH_BLOCKING_TOKEN_INFO={url:"https://cloud.google.com/identity-platform/docs/blocking-functions",verifyApiName:"_verifyAuthBlockingToken()",jwtName:"Firebase Auth Blocking token",shortName:"Auth Blocking token",expiredErrorCode:xt.AuthClientErrorCode.AUTH_BLOCKING_TOKEN_EXPIRED};jn.SESSION_COOKIE_INFO={url:"https://firebase.google.com/docs/auth/admin/manage-cookies",verifyApiName:"verifySessionCookie()",jwtName:"Firebase session cookie",shortName:"session cookie",expiredErrorCode:xt.AuthClientErrorCode.SESSION_COOKIE_EXPIRED};var Km=class{constructor(t,r,n,s){if(this.issuer=r,this.tokenInfo=n,this.app=s,ha.isURL(t))if(ha.isURL(r))if(ha.isNonNullObject(n))if(ha.isURL(n.url))if(ha.isNonEmptyString(n.verifyApiName))if(ha.isNonEmptyString(n.jwtName))if(ha.isNonEmptyString(n.shortName)){if(!ha.isNonNullObject(n.expiredErrorCode)||!("code"in n.expiredErrorCode))throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT expiration error code must be a non-null ErrorInfo object.")}else throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT public short name must be a non-empty string.");else throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT public full name must be a non-empty string.");else throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT verify API name must be a non-empty string.");else throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT verification documentation URL is invalid.");else throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT information is not an object or null.");else throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT issuer is an invalid URL.");else throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,"The provided public client certificate URL is an invalid URL.");this.shortNameArticle=n.shortName.charAt(0).match(/[aeiou]/i)?"an":"a",this.signatureVerifier=Yc.PublicKeySignatureVerifier.withCertificateUrl(t,s.options.httpAgent)}verifyJWT(t,r=!1){if(!ha.isString(t))throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,`First argument to ${this.tokenInfo.verifyApiName} must be a ${this.tokenInfo.jwtName} string.`);return this.ensureProjectId().then(n=>this.decodeAndVerify(t,n,r)).then(n=>{let s=n.payload;return s.uid=s.sub,s})}_verifyAuthBlockingToken(t,r,n){if(!ha.isString(t))throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,`First argument to ${this.tokenInfo.verifyApiName} must be a ${this.tokenInfo.jwtName} string.`);return this.ensureProjectId().then(s=>(typeof n>"u"&&(n=`${s}.cloudfunctions.net/`),this.decodeAndVerify(t,s,r,n))).then(s=>{let i=s.payload;return i.uid=i.sub,i})}ensureProjectId(){return jYe.findProjectId(this.app).then(t=>{if(!ha.isNonEmptyString(t))throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_CREDENTIAL,`Must initialize app with a cert credential or set your Firebase project ID as the GOOGLE_CLOUD_PROJECT environment variable to call ${this.tokenInfo.verifyApiName}.`);return Promise.resolve(t)})}decodeAndVerify(t,r,n,s){return this.safeDecode(t).then(i=>(this.verifyContent(i,r,n,s),this.verifySignature(t,n).then(()=>i)))}safeDecode(t){return(0,Yc.decodeJwt)(t).catch(r=>{if(r.code===Yc.JwtErrorCode.INVALID_ARGUMENT){let n=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`,s=`Decoding ${this.tokenInfo.jwtName} failed. Make sure you passed the entire string JWT which represents ${this.shortNameArticle} ${this.tokenInfo.shortName}.`+n;throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,s)}throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INTERNAL_ERROR,r.message)})}verifyContent(t,r,n,s){let i=t&&t.header,o=t&&t.payload,a=` Make sure the ${this.tokenInfo.shortName} comes from the same Firebase project as the service account used to authenticate this SDK.`,c=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`,l;if(!n&&typeof i.kid>"u"){let d=o.aud===KYe,f=i.alg==="HS256"&&o.v===0&&"d"in o&&"uid"in o.d;d?l=`${this.tokenInfo.verifyApiName} expects ${this.shortNameArticle} ${this.tokenInfo.shortName}, but was given a custom token.`:f?l=`${this.tokenInfo.verifyApiName} expects ${this.shortNameArticle} ${this.tokenInfo.shortName}, but was given a legacy custom token.`:l=`${this.tokenInfo.jwtName} has no "kid" claim.`,l+=c}else!n&&i.alg!==Yc.ALGORITHM_RS256?l=`${this.tokenInfo.jwtName} has incorrect algorithm. Expected "`+Yc.ALGORITHM_RS256+'" but got "'+i.alg+'".'+c:typeof s<"u"&&!o.aud.includes(s)?l=`${this.tokenInfo.jwtName} has incorrect "aud" (audience) claim. Expected "`+s+'" but got "'+o.aud+'".'+c:typeof s>"u"&&o.aud!==r?l=`${this.tokenInfo.jwtName} has incorrect "aud" (audience) claim. Expected "`+r+'" but got "'+o.aud+'".'+a+c:o.iss!==this.issuer+r?l=`${this.tokenInfo.jwtName} has incorrect "iss" (issuer) claim. Expected "${this.issuer}`+r+'" but got "'+o.iss+'".'+a+c:o.event_type!==void 0&&(o.event_type==="beforeSendSms"||o.event_type==="beforeSendEmail")||(typeof o.sub!="string"?l=`${this.tokenInfo.jwtName} has no "sub" (subject) claim.`+c:o.sub===""?l=`${this.tokenInfo.jwtName} has an empty "sub" (subject) claim.`+c:o.sub.length>128&&(l=`${this.tokenInfo.jwtName} has a "sub" (subject) claim longer than 128 characters.`+c));if(l)throw new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,l)}verifySignature(t,r){return(r?$Ye:this.signatureVerifier).verify(t).catch(s=>{throw this.mapJwtErrorToAuthError(s)})}mapJwtErrorToAuthError(t){let r=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`;if(t.code===Yc.JwtErrorCode.TOKEN_EXPIRED){let n=`${this.tokenInfo.jwtName} has expired. Get a fresh ${this.tokenInfo.shortName} from your client app and try again (auth/${this.tokenInfo.expiredErrorCode.code}).`+r;return new xt.FirebaseAuthError(this.tokenInfo.expiredErrorCode,n)}else if(t.code===Yc.JwtErrorCode.INVALID_SIGNATURE){let n=`${this.tokenInfo.jwtName} has invalid signature.`+r;return new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,n)}else if(t.code===Yc.JwtErrorCode.NO_MATCHING_KID){let n=`${this.tokenInfo.jwtName} has "kid" claim which does not correspond to a known public key. Most likely the ${this.tokenInfo.shortName} is expired, so get a fresh token from your client app and try again.`;return new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,n)}return new xt.FirebaseAuthError(xt.AuthClientErrorCode.INVALID_ARGUMENT,t.message)}};jn.FirebaseTokenVerifier=Km;function GYe(e){return new Km(Cle,"https://securetoken.google.com/",jn.ID_TOKEN_INFO,e)}jn.createIdTokenVerifier=GYe;function WYe(e){return new Km(Cle,"https://securetoken.google.com/",jn.AUTH_BLOCKING_TOKEN_INFO,e)}jn.createAuthBlockingTokenVerifier=WYe;function JYe(e){return new Km(zYe,"https://session.firebase.google.com/",jn.SESSION_COOKIE_INFO,e)}jn.createSessionCookieVerifier=JYe});var KU=S(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.UserRecord=gs.UserInfo=gs.UserMetadata=gs.MultiFactorSettings=gs.TotpMultiFactorInfo=gs.TotpInfo=gs.PhoneMultiFactorInfo=gs.MultiFactorInfo=void 0;var XYe=qa(),YYe=Vn(),Jt=du(),vu=as(),QYe=Buffer.from("REDACTED").toString("base64");function VU(e){try{let t=new Date(parseInt(e,10));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}return null}var TT;(function(e){e.Phone="phone",e.Totp="totp"})(TT||(TT={}));var zm=class{static initMultiFactorInfo(t){let r=null;try{t.phoneInfo!==void 0?r=new RT(t):t.totpInfo!==void 0&&(r=new NT(t))}catch{}return r}constructor(t){this.initFromServerResponse(t)}toJSON(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}}initFromServerResponse(t){let r=t&&this.getFactorId(t);if(!r||!t||!t.mfaEnrollmentId)throw new vu.FirebaseAuthError(vu.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor info response");Jt.addReadonlyGetter(this,"uid",t.mfaEnrollmentId),Jt.addReadonlyGetter(this,"factorId",r),Jt.addReadonlyGetter(this,"displayName",t.displayName),t.enrolledAt?Jt.addReadonlyGetter(this,"enrollmentTime",new Date(t.enrolledAt).toUTCString()):Jt.addReadonlyGetter(this,"enrollmentTime",null)}};gs.MultiFactorInfo=zm;var RT=class extends zm{constructor(t){super(t),Jt.addReadonlyGetter(this,"phoneNumber",t.phoneInfo)}toJSON(){return Object.assign(super.toJSON(),{phoneNumber:this.phoneNumber})}getFactorId(t){return t&&t.phoneInfo?TT.Phone:null}};gs.PhoneMultiFactorInfo=RT;var HU=class{};gs.TotpInfo=HU;var NT=class extends zm{constructor(t){super(t),Jt.addReadonlyGetter(this,"totpInfo",t.totpInfo)}toJSON(){return Object.assign(super.toJSON(),{totpInfo:this.totpInfo})}getFactorId(t){return t&&t.totpInfo?TT.Totp:null}};gs.TotpMultiFactorInfo=NT;var PT=class{constructor(t){let r=[];if((0,YYe.isNonNullObject)(t))t.mfaInfo&&t.mfaInfo.forEach(n=>{let s=zm.initMultiFactorInfo(n);s&&r.push(s)});else throw new vu.FirebaseAuthError(vu.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor response");Jt.addReadonlyGetter(this,"enrolledFactors",Object.freeze(r))}toJSON(){return{enrolledFactors:this.enrolledFactors.map(t=>t.toJSON())}}};gs.MultiFactorSettings=PT;var OT=class{constructor(t){Jt.addReadonlyGetter(this,"creationTime",VU(t.createdAt)),Jt.addReadonlyGetter(this,"lastSignInTime",VU(t.lastLoginAt));let r=t.lastRefreshAt?new Date(t.lastRefreshAt).toUTCString():null;Jt.addReadonlyGetter(this,"lastRefreshTime",r)}toJSON(){return{lastSignInTime:this.lastSignInTime,creationTime:this.creationTime,lastRefreshTime:this.lastRefreshTime}}};gs.UserMetadata=OT;var DT=class{constructor(t){if(!t.rawId||!t.providerId)throw new vu.FirebaseAuthError(vu.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid user info response");Jt.addReadonlyGetter(this,"uid",t.rawId),Jt.addReadonlyGetter(this,"displayName",t.displayName),Jt.addReadonlyGetter(this,"email",t.email),Jt.addReadonlyGetter(this,"photoURL",t.photoUrl),Jt.addReadonlyGetter(this,"providerId",t.providerId),Jt.addReadonlyGetter(this,"phoneNumber",t.phoneNumber)}toJSON(){return{uid:this.uid,displayName:this.displayName,email:this.email,photoURL:this.photoURL,providerId:this.providerId,phoneNumber:this.phoneNumber}}};gs.UserInfo=DT;var jU=class{constructor(t){if(!t.localId)throw new vu.FirebaseAuthError(vu.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid user response");Jt.addReadonlyGetter(this,"uid",t.localId),Jt.addReadonlyGetter(this,"email",t.email),Jt.addReadonlyGetter(this,"emailVerified",!!t.emailVerified),Jt.addReadonlyGetter(this,"displayName",t.displayName),Jt.addReadonlyGetter(this,"photoURL",t.photoUrl),Jt.addReadonlyGetter(this,"phoneNumber",t.phoneNumber),Jt.addReadonlyGetter(this,"disabled",t.disabled||!1),Jt.addReadonlyGetter(this,"metadata",new OT(t));let r=[];for(let i of t.providerUserInfo||[])r.push(new DT(i));Jt.addReadonlyGetter(this,"providerData",r),t.passwordHash===QYe?Jt.addReadonlyGetter(this,"passwordHash",void 0):Jt.addReadonlyGetter(this,"passwordHash",t.passwordHash),Jt.addReadonlyGetter(this,"passwordSalt",t.salt),t.customAttributes&&Jt.addReadonlyGetter(this,"customClaims",JSON.parse(t.customAttributes));let n=null;typeof t.validSince<"u"&&(n=VU(parseInt(t.validSince,10)*1e3)),Jt.addReadonlyGetter(this,"tokensValidAfterTime",n||void 0),Jt.addReadonlyGetter(this,"tenantId",t.tenantId);let s=new PT(t);s.enrolledFactors.length>0&&Jt.addReadonlyGetter(this,"multiFactor",s)}toJSON(){let t={uid:this.uid,email:this.email,emailVerified:this.emailVerified,displayName:this.displayName,photoURL:this.photoURL,phoneNumber:this.phoneNumber,disabled:this.disabled,metadata:this.metadata.toJSON(),passwordHash:this.passwordHash,passwordSalt:this.passwordSalt,customClaims:(0,XYe.deepCopy)(this.customClaims),tokensValidAfterTime:this.tokensValidAfterTime,tenantId:this.tenantId};this.multiFactor&&(t.multiFactor=this.multiFactor.toJSON()),t.providerData=[];for(let r of this.providerData)t.providerData.push(r.toJSON());return t}};gs.UserRecord=jU});var LT=S(Gm=>{"use strict";Object.defineProperty(Gm,"__esModule",{value:!0});Gm.BaseAuth=Gm.createFirebaseTokenGenerator=void 0;var Et=as(),ZYe=qa(),If=Vn(),BT=$0(),zU=Sie(),$U=_le(),Gs=j0(),$m=KU(),kT=O3(),eQe=j3();function ble(e,t){try{let r=(0,BT.useEmulator)()?new zU.EmulatedSigner:(0,eQe.cryptoSignerFromApp)(e);return new zU.FirebaseTokenGenerator(r,t)}catch(r){throw(0,zU.handleCryptoSignerError)(r)}}Gm.createFirebaseTokenGenerator=ble;var GU=class{constructor(t,r,n){this.authRequestHandler=r,n?this.tokenGenerator=n:this.tokenGenerator=ble(t),this.sessionCookieVerifier=(0,$U.createSessionCookieVerifier)(t),this.idTokenVerifier=(0,$U.createIdTokenVerifier)(t),this.authBlockingTokenVerifier=(0,$U.createAuthBlockingTokenVerifier)(t)}createCustomToken(t,r){return this.tokenGenerator.createCustomToken(t,r)}verifyIdToken(t,r=!1){let n=(0,BT.useEmulator)();return this.idTokenVerifier.verifyJWT(t,n).then(s=>r||n?this.verifyDecodedJWTNotRevokedOrDisabled(s,Et.AuthClientErrorCode.ID_TOKEN_REVOKED):s)}getUser(t){return this.authRequestHandler.getAccountInfoByUid(t).then(r=>new $m.UserRecord(r.users[0]))}getUserByEmail(t){return this.authRequestHandler.getAccountInfoByEmail(t).then(r=>new $m.UserRecord(r.users[0]))}getUserByPhoneNumber(t){return this.authRequestHandler.getAccountInfoByPhoneNumber(t).then(r=>new $m.UserRecord(r.users[0]))}getUserByProviderUid(t,r){return t==="phone"?this.getUserByPhoneNumber(r):t==="email"?this.getUserByEmail(r):this.authRequestHandler.getAccountInfoByFederatedUid(t,r).then(n=>new $m.UserRecord(n.users[0]))}getUsers(t){if(!If.isArray(t))throw new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_ARGUMENT,"`identifiers` parameter must be an array");return this.authRequestHandler.getAccountInfoByIdentifiers(t).then(r=>{let n=((o,a)=>!!a.find(c=>{if((0,kT.isUidIdentifier)(o))return o.uid===c.uid;if((0,kT.isEmailIdentifier)(o))return o.email===c.email;if((0,kT.isPhoneIdentifier)(o))return o.phoneNumber===c.phoneNumber;if((0,kT.isProviderIdentifier)(o)){let l=c.providerData.find(d=>o.providerId===d.providerId);return!!l&&o.providerUid===l.uid}else throw new Et.FirebaseAuthError(Et.AuthClientErrorCode.INTERNAL_ERROR,"Unhandled identifier type")})),s=r.users?r.users.map(o=>new $m.UserRecord(o)):[],i=t.filter(o=>!n(o,s));return{users:s,notFound:i}})}listUsers(t,r){return this.authRequestHandler.downloadAccount(t,r).then(n=>{let s=[];n.users.forEach(o=>{s.push(new $m.UserRecord(o))});let i={users:s,pageToken:n.nextPageToken};return typeof i.pageToken>"u"&&delete i.pageToken,i})}createUser(t){return this.authRequestHandler.createNewAccount(t).then(r=>this.getUser(r)).catch(r=>{throw r.code==="auth/user-not-found"?new Et.FirebaseAuthError(Et.AuthClientErrorCode.INTERNAL_ERROR,"Unable to create the user record provided."):r})}deleteUser(t){return this.authRequestHandler.deleteAccount(t).then(()=>{})}deleteUsers(t){if(!If.isArray(t))throw new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_ARGUMENT,"`uids` parameter must be an array");return this.authRequestHandler.deleteAccounts(t,!0).then(r=>{let n={failureCount:0,successCount:t.length,errors:[]};return If.isNonEmptyArray(r.errors)&&(n.failureCount=r.errors.length,n.successCount=t.length-r.errors.length,n.errors=r.errors.map(s=>{if(s.index===void 0)throw new Et.FirebaseAuthError(Et.AuthClientErrorCode.INTERNAL_ERROR,"Corrupt BatchDeleteAccountsResponse detected");let i=o=>{let a=o&&o.startsWith("NOT_DISABLED")?Et.AuthClientErrorCode.USER_NOT_DISABLED:Et.AuthClientErrorCode.INTERNAL_ERROR;return new Et.FirebaseAuthError(a,s.message)};return{index:s.index,error:i(s.message)}})),n})}updateUser(t,r){if(r=(0,ZYe.deepCopy)(r),r?.providerToLink){if(r.providerToLink.providerId==="email"){if(typeof r.email<"u")throw new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.email and UpdateRequest.providerToLink.providerId='email' were set. To link to the email/password provider, only specify the UpdateRequest.email field.");r.email=r.providerToLink.uid,delete r.providerToLink}else if(r.providerToLink.providerId==="phone"){if(typeof r.phoneNumber<"u")throw new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.phoneNumber and UpdateRequest.providerToLink.providerId='phone' were set. To link to a phone provider, only specify the UpdateRequest.phoneNumber field.");r.phoneNumber=r.providerToLink.uid,delete r.providerToLink}}if(r?.providersToUnlink&&r.providersToUnlink.indexOf("phone")!==-1&&r.phoneNumber===null)throw new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.phoneNumber=null and UpdateRequest.providersToUnlink=['phone'] were set. To unlink from a phone provider, only specify the UpdateRequest.phoneNumber=null field.");return this.authRequestHandler.updateExistingAccount(t,r).then(n=>this.getUser(n))}setCustomUserClaims(t,r){return this.authRequestHandler.setCustomUserClaims(t,r).then(()=>{})}revokeRefreshTokens(t){return this.authRequestHandler.revokeRefreshTokens(t).then(()=>{})}importUsers(t,r){return this.authRequestHandler.uploadAccount(t,r)}createSessionCookie(t,r){return!If.isNonNullObject(r)||!If.isNumber(r.expiresIn)?Promise.reject(new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)):this.authRequestHandler.createSessionCookie(t,r.expiresIn)}verifySessionCookie(t,r=!1){let n=(0,BT.useEmulator)();return this.sessionCookieVerifier.verifyJWT(t,n).then(s=>r||n?this.verifyDecodedJWTNotRevokedOrDisabled(s,Et.AuthClientErrorCode.SESSION_COOKIE_REVOKED):s)}generatePasswordResetLink(t,r){return this.authRequestHandler.getEmailActionLink("PASSWORD_RESET",t,r)}generateEmailVerificationLink(t,r){return this.authRequestHandler.getEmailActionLink("VERIFY_EMAIL",t,r)}generateVerifyAndChangeEmailLink(t,r,n){return this.authRequestHandler.getEmailActionLink("VERIFY_AND_CHANGE_EMAIL",t,n,r)}generateSignInWithEmailLink(t,r){return this.authRequestHandler.getEmailActionLink("EMAIL_SIGNIN",t,r)}listProviderConfigs(t){let r=(n,s)=>{let i={providerConfigs:s};return Object.prototype.hasOwnProperty.call(n,"nextPageToken")&&(i.pageToken=n.nextPageToken),i};return t&&t.type==="oidc"?this.authRequestHandler.listOAuthIdpConfigs(t.maxResults,t.pageToken).then(n=>{let s=[];return n.oauthIdpConfigs.forEach(i=>{s.push(new Gs.OIDCConfig(i))}),r(n,s)}):t&&t.type==="saml"?this.authRequestHandler.listInboundSamlConfigs(t.maxResults,t.pageToken).then(n=>{let s=[];return n.inboundSamlConfigs.forEach(i=>{s.push(new Gs.SAMLConfig(i))}),r(n,s)}):Promise.reject(new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_ARGUMENT,'"AuthProviderConfigFilter.type" must be either "saml" or "oidc"'))}getProviderConfig(t){return Gs.OIDCConfig.isProviderId(t)?this.authRequestHandler.getOAuthIdpConfig(t).then(r=>new Gs.OIDCConfig(r)):Gs.SAMLConfig.isProviderId(t)?this.authRequestHandler.getInboundSamlConfig(t).then(r=>new Gs.SAMLConfig(r)):Promise.reject(new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_PROVIDER_ID))}deleteProviderConfig(t){return Gs.OIDCConfig.isProviderId(t)?this.authRequestHandler.deleteOAuthIdpConfig(t):Gs.SAMLConfig.isProviderId(t)?this.authRequestHandler.deleteInboundSamlConfig(t):Promise.reject(new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_PROVIDER_ID))}updateProviderConfig(t,r){return If.isNonNullObject(r)?Gs.OIDCConfig.isProviderId(t)?this.authRequestHandler.updateOAuthIdpConfig(t,r).then(n=>new Gs.OIDCConfig(n)):Gs.SAMLConfig.isProviderId(t)?this.authRequestHandler.updateInboundSamlConfig(t,r).then(n=>new Gs.SAMLConfig(n)):Promise.reject(new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_PROVIDER_ID)):Promise.reject(new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_CONFIG,'Request is missing "UpdateAuthProviderRequest" configuration.'))}createProviderConfig(t){return If.isNonNullObject(t)?Gs.OIDCConfig.isProviderId(t.providerId)?this.authRequestHandler.createOAuthIdpConfig(t).then(r=>new Gs.OIDCConfig(r)):Gs.SAMLConfig.isProviderId(t.providerId)?this.authRequestHandler.createInboundSamlConfig(t).then(r=>new Gs.SAMLConfig(r)):Promise.reject(new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_PROVIDER_ID)):Promise.reject(new Et.FirebaseAuthError(Et.AuthClientErrorCode.INVALID_CONFIG,'Request is missing "AuthProviderConfig" configuration.'))}_verifyAuthBlockingToken(t,r){let n=(0,BT.useEmulator)();return this.authBlockingTokenVerifier._verifyAuthBlockingToken(t,n,r).then(s=>s)}verifyDecodedJWTNotRevokedOrDisabled(t,r){return this.getUser(t.sub).then(n=>{if(n.disabled)throw new Et.FirebaseAuthError(Et.AuthClientErrorCode.USER_DISABLED,"The user record is disabled.");if(n.tokensValidAfterTime){let s=t.auth_time*1e3,i=new Date(n.tokensValidAfterTime).getTime();if(s<i)throw new Et.FirebaseAuthError(r)}return t})}};Gm.BaseAuth=GU});var JU=S(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.TenantManager=Wm.TenantAwareAuth=void 0;var MT=Vn(),tQe=du(),uc=as(),vle=LT(),FT=GI(),Ale=$0(),UT=class extends vle.BaseAuth{constructor(t,r){super(t,new Ale.TenantAwareAuthRequestHandler(t,r),(0,vle.createFirebaseTokenGenerator)(t,r)),tQe.addReadonlyGetter(this,"tenantId",r)}verifyIdToken(t,r=!1){return super.verifyIdToken(t,r).then(n=>{if(n.firebase.tenant!==this.tenantId)throw new uc.FirebaseAuthError(uc.AuthClientErrorCode.MISMATCHING_TENANT_ID);return n})}createSessionCookie(t,r){return MT.isNonEmptyString(t)?!MT.isNonNullObject(r)||!MT.isNumber(r.expiresIn)?Promise.reject(new uc.FirebaseAuthError(uc.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)):this.verifyIdToken(t).then(()=>super.createSessionCookie(t,r)):Promise.reject(new uc.FirebaseAuthError(uc.AuthClientErrorCode.INVALID_ID_TOKEN))}verifySessionCookie(t,r=!1){return super.verifySessionCookie(t,r).then(n=>{if(n.firebase.tenant!==this.tenantId)throw new uc.FirebaseAuthError(uc.AuthClientErrorCode.MISMATCHING_TENANT_ID);return n})}};Wm.TenantAwareAuth=UT;var WU=class{constructor(t){this.app=t,this.authRequestHandler=new Ale.AuthRequestHandler(t),this.tenantsMap={}}authForTenant(t){if(!MT.isNonEmptyString(t))throw new uc.FirebaseAuthError(uc.AuthClientErrorCode.INVALID_TENANT_ID);return typeof this.tenantsMap[t]>"u"&&(this.tenantsMap[t]=new UT(this.app,t)),this.tenantsMap[t]}getTenant(t){return this.authRequestHandler.getTenant(t).then(r=>new FT.Tenant(r))}listTenants(t,r){return this.authRequestHandler.listTenants(t,r).then(n=>{let s=[];n.tenants.forEach(o=>{s.push(new FT.Tenant(o))});let i={tenants:s,pageToken:n.nextPageToken};return typeof i.pageToken>"u"&&delete i.pageToken,i})}deleteTenant(t){return this.authRequestHandler.deleteTenant(t)}createTenant(t){return this.authRequestHandler.createTenant(t).then(r=>new FT.Tenant(r))}updateTenant(t,r){return this.authRequestHandler.updateTenant(t,r).then(n=>new FT.Tenant(n))}};Wm.TenantManager=WU});var YU=S(qT=>{"use strict";Object.defineProperty(qT,"__esModule",{value:!0});qT.ProjectConfigManager=void 0;var xle=XI(),rQe=$0(),XU=class{constructor(t){this.authRequestHandler=new rQe.AuthRequestHandler(t)}getProjectConfig(){return this.authRequestHandler.getProjectConfig().then(t=>new xle.ProjectConfig(t))}updateProjectConfig(t){return this.authRequestHandler.updateProjectConfig(t).then(r=>new xle.ProjectConfig(r))}};qT.ProjectConfigManager=XU});var ZU=S(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});VT.Auth=void 0;var nQe=$0(),sQe=JU(),iQe=LT(),oQe=YU(),QU=class extends iQe.BaseAuth{constructor(t){super(t,new nQe.AuthRequestHandler(t)),this.app_=t,this.tenantManager_=new sQe.TenantManager(t),this.projectConfigManager_=new oQe.ProjectConfigManager(t)}get app(){return this.app_}tenantManager(){return this.tenantManager_}projectConfigManager(){return this.projectConfigManager_}};VT.Auth=QU});var Tle=S(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.AuthClientErrorCode=Kt.FirebaseAuthError=Kt.UserRecord=Kt.UserMetadata=Kt.UserInfo=Kt.PhoneMultiFactorInfo=Kt.MultiFactorSettings=Kt.MultiFactorInfo=Kt.ProjectConfigManager=Kt.ProjectConfig=Kt.TenantManager=Kt.TenantAwareAuth=Kt.Tenant=Kt.BaseAuth=Kt.Auth=Kt.getAuth=void 0;var aQe=S3(),cQe=ZU();function lQe(e){return typeof e>"u"&&(e=(0,aQe.getApp)()),e.getOrInitService("auth",r=>new cQe.Auth(r))}Kt.getAuth=lQe;var uQe=ZU();Object.defineProperty(Kt,"Auth",{enumerable:!0,get:function(){return uQe.Auth}});var dQe=LT();Object.defineProperty(Kt,"BaseAuth",{enumerable:!0,get:function(){return dQe.BaseAuth}});var fQe=GI();Object.defineProperty(Kt,"Tenant",{enumerable:!0,get:function(){return fQe.Tenant}});var Ile=JU();Object.defineProperty(Kt,"TenantAwareAuth",{enumerable:!0,get:function(){return Ile.TenantAwareAuth}});Object.defineProperty(Kt,"TenantManager",{enumerable:!0,get:function(){return Ile.TenantManager}});var hQe=XI();Object.defineProperty(Kt,"ProjectConfig",{enumerable:!0,get:function(){return hQe.ProjectConfig}});var pQe=YU();Object.defineProperty(Kt,"ProjectConfigManager",{enumerable:!0,get:function(){return pQe.ProjectConfigManager}});var Jm=KU();Object.defineProperty(Kt,"MultiFactorInfo",{enumerable:!0,get:function(){return Jm.MultiFactorInfo}});Object.defineProperty(Kt,"MultiFactorSettings",{enumerable:!0,get:function(){return Jm.MultiFactorSettings}});Object.defineProperty(Kt,"PhoneMultiFactorInfo",{enumerable:!0,get:function(){return Jm.PhoneMultiFactorInfo}});Object.defineProperty(Kt,"UserInfo",{enumerable:!0,get:function(){return Jm.UserInfo}});Object.defineProperty(Kt,"UserMetadata",{enumerable:!0,get:function(){return Jm.UserMetadata}});Object.defineProperty(Kt,"UserRecord",{enumerable:!0,get:function(){return Jm.UserRecord}});var wle=as();Object.defineProperty(Kt,"FirebaseAuthError",{enumerable:!0,get:function(){return wle.FirebaseAuthError}});Object.defineProperty(Kt,"AuthClientErrorCode",{enumerable:!0,get:function(){return wle.AuthClientErrorCode}})});var xQe={};Wi(xQe,{handler:()=>bQe});module.exports=St(xQe);var jT=$(dQ(),1),kle=$(pQ(),1);var sa=$(S3(),1),Hdt=sa.default.AppErrorCodes,jdt=sa.default.FirebaseAppError,Kdt=sa.default.SDK_VERSION,zdt=sa.default.applicationDefault,$dt=sa.default.cert,Gdt=sa.default.deleteApp,Wdt=sa.default.getApp,Jdt=sa.default.getApps,nie=sa.default.initializeApp,Xdt=sa.default.refreshToken;var Rs=$(Tle(),1),vpt=Rs.default.Auth,Apt=Rs.default.AuthClientErrorCode,xpt=Rs.default.BaseAuth,Ipt=Rs.default.FirebaseAuthError,wpt=Rs.default.MultiFactorInfo,Tpt=Rs.default.MultiFactorSettings,Rpt=Rs.default.PhoneMultiFactorInfo,Npt=Rs.default.ProjectConfig,Ppt=Rs.default.ProjectConfigManager,Opt=Rs.default.Tenant,Dpt=Rs.default.TenantAwareAuth,kpt=Rs.default.TenantManager,Bpt=Rs.default.UserInfo,Lpt=Rs.default.UserMetadata,Fpt=Rs.default.UserRecord,Rle=Rs.default.getAuth;var Nle=!1;function mQe(){Nle||(nie({projectId:process.env.FIREBASE_PROJECT_ID}),Nle=!0)}async function gQe(e){mQe();let t=e.headers||{},n=(t.authorization||t.Authorization||"").match(/^Bearer\\s+(.+)$/i);if(!n){let s=new Error("Missing bearer token");throw s.statusCode=401,s}try{return await Rle().verifyIdToken(n[1],!0)}catch{let s=new Error("Invalid or expired token");throw s.statusCode=401,s}}var yQe=process.env.CORS_ALLOW_ORIGIN||"*",Ble={"Access-Control-Allow-Origin":yQe,"Access-Control-Allow-Methods":"POST,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization"},{BUCKET_NAME:eq,S3_REGION:Lle=process.env.AWS_REGION||"us-west-2",ALLOWED_PREFIXES:EQe="recordings/,transcriptions/",MAX_BYTES:SQe="15728640"}=process.env;if(!eq)throw new Error("Missing BUCKET_NAME");var CQe=new jT.S3Client({region:Lle}),Ple=EQe.split(",").map(e=>e.trim()).filter(Boolean),Ole=parseInt(SQe,10)||15*1024*1024,_Qe=new Set(["audio/mp4","audio/mpeg","audio/wav","text/plain"]),bQe=async e=>{if(e.requestContext?.http?.method==="OPTIONS"||e.routeKey==="OPTIONS /")return{statusCode:204,headers:Ble};try{let t=await gQe(e),r=vQe(e.body),n=Dle(r.key,"key"),s=Dle(r.contentType,"contentType"),i=Number(r.contentLength||0);if(process.env.REQUIRE_UID_PREFIX==="1"){let c=`users/${t.uid}/`;if(!n.startsWith(c))return HT(403,`key must start with '${c}' for this user`)}else if(!Ple.some(c=>n.startsWith(c)))return HT(400,`key must start with one of: ${Ple.join(" ")}`);if(!_Qe.has(s))return HT(400,`Unsupported contentType: ${s}`);if(!i||i>Ole)return HT(400,`contentLength missing or exceeds limit (${Ole} bytes).`);let o=new jT.PutObjectCommand({Bucket:eq,Key:n,ContentType:s,ContentLength:i}),a=await(0,kle.getSignedUrl)(CQe,o,{expiresIn:60});return AQe({url:a,method:"PUT",headers:{"Content-Type":s,"Content-Length":String(i)},key:n,bucket:eq,region:Lle,expiresIn:60,uid:t.uid})}catch(t){let r=t?.statusCode||500;return console.error("presign error:",t),tq(r,{error:t?.message||"Internal error"})}};function vQe(e){try{return e?JSON.parse(e):{}}catch{return{}}}function Dle(e,t){if(typeof e!="string"||!e.trim())throw new Error(`Missing or invalid ${t}`);return e.trim()}function AQe(e){return tq(200,e)}function HT(e,t){return tq(e,{error:t})}function tq(e,t){return{statusCode:e,headers:{"Content-Type":"application/json",...Ble},body:JSON.stringify(t)}}0&&(module.exports={handler});
